function addUser(){var t=document.getElementById("username").value,e=document.getElementById("email").value,i=document.getElementById("pin").value,r=document.getElementById("clicker").value,s=document.getElementById("password").value,n=document.getElementById("userTable"),o=n.insertRow(1),h=o.insertCell(0),a=o.insertCell(1),l=o.insertCell(2),u=o.insertCell(3),c=o.insertCell(4);h.innerHTML=t,a.innerHTML=e,l.innerHTML=i,u.innerHTML=r,c.innerHTML=s}function testVariable(){var t=document.getElementById("username").value,e=document.getElementById("email").value,i=t+" "+e;document.getElementById("spanResult").textContent=i}function openVideo(){var t=document.getElementById("video");t.setAttribute("src","img/gateopen.mp4"),t.setAttribute("type","video/mp4"),t.load(),t.play()}function closeVideo(){var t=document.getElementById("video");t.setAttribute("src","img/gateclose.mp4"),t.setAttribute("type","video/mp4"),t.load(),t.play()}function windowLoaded(){new Runtime("MMFCanvas","dialpad/resources/dialpad.cch")}!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function i(t,e,i){var r,s,n=(i=i||et).createElement("script");if(n.text=t,e)for(r in it)(s=e[r]||e.getAttribute&&e.getAttribute(r))&&n.setAttribute(r,s);i.head.appendChild(n).parentNode.removeChild(n)}function r(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?K[q.call(t)]||"object":typeof t}function s(t){var e=!!t&&"length"in t&&t.length,i=r(t);return!$(t)&&!tt(t)&&("array"===i||0===e||"number"==typeof e&&0<e&&e-1 in t)}function n(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}function o(t,e,i){return $(e)?st.grep(t,function(t,r){return!!e.call(t,r,t)!==i}):e.nodeType?st.grep(t,function(t){return t===e!==i}):"string"!=typeof e?st.grep(t,function(t){return-1<U.call(e,t)!==i}):st.filter(e,t,i)}function h(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function a(t){return t}function l(t){throw t}function u(t,e,i,r){var s;try{t&&$(s=t.promise)?s.call(t).done(e).fail(i):t&&$(s=t.then)?s.call(t,e,i):e.apply(void 0,[t].slice(r))}catch(t){i.apply(void 0,[t])}}function c(){et.removeEventListener("DOMContentLoaded",c),t.removeEventListener("load",c),st.ready()}function d(t,e){return e.toUpperCase()}function f(t){return t.replace(_t,"ms-").replace(Pt,d)}function p(){this.expando=st.expando+p.uid++}function m(t,e,i){var r,s;if(void 0===i&&1===t.nodeType)if(r="data-"+e.replace(St,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(r))){try{i="true"===(s=i)||"false"!==s&&("null"===s?null:s===+s+""?+s:bt.test(s)?JSON.parse(s):s)}catch(t){}Ot.set(t,e,i)}else i=void 0;return i}function g(t,e){for(var i,r,s,n,o,h,a,l=[],u=0,c=t.length;u<c;u++)(r=t[u]).style&&(i=r.style.display,e?("none"===i&&(l[u]=At.get(r,"display")||null,l[u]||(r.style.display="")),""===r.style.display&&xt(r)&&(l[u]=(a=o=n=void 0,o=(s=r).ownerDocument,h=s.nodeName,(a=wt[h])||(n=o.body.appendChild(o.createElement(h)),a=st.css(n,"display"),n.parentNode.removeChild(n),"none"===a&&(a="block"),wt[h]=a)))):"none"!==i&&(l[u]="none",At.set(r,"display",i)));for(u=0;u<c;u++)null!=l[u]&&(t[u].style.display=l[u]);return t}function v(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&n(t,e)?st.merge([t],i):i}function _(t,e){for(var i=0,r=t.length;i<r;i++)At.set(t[i],"globalEval",!e||At.get(e[i],"globalEval"))}function P(t,e,i,s,n){for(var o,h,a,l,u,c,d=e.createDocumentFragment(),f=[],p=0,m=t.length;p<m;p++)if((o=t[p])||0===o)if("object"===r(o))st.merge(f,o.nodeType?[o]:o);else if(Bt.test(o)){for(h=h||d.appendChild(e.createElement("div")),a=(Nt.exec(o)||["",""])[1].toLowerCase(),l=Ht[a]||Ht._default,h.innerHTML=l[1]+st.htmlPrefilter(o)+l[2],c=l[0];c--;)h=h.lastChild;st.merge(f,h.childNodes),(h=d.firstChild).textContent=""}else f.push(e.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(s&&-1<st.inArray(o,s))n&&n.push(o);else if(u=It(o),h=v(d.appendChild(o),"script"),u&&_(h),i)for(c=0;o=h[c++];)Dt.test(o.type||"")&&i.push(o);return d}function E(){return!0}function A(){return!1}function O(t,e){return t===function(){try{return et.activeElement}catch(t){}}()==("focus"===e)}function b(t,e,i,r,s,n){var o,h;if("object"==typeof e){for(h in"string"!=typeof i&&(r=r||i,i=void 0),e)b(t,h,i,r,e[h],n);return t}if(null==r&&null==s?(s=i,r=i=void 0):null==s&&("string"==typeof i?(s=r,r=void 0):(s=r,r=i,i=void 0)),!1===s)s=A;else if(!s)return t;return 1===n&&(o=s,(s=function(t){return st().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=st.guid++)),t.each(function(){st.event.add(this,e,s,r,i)})}function S(t,e,i){i?(At.set(t,e,!1),st.event.add(t,e,{namespace:!1,handler:function(t){var r,s,n=At.get(this,e);if(1&t.isTrigger&&this[e]){if(n.length)(st.event.special[e]||{}).delegateType&&t.stopPropagation();else if(n=X.call(arguments),At.set(this,e,n),r=i(this,e),this[e](),n!==(s=At.get(this,e))||r?At.set(this,e,!1):s={},n!==s)return t.stopImmediatePropagation(),t.preventDefault(),s.value}else n.length&&(At.set(this,e,{value:st.event.trigger(st.extend(n[0],st.Event.prototype),n.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===At.get(t,e)&&st.event.add(t,e,E)}function T(t,e){return n(t,"table")&&n(11!==e.nodeType?e:e.firstChild,"tr")&&st(t).children("tbody")[0]||t}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function C(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function L(t,e){var i,r,s,n,o,h;if(1===e.nodeType){if(At.hasData(t)&&(h=At.get(t).events))for(s in At.remove(e,"handle events"),h)for(i=0,r=h[s].length;i<r;i++)st.event.add(e,s,h[s][i]);Ot.hasData(t)&&(n=Ot.access(t),o=st.extend({},n),Ot.set(e,o))}}function I(t,e,r,s){e=W(e);var n,o,h,a,l,u,c=0,d=t.length,f=d-1,p=e[0],m=$(p);if(m||1<d&&"string"==typeof p&&!Z.checkClone&&Wt.test(p))return t.each(function(i){var n=t.eq(i);m&&(e[0]=p.call(this,i,n.html())),I(n,e,r,s)});if(d&&(o=(n=P(e,t[0].ownerDocument,!1,t,s)).firstChild,1===n.childNodes.length&&(n=o),o||s)){for(a=(h=st.map(v(n,"script"),y)).length;c<d;c++)l=n,c!==f&&(l=st.clone(l,!0,!0),a&&st.merge(h,v(l,"script"))),r.call(t[c],l,c);if(a)for(u=h[h.length-1].ownerDocument,st.map(h,C),c=0;c<a;c++)l=h[c],Dt.test(l.type||"")&&!At.access(l,"globalEval")&&st.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?st._evalUrl&&!l.noModule&&st._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},u):i(l.textContent.replace(Vt,""),l,u))}return t}function F(t,e,i){for(var r,s=e?st.filter(e,t):t,n=0;null!=(r=s[n]);n++)i||1!==r.nodeType||st.cleanData(v(r)),r.parentNode&&(i&&It(r)&&_(v(r,"script")),r.parentNode.removeChild(r));return t}function x(t,e,i){var r,s,n,o,h=t.style;return(i=i||Kt(t))&&(""!==(o=i.getPropertyValue(e)||i[e])||It(t)||(o=st.style(t,e)),!Z.pixelBoxStyles()&&Ut.test(o)&&zt.test(e)&&(r=h.width,s=h.minWidth,n=h.maxWidth,h.minWidth=h.maxWidth=h.width=o,o=i.width,h.width=r,h.minWidth=s,h.maxWidth=n)),void 0!==o?o+"":o}function w(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}function M(t){return st.cssProps[t]||te[t]||(t in $t?t:te[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),i=Zt.length;i--;)if((t=Zt[i]+e)in $t)return t}(t)||t)}function R(t,e,i){var r=yt.exec(e);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):e}function k(t,e,i,r,s,n){var o="width"===e?1:0,h=0,a=0;if(i===(r?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(a+=st.css(t,i+Ct[o],!0,s)),r?("content"===i&&(a-=st.css(t,"padding"+Ct[o],!0,s)),"margin"!==i&&(a-=st.css(t,"border"+Ct[o]+"Width",!0,s))):(a+=st.css(t,"padding"+Ct[o],!0,s),"padding"!==i?a+=st.css(t,"border"+Ct[o]+"Width",!0,s):h+=st.css(t,"border"+Ct[o]+"Width",!0,s));return!r&&0<=n&&(a+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-n-a-h-.5))||0),a}function N(t,e,i){var r=Kt(t),s=(!Z.boxSizingReliable()||i)&&"border-box"===st.css(t,"boxSizing",!1,r),o=s,h=x(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ut.test(h)){if(!i)return h;h="auto"}return(!Z.boxSizingReliable()&&s||!Z.reliableTrDimensions()&&n(t,"tr")||"auto"===h||!parseFloat(h)&&"inline"===st.css(t,"display",!1,r))&&t.getClientRects().length&&(s="border-box"===st.css(t,"boxSizing",!1,r),(o=a in t)&&(h=t[a])),(h=parseFloat(h)||0)+k(t,e,i||(s?"border":"content"),o,r,h)+"px"}function D(t){return(t.match(pt)||[]).join(" ")}function H(t){return t.getAttribute&&t.getAttribute("class")||""}function B(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(pt)||[]}function G(t,e,i,s){var n;if(Array.isArray(e))st.each(e,function(e,r){i||fe.test(t)?s(t,r):G(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,i,s)});else if(i||"object"!==r(e))s(t,e);else for(n in e)G(t+"["+n+"]",e[n],i,s)}var j=[],Y=Object.getPrototypeOf,X=j.slice,W=j.flat?function(t){return j.flat.call(t)}:function(t){return j.concat.apply([],t)},V=j.push,U=j.indexOf,K={},q=K.toString,z=K.hasOwnProperty,J=z.toString,Q=J.call(Object),Z={},$=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},tt=function(t){return null!=t&&t===t.window},et=t.document,it={type:!0,src:!0,nonce:!0,noModule:!0},rt="3.5.1 -ajax,-ajax/jsonp,-ajax/load,-ajax/script,-ajax/var/location,-ajax/var/nonce,-ajax/var/rquery,-ajax/xhr,-manipulation/_evalUrl,-deprecated/ajax-event-alias,-effects,-effects/Tween,-effects/animatedSelector",st=function(t,e){return new st.fn.init(t,e)};st.fn=st.prototype={jquery:rt,constructor:st,length:0,toArray:function(){return X.call(this)},get:function(t){return null==t?X.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=st.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return st.each(this,t)},map:function(t){return this.pushStack(st.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(st.grep(this,function(t,e){return(e+1)%2}))},odd:function(){return this.pushStack(st.grep(this,function(t,e){return e%2}))},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(0<=i&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:V,sort:j.sort,splice:j.splice},st.extend=st.fn.extend=function(){var t,e,i,r,s,n,o=arguments[0]||{},h=1,a=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[h]||{},h++),"object"==typeof o||$(o)||(o={}),h===a&&(o=this,h--);h<a;h++)if(null!=(t=arguments[h]))for(e in t)r=t[e],"__proto__"!==e&&o!==r&&(l&&r&&(st.isPlainObject(r)||(s=Array.isArray(r)))?(i=o[e],n=s&&!Array.isArray(i)?[]:s||st.isPlainObject(i)?i:{},s=!1,o[e]=st.extend(l,n,r)):void 0!==r&&(o[e]=r));return o},st.extend({expando:"jQuery"+(rt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==q.call(t)||(e=Y(t))&&("function"!=typeof(i=z.call(e,"constructor")&&e.constructor)||J.call(i)!==Q))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,r){i(t,{nonce:e&&e.nonce},r)},each:function(t,e){var i,r=0;if(s(t))for(i=t.length;r<i&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var i=e||[];return null!=t&&(s(Object(t))?st.merge(i,"string"==typeof t?[t]:t):V.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:U.call(e,t,i)},merge:function(t,e){for(var i=+e.length,r=0,s=t.length;r<i;r++)t[s++]=e[r];return t.length=s,t},grep:function(t,e,i){for(var r=[],s=0,n=t.length,o=!i;s<n;s++)!e(t[s],s)!==o&&r.push(t[s]);return r},map:function(t,e,i){var r,n,o=0,h=[];if(s(t))for(r=t.length;o<r;o++)null!=(n=e(t[o],o,i))&&h.push(n);else for(o in t)null!=(n=e(t[o],o,i))&&h.push(n);return W(h)},guid:1,support:Z}),"function"==typeof Symbol&&(st.fn[Symbol.iterator]=j[Symbol.iterator]),st.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){K["[object "+e+"]"]=e.toLowerCase()});var nt=function(t){function e(t,e,i,r){var s,n,o,h,a,u,d,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return i;if(!r&&(L(e),e=e||I,x)){if(11!==p&&(a=mt.exec(t)))if(s=a[1]){if(9===p){if(!(o=e.getElementById(s)))return i;if(o.id===s)return i.push(o),i}else if(f&&(o=f.getElementById(s))&&k(e,o)&&o.id===s)return i.push(o),i}else{if(a[2])return z.apply(i,e.getElementsByTagName(t)),i;if((s=a[3])&&_.getElementsByClassName&&e.getElementsByClassName)return z.apply(i,e.getElementsByClassName(s)),i}if(_.qsa&&!X[t+" "]&&(!w||!w.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(d=t,f=e,1===p&&(ht.test(t)||ot.test(t))){for((f=gt.test(t)&&l(e.parentNode)||e)===e&&_.scope||((h=e.getAttribute("id"))?h=h.replace(Pt,Et):e.setAttribute("id",h=N)),n=(u=O(t)).length;n--;)u[n]=(h?"#"+h:":scope")+" "+c(u[n]);d=u.join(",")}try{return z.apply(i,f.querySelectorAll(d)),i}catch(e){X(t,!0)}finally{h===N&&e.removeAttribute("id")}}}return S(t.replace(st,"$1"),e,i,r)}function i(){var t=[];return function e(i,r){return t.push(i+" ")>P.cacheLength&&delete e[t.shift()],e[i+" "]=r}}function r(t){return t[N]=!0,t}function s(t){var e=I.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function n(t,e){for(var i=t.split("|"),r=i.length;r--;)P.attrHandle[i[r]]=e}function o(t,e){var i=e&&t,r=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function h(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&Ot(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function a(t){return r(function(e){return e=+e,r(function(i,r){for(var s,n=t([],i.length,e),o=n.length;o--;)i[s=n[o]]&&(i[s]=!(r[s]=i[s]))})})}function l(t){return t&&void 0!==t.getElementsByTagName&&t}function u(){}function c(t){for(var e=0,i=t.length,r="";e<i;e++)r+=t[e].value;return r}function d(t,e,i){var r=e.dir,s=e.next,n=s||r,o=i&&"parentNode"===n,h=B++;return e.first?function(e,i,s){for(;e=e[r];)if(1===e.nodeType||o)return t(e,i,s);return!1}:function(e,i,a){var l,u,c,d=[H,h];if(a){for(;e=e[r];)if((1===e.nodeType||o)&&t(e,i,a))return!0}else for(;e=e[r];)if(1===e.nodeType||o)if(u=(c=e[N]||(e[N]={}))[e.uniqueID]||(c[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=u[n])&&l[0]===H&&l[1]===h)return d[2]=l[2];if((u[n]=d)[2]=t(e,i,a))return!0}return!1}}function f(t){return 1<t.length?function(e,i,r){for(var s=t.length;s--;)if(!t[s](e,i,r))return!1;return!0}:t[0]}function p(t,e,i,r,s){for(var n,o=[],h=0,a=t.length,l=null!=e;h<a;h++)(n=t[h])&&(i&&!i(n,r,s)||(o.push(n),l&&e.push(h)));return o}function m(t,i,s,n,o,h){return n&&!n[N]&&(n=m(n)),o&&!o[N]&&(o=m(o,h)),r(function(r,h,a,l){var u,c,d,f=[],m=[],g=h.length,v=r||function(t,i,r){for(var s=0,n=i.length;s<n;s++)e(t,i[s],r);return r}(i||"*",a.nodeType?[a]:a,[]),_=!t||!r&&i?v:p(v,f,t,a,l),P=s?o||(r?t:g||n)?[]:h:_;if(s&&s(_,P,a,l),n)for(u=p(P,m),n(u,[],a,l),c=u.length;c--;)(d=u[c])&&(P[m[c]]=!(_[m[c]]=d));if(r){if(o||t){if(o){for(u=[],c=P.length;c--;)(d=P[c])&&u.push(_[c]=d);o(null,P=[],u,l)}for(c=P.length;c--;)(d=P[c])&&-1<(u=o?Q(r,d):f[c])&&(r[u]=!(h[u]=d))}}else P=p(P===h?P.splice(g,P.length):P),o?o(null,h,P,l):z.apply(h,P)})}function g(t){for(var e,i,r,s=t.length,n=P.relative[t[0].type],o=n||P.relative[" "],h=n?1:0,a=d(function(t){return t===e},o,!0),l=d(function(t){return-1<Q(e,t)},o,!0),u=[function(t,i,r){var s=!n&&(r||i!==T)||((e=i).nodeType?a(t,i,r):l(t,i,r));return e=null,s}];h<s;h++)if(i=P.relative[t[h].type])u=[d(f(u),i)];else{if((i=P.filter[t[h].type].apply(null,t[h].matches))[N]){for(r=++h;r<s&&!P.relative[t[r].type];r++);return m(1<h&&f(u),1<h&&c(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(st,"$1"),i,h<r&&g(t.slice(h,r)),r<s&&g(t=t.slice(r)),r<s&&c(t))}u.push(i)}return f(u)}var v,_,P,E,A,O,b,S,T,y,C,L,I,F,x,w,M,R,k,N="sizzle"+1*new Date,D=t.document,H=0,B=0,G=i(),j=i(),Y=i(),X=i(),W=function(t,e){return t===e&&(C=!0),0},V={}.hasOwnProperty,U=[],K=U.pop,q=U.push,z=U.push,J=U.slice,Q=function(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1},Z="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$="[\\x20\\t\\r\\n\\f]",tt="(?:\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",et="\\["+$+"*("+tt+")(?:"+$+"*([*^$|!~]?=)"+$+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+tt+"))|)"+$+"*\\]",it=":("+tt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+et+")*)|.*)\\)|)",rt=new RegExp($+"+","g"),st=new RegExp("^"+$+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$+"+$","g"),nt=new RegExp("^"+$+"*,"+$+"*"),ot=new RegExp("^"+$+"*([>+~]|"+$+")"+$+"*"),ht=new RegExp($+"|>"),at=new RegExp(it),lt=new RegExp("^"+tt+"$"),ut={ID:new RegExp("^#("+tt+")"),CLASS:new RegExp("^\\.("+tt+")"),TAG:new RegExp("^("+tt+"|[*])"),ATTR:new RegExp("^"+et),PSEUDO:new RegExp("^"+it),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$+"*(even|odd|(([+-]|)(\\d*)n|)"+$+"*(?:([+-]|)"+$+"*(\\d+)|))"+$+"*\\)|)","i"),bool:new RegExp("^(?:"+Z+")$","i"),needsContext:new RegExp("^"+$+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$+"*((?:-\\d)?\\d*)"+$+"*\\)|)(?=[^-]|$)","i")},ct=/HTML$/i,dt=/^(?:input|select|textarea|button)$/i,ft=/^h\d$/i,pt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,gt=/[+~]/,vt=new RegExp("\\\\[\\da-fA-F]{1,6}"+$+"?|\\\\([^\\r\\n\\f])","g"),_t=function(t,e){var i="0x"+t.slice(1)-65536;return e||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},Pt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Et=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},At=function(){L()},Ot=d(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{z.apply(U=J.call(D.childNodes),D.childNodes),U[D.childNodes.length].nodeType}catch(v){z={apply:U.length?function(t,e){q.apply(t,J.call(e))}:function(t,e){for(var i=t.length,r=0;t[i++]=e[r++];);t.length=i-1}}}for(v in _=e.support={},A=e.isXML=function(t){var e=t.namespaceURI,i=(t.ownerDocument||t).documentElement;return!ct.test(e||i&&i.nodeName||"HTML")},L=e.setDocument=function(t){var e,i,r=t?t.ownerDocument||t:D;return r!=I&&9===r.nodeType&&r.documentElement&&(F=(I=r).documentElement,x=!A(I),D!=I&&(i=I.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",At,!1):i.attachEvent&&i.attachEvent("onunload",At)),_.scope=s(function(t){return F.appendChild(t).appendChild(I.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length}),_.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=s(function(t){return t.appendChild(I.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=pt.test(I.getElementsByClassName),_.getById=s(function(t){return F.appendChild(t).id=N,!I.getElementsByName||!I.getElementsByName(N).length}),_.getById?(P.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){return t.getAttribute("id")===e}},P.find.ID=function(t,e){if(void 0!==e.getElementById&&x){var i=e.getElementById(t);return i?[i]:[]}}):(P.filter.ID=function(t){var e=t.replace(vt,_t);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},P.find.ID=function(t,e){if(void 0!==e.getElementById&&x){var i,r,s,n=e.getElementById(t);if(n){if((i=n.getAttributeNode("id"))&&i.value===t)return[n];for(s=e.getElementsByName(t),r=0;n=s[r++];)if((i=n.getAttributeNode("id"))&&i.value===t)return[n]}return[]}}),P.find.TAG=_.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,r=[],s=0,n=e.getElementsByTagName(t);if("*"===t){for(;i=n[s++];)1===i.nodeType&&r.push(i);return r}return n},P.find.CLASS=_.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&x)return e.getElementsByClassName(t)},M=[],w=[],(_.qsa=pt.test(I.querySelectorAll))&&(s(function(t){var e;F.appendChild(t).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&w.push("[*^$]="+$+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||w.push("\\["+$+"*(?:value|"+Z+")"),t.querySelectorAll("[id~="+N+"-]").length||w.push("~="),(e=I.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||w.push("\\["+$+"*name"+$+"*="+$+"*(?:''|\"\")"),t.querySelectorAll(":checked").length||w.push(":checked"),t.querySelectorAll("a#"+N+"+*").length||w.push(".#.+[+~]"),t.querySelectorAll("\\\f"),w.push("[\\r\\n\\f]")}),s(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=I.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&w.push("name"+$+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&w.push(":enabled",":disabled"),F.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&w.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),w.push(",.*:")})),(_.matchesSelector=pt.test(R=F.matches||F.webkitMatchesSelector||F.mozMatchesSelector||F.oMatchesSelector||F.msMatchesSelector))&&s(function(t){_.disconnectedMatch=R.call(t,"*"),R.call(t,"[s!='']:x"),M.push("!=",it)}),w=w.length&&new RegExp(w.join("|")),M=M.length&&new RegExp(M.join("|")),e=pt.test(F.compareDocumentPosition),k=e||pt.test(F.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(i.contains?i.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},W=e?function(t,e){if(t===e)return C=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!_.sortDetached&&e.compareDocumentPosition(t)===i?t==I||t.ownerDocument==D&&k(D,t)?-1:e==I||e.ownerDocument==D&&k(D,e)?1:y?Q(y,t)-Q(y,e):0:4&i?-1:1)}:function(t,e){if(t===e)return C=!0,0;var i,r=0,s=t.parentNode,n=e.parentNode,h=[t],a=[e];if(!s||!n)return t==I?-1:e==I?1:s?-1:n?1:y?Q(y,t)-Q(y,e):0;if(s===n)return o(t,e);for(i=t;i=i.parentNode;)h.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;h[r]===a[r];)r++;return r?o(h[r],a[r]):h[r]==D?-1:a[r]==D?1:0}),I},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if(L(t),_.matchesSelector&&x&&!X[i+" "]&&(!M||!M.test(i))&&(!w||!w.test(i)))try{var r=R.call(t,i);if(r||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){X(i,!0)}return 0<e(i,I,null,[t]).length},e.contains=function(t,e){return(t.ownerDocument||t)!=I&&L(t),k(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!=I&&L(t);var i=P.attrHandle[e.toLowerCase()],r=i&&V.call(P.attrHandle,e.toLowerCase())?i(t,e,!x):void 0;return void 0!==r?r:_.attributes||!x?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.escape=function(t){return(t+"").replace(Pt,Et)},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],r=0,s=0;if(C=!_.detectDuplicates,y=!_.sortStable&&t.slice(0),t.sort(W),C){for(;e=t[s++];)e===t[s]&&(r=i.push(s));for(;r--;)t.splice(i[r],1)}return y=null,t},E=e.getText=function(t){var e,i="",r=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=E(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[r++];)i+=E(e);return i},(P=e.selectors={cacheLength:50,createPseudo:r,match:ut,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(vt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(vt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ut.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&at.test(i)&&(e=O(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(vt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+$+")"+t+"("+$+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,i,r){return function(s){var n=e.attr(s,t);return null==n?"!="===i:!i||(n+="","="===i?n===r:"!="===i?n!==r:"^="===i?r&&0===n.indexOf(r):"*="===i?r&&-1<n.indexOf(r):"$="===i?r&&n.slice(-r.length)===r:"~="===i?-1<(" "+n.replace(rt," ")+" ").indexOf(r):"|="===i&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,i,r,s){var n="nth"!==t.slice(0,3),o="last"!==t.slice(-4),h="of-type"===e;return 1===r&&0===s?function(t){return!!t.parentNode}:function(e,i,a){var l,u,c,d,f,p,m=n!==o?"nextSibling":"previousSibling",g=e.parentNode,v=h&&e.nodeName.toLowerCase(),_=!a&&!h,P=!1;if(g){if(n){for(;m;){for(d=e;d=d[m];)if(h?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?g.firstChild:g.lastChild],o&&_){for(P=(f=(l=(u=(c=(d=g)[N]||(d[N]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]||[])[0]===H&&l[1])&&l[2],d=f&&g.childNodes[f];d=++f&&d&&d[m]||(P=f=0)||p.pop();)if(1===d.nodeType&&++P&&d===e){u[t]=[H,f,P];break}}else if(_&&(P=f=(l=(u=(c=(d=e)[N]||(d[N]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]||[])[0]===H&&l[1]),!1===P)for(;(d=++f&&d&&d[m]||(P=f=0)||p.pop())&&((h?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++P||(_&&((u=(c=d[N]||(d[N]={}))[d.uniqueID]||(c[d.uniqueID]={}))[t]=[H,P]),d!==e)););return(P-=s)===r||P%r==0&&0<=P/r}}},PSEUDO:function(t,i){var s,n=P.pseudos[t]||P.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return n[N]?n(i):1<n.length?(s=[t,t,"",i],P.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,s=n(t,i),o=s.length;o--;)t[r=Q(t,s[o])]=!(e[r]=s[o])}):function(t){return n(t,0,s)}):n}},pseudos:{not:r(function(t){var e=[],i=[],s=b(t.replace(st,"$1"));return s[N]?r(function(t,e,i,r){for(var n,o=s(t,null,r,[]),h=t.length;h--;)(n=o[h])&&(t[h]=!(e[h]=n))}):function(t,r,n){return e[0]=t,s(e,null,n,i),e[0]=null,!i.pop()}}),has:r(function(t){return function(i){return 0<e(t,i).length}}),contains:r(function(t){return t=t.replace(vt,_t),function(e){return-1<(e.textContent||E(e)).indexOf(t)}}),lang:r(function(t){return lt.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(vt,_t).toLowerCase(),function(e){var i;do{if(i=x?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===F},focus:function(t){return t===I.activeElement&&(!I.hasFocus||I.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:h(!1),disabled:h(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!P.pseudos.empty(t)},header:function(t){return ft.test(t.nodeName)},input:function(t){return dt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:a(function(){return[0]}),last:a(function(t,e){return[e-1]}),eq:a(function(t,e,i){return[i<0?i+e:i]}),even:a(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:a(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:a(function(t,e,i){for(var r=i<0?i+e:e<i?e:i;0<=--r;)t.push(r);return t}),gt:a(function(t,e,i){for(var r=i<0?i+e:i;++r<e;)t.push(r);return t})}}).pseudos.nth=P.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})P.pseudos[v]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(v);for(v in{submit:!0,reset:!0})P.pseudos[v]=function(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}(v);return u.prototype=P.filters=P.pseudos,P.setFilters=new u,O=e.tokenize=function(t,i){var r,s,n,o,h,a,l,u=j[t+" "];if(u)return i?0:u.slice(0);for(h=t,a=[],l=P.preFilter;h;){for(o in r&&!(s=nt.exec(h))||(s&&(h=h.slice(s[0].length)||h),a.push(n=[])),r=!1,(s=ot.exec(h))&&(r=s.shift(),n.push({value:r,type:s[0].replace(st," ")}),h=h.slice(r.length)),P.filter)!(s=ut[o].exec(h))||l[o]&&!(s=l[o](s))||(r=s.shift(),n.push({value:r,type:o,matches:s}),h=h.slice(r.length));if(!r)break}return i?h.length:h?e.error(t):j(t,a).slice(0)},b=e.compile=function(t,i){var s,n,o,h,a,l,u=[],c=[],d=Y[t+" "];if(!d){for(i||(i=O(t)),s=i.length;s--;)(d=g(i[s]))[N]?u.push(d):c.push(d);(d=Y(t,(n=c,h=0<(o=u).length,a=0<n.length,l=function(t,i,r,s,l){var u,c,d,f=0,m="0",g=t&&[],v=[],_=T,E=t||a&&P.find.TAG("*",l),A=H+=null==_?1:Math.random()||.1,O=E.length;for(l&&(T=i==I||i||l);m!==O&&null!=(u=E[m]);m++){if(a&&u){for(c=0,i||u.ownerDocument==I||(L(u),r=!x);d=n[c++];)if(d(u,i||I,r)){s.push(u);break}l&&(H=A)}h&&((u=!d&&u)&&f--,t&&g.push(u))}if(f+=m,h&&m!==f){for(c=0;d=o[c++];)d(g,v,i,r);if(t){if(0<f)for(;m--;)g[m]||v[m]||(v[m]=K.call(s));v=p(v)}z.apply(s,v),l&&!t&&0<v.length&&1<f+o.length&&e.uniqueSort(s)}return l&&(H=A,T=_),g},h?r(l):l))).selector=t}return d},S=e.select=function(t,e,i,r){var s,n,o,h,a,u="function"==typeof t&&t,d=!r&&O(t=u.selector||t);if(i=i||[],1===d.length){if(2<(n=d[0]=d[0].slice(0)).length&&"ID"===(o=n[0]).type&&9===e.nodeType&&x&&P.relative[n[1].type]){if(!(e=(P.find.ID(o.matches[0].replace(vt,_t),e)||[])[0]))return i;u&&(e=e.parentNode),t=t.slice(n.shift().value.length)}for(s=ut.needsContext.test(t)?0:n.length;s--&&(o=n[s],!P.relative[h=o.type]);)if((a=P.find[h])&&(r=a(o.matches[0].replace(vt,_t),gt.test(n[0].type)&&l(e.parentNode)||e))){if(n.splice(s,1),!(t=r.length&&c(n)))return z.apply(i,r),i;break}}return(u||b(t,d))(r,e,!x,i,!e||gt.test(t)&&l(e.parentNode)||e),i},_.sortStable=N.split("").sort(W).join("")===N,_.detectDuplicates=!!C,L(),_.sortDetached=s(function(t){return 1&t.compareDocumentPosition(I.createElement("fieldset"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||n("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||n("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||n(Z,function(t,e,i){var r
;if(!i)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);st.find=nt,st.expr=nt.selectors,st.expr[":"]=st.expr.pseudos,st.uniqueSort=st.unique=nt.uniqueSort,st.text=nt.getText,st.isXMLDoc=nt.isXML,st.contains=nt.contains,st.escapeSelector=nt.escape;var ot=function(t,e,i){for(var r=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&st(t).is(i))break;r.push(t)}return r},ht=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},at=st.expr.match.needsContext,lt=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;st.filter=function(t,e,i){var r=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?st.find.matchesSelector(r,t)?[r]:[]:st.find.matches(t,st.grep(e,function(t){return 1===t.nodeType}))},st.fn.extend({find:function(t){var e,i,r=this.length,s=this;if("string"!=typeof t)return this.pushStack(st(t).filter(function(){for(e=0;e<r;e++)if(st.contains(s[e],this))return!0}));for(i=this.pushStack([]),e=0;e<r;e++)st.find(t,s[e],i);return 1<r?st.uniqueSort(i):i},filter:function(t){return this.pushStack(o(this,t||[],!1))},not:function(t){return this.pushStack(o(this,t||[],!0))},is:function(t){return!!o(this,"string"==typeof t&&at.test(t)?st(t):t||[],!1).length}});var ut,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(st.fn.init=function(t,e,i){var r,s;if(!t)return this;if(i=i||ut,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:ct.exec(t))||!r[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof st?e[0]:e,st.merge(this,st.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:et,!0)),lt.test(r[1])&&st.isPlainObject(e))for(r in e)$(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(s=et.getElementById(r[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):$(t)?void 0!==i.ready?i.ready(t):t(st):st.makeArray(t,this)}).prototype=st.fn,ut=st(et);var dt=/^(?:parents|prev(?:Until|All))/,ft={children:!0,contents:!0,next:!0,prev:!0};st.fn.extend({has:function(t){var e=st(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(st.contains(this,e[t]))return!0})},closest:function(t,e){var i,r=0,s=this.length,n=[],o="string"!=typeof t&&st(t);if(!at.test(t))for(;r<s;r++)for(i=this[r];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?-1<o.index(i):1===i.nodeType&&st.find.matchesSelector(i,t))){n.push(i);break}return this.pushStack(1<n.length?st.uniqueSort(n):n)},index:function(t){return t?"string"==typeof t?U.call(st(t),this[0]):U.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(st.uniqueSort(st.merge(this.get(),st(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),st.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ot(t,"parentNode")},parentsUntil:function(t,e,i){return ot(t,"parentNode",i)},next:function(t){return h(t,"nextSibling")},prev:function(t){return h(t,"previousSibling")},nextAll:function(t){return ot(t,"nextSibling")},prevAll:function(t){return ot(t,"previousSibling")},nextUntil:function(t,e,i){return ot(t,"nextSibling",i)},prevUntil:function(t,e,i){return ot(t,"previousSibling",i)},siblings:function(t){return ht((t.parentNode||{}).firstChild,t)},children:function(t){return ht(t.firstChild)},contents:function(t){return null!=t.contentDocument&&Y(t.contentDocument)?t.contentDocument:(n(t,"template")&&(t=t.content||t),st.merge([],t.childNodes))}},function(t,e){st.fn[t]=function(i,r){var s=st.map(this,e,i);return"Until"!==t.slice(-5)&&(r=i),r&&"string"==typeof r&&(s=st.filter(r,s)),1<this.length&&(ft[t]||st.uniqueSort(s),dt.test(t)&&s.reverse()),this.pushStack(s)}});var pt=/[^\x20\t\r\n\f]+/g;st.Callbacks=function(t){var e,i;t="string"==typeof t?(e=t,i={},st.each(e.match(pt)||[],function(t,e){i[e]=!0}),i):st.extend({},t);var s,n,o,h,a=[],l=[],u=-1,c=function(){for(h=h||t.once,o=s=!0;l.length;u=-1)for(n=l.shift();++u<a.length;)!1===a[u].apply(n[0],n[1])&&t.stopOnFalse&&(u=a.length,n=!1);t.memory||(n=!1),s=!1,h&&(a=n?[]:"")},d={add:function(){return a&&(n&&!s&&(u=a.length-1,l.push(n)),function e(i){st.each(i,function(i,s){$(s)?t.unique&&d.has(s)||a.push(s):s&&s.length&&"string"!==r(s)&&e(s)})}(arguments),n&&!s&&c()),this},remove:function(){return st.each(arguments,function(t,e){for(var i;-1<(i=st.inArray(e,a,i));)a.splice(i,1),i<=u&&u--}),this},has:function(t){return t?-1<st.inArray(t,a):0<a.length},empty:function(){return a&&(a=[]),this},disable:function(){return h=l=[],a=n="",this},disabled:function(){return!a},lock:function(){return h=l=[],n||s||(a=n=""),this},locked:function(){return!!h},fireWith:function(t,e){return h||(e=[t,(e=e||[]).slice?e.slice():e],l.push(e),s||c()),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},st.extend({Deferred:function(e){var i=[["notify","progress",st.Callbacks("memory"),st.Callbacks("memory"),2],["resolve","done",st.Callbacks("once memory"),st.Callbacks("once memory"),0,"resolved"],["reject","fail",st.Callbacks("once memory"),st.Callbacks("once memory"),1,"rejected"]],r="pending",s={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return st.Deferred(function(e){st.each(i,function(i,r){var s=$(t[r[4]])&&t[r[4]];n[r[1]](function(){var t=s&&s.apply(this,arguments);t&&$(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[r[0]+"With"](this,s?[t]:arguments)})}),t=null}).promise()},then:function(e,r,s){function n(e,i,r,s){return function(){var h=this,u=arguments,c=function(){var t,c;if(!(e<o)){if((t=r.apply(h,u))===i.promise())throw new TypeError("Thenable self-resolution");c=t&&("object"==typeof t||"function"==typeof t)&&t.then,$(c)?s?c.call(t,n(o,i,a,s),n(o,i,l,s)):(o++,c.call(t,n(o,i,a,s),n(o,i,l,s),n(o,i,a,i.notifyWith))):(r!==a&&(h=void 0,u=[t]),(s||i.resolveWith)(h,u))}},d=s?c:function(){try{c()}catch(t){st.Deferred.exceptionHook&&st.Deferred.exceptionHook(t,d.stackTrace),o<=e+1&&(r!==l&&(h=void 0,u=[t]),i.rejectWith(h,u))}};e?d():(st.Deferred.getStackHook&&(d.stackTrace=st.Deferred.getStackHook()),t.setTimeout(d))}}var o=0;return st.Deferred(function(t){i[0][3].add(n(0,t,$(s)?s:a,t.notifyWith)),i[1][3].add(n(0,t,$(e)?e:a)),i[2][3].add(n(0,t,$(r)?r:l))}).promise()},promise:function(t){return null!=t?st.extend(t,s):s}},n={};return st.each(i,function(t,e){var o=e[2],h=e[5];s[e[1]]=o.add,h&&o.add(function(){r=h},i[3-t][2].disable,i[3-t][3].disable,i[0][2].lock,i[0][3].lock),o.add(e[3].fire),n[e[0]]=function(){return n[e[0]+"With"](this===n?void 0:this,arguments),this},n[e[0]+"With"]=o.fireWith}),s.promise(n),e&&e.call(n,n),n},when:function(t){var e=arguments.length,i=e,r=Array(i),s=X.call(arguments),n=st.Deferred(),o=function(t){return function(i){r[t]=this,s[t]=1<arguments.length?X.call(arguments):i,--e||n.resolveWith(r,s)}};if(e<=1&&(u(t,n.done(o(i)).resolve,n.reject,!e),"pending"===n.state()||$(s[i]&&s[i].then)))return n.then();for(;i--;)u(s[i],o(i),n.reject);return n.promise()}});var mt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;st.Deferred.exceptionHook=function(e,i){t.console&&t.console.warn&&e&&mt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,i)},st.readyException=function(e){t.setTimeout(function(){throw e})};var gt=st.Deferred();st.fn.ready=function(t){return gt.then(t).catch(function(t){st.readyException(t)}),this},st.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--st.readyWait:st.isReady)||(st.isReady=!0)!==t&&0<--st.readyWait||gt.resolveWith(et,[st])}}),st.ready.then=gt.then,"complete"===et.readyState||"loading"!==et.readyState&&!et.documentElement.doScroll?t.setTimeout(st.ready):(et.addEventListener("DOMContentLoaded",c),t.addEventListener("load",c));var vt=function(t,e,i,s,n,o,h){var a=0,l=t.length,u=null==i;if("object"===r(i))for(a in n=!0,i)vt(t,e,a,i[a],!0,o,h);else if(void 0!==s&&(n=!0,$(s)||(h=!0),u&&(h?(e.call(t,s),e=null):(u=e,e=function(t,e,i){return u.call(st(t),i)})),e))for(;a<l;a++)e(t[a],i,h?s:s.call(t[a],a,e(t[a],i)));return n?t:u?e.call(t):l?e(t[0],i):o},_t=/^-ms-/,Pt=/-([a-z])/g,Et=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};p.uid=1,p.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Et(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var r,s=this.cache(t);if("string"==typeof e)s[f(e)]=i;else for(r in e)s[f(r)]=e[r];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][f(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,r=t[this.expando];if(void 0!==r){if(void 0!==e){i=(e=Array.isArray(e)?e.map(f):(e=f(e))in r?[e]:e.match(pt)||[]).length;for(;i--;)delete r[e[i]]}(void 0===e||st.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!st.isEmptyObject(e)}};var At=new p,Ot=new p,bt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,St=/[A-Z]/g;st.extend({hasData:function(t){return Ot.hasData(t)||At.hasData(t)},data:function(t,e,i){return Ot.access(t,e,i)},removeData:function(t,e){Ot.remove(t,e)},_data:function(t,e,i){return At.access(t,e,i)},_removeData:function(t,e){At.remove(t,e)}}),st.fn.extend({data:function(t,e){var i,r,s,n=this[0],o=n&&n.attributes;if(void 0===t){if(this.length&&(s=Ot.get(n),1===n.nodeType&&!At.get(n,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(r=o[i].name).indexOf("data-")&&(r=f(r.slice(5)),m(n,r,s[r]));At.set(n,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){Ot.set(this,t)}):vt(this,function(e){var i;if(n&&void 0===e)return void 0!==(i=Ot.get(n,t))?i:void 0!==(i=m(n,t))?i:void 0;this.each(function(){Ot.set(this,t,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Ot.remove(this,t)})}}),st.extend({queue:function(t,e,i){var r;if(t)return e=(e||"fx")+"queue",r=At.get(t,e),i&&(!r||Array.isArray(i)?r=At.access(t,e,st.makeArray(i)):r.push(i)),r||[]},dequeue:function(t,e){e=e||"fx";var i=st.queue(t,e),r=i.length,s=i.shift(),n=st._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),r--),s&&("fx"===e&&i.unshift("inprogress"),delete n.stop,s.call(t,function(){st.dequeue(t,e)},n)),!r&&n&&n.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return At.get(t,i)||At.access(t,i,{empty:st.Callbacks("once memory").add(function(){At.remove(t,[e+"queue",i])})})}}),st.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?st.queue(this[0],t):void 0===e?this:this.each(function(){var i=st.queue(this,t,e);st._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&st.dequeue(this,t)})},dequeue:function(t){return this.each(function(){st.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,r=1,s=st.Deferred(),n=this,o=this.length,h=function(){--r||s.resolveWith(n,[n])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=At.get(n[o],t+"queueHooks"))&&i.empty&&(r++,i.empty.add(h));return h(),s.promise(e)}});var Tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,yt=new RegExp("^(?:([+-])=|)("+Tt+")([a-z%]*)$","i"),Ct=["Top","Right","Bottom","Left"],Lt=et.documentElement,It=function(t){return st.contains(t.ownerDocument,t)},Ft={composed:!0};Lt.getRootNode&&(It=function(t){return st.contains(t.ownerDocument,t)||t.getRootNode(Ft)===t.ownerDocument});var xt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&It(t)&&"none"===st.css(t,"display")},wt={};st.fn.extend({show:function(){return g(this,!0)},hide:function(){return g(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){xt(this)?st(this).show():st(this).hide()})}});var Mt,Rt,kt=/^(?:checkbox|radio)$/i,Nt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Dt=/^$|^module$|\/(?:java|ecma)script/i;Mt=et.createDocumentFragment().appendChild(et.createElement("div")),(Rt=et.createElement("input")).setAttribute("type","radio"),Rt.setAttribute("checked","checked"),Rt.setAttribute("name","t"),Mt.appendChild(Rt),Z.checkClone=Mt.cloneNode(!0).cloneNode(!0).lastChild.checked,Mt.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!Mt.cloneNode(!0).lastChild.defaultValue,Mt.innerHTML="<option></option>",Z.option=!!Mt.lastChild;var Ht={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ht.tbody=Ht.tfoot=Ht.colgroup=Ht.caption=Ht.thead,Ht.th=Ht.td,Z.option||(Ht.optgroup=Ht.option=[1,"<select multiple='multiple'>","</select>"]);var Bt=/<|&#?\w+;/,Gt=/^key/,jt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Yt=/^([^.]*)(?:\.(.+)|)/;st.event={global:{},add:function(t,e,i,r,s){var n,o,h,a,l,u,c,d,f,p,m,g=At.get(t);if(Et(t))for(i.handler&&(i=(n=i).handler,s=n.selector),s&&st.find.matchesSelector(Lt,s),i.guid||(i.guid=st.guid++),(a=g.events)||(a=g.events=Object.create(null)),(o=g.handle)||(o=g.handle=function(e){return void 0!==st&&st.event.triggered!==e.type?st.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(pt)||[""]).length;l--;)f=m=(h=Yt.exec(e[l])||[])[1],p=(h[2]||"").split(".").sort(),f&&(c=st.event.special[f]||{},f=(s?c.delegateType:c.bindType)||f,c=st.event.special[f]||{},u=st.extend({type:f,origType:m,data:r,handler:i,guid:i.guid,selector:s,needsContext:s&&st.expr.match.needsContext.test(s),namespace:p.join(".")},n),(d=a[f])||((d=a[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,r,p,o)||t.addEventListener&&t.addEventListener(f,o)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),st.event.global[f]=!0)},remove:function(t,e,i,r,s){var n,o,h,a,l,u,c,d,f,p,m,g=At.hasData(t)&&At.get(t);if(g&&(a=g.events)){for(l=(e=(e||"").match(pt)||[""]).length;l--;)if(f=m=(h=Yt.exec(e[l])||[])[1],p=(h[2]||"").split(".").sort(),f){for(c=st.event.special[f]||{},d=a[f=(r?c.delegateType:c.bindType)||f]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=n=d.length;n--;)u=d[n],!s&&m!==u.origType||i&&i.guid!==u.guid||h&&!h.test(u.namespace)||r&&r!==u.selector&&("**"!==r||!u.selector)||(d.splice(n,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,p,g.handle)||st.removeEvent(t,f,g.handle),delete a[f])}else for(f in a)st.event.remove(t,f+e[l],i,r,!0);st.isEmptyObject(a)&&At.remove(t,"handle events")}},dispatch:function(t){var e,i,r,s,n,o,h=new Array(arguments.length),a=st.event.fix(t),l=(At.get(this,"events")||Object.create(null))[a.type]||[],u=st.event.special[a.type]||{};for(h[0]=a,e=1;e<arguments.length;e++)h[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(o=st.event.handlers.call(this,a,l),e=0;(s=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=s.elem,i=0;(n=s.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==n.namespace&&!a.rnamespace.test(n.namespace)||(a.handleObj=n,a.data=n.data,void 0!==(r=((st.event.special[n.origType]||{}).handle||n.handler).apply(s.elem,h))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,r,s,n,o,h=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&!("click"===t.type&&1<=t.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(n=[],o={},i=0;i<a;i++)void 0===o[s=(r=e[i]).selector+" "]&&(o[s]=r.needsContext?-1<st(s,this).index(l):st.find(s,this,null,[l]).length),o[s]&&n.push(r);n.length&&h.push({elem:l,handlers:n})}return l=this,a<e.length&&h.push({elem:l,handlers:e.slice(a)}),h},addProp:function(t,e){Object.defineProperty(st.Event.prototype,t,{enumerable:!0,configurable:!0,get:$(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[st.expando]?t:new st.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return kt.test(e.type)&&e.click&&n(e,"input")&&S(e,"click",E),!1},trigger:function(t){var e=this||t;return kt.test(e.type)&&e.click&&n(e,"input")&&S(e,"click"),!0},_default:function(t){var e=t.target;return kt.test(e.type)&&e.click&&n(e,"input")&&At.get(e,"click")||n(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},st.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},st.Event=function(t,e){if(!(this instanceof st.Event))return new st.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?E:A,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&st.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[st.expando]=!0},st.Event.prototype={constructor:st.Event,isDefaultPrevented:A,isPropagationStopped:A,isImmediatePropagationStopped:A,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=E,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=E,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=E,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},st.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Gt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&jt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},st.event.addProp),st.each({focus:"focusin",blur:"focusout"},function(t,e){st.event.special[t]={setup:function(){return S(this,t,O),!1},trigger:function(){return S(this,t),!0},delegateType:e}}),st.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){st.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,r=t.relatedTarget,s=t.handleObj;return r&&(r===this||st.contains(this,r))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),st.fn.extend({on:function(t,e,i,r){return b(this,t,e,i,r)},one:function(t,e,i,r){return b(this,t,e,i,r,1)},off:function(t,e,i){var r,s;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,st(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=A),this.each(function(){st.event.remove(this,t,i,e)})}});var Xt=/<script|<style|<link/i,Wt=/checked\s*(?:[^=]|=\s*.checked.)/i,Vt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;st.extend({htmlPrefilter:function(t){return t},clone:function(t,e,i){var r,s,n,o,h,a,l,u=t.cloneNode(!0),c=It(t);if(!(Z.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||st.isXMLDoc(t)))for(o=v(u),r=0,s=(n=v(t)).length;r<s;r++)h=n[r],a=o[r],"input"===(l=a.nodeName.toLowerCase())&&kt.test(h.type)?a.checked=h.checked:"input"!==l&&"textarea"!==l||(a.defaultValue=h.defaultValue);if(e)if(i)for(n=n||v(t),o=o||v(u),r=0,s=n.length;r<s;r++)L(n[r],o[r]);else L(t,u);return 0<(o=v(u,"script")).length&&_(o,!c&&v(t,"script")),u},cleanData:function(t){for(var e,i,r,s=st.event.special,n=0;void 0!==(i=t[n]);n++)if(Et(i)){if(e=i[At.expando]){if(e.events)for(r in e.events)s[r]?st.event.remove(i,r):st.removeEvent(i,r,e.handle);i[At.expando]=void 0}i[Ot.expando]&&(i[Ot.expando]=void 0)}}}),st.fn.extend({detach:function(t){return F(this,t,!0)},remove:function(t){return F(this,t)},text:function(t){return vt(this,function(t){return void 0===t?st.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return I(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||T(this,t).appendChild(t)})},prepend:function(){return I(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=T(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return I(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(st.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return st.clone(this,t,e)})},html:function(t){return vt(this,function(t){var e=this[0]||{},i=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Xt.test(t)&&!Ht[(Nt.exec(t)||["",""])[1].toLowerCase()]){t=st.htmlPrefilter(t);try{for(;i<r;i++)1===(e=this[i]||{}).nodeType&&(st.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return I(this,arguments,function(e){var i=this.parentNode;st.inArray(this,t)<0&&(st.cleanData(v(this)),i&&i.replaceChild(e,this))},t)}}),st.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){st.fn[t]=function(t){for(var i,r=[],s=st(t),n=s.length-1,o=0;o<=n;o++)i=o===n?this:this.clone(!0),st(s[o])[e](i),V.apply(r,i.get());return this.pushStack(r)}});var Ut=new RegExp("^("+Tt+")(?!px)[a-z%]+$","i"),Kt=function(e){var i=e.ownerDocument.defaultView;return i&&i.opener||(i=t),i.getComputedStyle(e)},qt=function(t,e,i){var r,s,n={};for(s in e)n[s]=t.style[s],t.style[s]=e[s];for(s in r=i.call(t),e)t.style[s]=n[s];return r},zt=new RegExp(Ct.join("|"),"i");!function(){function e(){if(u){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Lt.appendChild(l).appendChild(u);var e=t.getComputedStyle(u);r="1%"!==e.top,a=12===i(e.marginLeft),u.style.right="60%",o=36===i(e.right),s=36===i(e.width),u.style.position="absolute",n=12===i(u.offsetWidth/3),Lt.removeChild(l),u=null}}function i(t){return Math.round(parseFloat(t))}var r,s,n,o,h,a,l=et.createElement("div"),u=et.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===u.style.backgroundClip,st.extend(Z,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),a},scrollboxSize:function(){return e(),n},reliableTrDimensions:function(){var e,i,r,s;return null==h&&(e=et.createElement("table"),i=et.createElement("tr"),r=et.createElement("div"),e.style.cssText="position:absolute;left:-11111px",i.style.height="1px",r.style.height="9px",Lt.appendChild(e).appendChild(i).appendChild(r),s=t.getComputedStyle(i),h=3<parseInt(s.height),Lt.removeChild(e)),h}}))}();var Jt,Qt,Zt=["Webkit","Moz","ms"],$t=et.createElement("div").style,te={},ee=/^(none|table(?!-c[ea]).+)/,ie=/^--/,re={position:"absolute",visibility:"hidden",display:"block"},se={letterSpacing:"0",fontWeight:"400"};st.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=x(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,n,o,h=f(e),a=ie.test(e),l=t.style;if(a||(e=M(h)),o=st.cssHooks[e]||st.cssHooks[h],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(t,!1,r))?s:l[e];"string"==(n=typeof i)&&(s=yt.exec(i))&&s[1]&&(i=function(t,e,i,r){var s,n,o=20,h=r?function(){return r.cur()}:function(){return st.css(t,e,"")},a=h(),l=i&&i[3]||(st.cssNumber[e]?"":"px"),u=t.nodeType&&(st.cssNumber[e]||"px"!==l&&+a)&&yt.exec(st.css(t,e));if(u&&u[3]!==l){for(a/=2,l=l||u[3],u=+a||1;o--;)st.style(t,e,u+l),(1-n)*(1-(n=h()/a||.5))<=0&&(o=0),u/=n;u*=2,st.style(t,e,u+l),i=i||[]}return i&&(u=+u||+a||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],r&&(r.unit=l,r.start=u,r.end=s)),s}(t,e,s),n="number"),null!=i&&i==i&&("number"!==n||a||(i+=s&&s[3]||(st.cssNumber[h]?"":"px")),Z.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,r))||(a?l.setProperty(e,i):l[e]=i))}},css:function(t,e,i,r){var s,n,o,h=f(e);return ie.test(e)||(e=M(h)),(o=st.cssHooks[e]||st.cssHooks[h])&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=x(t,e,r)),"normal"===s&&e in se&&(s=se[e]),""===i||i?(n=parseFloat(s),!0===i||isFinite(n)?n||0:s):s}}),st.each(["height","width"],function(t,e){st.cssHooks[e]={get:function(t,i,r){if(i)return!ee.test(st.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?N(t,e,r):qt(t,re,function(){return N(t,e,r)})},set:function(t,i,r){var s,n=Kt(t),o=!Z.scrollboxSize()&&"absolute"===n.position,h=(o||r)&&"border-box"===st.css(t,"boxSizing",!1,n),a=r?k(t,e,r,h,n):0;return h&&o&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(n[e])-k(t,e,"border",!1,n)-.5)),a&&(s=yt.exec(i))&&"px"!==(s[3]||"px")&&(t.style[e]=i,i=st.css(t,e)),R(0,i,a)}}}),st.cssHooks.marginLeft=w(Z.reliableMarginLeft,function(t,e){if(e)return(parseFloat(x(t,"marginLeft"))||t.getBoundingClientRect().left-qt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),st.each({margin:"",padding:"",border:"Width"},function(t,e){st.cssHooks[t+e]={expand:function(i){for(var r=0,s={},n="string"==typeof i?i.split(" "):[i];r<4;r++)s[t+Ct[r]+e]=n[r]||n[r-2]||n[0];return s}},"margin"!==t&&(st.cssHooks[t+e].set=R)}),st.fn.extend({css:function(t,e){return vt(this,function(t,e,i){var r,s,n={},o=0;if(Array.isArray(e)){for(r=Kt(t),s=e.length;o<s;o++)n[e[o]]=st.css(t,e[o],!1,r);return n}return void 0!==i?st.style(t,e,i):st.css(t,e)},t,e,1<arguments.length)}}),st.fn.delay=function(e,i){return e=st.fx&&st.fx.speeds[e]||e,i=i||"fx",this.queue(i,function(i,r){var s=t.setTimeout(i,e);r.stop=function(){t.clearTimeout(s)}})},Jt=et.createElement("input"),Qt=et.createElement("select").appendChild(et.createElement("option")),Jt.type="checkbox",Z.checkOn=""!==Jt.value,Z.optSelected=Qt.selected,(Jt=et.createElement("input")).value="t",Jt.type="radio",Z.radioValue="t"===Jt.value;var ne,oe=st.expr.attrHandle;st.fn.extend({attr:function(t,e){return vt(this,st.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){st.removeAttr(this,t)})}}),st.extend({attr:function(t,e,i){var r,s,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===t.getAttribute?st.prop(t,e,i):(1===n&&st.isXMLDoc(t)||(s=st.attrHooks[e.toLowerCase()]||(st.expr.match.bool.test(e)?ne:void 0)),void 0!==i?null===i?void st.removeAttr(t,e):s&&"set"in s&&void 0!==(r=s.set(t,i,e))?r:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(r=s.get(t,e))?r:null==(r=st.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!Z.radioValue&&"radio"===e&&n(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,r=0,s=e&&e.match(pt);if(s&&1===t.nodeType)for(;i=s[r++];)t.removeAttribute(i)}}),ne={set:function(t,e,i){return!1===e?st.removeAttr(t,i):t.setAttribute(i,i),i}},st.each(st.expr.match.bool.source.match(/\w+/g),function(t,e){var i=oe[e]||st.find.attr;oe[e]=function(t,e,r){var s,n,o=e.toLowerCase();return r||(n=oe[o],oe[o]=s,s=null!=i(t,e,r)?o:null,oe[o]=n),s}});var he=/^(?:input|select|textarea|button)$/i,ae=/^(?:a|area)$/i;st.fn.extend({prop:function(t,e){return vt(this,st.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[st.propFix[t]||t]})}}),st.extend({prop:function(t,e,i){var r,s,n=t.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&st.isXMLDoc(t)||(e=st.propFix[e]||e,s=st.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(r=s.set(t,i,e))?r:t[e]=i:s&&"get"in s&&null!==(r=s.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=st.find.attr(t,"tabindex");return e?parseInt(e,10):he.test(t.nodeName)||ae.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Z.optSelected||(st.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),st.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){st.propFix[this.toLowerCase()]=this}),st.fn.extend({addClass:function(t){var e,i,r,s,n,o,h,a=0;if($(t))return this.each(function(e){st(this).addClass(t.call(this,e,H(this)))});if((e=B(t)).length)for(;i=this[a++];)if(s=H(i),r=1===i.nodeType&&" "+D(s)+" "){for(o=0;n=e[o++];)r.indexOf(" "+n+" ")<0&&(r+=n+" ");s!==(h=D(r))&&i.setAttribute("class",h)}return this},removeClass:function(t){var e,i,r,s,n,o,h,a=0;if($(t))return this.each(function(e){st(this).removeClass(t.call(this,e,H(this)))});if(!arguments.length)return this.attr("class","");if((e=B(t)).length)for(;i=this[a++];)if(s=H(i),r=1===i.nodeType&&" "+D(s)+" "){for(o=0;n=e[o++];)for(;-1<r.indexOf(" "+n+" ");)r=r.replace(" "+n+" "," ");s!==(h=D(r))&&i.setAttribute("class",h)}return this},toggleClass:function(t,e){var i=typeof t,r="string"===i||Array.isArray(t);return"boolean"==typeof e&&r?e?this.addClass(t):this.removeClass(t):$(t)?this.each(function(i){st(this).toggleClass(t.call(this,i,H(this),e),e)}):this.each(function(){var e,s,n,o;if(r)for(s=0,n=st(this),o=B(t);e=o[s++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==t&&"boolean"!==i||((e=H(this))&&At.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":At.get(this,"__className__")||""))})},hasClass:function(t){var e,i,r=0;for(e=" "+t+" ";i=this[r++];)if(1===i.nodeType&&-1<(" "+D(H(i))+" ").indexOf(e))return!0;return!1}});var le=/\r/g;st.fn.extend({val:function(t){var e,i,r,s=this[0];return arguments.length?(r=$(t),this.each(function(i){var s;1===this.nodeType&&(null==(s=r?t.call(this,i,st(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=st.map(s,function(t){return null==t?"":t+""})),(e=st.valHooks[this.type]||st.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=st.valHooks[s.type]||st.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(le,""):null==i?"":i:void 0}}),st.extend({valHooks:{option:{get:function(t){var e=st.find.attr(t,"value");return null!=e?e:D(st.text(t))}},select:{get:function(t){var e,i,r,s=t.options,o=t.selectedIndex,h="select-one"===t.type,a=h?null:[],l=h?o+1:s.length
;for(r=o<0?l:h?o:0;r<l;r++)if(((i=s[r]).selected||r===o)&&!i.disabled&&(!i.parentNode.disabled||!n(i.parentNode,"optgroup"))){if(e=st(i).val(),h)return e;a.push(e)}return a},set:function(t,e){for(var i,r,s=t.options,n=st.makeArray(e),o=s.length;o--;)((r=s[o]).selected=-1<st.inArray(st.valHooks.option.get(r),n))&&(i=!0);return i||(t.selectedIndex=-1),n}}}}),st.each(["radio","checkbox"],function(){st.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<st.inArray(st(t).val(),e)}},Z.checkOn||(st.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Z.focusin="onfocusin"in t;var ue=/^(?:focusinfocus|focusoutblur)$/,ce=function(t){t.stopPropagation()};st.extend(st.event,{trigger:function(e,i,r,s){var n,o,h,a,l,u,c,d,f=[r||et],p=z.call(e,"type")?e.type:e,m=z.call(e,"namespace")?e.namespace.split("."):[];if(o=d=h=r=r||et,3!==r.nodeType&&8!==r.nodeType&&!ue.test(p+st.event.triggered)&&(-1<p.indexOf(".")&&(p=(m=p.split(".")).shift(),m.sort()),l=p.indexOf(":")<0&&"on"+p,(e=e[st.expando]?e:new st.Event(p,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),i=null==i?[e]:st.makeArray(i,[e]),c=st.event.special[p]||{},s||!c.trigger||!1!==c.trigger.apply(r,i))){if(!s&&!c.noBubble&&!tt(r)){for(a=c.delegateType||p,ue.test(a+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),h=o;h===(r.ownerDocument||et)&&f.push(h.defaultView||h.parentWindow||t)}for(n=0;(o=f[n++])&&!e.isPropagationStopped();)d=o,e.type=1<n?a:c.bindType||p,(u=(At.get(o,"events")||Object.create(null))[e.type]&&At.get(o,"handle"))&&u.apply(o,i),(u=l&&o[l])&&u.apply&&Et(o)&&(e.result=u.apply(o,i),!1===e.result&&e.preventDefault());return e.type=p,s||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(f.pop(),i)||!Et(r)||l&&$(r[p])&&!tt(r)&&((h=r[l])&&(r[l]=null),st.event.triggered=p,e.isPropagationStopped()&&d.addEventListener(p,ce),r[p](),e.isPropagationStopped()&&d.removeEventListener(p,ce),st.event.triggered=void 0,h&&(r[l]=h)),e.result}},simulate:function(t,e,i){var r=st.extend(new st.Event,i,{type:t,isSimulated:!0});st.event.trigger(r,null,e)}}),st.fn.extend({trigger:function(t,e){return this.each(function(){st.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return st.event.trigger(t,e,i,!0)}}),Z.focusin||st.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){st.event.simulate(e,t.target,st.event.fix(t))};st.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,s=At.access(r,e);s||r.addEventListener(t,i,!0),At.access(r,e,(s||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,s=At.access(r,e)-1;s?At.access(r,e,s):(r.removeEventListener(t,i,!0),At.remove(r,e))}}}),st.parseXML=function(e){var i;if(!e||"string"!=typeof e)return null;try{i=(new t.DOMParser).parseFromString(e,"text/xml")}catch(e){i=void 0}return i&&!i.getElementsByTagName("parsererror").length||st.error("Invalid XML: "+e),i};var de,fe=/\[\]$/,pe=/\r?\n/g,me=/^(?:submit|button|image|reset|file)$/i,ge=/^(?:input|select|textarea|keygen)/i;st.param=function(t,e){var i,r=[],s=function(t,e){var i=$(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!st.isPlainObject(t))st.each(t,function(){s(this.name,this.value)});else for(i in t)G(i,t[i],e,s);return r.join("&")},st.fn.extend({serialize:function(){return st.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=st.prop(this,"elements");return t?st.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!st(this).is(":disabled")&&ge.test(this.nodeName)&&!me.test(t)&&(this.checked||!kt.test(t))}).map(function(t,e){var i=st(this).val();return null==i?null:Array.isArray(i)?st.map(i,function(t){return{name:e.name,value:t.replace(pe,"\r\n")}}):{name:e.name,value:i.replace(pe,"\r\n")}}).get()}}),st.fn.extend({wrapAll:function(t){var e;return this[0]&&($(t)&&(t=t.call(this[0])),e=st(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return $(t)?this.each(function(e){st(this).wrapInner(t.call(this,e))}):this.each(function(){var e=st(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=$(t);return this.each(function(i){st(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){st(this).replaceWith(this.childNodes)}),this}}),st.expr.pseudos.hidden=function(t){return!st.expr.pseudos.visible(t)},st.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},Z.createHTMLDocument=((de=et.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===de.childNodes.length),st.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(Z.createHTMLDocument?((r=(e=et.implementation.createHTMLDocument("")).createElement("base")).href=et.location.href,e.head.appendChild(r)):e=et),n=!i&&[],(s=lt.exec(t))?[e.createElement(s[1])]:(s=P([t],e,n),n&&n.length&&st(n).remove(),st.merge([],s.childNodes)));var r,s,n},st.offset={setOffset:function(t,e,i){var r,s,n,o,h,a,l=st.css(t,"position"),u=st(t),c={};"static"===l&&(t.style.position="relative"),h=u.offset(),n=st.css(t,"top"),a=st.css(t,"left"),("absolute"===l||"fixed"===l)&&-1<(n+a).indexOf("auto")?(o=(r=u.position()).top,s=r.left):(o=parseFloat(n)||0,s=parseFloat(a)||0),$(e)&&(e=e.call(t,i,st.extend({},h))),null!=e.top&&(c.top=e.top-h.top+o),null!=e.left&&(c.left=e.left-h.left+s),"using"in e?e.using.call(t,c):("number"==typeof c.top&&(c.top+="px"),"number"==typeof c.left&&(c.left+="px"),u.css(c))}},st.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){st.offset.setOffset(this,t,e)});var e,i,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,r=this[0],s={top:0,left:0};if("fixed"===st.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),i=r.ownerDocument,t=r.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===st.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((s=st(t).offset()).top+=st.css(t,"borderTopWidth",!0),s.left+=st.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-st.css(r,"marginTop",!0),left:e.left-s.left-st.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===st.css(t,"position");)t=t.offsetParent;return t||Lt})}}),st.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;st.fn[t]=function(r){return vt(this,function(t,r,s){var n;if(tt(t)?n=t:9===t.nodeType&&(n=t.defaultView),void 0===s)return n?n[e]:t[r];n?n.scrollTo(i?n.pageXOffset:s,i?s:n.pageYOffset):t[r]=s},t,r,arguments.length)}}),st.each(["top","left"],function(t,e){st.cssHooks[e]=w(Z.pixelPosition,function(t,i){if(i)return i=x(t,e),Ut.test(i)?st(t).position()[e]+"px":i})}),st.each({Height:"height",Width:"width"},function(t,e){st.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,r){st.fn[r]=function(s,n){var o=arguments.length&&(i||"boolean"!=typeof s),h=i||(!0===s||!0===n?"margin":"border");return vt(this,function(e,i,s){var n;return tt(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+t],n["scroll"+t],e.body["offset"+t],n["offset"+t],n["client"+t])):void 0===s?st.css(e,i,h):st.style(e,i,s,h)},e,o?s:void 0,o)}})}),st.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,r){return this.on(e,t,i,r)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),st.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){st.fn[e]=function(t,i){return 0<arguments.length?this.on(e,null,t,i):this.trigger(e)}});var ve=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;st.proxy=function(t,e){var i,r,s;if("string"==typeof e&&(i=t[e],e=t,t=i),$(t))return r=X.call(arguments,2),(s=function(){return t.apply(e||this,r.concat(X.call(arguments)))}).guid=t.guid=t.guid||st.guid++,s},st.holdReady=function(t){t?st.readyWait++:st.ready(!0)},st.isArray=Array.isArray,st.parseJSON=JSON.parse,st.nodeName=n,st.isFunction=$,st.isWindow=tt,st.camelCase=f,st.type=r,st.now=Date.now,st.isNumeric=function(t){var e=st.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},st.trim=function(t){return null==t?"":(t+"").replace(ve,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return st});var _e=t.jQuery,Pe=t.$;return st.noConflict=function(e){return t.$===st&&(t.$=Pe),e&&t.jQuery===st&&(t.jQuery=_e),st},void 0===e&&(t.jQuery=t.$=st),st}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Popper=e()}(this,function(){"use strict";function t(t){return t&&"[object Function]"==={}.toString.call(t)}function e(t,e){if(1!==t.nodeType)return[];var i=t.ownerDocument.defaultView,r=i.getComputedStyle(t,null);return e?r[e]:r}function i(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function r(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var s=e(t),n=s.overflow,o=s.overflowX;return/(auto|scroll|overlay)/.test(n+s.overflowY+o)?t:r(i(t))}function s(t){return t&&t.referenceNode?t.referenceNode:t}function n(t){return 11===t?nt:10===t?ot:nt||ot}function o(t){if(!t)return document.documentElement;for(var i=n(10)?document.body:null,r=t.offsetParent||null;r===i&&t.nextElementSibling;)r=(t=t.nextElementSibling).offsetParent;var s=r&&r.nodeName;return s&&"BODY"!==s&&"HTML"!==s?-1!==["TH","TD","TABLE"].indexOf(r.nodeName)&&"static"===e(r,"position")?o(r):r:t?t.ownerDocument.documentElement:document.documentElement}function h(t){var e=t.nodeName;return"BODY"!==e&&("HTML"===e||o(t.firstElementChild)===t)}function a(t){return null===t.parentNode?t:a(t.parentNode)}function l(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var i=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=i?t:e,s=i?e:t,n=document.createRange();n.setStart(r,0),n.setEnd(s,0);var u=n.commonAncestorContainer;if(t!==u&&e!==u||r.contains(s))return h(u)?u:o(u);var c=a(t);return c.host?l(c.host,e):l(t,a(e).host)}function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"top",i="top"===e?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"===r||"HTML"===r){var s=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||s)[i]}return t[i]}function c(t,e){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],r=u(e,"top"),s=u(e,"left"),n=i?-1:1;return t.top+=r*n,t.bottom+=r*n,t.left+=s*n,t.right+=s*n,t}function d(t,e){var i="x"===e?"Left":"Top",r="Left"==i?"Right":"Bottom";return parseFloat(t["border"+i+"Width"])+parseFloat(t["border"+r+"Width"])}function f(t,e,i,r){return tt(e["offset"+t],e["scroll"+t],i["client"+t],i["offset"+t],i["scroll"+t],n(10)?parseInt(i["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function p(t){var e=t.body,i=t.documentElement,r=n(10)&&getComputedStyle(i);return{height:f("Height",e,i,r),width:f("Width",e,i,r)}}function m(t){return ut({},t,{right:t.left+t.width,bottom:t.top+t.height})}function g(t){var i={};try{if(n(10)){i=t.getBoundingClientRect();var r=u(t,"top"),s=u(t,"left");i.top+=r,i.left+=s,i.bottom+=r,i.right+=s}else i=t.getBoundingClientRect()}catch(t){}var o={left:i.left,top:i.top,width:i.right-i.left,height:i.bottom-i.top},h="HTML"===t.nodeName?p(t.ownerDocument):{},a=h.width||t.clientWidth||o.width,l=h.height||t.clientHeight||o.height,c=t.offsetWidth-a,f=t.offsetHeight-l;if(c||f){var g=e(t);c-=d(g,"x"),f-=d(g,"y"),o.width-=c,o.height-=f}return m(o)}function v(t,i){var s=2<arguments.length&&void 0!==arguments[2]&&arguments[2],o=n(10),h="HTML"===i.nodeName,a=g(t),l=g(i),u=r(t),d=e(i),f=parseFloat(d.borderTopWidth),p=parseFloat(d.borderLeftWidth);s&&h&&(l.top=tt(l.top,0),l.left=tt(l.left,0));var v=m({top:a.top-l.top-f,left:a.left-l.left-p,width:a.width,height:a.height});if(v.marginTop=0,v.marginLeft=0,!o&&h){var _=parseFloat(d.marginTop),P=parseFloat(d.marginLeft);v.top-=f-_,v.bottom-=f-_,v.left-=p-P,v.right-=p-P,v.marginTop=_,v.marginLeft=P}return(o&&!s?i.contains(u):i===u&&"BODY"!==u.nodeName)&&(v=c(v,i)),v}function _(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=t.ownerDocument.documentElement,r=v(t,i),s=tt(i.clientWidth,window.innerWidth||0),n=tt(i.clientHeight,window.innerHeight||0),o=e?0:u(i),h=e?0:u(i,"left");return m({top:o-r.top+r.marginTop,left:h-r.left+r.marginLeft,width:s,height:n})}function P(t){var r=t.nodeName;if("BODY"===r||"HTML"===r)return!1;if("fixed"===e(t,"position"))return!0;var s=i(t);return!!s&&P(s)}function E(t){if(!t||!t.parentElement||n())return document.documentElement;for(var i=t.parentElement;i&&"none"===e(i,"transform");)i=i.parentElement;return i||document.documentElement}function A(t,e,n,o){var h=4<arguments.length&&void 0!==arguments[4]&&arguments[4],a={top:0,left:0},u=h?E(t):l(t,s(e));if("viewport"===o)a=_(u,h);else{var c;"scrollParent"===o?(c=r(i(e)),"BODY"===c.nodeName&&(c=t.ownerDocument.documentElement)):c="window"===o?t.ownerDocument.documentElement:o;var d=v(c,u,h);if("HTML"!==c.nodeName||P(u))a=d;else{var f=p(t.ownerDocument),m=f.height,g=f.width;a.top+=d.top-d.marginTop,a.bottom=m+d.top,a.left+=d.left-d.marginLeft,a.right=g+d.left}}n=n||0;var A="number"==typeof n;return a.left+=A?n:n.left||0,a.top+=A?n:n.top||0,a.right-=A?n:n.right||0,a.bottom-=A?n:n.bottom||0,a}function O(t){return t.width*t.height}function b(t,e,i,r,s){var n=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;if(-1===t.indexOf("auto"))return t;var o=A(i,r,n,s),h={top:{width:o.width,height:e.top-o.top},right:{width:o.right-e.right,height:o.height},bottom:{width:o.width,height:o.bottom-e.bottom},left:{width:e.left-o.left,height:o.height}},a=Object.keys(h).map(function(t){return ut({key:t},h[t],{area:O(h[t])})}).sort(function(t,e){return e.area-t.area}),l=a.filter(function(t){var e=t.width,r=t.height;return e>=i.clientWidth&&r>=i.clientHeight}),u=0<l.length?l[0].key:a[0].key,c=t.split("-")[1];return u+(c?"-"+c:"")}function S(t,e,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return v(i,r?E(e):l(e,s(i)),r)}function T(t){var e=t.ownerDocument.defaultView,i=e.getComputedStyle(t),r=parseFloat(i.marginTop||0)+parseFloat(i.marginBottom||0),s=parseFloat(i.marginLeft||0)+parseFloat(i.marginRight||0);return{width:t.offsetWidth+s,height:t.offsetHeight+r}}function y(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function C(t,e,i){i=i.split("-")[0];var r=T(t),s={width:r.width,height:r.height},n=-1!==["right","left"].indexOf(i),o=n?"top":"left",h=n?"left":"top",a=n?"height":"width",l=n?"width":"height";return s[o]=e[o]+e[a]/2-r[a]/2,s[h]=i===h?e[h]-r[l]:e[y(h)],s}function L(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function I(t,e,i){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===i});var r=L(t,function(t){return t[e]===i});return t.indexOf(r)}function F(e,i,r){return(void 0===r?e:e.slice(0,I(e,"name",r))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var r=e.function||e.fn;e.enabled&&t(r)&&(i.offsets.popper=m(i.offsets.popper),i.offsets.reference=m(i.offsets.reference),i=r(i,e))}),i}function x(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=S(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=b(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=C(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=F(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}function w(t,e){return t.some(function(t){var i=t.name;return t.enabled&&i===e})}function M(t){for(var e=[!1,"ms","Webkit","Moz","O"],i=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var s=e[r],n=s?""+s+i:t;if(void 0!==document.body.style[n])return n}return null}function R(){return this.state.isDestroyed=!0,w(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[M("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}function k(t){var e=t.ownerDocument;return e?e.defaultView:window}function N(t,e,i,s){var n="BODY"===t.nodeName,o=n?t.ownerDocument.defaultView:t;o.addEventListener(e,i,{passive:!0}),n||N(r(o.parentNode),e,i,s),s.push(o)}function D(t,e,i,s){i.updateBound=s,k(t).addEventListener("resize",i.updateBound,{passive:!0});var n=r(t);return N(n,"scroll",i.updateBound,i.scrollParents),i.scrollElement=n,i.eventsEnabled=!0,i}function H(){this.state.eventsEnabled||(this.state=D(this.reference,this.options,this.state,this.scheduleUpdate))}function B(t,e){return k(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e}function G(){this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=B(this.reference,this.state))}function j(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function Y(t,e){Object.keys(e).forEach(function(i){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&j(e[i])&&(r="px"),t.style[i]=e[i]+r})}function X(t,e){Object.keys(e).forEach(function(i){!1===e[i]?t.removeAttribute(i):t.setAttribute(i,e[i])})}function W(t,e){var i=t.offsets,r=i.popper,s=i.reference,n=$,o=function(t){return t},h=n(s.width),a=n(r.width),l=-1!==["left","right"].indexOf(t.placement),u=-1!==t.placement.indexOf("-"),c=e?l||u||h%2==a%2?n:Z:o,d=e?n:o;return{left:c(1==h%2&&1==a%2&&!u&&e?r.left-1:r.left),top:d(r.top),bottom:d(r.bottom),right:c(r.right)}}function V(t,e,i){var r=L(t,function(t){return t.name===e}),s=!!r&&t.some(function(t){return t.name===i&&t.enabled&&t.order<r.order});if(!s){var n="`"+e+"`";console.warn("`"+i+"` modifier is required by "+n+" modifier in order to work, be sure to include it before "+n+"!")}return s}function U(t){return"end"===t?"start":"start"===t?"end":t}function K(t){var e=1<arguments.length&&void 0!==arguments[1]&&arguments[1],i=ft.indexOf(t),r=ft.slice(i+1).concat(ft.slice(0,i));return e?r.reverse():r}function q(t,e,i,r){var s=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),n=+s[1],o=s[2];if(!n)return t;if(0===o.indexOf("%")){var h;switch(o){case"%p":h=i;break;case"%":case"%r":default:h=r}return m(h)[e]/100*n}if("vh"===o||"vw"===o){return("vh"===o?tt(document.documentElement.clientHeight,window.innerHeight||0):tt(document.documentElement.clientWidth,window.innerWidth||0))/100*n}return n}function z(t,e,i,r){var s=[0,0],n=-1!==["right","left"].indexOf(r),o=t.split(/(\+|\-)/).map(function(t){return t.trim()}),h=o.indexOf(L(o,function(t){return-1!==t.search(/,|\s/)}));o[h]&&-1===o[h].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var a=/\s*,\s*|\s+/,l=-1===h?[o]:[o.slice(0,h).concat([o[h].split(a)[0]]),[o[h].split(a)[1]].concat(o.slice(h+1))];return l=l.map(function(t,r){var s=(1===r?!n:n)?"height":"width",o=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,o=!0,t):o?(t[t.length-1]+=e,o=!1,t):t.concat(e)},[]).map(function(t){return q(t,s,e,i)})}),l.forEach(function(t,e){t.forEach(function(i,r){j(i)&&(s[e]+=i*("-"===t[r-1]?-1:1))})}),s}function J(t,e){var i,r=e.offset,s=t.placement,n=t.offsets,o=n.popper,h=n.reference,a=s.split("-")[0];return i=j(+r)?[+r,0]:z(r,o,h,a),"left"===a?(o.top+=i[0],o.left-=i[1]):"right"===a?(o.top+=i[0],o.left+=i[1]):"top"===a?(o.left+=i[0],o.top-=i[1]):"bottom"===a&&(o.left+=i[0],o.top+=i[1]),t.popper=o,t}var Q=Math.min,Z=Math.floor,$=Math.round,tt=Math.max,et="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,it=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(et&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}(),rt=et&&window.Promise,st=rt?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},it))}},nt=et&&!(!window.MSInputMethodContext||!document.documentMode),ot=et&&/MSIE 10/.test(navigator.userAgent),ht=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},at=function(){function t(t,e){for(var i,r=0;r<e.length;r++)i=e[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),lt=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t},ut=Object.assign||function(t){for(var e,i=1;i<arguments.length;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ct=et&&/Firefox/i.test(navigator.userAgent),dt=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],ft=dt.slice(3),pt={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"},mt=function(){function e(i,r){var s=this,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};ht(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(s.update)},this.update=st(this.update.bind(this)),this.options=ut({},e.Defaults,n),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=i&&i.jquery?i[0]:i,this.popper=r&&r.jquery?r[0]:r,this.options.modifiers={},Object.keys(ut({},e.Defaults.modifiers,n.modifiers)).forEach(function(t){s.options.modifiers[t]=ut({},e.Defaults.modifiers[t]||{},n.modifiers?n.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return ut({name:t},s.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(e){e.enabled&&t(e.onLoad)&&e.onLoad(s.reference,s.popper,s.options,e,s.state)}),this.update();var o=this.options.eventsEnabled;o&&this.enableEventListeners(),this.state.eventsEnabled=o}return at(e,[{key:"update",value:function(){return x.call(this)}},{key:"destroy",value:function(){return R.call(this)}},{key:"enableEventListeners",value:function(){return H.call(this)}},{key:"disableEventListeners",value:function(){return G.call(this)}}]),e}();return mt.Utils=("undefined"==typeof window?global:window).PopperUtils,mt.placements=dt,mt.Defaults={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,i=e.split("-")[0],r=e.split("-")[1];if(r){var s=t.offsets,n=s.reference,o=s.popper,h=-1!==["bottom","top"].indexOf(i),a=h?"left":"top",l=h?"width":"height",u={start:lt({},a,n[a]),end:lt({},a,n[a]+n[l]-o[l])};t.offsets.popper=ut({},o,u[r])}return t}},offset:{order:200,enabled:!0,fn:J,offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,e){var i=e.boundariesElement||o(t.instance.popper);t.instance.reference===i&&(i=o(i));var r=M("transform"),s=t.instance.popper.style,n=s.top,h=s.left,a=s[r];s.top="",s.left="",s[r]="";var l=A(t.instance.popper,t.instance.reference,e.padding,i,t.positionFixed);s.top=n,s.left=h,s[r]=a,e.boundaries=l;var u=e.priority,c=t.offsets.popper,d={primary:function(t){var i=c[t];return c[t]<l[t]&&!e.escapeWithReference&&(i=tt(c[t],l[t])),lt({},t,i)},secondary:function(t){var i="right"===t?"left":"top",r=c[i];return c[t]>l[t]&&!e.escapeWithReference&&(r=Q(c[i],l[t]-("right"===t?c.width:c.height))),lt({},i,r)}};return u.forEach(function(t){var e=-1===["left","top"].indexOf(t)?"secondary":"primary";c=ut({},c,d[e](t))}),t.offsets.popper=c,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,i=e.popper,r=e.reference,s=t.placement.split("-")[0],n=Z,o=-1!==["top","bottom"].indexOf(s),h=o?"right":"bottom",a=o?"left":"top",l=o?"width":"height";return i[h]<n(r[a])&&(t.offsets.popper[a]=n(r[a])-i[l]),i[a]>n(r[h])&&(t.offsets.popper[a]=n(r[h])),t}},arrow:{order:500,enabled:!0,fn:function(t,i){var r;if(!V(t.instance.modifiers,"arrow","keepTogether"))return t;var s=i.element;if("string"==typeof s){if(!(s=t.instance.popper.querySelector(s)))return t}else if(!t.instance.popper.contains(s))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var n=t.placement.split("-")[0],o=t.offsets,h=o.popper,a=o.reference,l=-1!==["left","right"].indexOf(n),u=l?"height":"width",c=l?"Top":"Left",d=c.toLowerCase(),f=l?"left":"top",p=l?"bottom":"right",g=T(s)[u];a[p]-g<h[d]&&(t.offsets.popper[d]-=h[d]-(a[p]-g)),a[d]+g>h[p]&&(t.offsets.popper[d]+=a[d]+g-h[p]),t.offsets.popper=m(t.offsets.popper);var v=a[d]+a[u]/2-g/2,_=e(t.instance.popper),P=parseFloat(_["margin"+c]),E=parseFloat(_["border"+c+"Width"]),A=v-t.offsets.popper[d]-P-E;return A=tt(Q(h[u]-g,A),0),t.arrowElement=s,t.offsets.arrow=(r={},lt(r,d,$(A)),lt(r,f,""),r),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(t,e){if(w(t.instance.modifiers,"inner"))return t;if(t.flipped&&t.placement===t.originalPlacement)return t;var i=A(t.instance.popper,t.instance.reference,e.padding,e.boundariesElement,t.positionFixed),r=t.placement.split("-")[0],s=y(r),n=t.placement.split("-")[1]||"",o=[];switch(e.behavior){case pt.FLIP:o=[r,s];break;case pt.CLOCKWISE:o=K(r);break;case pt.COUNTERCLOCKWISE:o=K(r,!0);break;default:o=e.behavior}return o.forEach(function(h,a){if(r!==h||o.length===a+1)return t;r=t.placement.split("-")[0],s=y(r);var l=t.offsets.popper,u=t.offsets.reference,c=Z,d="left"===r&&c(l.right)>c(u.left)||"right"===r&&c(l.left)<c(u.right)||"top"===r&&c(l.bottom)>c(u.top)||"bottom"===r&&c(l.top)<c(u.bottom),f=c(l.left)<c(i.left),p=c(l.right)>c(i.right),m=c(l.top)<c(i.top),g=c(l.bottom)>c(i.bottom),v="left"===r&&f||"right"===r&&p||"top"===r&&m||"bottom"===r&&g,_=-1!==["top","bottom"].indexOf(r),P=!!e.flipVariations&&(_&&"start"===n&&f||_&&"end"===n&&p||!_&&"start"===n&&m||!_&&"end"===n&&g),E=!!e.flipVariationsByContent&&(_&&"start"===n&&p||_&&"end"===n&&f||!_&&"start"===n&&g||!_&&"end"===n&&m),A=P||E;(d||v||A)&&(t.flipped=!0,(d||v)&&(r=o[a+1]),A&&(n=U(n)),t.placement=r+(n?"-"+n:""),t.offsets.popper=ut({},t.offsets.popper,C(t.instance.popper,t.offsets.reference,t.placement)),t=F(t.instance.modifiers,t,"flip"))}),t},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,i=e.split("-")[0],r=t.offsets,s=r.popper,n=r.reference,o=-1!==["left","right"].indexOf(i),h=-1===["top","left"].indexOf(i);return s[o?"left":"top"]=n[i]-(h?s[o?"width":"height"]:0),t.placement=y(e),t.offsets.popper=m(s),t}},hide:{order:800,enabled:!0,fn:function(t){if(!V(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,i=L(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<i.top||e.left>i.right||e.top>i.bottom||e.right<i.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var i=e.x,r=e.y,s=t.offsets.popper,n=L(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==n&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var h,a,l=void 0===n?e.gpuAcceleration:n,u=o(t.instance.popper),c=g(u),d={position:s.position},f=W(t,2>window.devicePixelRatio||!ct),p="bottom"===i?"top":"bottom",m="right"===r?"left":"right",v=M("transform");if(a="bottom"==p?"HTML"===u.nodeName?-u.clientHeight+f.bottom:-c.height+f.bottom:f.top,h="right"==m?"HTML"===u.nodeName?-u.clientWidth+f.right:-c.width+f.right:f.left,l&&v)d[v]="translate3d("+h+"px, "+a+"px, 0)",d[p]=0,d[m]=0,d.willChange="transform";else{var _="bottom"==p?-1:1,P="right"==m?-1:1;d[p]=a*_,d[m]=h*P,d.willChange=p+", "+m}var E={"x-placement":t.placement};return t.attributes=ut({},E,t.attributes),t.styles=ut({},d,t.styles),t.arrowStyles=ut({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){return Y(t.instance.popper,t.styles),X(t.instance.popper,t.attributes),t.arrowElement&&Object.keys(t.arrowStyles).length&&Y(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,i,r,s){var n=S(s,e,t,i.positionFixed),o=b(i.placement,n,e,t,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return e.setAttribute("x-placement",o),Y(e,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},mt}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("jquery"),require("popper.js")):"function"==typeof define&&define.amd?define(["exports","jquery","popper.js"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap={},t.jQuery,t.Popper)}(this,function(t,e,i){"use strict";function r(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(this,arguments)}function o(t){var i=this,r=!1;return e(this).one(a.TRANSITION_END,function(){r=!0}),setTimeout(function(){r||a.triggerTransitionEnd(i)},t),this}function h(t,e,i){if(0===t.length)return t;if(i&&"function"==typeof i)return i(t);for(var r=(new window.DOMParser).parseFromString(t,"text/html"),s=Object.keys(e),n=[].slice.call(r.body.querySelectorAll("*")),o=0,h=n.length;o<h;o++)!function(t,i){var r=n[t],o=r.nodeName.toLowerCase();if(-1===s.indexOf(r.nodeName.toLowerCase()))return r.parentNode.removeChild(r),"continue";var h=[].slice.call(r.attributes),a=[].concat(e["*"]||[],e[o]||[]);h.forEach(function(t){(function(t,e){var i=t.nodeName.toLowerCase();if(-1!==e.indexOf(i))return-1===k.indexOf(i)||Boolean(t.nodeValue.match(D)||t.nodeValue.match(H));for(var r=e.filter(function(t){return t instanceof RegExp}),s=0,n=r.length;s<n;s++)if(i.match(r[s]))return!0;return!1})(t,a)||r.removeAttribute(t.nodeName)})
}(o);return r.body.innerHTML}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var a={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");if(!e||"#"===e){var i=t.getAttribute("href");e=i&&"#"!==i?i.trim():""}try{return document.querySelector(e)?e:null}catch(t){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=e(t).css("transition-duration"),r=e(t).css("transition-delay"),s=parseFloat(i),n=parseFloat(r);return s||n?(i=i.split(",")[0],r=r.split(",")[0],1e3*(parseFloat(i)+parseFloat(r))):0},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(t){e(t).trigger("transitionend")},supportsTransitionEnd:function(){return Boolean("transitionend")},isElement:function(t){return(t[0]||t).nodeType},typeCheckConfig:function(t,e,i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)){var s=i[r],n=e[r],o=n&&a.isElement(n)?"element":null===(h=n)||void 0===h?""+h:{}.toString.call(h).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(s).test(o))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+o+'" but expected type "'+s+'".')}var h},findShadowRoot:function(t){if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){var e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?a.findShadowRoot(t.parentNode):null},jQueryDetection:function(){if(void 0===e)throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1===t[0]&&9===t[1]&&t[2]<1||t[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}};a.jQueryDetection(),e.fn.emulateTransitionEnd=o,e.event.special[a.TRANSITION_END]={bindType:"transitionend",delegateType:"transitionend",handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}};var l="alert",u=e.fn[l],c=function(){function t(t){this._element=t}var i=t.prototype;return i.close=function(t){var e=this._element;t&&(e=this._getRootElement(t)),this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},i.dispose=function(){e.removeData(this._element,"bs.alert"),this._element=null},i._getRootElement=function(t){var i=a.getSelectorFromElement(t),r=!1;return i&&(r=document.querySelector(i)),r||(r=e(t).closest(".alert")[0]),r},i._triggerCloseEvent=function(t){var i=e.Event("close.bs.alert");return e(t).trigger(i),i},i._removeElement=function(t){var i=this;if(e(t).removeClass("show"),e(t).hasClass("fade")){var r=a.getTransitionDurationFromElement(t);e(t).one(a.TRANSITION_END,function(e){return i._destroyElement(t,e)}).emulateTransitionEnd(r)}else this._destroyElement(t)},i._destroyElement=function(t){e(t).detach().trigger("closed.bs.alert").remove()},t._jQueryInterface=function(i){return this.each(function(){var r=e(this),s=r.data("bs.alert");s||(s=new t(this),r.data("bs.alert",s)),"close"===i&&s[i](this)})},t._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}}]),t}();e(document).on("click.bs.alert.data-api",'[data-dismiss="alert"]',c._handleDismiss(new c)),e.fn[l]=c._jQueryInterface,e.fn[l].Constructor=c,e.fn[l].noConflict=function(){return e.fn[l]=u,c._jQueryInterface};var d=e.fn.button,f=function(){function t(t){this._element=t}var i=t.prototype;return i.toggle=function(){var t=!0,i=!0,r=e(this._element).closest('[data-toggle="buttons"]')[0];if(r){var s=this._element.querySelector('input:not([type="hidden"])');if(s){if("radio"===s.type)if(s.checked&&this._element.classList.contains("active"))t=!1;else{var n=r.querySelector(".active");n&&e(n).removeClass("active")}t&&("checkbox"!==s.type&&"radio"!==s.type||(s.checked=!this._element.classList.contains("active")),e(s).trigger("change")),s.focus(),i=!1}}this._element.hasAttribute("disabled")||this._element.classList.contains("disabled")||(i&&this._element.setAttribute("aria-pressed",!this._element.classList.contains("active")),t&&e(this._element).toggleClass("active"))},i.dispose=function(){e.removeData(this._element,"bs.button"),this._element=null},t._jQueryInterface=function(i){return this.each(function(){var r=e(this).data("bs.button");r||(r=new t(this),e(this).data("bs.button",r)),"toggle"===i&&r[i]()})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}}]),t}();e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(t){var i=t.target,r=i;if(e(i).hasClass("btn")||(i=e(i).closest(".btn")[0]),!i||i.hasAttribute("disabled")||i.classList.contains("disabled"))t.preventDefault();else{var s=i.querySelector('input:not([type="hidden"])');if(s&&(s.hasAttribute("disabled")||s.classList.contains("disabled")))return void t.preventDefault();("LABEL"!==r.tagName||s&&"checkbox"!==s.type)&&f._jQueryInterface.call(e(i),"toggle")}}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){var i=e(t.target).closest(".btn")[0];e(i).toggleClass("focus",/^focus(in)?$/.test(t.type))}),e(window).on("load.bs.button.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-toggle="buttons"] .btn')),e=0,i=t.length;e<i;e++){var r=t[e],s=r.querySelector('input:not([type="hidden"])');s.checked||s.hasAttribute("checked")?r.classList.add("active"):r.classList.remove("active")}for(var n=0,o=(t=[].slice.call(document.querySelectorAll('[data-toggle="button"]'))).length;n<o;n++){var h=t[n];"true"===h.getAttribute("aria-pressed")?h.classList.add("active"):h.classList.remove("active")}}),e.fn.button=f._jQueryInterface,e.fn.button.Constructor=f,e.fn.button.noConflict=function(){return e.fn.button=d,f._jQueryInterface};var p="carousel",m=e.fn[p],g={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},v={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},_={TOUCH:"touch",PEN:"pen"},P=function(){function t(t,e){this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(e),this._element=t,this._indicatorsElement=this._element.querySelector(".carousel-indicators"),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent),this._addEventListeners()}var i=t.prototype;return i.next=function(){this._isSliding||this._slide("next")},i.nextWhenVisible=function(){!document.hidden&&e(this._element).is(":visible")&&"hidden"!==e(this._element).css("visibility")&&this.next()},i.prev=function(){this._isSliding||this._slide("prev")},i.pause=function(t){t||(this._isPaused=!0),this._element.querySelector(".carousel-item-next, .carousel-item-prev")&&(a.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},i.cycle=function(t){t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},i.to=function(t){var i=this;this._activeElement=this._element.querySelector(".active.carousel-item");var r=this._getItemIndex(this._activeElement);if(!(t>this._items.length-1||t<0))if(this._isSliding)e(this._element).one("slid.bs.carousel",function(){return i.to(t)});else{if(r===t)return this.pause(),void this.cycle();var s=t>r?"next":"prev";this._slide(s,this._items[t])}},i.dispose=function(){e(this._element).off(".bs.carousel"),e.removeData(this._element,"bs.carousel"),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},i._getConfig=function(t){return t=n({},g,t),a.typeCheckConfig(p,t,v),t},i._handleSwipe=function(){var t=Math.abs(this.touchDeltaX);if(!(t<=40)){var e=t/this.touchDeltaX;this.touchDeltaX=0,e>0&&this.prev(),e<0&&this.next()}},i._addEventListeners=function(){var t=this;this._config.keyboard&&e(this._element).on("keydown.bs.carousel",function(e){return t._keydown(e)}),"hover"===this._config.pause&&e(this._element).on("mouseenter.bs.carousel",function(e){return t.pause(e)}).on("mouseleave.bs.carousel",function(e){return t.cycle(e)}),this._config.touch&&this._addTouchEventListeners()},i._addTouchEventListeners=function(){var t=this;if(this._touchSupported){var i=function(e){t._pointerEvent&&_[e.originalEvent.pointerType.toUpperCase()]?t.touchStartX=e.originalEvent.clientX:t._pointerEvent||(t.touchStartX=e.originalEvent.touches[0].clientX)},r=function(e){t._pointerEvent&&_[e.originalEvent.pointerType.toUpperCase()]&&(t.touchDeltaX=e.originalEvent.clientX-t.touchStartX),t._handleSwipe(),"hover"===t._config.pause&&(t.pause(),t.touchTimeout&&clearTimeout(t.touchTimeout),t.touchTimeout=setTimeout(function(e){return t.cycle(e)},500+t._config.interval))};e(this._element.querySelectorAll(".carousel-item img")).on("dragstart.bs.carousel",function(t){return t.preventDefault()}),this._pointerEvent?(e(this._element).on("pointerdown.bs.carousel",function(t){return i(t)}),e(this._element).on("pointerup.bs.carousel",function(t){return r(t)}),this._element.classList.add("pointer-event")):(e(this._element).on("touchstart.bs.carousel",function(t){return i(t)}),e(this._element).on("touchmove.bs.carousel",function(e){return function(e){e.originalEvent.touches&&e.originalEvent.touches.length>1?t.touchDeltaX=0:t.touchDeltaX=e.originalEvent.touches[0].clientX-t.touchStartX}(e)}),e(this._element).on("touchend.bs.carousel",function(t){return r(t)}))}},i._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case 37:t.preventDefault(),this.prev();break;case 39:t.preventDefault(),this.next()}},i._getItemIndex=function(t){return this._items=t&&t.parentNode?[].slice.call(t.parentNode.querySelectorAll(".carousel-item")):[],this._items.indexOf(t)},i._getItemByDirection=function(t,e){var i="next"===t,r="prev"===t,s=this._getItemIndex(e),n=this._items.length-1;if((r&&0===s||i&&s===n)&&!this._config.wrap)return e;var o=(s+("prev"===t?-1:1))%this._items.length;return-1===o?this._items[this._items.length-1]:this._items[o]},i._triggerSlideEvent=function(t,i){var r=this._getItemIndex(t),s=this._getItemIndex(this._element.querySelector(".active.carousel-item")),n=e.Event("slide.bs.carousel",{relatedTarget:t,direction:i,from:s,to:r});return e(this._element).trigger(n),n},i._setActiveIndicatorElement=function(t){if(this._indicatorsElement){var i=[].slice.call(this._indicatorsElement.querySelectorAll(".active"));e(i).removeClass("active");var r=this._indicatorsElement.children[this._getItemIndex(t)];r&&e(r).addClass("active")}},i._slide=function(t,i){var r,s,n,o=this,h=this._element.querySelector(".active.carousel-item"),l=this._getItemIndex(h),u=i||h&&this._getItemByDirection(t,h),c=this._getItemIndex(u),d=Boolean(this._interval);if("next"===t?(r="carousel-item-left",s="carousel-item-next",n="left"):(r="carousel-item-right",s="carousel-item-prev",n="right"),u&&e(u).hasClass("active"))this._isSliding=!1;else if(!this._triggerSlideEvent(u,n).isDefaultPrevented()&&h&&u){this._isSliding=!0,d&&this.pause(),this._setActiveIndicatorElement(u);var f=e.Event("slid.bs.carousel",{relatedTarget:u,direction:n,from:l,to:c});if(e(this._element).hasClass("slide")){e(u).addClass(s),a.reflow(u),e(h).addClass(r),e(u).addClass(r);var p=parseInt(u.getAttribute("data-interval"),10);p?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=p):this._config.interval=this._config.defaultInterval||this._config.interval;var m=a.getTransitionDurationFromElement(h);e(h).one(a.TRANSITION_END,function(){e(u).removeClass(r+" "+s).addClass("active"),e(h).removeClass("active "+s+" "+r),o._isSliding=!1,setTimeout(function(){return e(o._element).trigger(f)},0)}).emulateTransitionEnd(m)}else e(h).removeClass("active"),e(u).addClass("active"),this._isSliding=!1,e(this._element).trigger(f);d&&this.cycle()}},t._jQueryInterface=function(i){return this.each(function(){var r=e(this).data("bs.carousel"),s=n({},g,e(this).data());"object"==typeof i&&(s=n({},s,i));var o="string"==typeof i?i:s.slide;if(r||(r=new t(this,s),e(this).data("bs.carousel",r)),"number"==typeof i)r.to(i);else if("string"==typeof o){if(void 0===r[o])throw new TypeError('No method named "'+o+'"');r[o]()}else s.interval&&s.ride&&(r.pause(),r.cycle())})},t._dataApiClickHandler=function(i){var r=a.getSelectorFromElement(this);if(r){var s=e(r)[0];if(s&&e(s).hasClass("carousel")){var o=n({},e(s).data(),e(this).data()),h=this.getAttribute("data-slide-to");h&&(o.interval=!1),t._jQueryInterface.call(e(s),o),h&&e(s).data("bs.carousel").to(h),i.preventDefault()}}},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return g}}]),t}();e(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",P._dataApiClickHandler),e(window).on("load.bs.carousel.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-ride="carousel"]')),i=0,r=t.length;i<r;i++){var s=e(t[i]);P._jQueryInterface.call(s,s.data())}}),e.fn[p]=P._jQueryInterface,e.fn[p].Constructor=P,e.fn[p].noConflict=function(){return e.fn[p]=m,P._jQueryInterface};var E="collapse",A=e.fn[E],O={toggle:!0,parent:""},b={toggle:"boolean",parent:"(string|element)"},S=function(){function t(t,e){this._isTransitioning=!1,this._element=t,this._config=this._getConfig(e),this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'));for(var i=[].slice.call(document.querySelectorAll('[data-toggle="collapse"]')),r=0,s=i.length;r<s;r++){var n=i[r],o=a.getSelectorFromElement(n),h=[].slice.call(document.querySelectorAll(o)).filter(function(e){return e===t});null!==o&&h.length>0&&(this._selector=o,this._triggerArray.push(n))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}var i=t.prototype;return i.toggle=function(){e(this._element).hasClass("show")?this.hide():this.show()},i.show=function(){var i,r,s=this;if(!(this._isTransitioning||e(this._element).hasClass("show")||(this._parent&&0===(i=[].slice.call(this._parent.querySelectorAll(".show, .collapsing")).filter(function(t){return"string"==typeof s._config.parent?t.getAttribute("data-parent")===s._config.parent:t.classList.contains("collapse")})).length&&(i=null),i&&(r=e(i).not(this._selector).data("bs.collapse"))&&r._isTransitioning))){var n=e.Event("show.bs.collapse");if(e(this._element).trigger(n),!n.isDefaultPrevented()){i&&(t._jQueryInterface.call(e(i).not(this._selector),"hide"),r||e(i).data("bs.collapse",null));var o=this._getDimension();e(this._element).removeClass("collapse").addClass("collapsing"),this._element.style[o]=0,this._triggerArray.length&&e(this._triggerArray).removeClass("collapsed").attr("aria-expanded",!0),this.setTransitioning(!0);var h="scroll"+(o[0].toUpperCase()+o.slice(1)),l=a.getTransitionDurationFromElement(this._element);e(this._element).one(a.TRANSITION_END,function(){e(s._element).removeClass("collapsing").addClass("collapse show"),s._element.style[o]="",s.setTransitioning(!1),e(s._element).trigger("shown.bs.collapse")}).emulateTransitionEnd(l),this._element.style[o]=this._element[h]+"px"}}},i.hide=function(){var t=this;if(!this._isTransitioning&&e(this._element).hasClass("show")){var i=e.Event("hide.bs.collapse");if(e(this._element).trigger(i),!i.isDefaultPrevented()){var r=this._getDimension();this._element.style[r]=this._element.getBoundingClientRect()[r]+"px",a.reflow(this._element),e(this._element).addClass("collapsing").removeClass("collapse show");var s=this._triggerArray.length;if(s>0)for(var n=0;n<s;n++){var o=this._triggerArray[n],h=a.getSelectorFromElement(o);null!==h&&(e([].slice.call(document.querySelectorAll(h))).hasClass("show")||e(o).addClass("collapsed").attr("aria-expanded",!1))}this.setTransitioning(!0),this._element.style[r]="";var l=a.getTransitionDurationFromElement(this._element);e(this._element).one(a.TRANSITION_END,function(){t.setTransitioning(!1),e(t._element).removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")}).emulateTransitionEnd(l)}}},i.setTransitioning=function(t){this._isTransitioning=t},i.dispose=function(){e.removeData(this._element,"bs.collapse"),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i._getConfig=function(t){return(t=n({},O,t)).toggle=Boolean(t.toggle),a.typeCheckConfig(E,t,b),t},i._getDimension=function(){return e(this._element).hasClass("width")?"width":"height"},i._getParent=function(){var i,r=this;a.isElement(this._config.parent)?(i=this._config.parent,void 0!==this._config.parent.jquery&&(i=this._config.parent[0])):i=document.querySelector(this._config.parent);var s='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]',n=[].slice.call(i.querySelectorAll(s));return e(n).each(function(e,i){r._addAriaAndCollapsedClass(t._getTargetFromElement(i),[i])}),i},i._addAriaAndCollapsedClass=function(t,i){var r=e(t).hasClass("show");i.length&&e(i).toggleClass("collapsed",!r).attr("aria-expanded",r)},t._getTargetFromElement=function(t){var e=a.getSelectorFromElement(t);return e?document.querySelector(e):null},t._jQueryInterface=function(i){return this.each(function(){var r=e(this),s=r.data("bs.collapse"),o=n({},O,r.data(),"object"==typeof i&&i?i:{});if(!s&&o.toggle&&"string"==typeof i&&/show|hide/.test(i)&&(o.toggle=!1),s||(s=new t(this,o),r.data("bs.collapse",s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i]()}})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return O}}]),t}();e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(t){"A"===t.currentTarget.tagName&&t.preventDefault();var i=e(this),r=a.getSelectorFromElement(this),s=[].slice.call(document.querySelectorAll(r));e(s).each(function(){var t=e(this),r=t.data("bs.collapse")?"toggle":i.data();S._jQueryInterface.call(t,r)})}),e.fn[E]=S._jQueryInterface,e.fn[E].Constructor=S,e.fn[E].noConflict=function(){return e.fn[E]=A,S._jQueryInterface};var T="dropdown",y=e.fn[T],C=new RegExp("38|40|27"),L={offset:0,flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},I={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},F=function(){function t(t,e){this._element=t,this._popper=null,this._config=this._getConfig(e),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}var r=t.prototype;return r.toggle=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")){var i=e(this._menu).hasClass("show");t._clearMenus(),i||this.show(!0)}},r.show=function(r){if(void 0===r&&(r=!1),!(this._element.disabled||e(this._element).hasClass("disabled")||e(this._menu).hasClass("show"))){var s={relatedTarget:this._element},n=e.Event("show.bs.dropdown",s),o=t._getParentFromElement(this._element);if(e(o).trigger(n),!n.isDefaultPrevented()){if(!this._inNavbar&&r){if(void 0===i)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)");var h=this._element;"parent"===this._config.reference?h=o:a.isElement(this._config.reference)&&(h=this._config.reference,void 0!==this._config.reference.jquery&&(h=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e(o).addClass("position-static"),this._popper=new i(h,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&0===e(o).closest(".navbar-nav").length&&e(document.body).children().on("mouseover",null,e.noop),this._element.focus(),this._element.setAttribute("aria-expanded",!0),e(this._menu).toggleClass("show"),e(o).toggleClass("show").trigger(e.Event("shown.bs.dropdown",s))}}},r.hide=function(){if(!this._element.disabled&&!e(this._element).hasClass("disabled")&&e(this._menu).hasClass("show")){var i={relatedTarget:this._element},r=e.Event("hide.bs.dropdown",i),s=t._getParentFromElement(this._element);e(s).trigger(r),r.isDefaultPrevented()||(this._popper&&this._popper.destroy(),e(this._menu).toggleClass("show"),e(s).toggleClass("show").trigger(e.Event("hidden.bs.dropdown",i)))}},r.dispose=function(){e.removeData(this._element,"bs.dropdown"),e(this._element).off(".bs.dropdown"),this._element=null,this._menu=null,null!==this._popper&&(this._popper.destroy(),this._popper=null)},r.update=function(){this._inNavbar=this._detectNavbar(),null!==this._popper&&this._popper.scheduleUpdate()},r._addEventListeners=function(){var t=this;e(this._element).on("click.bs.dropdown",function(e){e.preventDefault(),e.stopPropagation(),t.toggle()})},r._getConfig=function(t){return t=n({},this.constructor.Default,e(this._element).data(),t),a.typeCheckConfig(T,t,this.constructor.DefaultType),t},r._getMenuElement=function(){if(!this._menu){var e=t._getParentFromElement(this._element);e&&(this._menu=e.querySelector(".dropdown-menu"))}return this._menu},r._getPlacement=function(){var t=e(this._element.parentNode),i="bottom-start";return t.hasClass("dropup")?i=e(this._menu).hasClass("dropdown-menu-right")?"top-end":"top-start":t.hasClass("dropright")?i="right-start":t.hasClass("dropleft")?i="left-start":e(this._menu).hasClass("dropdown-menu-right")&&(i="bottom-end"),i},r._detectNavbar=function(){return e(this._element).closest(".navbar").length>0},r._getOffset=function(){var t=this,e={};return"function"==typeof this._config.offset?e.fn=function(e){return e.offsets=n({},e.offsets,t._config.offset(e.offsets,t._element)||{}),e}:e.offset=this._config.offset,e},r._getPopperConfig=function(){var t={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};return"static"===this._config.display&&(t.modifiers.applyStyle={enabled:!1}),n({},t,this._config.popperConfig)},t._jQueryInterface=function(i){return this.each(function(){var r=e(this).data("bs.dropdown");if(r||(r=new t(this,"object"==typeof i?i:null),e(this).data("bs.dropdown",r)),"string"==typeof i){if(void 0===r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},t._clearMenus=function(i){if(!i||3!==i.which&&("keyup"!==i.type||9===i.which))for(var r=[].slice.call(document.querySelectorAll('[data-toggle="dropdown"]')),s=0,n=r.length;s<n;s++){var o=t._getParentFromElement(r[s]),h=e(r[s]).data("bs.dropdown"),a={relatedTarget:r[s]};if(i&&"click"===i.type&&(a.clickEvent=i),h){var l=h._menu;if(e(o).hasClass("show")&&!(i&&("click"===i.type&&/input|textarea/i.test(i.target.tagName)||"keyup"===i.type&&9===i.which)&&e.contains(o,i.target))){var u=e.Event("hide.bs.dropdown",a);e(o).trigger(u),u.isDefaultPrevented()||("ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),r[s].setAttribute("aria-expanded","false"),h._popper&&h._popper.destroy(),e(l).removeClass("show"),e(o).removeClass("show").trigger(e.Event("hidden.bs.dropdown",a)))}}}},t._getParentFromElement=function(t){var e,i=a.getSelectorFromElement(t);return i&&(e=document.querySelector(i)),e||t.parentNode},t._dataApiKeydownHandler=function(i){if(!(/input|textarea/i.test(i.target.tagName)?32===i.which||27!==i.which&&(40!==i.which&&38!==i.which||e(i.target).closest(".dropdown-menu").length):!C.test(i.which))&&!this.disabled&&!e(this).hasClass("disabled")){var r=t._getParentFromElement(this),s=e(r).hasClass("show");if(s||27!==i.which){if(i.preventDefault(),i.stopPropagation(),!s||s&&(27===i.which||32===i.which))return 27===i.which&&e(r.querySelector('[data-toggle="dropdown"]')).trigger("focus"),void e(this).trigger("click");var n=[].slice.call(r.querySelectorAll(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)")).filter(function(t){return e(t).is(":visible")});if(0!==n.length){var o=n.indexOf(i.target);38===i.which&&o>0&&o--,40===i.which&&o<n.length-1&&o++,o<0&&(o=0),n[o].focus()}}}},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return L}},{key:"DefaultType",get:function(){return I}}]),t}();e(document).on("keydown.bs.dropdown.data-api",'[data-toggle="dropdown"]',F._dataApiKeydownHandler).on("keydown.bs.dropdown.data-api",".dropdown-menu",F._dataApiKeydownHandler).on("click.bs.dropdown.data-api keyup.bs.dropdown.data-api",F._clearMenus).on("click.bs.dropdown.data-api",'[data-toggle="dropdown"]',function(t){t.preventDefault(),t.stopPropagation(),F._jQueryInterface.call(e(this),"toggle")}).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}),e.fn[T]=F._jQueryInterface,e.fn[T].Constructor=F,e.fn[T].noConflict=function(){return e.fn[T]=y,F._jQueryInterface};var x=e.fn.modal,w={backdrop:!0,keyboard:!0,focus:!0,show:!0},M={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},R=function(){function t(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=t.querySelector(".modal-dialog"),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}var i=t.prototype;return i.toggle=function(t){return this._isShown?this.hide():this.show(t)},i.show=function(t){var i=this;if(!this._isShown&&!this._isTransitioning){e(this._element).hasClass("fade")&&(this._isTransitioning=!0);var r=e.Event("show.bs.modal",{relatedTarget:t});e(this._element).trigger(r),this._isShown||r.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),e(this._element).on("click.dismiss.bs.modal",'[data-dismiss="modal"]',function(t){return i.hide(t)}),e(this._dialog).on("mousedown.dismiss.bs.modal",function(){e(i._element).one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i._element)&&(i._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return i._showElement(t)}))}},i.hide=function(t){var i=this;if(t&&t.preventDefault(),this._isShown&&!this._isTransitioning){var r=e.Event("hide.bs.modal");if(e(this._element).trigger(r),this._isShown&&!r.isDefaultPrevented()){this._isShown=!1;var s=e(this._element).hasClass("fade");if(s&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),e(document).off("focusin.bs.modal"),e(this._element).removeClass("show"),e(this._element).off("click.dismiss.bs.modal"),e(this._dialog).off("mousedown.dismiss.bs.modal"),s){var n=a.getTransitionDurationFromElement(this._element);e(this._element).one(a.TRANSITION_END,function(t){return i._hideModal(t)}).emulateTransitionEnd(n)}else this._hideModal()}}},i.dispose=function(){[window,this._element,this._dialog].forEach(function(t){return e(t).off(".bs.modal")}),e(document).off("focusin.bs.modal"),e.removeData(this._element,"bs.modal"),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null},i.handleUpdate=function(){this._adjustDialog()},i._getConfig=function(t){return t=n({},w,t),a.typeCheckConfig("modal",t,M),t},i._triggerBackdropTransition=function(){var t=this;if("static"===this._config.backdrop){var i=e.Event("hidePrevented.bs.modal");if(e(this._element).trigger(i),i.defaultPrevented)return;var r=this._element.scrollHeight>document.documentElement.clientHeight;r||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static");var s=a.getTransitionDurationFromElement(this._dialog);e(this._element).off(a.TRANSITION_END),e(this._element).one(a.TRANSITION_END,function(){t._element.classList.remove("modal-static"),r||e(t._element).one(a.TRANSITION_END,function(){t._element.style.overflowY=""}).emulateTransitionEnd(t._element,s)}).emulateTransitionEnd(s),this._element.focus()}else this.hide()},i._showElement=function(t){var i=this,r=e(this._element).hasClass("fade"),s=this._dialog?this._dialog.querySelector(".modal-body"):null;this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),e(this._dialog).hasClass("modal-dialog-scrollable")&&s?s.scrollTop=0:this._element.scrollTop=0,r&&a.reflow(this._element),e(this._element).addClass("show"),this._config.focus&&this._enforceFocus();var n=e.Event("shown.bs.modal",{relatedTarget:t}),o=function(){i._config.focus&&i._element.focus(),i._isTransitioning=!1,e(i._element).trigger(n)};if(r){var h=a.getTransitionDurationFromElement(this._dialog);e(this._dialog).one(a.TRANSITION_END,o).emulateTransitionEnd(h)}else o()},i._enforceFocus=function(){var t=this;e(document).off("focusin.bs.modal").on("focusin.bs.modal",function(i){document!==i.target&&t._element!==i.target&&0===e(t._element).has(i.target).length&&t._element.focus()})},i._setEscapeEvent=function(){var t=this;this._isShown?e(this._element).on("keydown.dismiss.bs.modal",function(e){t._config.keyboard&&27===e.which?(e.preventDefault(),t.hide()):t._config.keyboard||27!==e.which||t._triggerBackdropTransition()}):this._isShown||e(this._element).off("keydown.dismiss.bs.modal")},i._setResizeEvent=function(){var t=this;this._isShown?e(window).on("resize.bs.modal",function(e){return t.handleUpdate(e)}):e(window).off("resize.bs.modal")},i._hideModal=function(){var t=this;this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop(function(){e(document.body).removeClass("modal-open"),t._resetAdjustments(),t._resetScrollbar(),e(t._element).trigger("hidden.bs.modal")})},i._removeBackdrop=function(){this._backdrop&&(e(this._backdrop).remove(),this._backdrop=null)},i._showBackdrop=function(t){var i=this,r=e(this._element).hasClass("fade")?"fade":"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",r&&this._backdrop.classList.add(r),e(this._backdrop).appendTo(document.body),e(this._element).on("click.dismiss.bs.modal",function(t){i._ignoreBackdropClick?i._ignoreBackdropClick=!1:t.target===t.currentTarget&&i._triggerBackdropTransition()}),r&&a.reflow(this._backdrop),e(this._backdrop).addClass("show"),!t)return;if(!r)return void t();var s=a.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(a.TRANSITION_END,t).emulateTransitionEnd(s)}else if(!this._isShown&&this._backdrop){e(this._backdrop).removeClass("show");var n=function(){i._removeBackdrop(),t&&t()};if(e(this._element).hasClass("fade")){var o=a.getTransitionDurationFromElement(this._backdrop);e(this._backdrop).one(a.TRANSITION_END,n).emulateTransitionEnd(o)}else n()}else t&&t()},i._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},i._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},i._checkScrollbar=function(){var t=document.body.getBoundingClientRect()
;this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},i._setScrollbar=function(){var t=this;if(this._isBodyOverflowing){var i=[].slice.call(document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top")),r=[].slice.call(document.querySelectorAll(".sticky-top"));e(i).each(function(i,r){var s=r.style.paddingRight,n=e(r).css("padding-right");e(r).data("padding-right",s).css("padding-right",parseFloat(n)+t._scrollbarWidth+"px")}),e(r).each(function(i,r){var s=r.style.marginRight,n=e(r).css("margin-right");e(r).data("margin-right",s).css("margin-right",parseFloat(n)-t._scrollbarWidth+"px")});var s=document.body.style.paddingRight,n=e(document.body).css("padding-right");e(document.body).data("padding-right",s).css("padding-right",parseFloat(n)+this._scrollbarWidth+"px")}e(document.body).addClass("modal-open")},i._resetScrollbar=function(){var t=[].slice.call(document.querySelectorAll(".fixed-top, .fixed-bottom, .is-fixed, .sticky-top"));e(t).each(function(t,i){var r=e(i).data("padding-right");e(i).removeData("padding-right"),i.style.paddingRight=r||""});var i=[].slice.call(document.querySelectorAll(".sticky-top"));e(i).each(function(t,i){var r=e(i).data("margin-right");void 0!==r&&e(i).css("margin-right",r).removeData("margin-right")});var r=e(document.body).data("padding-right");e(document.body).removeData("padding-right"),document.body.style.paddingRight=r||""},i._getScrollbarWidth=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);var e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e},t._jQueryInterface=function(i,r){return this.each(function(){var s=e(this).data("bs.modal"),o=n({},w,e(this).data(),"object"==typeof i&&i?i:{});if(s||(s=new t(this,o),e(this).data("bs.modal",s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i](r)}else o.show&&s.show(r)})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return w}}]),t}();e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var i,r=this,s=a.getSelectorFromElement(this);s&&(i=document.querySelector(s));var o=e(i).data("bs.modal")?"toggle":n({},e(i).data(),e(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault();var h=e(i).one("show.bs.modal",function(t){t.isDefaultPrevented()||h.one("hidden.bs.modal",function(){e(r).is(":visible")&&r.focus()})});R._jQueryInterface.call(e(i),o,this)}),e.fn.modal=R._jQueryInterface,e.fn.modal.Constructor=R,e.fn.modal.noConflict=function(){return e.fn.modal=x,R._jQueryInterface};var k=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],N={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},D=/^(?:(?:https?|mailto|ftp|tel|file):|[^#&/:?]*(?:[#/?]|$))/gi,H=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[\d+/a-z]+=*$/i,B="tooltip",G=e.fn[B],j=new RegExp("(^|\\s)bs-tooltip\\S+","g"),Y=["sanitize","whiteList","sanitizeFn"],X={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},W={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},V={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:N,popperConfig:null},U={HIDE:"hide.bs.tooltip",HIDDEN:"hidden.bs.tooltip",SHOW:"show.bs.tooltip",SHOWN:"shown.bs.tooltip",INSERTED:"inserted.bs.tooltip",CLICK:"click.bs.tooltip",FOCUSIN:"focusin.bs.tooltip",FOCUSOUT:"focusout.bs.tooltip",MOUSEENTER:"mouseenter.bs.tooltip",MOUSELEAVE:"mouseleave.bs.tooltip"},K=function(){function t(t,e){if(void 0===i)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}var r=t.prototype;return r.enable=function(){this._isEnabled=!0},r.disable=function(){this._isEnabled=!1},r.toggleEnabled=function(){this._isEnabled=!this._isEnabled},r.toggle=function(t){if(this._isEnabled)if(t){var i=this.constructor.DATA_KEY,r=e(t.currentTarget).data(i);r||(r=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,r)),r._activeTrigger.click=!r._activeTrigger.click,r._isWithActiveTrigger()?r._enter(null,r):r._leave(null,r)}else{if(e(this.getTipElement()).hasClass("show"))return void this._leave(null,this);this._enter(null,this)}},r.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},r.show=function(){var t=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var r=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(r);var s=a.findShadowRoot(this.element),n=e.contains(null!==s?s:this.element.ownerDocument.documentElement,this.element);if(r.isDefaultPrevented()||!n)return;var o=this.getTipElement(),h=a.getUID(this.constructor.NAME);o.setAttribute("id",h),this.element.setAttribute("aria-describedby",h),this.setContent(),this.config.animation&&e(o).addClass("fade");var l="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,u=this._getAttachment(l);this.addAttachmentClass(u);var c=this._getContainer();e(o).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(o).appendTo(c),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new i(this.element,o,this._getPopperConfig(u)),e(o).addClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var d=function(){t.config.animation&&t._fixTransition();var i=t._hoverState;t._hoverState=null,e(t.element).trigger(t.constructor.Event.SHOWN),"out"===i&&t._leave(null,t)};if(e(this.tip).hasClass("fade")){var f=a.getTransitionDurationFromElement(this.tip);e(this.tip).one(a.TRANSITION_END,d).emulateTransitionEnd(f)}else d()}},r.hide=function(t){var i=this,r=this.getTipElement(),s=e.Event(this.constructor.Event.HIDE),n=function(){"show"!==i._hoverState&&r.parentNode&&r.parentNode.removeChild(r),i._cleanTipClass(),i.element.removeAttribute("aria-describedby"),e(i.element).trigger(i.constructor.Event.HIDDEN),null!==i._popper&&i._popper.destroy(),t&&t()};if(e(this.element).trigger(s),!s.isDefaultPrevented()){if(e(r).removeClass("show"),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger.click=!1,this._activeTrigger.focus=!1,this._activeTrigger.hover=!1,e(this.tip).hasClass("fade")){var o=a.getTransitionDurationFromElement(r);e(r).one(a.TRANSITION_END,n).emulateTransitionEnd(o)}else n();this._hoverState=""}},r.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},r.isWithContent=function(){return Boolean(this.getTitle())},r.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},r.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},r.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(".tooltip-inner")),this.getTitle()),e(t).removeClass("fade show")},r.setElementContent=function(t,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=h(i,this.config.whiteList,this.config.sanitizeFn)),t.html(i)):t.text(i):this.config.html?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text())},r.getTitle=function(){var t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},r._getPopperConfig=function(t){var e=this;return n({},{placement:t,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:".arrow"},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(t){t.originalPlacement!==t.placement&&e._handlePopperPlacementChange(t)},onUpdate:function(t){return e._handlePopperPlacementChange(t)}},this.config.popperConfig)},r._getOffset=function(){var t=this,e={};return"function"==typeof this.config.offset?e.fn=function(e){return e.offsets=n({},e.offsets,t.config.offset(e.offsets,t.element)||{}),e}:e.offset=this.config.offset,e},r._getContainer=function(){return!1===this.config.container?document.body:a.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},r._getAttachment=function(t){return W[t.toUpperCase()]},r._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if("manual"!==i){var r="hover"===i?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,s="hover"===i?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(r,t.config.selector,function(e){return t._enter(e)}).on(s,t.config.selector,function(e){return t._leave(e)})}}),this._hideModalHandler=function(){t.element&&t.hide()},e(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler),this.config.selector?this.config=n({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},r._fixTitle=function(){var t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},r._enter=function(t,i){var r=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(r))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,i)),t&&(i._activeTrigger["focusin"===t.type?"focus":"hover"]=!0),e(i.getTipElement()).hasClass("show")||"show"===i._hoverState?i._hoverState="show":(clearTimeout(i._timeout),i._hoverState="show",i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){"show"===i._hoverState&&i.show()},i.config.delay.show):i.show())},r._leave=function(t,i){var r=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(r))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(r,i)),t&&(i._activeTrigger["focusout"===t.type?"focus":"hover"]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState="out",i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){"out"===i._hoverState&&i.hide()},i.config.delay.hide):i.hide())},r._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},r._getConfig=function(t){var i=e(this.element).data();return Object.keys(i).forEach(function(t){-1!==Y.indexOf(t)&&delete i[t]}),"number"==typeof(t=n({},this.constructor.Default,i,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),a.typeCheckConfig(B,t,this.constructor.DefaultType),t.sanitize&&(t.template=h(t.template,t.whiteList,t.sanitizeFn)),t},r._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},r._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(j);null!==i&&i.length&&t.removeClass(i.join(""))},r._handlePopperPlacementChange=function(t){this.tip=t.instance.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(t.placement))},r._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass("fade"),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},t._jQueryInterface=function(i){return this.each(function(){var r=e(this).data("bs.tooltip"),s="object"==typeof i&&i;if((r||!/dispose|hide/.test(i))&&(r||(r=new t(this,s),e(this).data("bs.tooltip",r)),"string"==typeof i)){if(void 0===r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return V}},{key:"NAME",get:function(){return B}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return U}},{key:"EVENT_KEY",get:function(){return".bs.tooltip"}},{key:"DefaultType",get:function(){return X}}]),t}();e.fn[B]=K._jQueryInterface,e.fn[B].Constructor=K,e.fn[B].noConflict=function(){return e.fn[B]=G,K._jQueryInterface};var q="popover",z=e.fn[q],J=new RegExp("(^|\\s)bs-popover\\S+","g"),Q=n({},K.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),Z=n({},K.DefaultType,{content:"(string|element|function)"}),$={HIDE:"hide.bs.popover",HIDDEN:"hidden.bs.popover",SHOW:"show.bs.popover",SHOWN:"shown.bs.popover",INSERTED:"inserted.bs.popover",CLICK:"click.bs.popover",FOCUSIN:"focusin.bs.popover",FOCUSOUT:"focusout.bs.popover",MOUSEENTER:"mouseenter.bs.popover",MOUSELEAVE:"mouseleave.bs.popover"},tt=function(t){function i(){return t.apply(this,arguments)||this}var r,n;n=t,(r=i).prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n;var o=i.prototype;return o.isWithContent=function(){return this.getTitle()||this._getContent()},o.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},o.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},o.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(".popover-header"),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(t.find(".popover-body"),i),t.removeClass("fade show")},o._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},o._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(J);null!==i&&i.length>0&&t.removeClass(i.join(""))},i._jQueryInterface=function(t){return this.each(function(){var r=e(this).data("bs.popover"),s="object"==typeof t?t:null;if((r||!/dispose|hide/.test(t))&&(r||(r=new i(this,s),e(this).data("bs.popover",r)),"string"==typeof t)){if(void 0===r[t])throw new TypeError('No method named "'+t+'"');r[t]()}})},s(i,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return Q}},{key:"NAME",get:function(){return q}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return $}},{key:"EVENT_KEY",get:function(){return".bs.popover"}},{key:"DefaultType",get:function(){return Z}}]),i}(K);e.fn[q]=tt._jQueryInterface,e.fn[q].Constructor=tt,e.fn[q].noConflict=function(){return e.fn[q]=z,tt._jQueryInterface};var et="scrollspy",it=e.fn[et],rt={offset:10,method:"auto",target:""},st={offset:"number",method:"string",target:"(string|element)"},nt=function(){function t(t,i){var r=this;this._element=t,this._scrollElement="BODY"===t.tagName?window:t,this._config=this._getConfig(i),this._selector=this._config.target+" .nav-link,"+this._config.target+" .list-group-item,"+this._config.target+" .dropdown-item",this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,e(this._scrollElement).on("scroll.bs.scrollspy",function(t){return r._process(t)}),this.refresh(),this._process()}var i=t.prototype;return i.refresh=function(){var t=this,i=this._scrollElement===this._scrollElement.window?"offset":"position",r="auto"===this._config.method?i:this._config.method,s="position"===r?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),[].slice.call(document.querySelectorAll(this._selector)).map(function(t){var i,n=a.getSelectorFromElement(t);if(n&&(i=document.querySelector(n)),i){var o=i.getBoundingClientRect();if(o.width||o.height)return[e(i)[r]().top+s,n]}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(e){t._offsets.push(e[0]),t._targets.push(e[1])})},i.dispose=function(){e.removeData(this._element,"bs.scrollspy"),e(this._scrollElement).off(".bs.scrollspy"),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},i._getConfig=function(t){if("string"!=typeof(t=n({},rt,"object"==typeof t&&t?t:{})).target&&a.isElement(t.target)){var i=e(t.target).attr("id");i||(i=a.getUID(et),e(t.target).attr("id",i)),t.target="#"+i}return a.typeCheckConfig(et,t,st),t},i._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},i._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},i._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height},i._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),i=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=i){var r=this._targets[this._targets.length-1];this._activeTarget!==r&&this._activate(r)}else{if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var s=this._offsets.length;s--;)this._activeTarget!==this._targets[s]&&t>=this._offsets[s]&&(void 0===this._offsets[s+1]||t<this._offsets[s+1])&&this._activate(this._targets[s])}},i._activate=function(t){this._activeTarget=t,this._clear();var i=this._selector.split(",").map(function(e){return e+'[data-target="'+t+'"],'+e+'[href="'+t+'"]'}),r=e([].slice.call(document.querySelectorAll(i.join(","))));r.hasClass("dropdown-item")?(r.closest(".dropdown").find(".dropdown-toggle").addClass("active"),r.addClass("active")):(r.addClass("active"),r.parents(".nav, .list-group").prev(".nav-link, .list-group-item").addClass("active"),r.parents(".nav, .list-group").prev(".nav-item").children(".nav-link").addClass("active")),e(this._scrollElement).trigger("activate.bs.scrollspy",{relatedTarget:t})},i._clear=function(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains("active")}).forEach(function(t){return t.classList.remove("active")})},t._jQueryInterface=function(i){return this.each(function(){var r=e(this).data("bs.scrollspy");if(r||(r=new t(this,"object"==typeof i&&i),e(this).data("bs.scrollspy",r)),"string"==typeof i){if(void 0===r[i])throw new TypeError('No method named "'+i+'"');r[i]()}})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"Default",get:function(){return rt}}]),t}();e(window).on("load.bs.scrollspy.data-api",function(){for(var t=[].slice.call(document.querySelectorAll('[data-spy="scroll"]')),i=t.length;i--;){var r=e(t[i]);nt._jQueryInterface.call(r,r.data())}}),e.fn[et]=nt._jQueryInterface,e.fn[et].Constructor=nt,e.fn[et].noConflict=function(){return e.fn[et]=it,nt._jQueryInterface};var ot=e.fn.tab,ht=function(){function t(t){this._element=t}var i=t.prototype;return i.show=function(){var t=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass("active")||e(this._element).hasClass("disabled"))){var i,r,s=e(this._element).closest(".nav, .list-group")[0],n=a.getSelectorFromElement(this._element);if(s){var o="UL"===s.nodeName||"OL"===s.nodeName?"> li > .active":".active";r=(r=e.makeArray(e(s).find(o)))[r.length-1]}var h=e.Event("hide.bs.tab",{relatedTarget:this._element}),l=e.Event("show.bs.tab",{relatedTarget:r});if(r&&e(r).trigger(h),e(this._element).trigger(l),!l.isDefaultPrevented()&&!h.isDefaultPrevented()){n&&(i=document.querySelector(n)),this._activate(this._element,s);var u=function(){var i=e.Event("hidden.bs.tab",{relatedTarget:t._element}),s=e.Event("shown.bs.tab",{relatedTarget:r});e(r).trigger(i),e(t._element).trigger(s)};i?this._activate(i,i.parentNode,u):u()}}},i.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},i._activate=function(t,i,r){var s=this,n=(!i||"UL"!==i.nodeName&&"OL"!==i.nodeName?e(i).children(".active"):e(i).find("> li > .active"))[0],o=r&&n&&e(n).hasClass("fade"),h=function(){return s._transitionComplete(t,n,r)};if(n&&o){var l=a.getTransitionDurationFromElement(n);e(n).removeClass("show").one(a.TRANSITION_END,h).emulateTransitionEnd(l)}else h()},i._transitionComplete=function(t,i,r){if(i){e(i).removeClass("active");var s=e(i.parentNode).find("> .dropdown-menu .active")[0];s&&e(s).removeClass("active"),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!1)}if(e(t).addClass("active"),"tab"===t.getAttribute("role")&&t.setAttribute("aria-selected",!0),a.reflow(t),t.classList.contains("fade")&&t.classList.add("show"),t.parentNode&&e(t.parentNode).hasClass("dropdown-menu")){var n=e(t).closest(".dropdown")[0];if(n){var o=[].slice.call(n.querySelectorAll(".dropdown-toggle"));e(o).addClass("active")}t.setAttribute("aria-expanded",!0)}r&&r()},t._jQueryInterface=function(i){return this.each(function(){var r=e(this),s=r.data("bs.tab");if(s||(s=new t(this),r.data("bs.tab",s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i]()}})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}}]),t}();e(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',function(t){t.preventDefault(),ht._jQueryInterface.call(e(this),"show")}),e.fn.tab=ht._jQueryInterface,e.fn.tab.Constructor=ht,e.fn.tab.noConflict=function(){return e.fn.tab=ot,ht._jQueryInterface};var at=e.fn.toast,lt={animation:"boolean",autohide:"boolean",delay:"number"},ut={animation:!0,autohide:!0,delay:500},ct=function(){function t(t,e){this._element=t,this._config=this._getConfig(e),this._timeout=null,this._setListeners()}var i=t.prototype;return i.show=function(){var t=this,i=e.Event("show.bs.toast");if(e(this._element).trigger(i),!i.isDefaultPrevented()){this._clearTimeout(),this._config.animation&&this._element.classList.add("fade");var r=function(){t._element.classList.remove("showing"),t._element.classList.add("show"),e(t._element).trigger("shown.bs.toast"),t._config.autohide&&(t._timeout=setTimeout(function(){t.hide()},t._config.delay))};if(this._element.classList.remove("hide"),a.reflow(this._element),this._element.classList.add("showing"),this._config.animation){var s=a.getTransitionDurationFromElement(this._element);e(this._element).one(a.TRANSITION_END,r).emulateTransitionEnd(s)}else r()}},i.hide=function(){if(this._element.classList.contains("show")){var t=e.Event("hide.bs.toast");e(this._element).trigger(t),t.isDefaultPrevented()||this._close()}},i.dispose=function(){this._clearTimeout(),this._element.classList.contains("show")&&this._element.classList.remove("show"),e(this._element).off("click.dismiss.bs.toast"),e.removeData(this._element,"bs.toast"),this._element=null,this._config=null},i._getConfig=function(t){return t=n({},ut,e(this._element).data(),"object"==typeof t&&t?t:{}),a.typeCheckConfig("toast",t,this.constructor.DefaultType),t},i._setListeners=function(){var t=this;e(this._element).on("click.dismiss.bs.toast",'[data-dismiss="toast"]',function(){return t.hide()})},i._close=function(){var t=this,i=function(){t._element.classList.add("hide"),e(t._element).trigger("hidden.bs.toast")};if(this._element.classList.remove("show"),this._config.animation){var r=a.getTransitionDurationFromElement(this._element);e(this._element).one(a.TRANSITION_END,i).emulateTransitionEnd(r)}else i()},i._clearTimeout=function(){clearTimeout(this._timeout),this._timeout=null},t._jQueryInterface=function(i){return this.each(function(){var r=e(this),s=r.data("bs.toast");if(s||(s=new t(this,"object"==typeof i&&i),r.data("bs.toast",s)),"string"==typeof i){if(void 0===s[i])throw new TypeError('No method named "'+i+'"');s[i](this)}})},s(t,null,[{key:"VERSION",get:function(){return"4.5.2"}},{key:"DefaultType",get:function(){return lt}},{key:"Default",get:function(){return ut}}]),t}();e.fn.toast=ct._jQueryInterface,e.fn.toast.Constructor=ct,e.fn.toast.noConflict=function(){return e.fn.toast=at,ct._jQueryInterface},t.Alert=c,t.Button=f,t.Carousel=P,t.Collapse=S,t.Dropdown=F,t.Modal=R,t.Popover=tt,t.Scrollspy=nt,t.Tab=ht,t.Toast=ct,t.Tooltip=K,t.Util=a,Object.defineProperty(t,"__esModule",{value:!0})}),window.addEventListener("load",windowLoaded,!1),$(function(){$("#loginButton").click(function(){$("#loginModal").modal("toggle")}),$("#adduserButton").click(function(){$("#adduserModal").modal("toggle")}),$("#openButton").click(function(){openVideo()}),$("#closeButton").click(function(){closeVideo()})}),window.Runtime=function(t,e){function r(t,e,i){this.x=t,this.y=e,this.text=i}function s(){this.ccfBytes="",this.pointer=0,this.offset=0,this.bUnicode=!1}function n(){this.array=new Array}function h(t,e,i,r){this.left=t||0,this.top=e||0,this.right=i||0,this.bottom=r||0}function a(){this.x=0,this.y=0}function l(){this.lfHeight=12,this.lfWeight=400,this.lfItalic=0,this.lfFaceName="Arial",this.isGraphic=!1}function u(t,e){this.app=t,this.flags=e,this.strings=new n,this.currentFileName=null}function d(t,e,i){this.app=t,this.width=e,this.height=i,this.canvas=document.createElement("canvas"),this.canvas.width=e,this.canvas.height=i,this.canvasContext=this.canvas.getContext("2d")}function f(){this.isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,this.isFirefox="undefined"!=typeof InstallTrigger,this.isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(t){return"[object SafariRemoteNotification]"===t.toString()}(!window.safari||safari.pushNotification),this.isIE=!!document.documentMode,this.isEdge=!this.isIE&&!!window.StyleMedia,this.isChrome=!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime),this.isEdgeChromium=this.isChrome&&-1!=navigator.userAgent.indexOf("Edg"),this.isEdgeChromium?this.browser="Edge":this.isChrome?this.browser="Chrome":this.isEdge?this.browser="Edge":this.isIE?this.browser="Explorer":this.isFirefox?this.browser="Firefox":this.isOpera?this.browser="Opera":this.isSafari?this.browser="Safari":this.browser=this.searchString(f.dataBrowser)||"Unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown version",this.OS=this.searchString(f.dataOS)||"Unknown OS"}function p(){this.mode=0,this.app=null,this.pImages=null}function m(){this.characters=null,this.width=0,this.height=0,this.image=null,this.color=0,this.flags=0,this.fontName=null,this.fontHeight=0,this.fontFlags=0,this.interline=0,this.interchar=0,this.nChars=0,this.charWidths=null,this.isGraphic=!0}function g(t){this.rhPtr=t,this.run=this.rhPtr.run,this.eventProgram=this.run.rhEvtProg,this.ObjectList=this.run.rhObjectList,this.OiList=this.run.rhOiList,this.QualToOiList=this.eventProgram.qualToOiList}function v(t,e){this.tokens=new n;var i=0,r=t.indexOf(e);if(1==e.length&&10==e.charCodeAt(0)){for(;r>=0;){if(r>i){var s=t.substring(i,r);s.length>0&&13==s.charCodeAt(s.length-1)&&(s=s.substr(0,s.length-1)),this.tokens.add(s)}i=r+e.length,r=t.indexOf(e,i)}if(t.length>i){var s=t.substring(i,t.length);s.length>0&&13==s.charCodeAt(s.length-1)&&(s=s.substr(0,s.length-1)),this.tokens.add(s)}}else{for(;r>=0;)r>i&&this.tokens.add(t.substring(i,r)),i=r+e.length,r=t.indexOf(e,i);t.length>i&&this.tokens.add(t.substring(i,t.length))}this.numToken=0}function _(){}function P(){this.flags=0,this.name=null,this.index=0}function E(){}function A(){}function O(){}function b(){}function S(){}function T(){}function C(){}function L(){}function I(){}function F(){}function w(){}function M(){}function R(){}function k(){}function N(){}function D(){}function H(){}function B(){}function G(){}function j(){}function Y(){}function X(){}function W(){}function V(){}function U(){}function K(){}function q(){}function z(){}function J(){}function Q(){}function Z(){}function $(){}function tt(){}function et(){}function it(){}function rt(){}function st(){}function nt(){}function ot(){}function ht(){}function at(){}function lt(){}function ut(){}function ct(){}function dt(){}function ft(){}function pt(){}function mt(){}function gt(){}function vt(){}function _t(){}function Pt(){}function Et(){}function At(){}function Ot(){}function bt(){}function St(){}function Tt(){}function yt(){}function Ct(){}function Lt(){}function It(){}function Ft(){}function xt(){}function wt(){}function Mt(){}function Rt(){}function kt(){}function Nt(){}function Dt(){}function Ht(){}function Bt(){}function Gt(){}function jt(){}function Yt(){}function Xt(){}function Wt(){}function Vt(){}function Ut(){}function Kt(){}function qt(){}function zt(){}function Jt(){}function Qt(){}function Zt(){}function $t(){}function te(){}function ee(){}function te(){}function ie(){}function re(){}function se(){}function ne(){}function oe(){}function he(){}function ae(){}function le(){}function ue(){}function ce(){}function de(){}function fe(){}function pe(){}function me(){}function ge(){}function ve(){}function _e(){}function Pe(){}function Ee(){}function Ae(){}function Oe(){}function be(){}function Se(){this.replace=null}function Te(){}function Ce(){}function Le(){}function Ie(){}function Fe(){}function we(){}function Me(){}function Re(){}function ke(){}function Ne(){}function De(){}function He(){}function Be(){}function Ge(){}function je(){}function Ye(){}function Xe(){}function We(){}function Ve(){}function Ue(){}function Ke(){}function qe(){}function ze(){}function Je(){}function Qe(){}function Ze(){}function $e(){}function ti(){}function ei(){}function ii(){}function ri(){}function si(){}function ni(){}function oi(){}function hi(){}function ai(){}function li(){}function ui(){}function ci(){}function di(){}function fi(){}function pi(){}function mi(){}function gi(){}function vi(){}function _i(){}function Pi(){}function Ei(){}function Ai(){}function Oi(){}function bi(){}function Si(){}function Ti(){}function yi(){}function Ci(){}function Li(){}function Ii(){}function Fi(){}function xi(){}function wi(){}function Mi(){}function Ri(){}function ki(){}function Ni(){}function Di(){}function Hi(){}function Bi(){}function Gi(){}function ji(){}function Yi(){}function Xi(){}function Wi(){}function Vi(){}function Ui(){}function Ki(){}function Ae(){}function qi(){}function zi(){}function Ji(){}function Qi(){}function Zi(){}function $i(){}function tr(){}function er(){}function ir(){}function rr(){}function sr(){}function nr(){}function or(){}function hr(){}function ar(){}function lr(){}
function ur(){}function cr(){}function dr(){}function fr(){}function pr(){}function mr(){}function fr(){}function gr(){}function vr(){}function _r(){}function Pr(){}function Er(){}function Ar(){}function Or(){}function br(){}function Sr(){}function Tr(){}function yr(){}function Cr(){}function Lr(){}function Ir(){}function Fr(){}function xr(){}function wr(){}function Mr(){}function Rr(){}function kr(){}function Nr(){}function Dr(){}function Hr(){}function Br(){}function Gr(){}function jr(){}function Yr(){}function Xr(){}function Wr(){}function Vr(){}function Ur(){}function Kr(){}function qr(){}function zr(){}function Jr(){}function Qr(){}function Zr(){}function $r(){}function ts(){}function es(){}function is(){}function rs(){}function ss(){}function ns(){}function os(){}function hs(){}function as(){}function ls(){}function us(){}function cs(){}function ds(){}function fs(){}function ps(){}function ms(){}function gs(){}function vs(){}function _s(){}function Ps(){}function Es(){}function As(){}function Os(){}function bs(){}function Ss(){}function Ts(){}function ys(){}function Cs(){}function Ls(){}function Is(){}function Fs(){}function xs(){}function ws(){}function Ms(){}function Rs(){}function ks(){}function Ns(){}function Ds(){}function Hs(){}function Bs(){}function Gs(){}function js(){}function Ys(){}function Xs(){}function Ws(){}function Vs(){}function Us(){}function Ks(){}function qs(){}function zs(){}function Js(){}function Qs(){}function Zs(){}function $s(){}function tn(){}function en(){}function rn(){}function sn(){}function nn(){}function on(){}function hn(){}function an(){}function ln(){}function un(){}function cn(){}function dn(){}function fn(){}function pn(){}function mn(){}function gn(){}function vn(){}function _n(){}function Pn(){}function En(){}function An(){}function On(){}function bn(){}function Sn(){}function Tn(){}function yn(){}function Cn(){}function Ln(){}function In(){}function Fn(){}function xn(){}function wn(){}function Mn(){}function Rn(){}function kn(){}function Nn(){}function Dn(){}function Hn(){}function Bn(){}function Gn(){}function jn(){}function Yn(){}function Xn(){}function Wn(){}function Vn(){}function Un(){}function Kn(){}function qn(){}function zn(){}function Jn(){}function Qn(){}function Zn(){}function $n(){}function $n(){}function to(){}function eo(){}function io(){}function ro(){}function so(){}function no(){}function oo(){}function ho(){}function ao(){}function lo(){}function uo(){}function co(){}function fo(){}function po(){}function mo(){}function go(){}function vo(){}function _o(){}function Po(){}function Eo(){}function Ao(){}function Oo(){}function bo(){}function So(){}function To(){}function yo(){}function Co(){}function Lo(){}function Io(){}function Fo(){}function xo(){}function wo(){}function Mo(){}function Ro(){}function ko(){}function No(){}function Do(){}function Ho(){}function Bo(){}function Go(){}function jo(){}function Yo(){}function Xo(){}function Wo(){}function Vo(){}function Uo(){}function Ko(){}function qo(){}function zo(){}function Jo(){}function Qo(){}function Zo(){}function Qo(){}function $o(){}function th(){}function eh(){}function ih(){}function rh(){}function sh(){}function nh(){}function oh(){}function hh(){}function ah(){}function lh(){}function uh(){}function ch(){}function dh(){}function fh(){}function ph(){}function mh(){}function gh(){}function vh(){}function _h(){}function Ph(){}function Eh(){}function Ah(){}function Oh(){}function bh(){}function Sh(){}function Th(){}function yh(){}function Ch(){}function Lh(){}function Ih(){}function Fh(){}function xh(){}function wh(){}function Mh(){}function Rh(){}function kh(){}function Nh(){}function Dh(){}function Hh(){}function Bh(){}function Gh(){}function jh(){}function Yh(){}function Xh(){}function Wh(){}function Vh(){}function Uh(){}function Kh(){}function qh(){}function zh(){}function Jh(){}function Qh(){}function Zh(){}function $h(){}function ta(){}function ea(){}function ia(){}function ra(){}function sa(){}function na(){}function Dh(){}function oa(){}function ha(){}function aa(){}function la(){}function ua(){}function ca(){}function da(){}function fa(){}function pa(){}function ma(){}function ga(){}function va(){}function _a(){}function Pa(){}function Ea(){}function Aa(){}function Oa(){}function ba(){}function Sa(){}function Ta(){}function ya(){}function Ca(){}function La(){}function Ia(){}function Fa(){}function xa(){}function wa(){}function Ma(){}function Ra(){}function ka(){}function Na(){}function Da(){}function Ha(){}function Ba(){}function Na(){}function Ga(){}function ja(){}function Ya(){}function Xa(){}function Wa(){}function Va(){Kc.application.loadApplication()}function Ua(){Kc.application.loadInfo()}function Ka(t,e,i,r){this.isSubApp=!0===r,this.isPreloaderSubApp=!1,this.isSubApp?(this.canvas=t.canvas,this.parent_element=t.parent_element,this.cName=null):"string"==typeof t?(this.canvas=document.getElementById(t),this.parent_element=this.canvas.parentElement,this.cName=t):t instanceof HTMLElement&&(this.canvas=document.createElement("canvas"),this.parent_element=t,this.cName=null);var s=this.container=t.container||document.createElement("div");s.appendChild(this.canvas),this.parent_element.appendChild(s),s.style.overflow="hidden",s.style.position="relative",s.style.transform="translateZ(0)",s.style.margin="0",s.style.padding="0",s.style.display="block",s.style.boxSizing="content-box",s.className="MMFDiv",this.frameOffsets=null,this.frameEffects=null,this.frameEffectParams=null,this.frameMaxIndex=0,this.framePasswords=null,this.appName=null,this.nGlobalValuesInit=0,this.globalValuesInitTypes=null,this.globalValuesInit=null,this.nGlobalStringsInit=0,this.globalStringsInit=null,this.OIList=null,this.imageBank=null,this.fontBank=null,this.soundBank=null,this.soundPlayer=null,this.soundContext=null,this.soundContextType=0,this.appRunningState=0,this.lives=null,this.scores=null,this.playerNames=null,this.gValues=null,this.gStrings=null,this.startFrame=0,this.nextFrame=0,this.currentFrame=0,this.frame=null,this.file=null,this.parentApp=null,this.parentOptions=0,this.parentWidth=0,this.parentHeight=0,this.refTime=0,this.run=null,this.preloader=null,this.loadPreloader=!1,this.xOffset=0,this.yOffset=0,this.gaFlags=0,this.gaNewFlags=0,this.gaMode=0,this.gaOtherFlags=0,this.gaCxWin=0,this.gaCyWin=0,this.gaScoreInit=0,this.gaLivesInit=0,this.gaBorderColour=0,this.gaNbFrames=0,this.gaFrameRate=0,this.pcCtrlType=null,this.pcCtrlKeys=null,this.frameHandleToIndex=null,this.frameMaxHandle=0,this.cx=0,this.cy=0,this.mouseX=0,this.mouseY=0,this.bMouseIn=!1,this.keyBuffer=null,this.cursorCount=0,this.cursor="auto",this.sysEvents=null,this.quit=!1,this.m_bLoading=!1,this.extensionStorage=null,this.extLoader=null,this.embeddedFiles=null,this.bUnicode=!1,this.xMouseOffset=0,this.yMouseOffset=0,this.mouseDoubleClickCode=null,this.mouseDoubleClickTimestamp=null,this.deltaWheel=0,this.effect=0,this.effectParam=0,this.alpha=0,this.dwOptions=0,this.dwBuildType=0,this.dwBuildFlags=0,this.wScreenRatioTolerance=0,this.wScreenAngle=0,this.file=e,this.resources="",this.path=i;var o=i.lastIndexOf("/");if(o>=0&&(this.resources=i.substring(0,o+1)),this.frameColor=0,this.appEditorFilename=null,this.run=null,this.timer=0,this.imagesToLoad=0,this.imagesLoaded=0,this.bLoading=!1,this.keyNew=!1,this.subApps=new Array(0),this.preloaderType=-1,this.preloaderCircleCenterX=0,this.preloaderCircleCenterY=0,this.preloaderCircleRadius=0,this.preloaderCircleThickness=0,this.preloaderCircleColor=0,this.preloaderBackColor=0,this.preloaderFrameNumber=0,this.transition=null,this.transitionManager=null,this.transitionDisplay=null,this.transitionOldSurface=null,this.bStartFadeIn=!1,this.browserDetect=new f,this.touchesID=null,this.touchesX=null,this.touchesY=null,this.mouseTouch=Ka.TOUCHID_EMPTY,this.nTouches=0,this.joystick=null,this.joystickOn=0,this.accelerometer=0,this.accelerometerHandler=null,this.accX=0,this.accY=0,this.accZ=0,this.accGravX=0,this.accGravY=0,this.accGravZ=0,this.scaleX=this.scaleY=1,this.hasFocus=!0,this.bStoppedFocus=!1,this.iOS=!1,this.firstFrameColor=0,this.previousFrameGraphics=null,this.graphicFonts=null,this.infoVersion=-1,this.infoFile=null,this.infoCounter=1e9,this.infoPath=null,window.location.href.indexOf("192.")>=0){var o=window.location.href.indexOf("21700/");o>=0&&(this.infoPath=window.location.href.substring(0,o+6),this.infoVersion=-1,this.infoCounter=25)}this.bZoom=!1,this.dataLoadingStep=3,this.dataToLoad=new n,this.dataLoading=new n,this.mosaics=new Array,this.mosaicMaxHandle=0,this.silentSound=null,this.m_touchMe="Please touch the screen to start",this.oldFrameRate=-1e3,this.fullScreen=!1,this.versionCode="***version***",this.versionCodePos=0,this.versionCodeDisplay=0,this.codePage=-1,this.modalSubappObject=null}function qa(t,e,i){this.changedTouches=new Array(1),this.changedTouches[0]={pageX:t,pageY:e,target:i,identifier:Ka.FAKE_TOUCHIDENTIFIER}}function za(t){this.app=t,this.rhPtr=null,this.leWidth=0,this.leHeight=0,this.leBackground=0,this.leClearBackground=!1,this.leFlags=0,this.leVirtualRect=null,this.leEditWinWidth=0,this.leEditWinHeight=0,this.frameName=null,this.nLayers=0,this.layers=null,this.LOList=null,this.evtProg=null,this.maxObjects=0,this.leX=0,this.leY=0,this.leLastScrlX=0,this.leLastScrlY=0,this.startLeX=0,this.startLeY=0,this.m_wRandomSeed=0,this.m_dwMvtTimerBase=0,this.fadeIn=null,this.fadeOut=null,this.mosaicHandles=null,this.mosaicX=null,this.mosaicY=null,this.mosaicMaxHandle=0,this.joystick=0,this.html5Options=0}function Ja(t){this.app=t,this.channels=null,this.bMultipleSounds=!1,this.bOn=!0,this.volumes=null,this.bLocked=null,this.pans=null,this.mainVolume=0,this.mainPan=0,this.dataToDecode=null,this.decoding=!1,this.channels=new Array(Ja.NCHANNELS),this.volumes=new Array(Ja.NCHANNELS),this.bLocked=new Array(Ja.NCHANNELS),this.bOn=!0,this.bMultipleSounds=!0;var e;for(e=0;e<Ja.NCHANNELS;e++)this.channels[e]=null,this.volumes[e]=100,this.bLocked[e]=!1;this.mainVolume=100,this.mainPan=0;var i=new Audio,r=new Array(4);for(r[0]=i.canPlayType("audio/ogg"),r[1]=i.canPlayType("audio/x-m4a"),r[2]=i.canPlayType("audio/mpeg"),r[3]=i.canPlayType("audio/wav"),this.probablePlayableFormats=0,this.maybePlayableFormats=0,e=0;e<4;e++)"probably"==r[e]&&(this.probablePlayableFormats|=1<<e),"maybe"==r[e]&&(this.maybePlayableFormats|=1<<e);for(var s=t;null!=s.parentApp;)s=s.parentApp;this.context=s.soundContext,this.contextType=s.soundContextType,null==this.context&&("undefined"!=typeof AudioContext?(this.context=new AudioContext,this.contextType=1):"undefined"!=typeof webkitAudioContext&&(this.context=new webkitAudioContext,this.contextType=0),s.soundContext=this.context,s.soundContextType=this.contextType)}function Qa(t){this.app=t}function Za(t){this.app=t,this.isLoaded=!1,this.subApp=null,this.context=this.app.context,this.radius=this.app.preloaderCircleRadius,this.color=this.app.preloaderCircleColor,this.xCenter=this.app.preloaderCircleCenterX,this.xCenter<0&&(this.xCenter=this.app.gaCxWin/2),this.yCenter=this.app.preloaderCircleCenterY,this.yCenter<0&&(this.yCenter=this.app.gaCyWin/2),this.currentAngle=0,this.size=this.app.preloaderCircleThickness,this.oldAngle=0,this.counter=25,this.phase=0,this.wasExecuted=!1,this.image=new Image;var e=this;this.image.onload=function(){e.isLoaded=!0},this.image.src=this.app.resources+"Preloader.png"}function $a(t){this.app=t,this.context=this.app.context,this.currentPosition=0,this.width=100,this.height=12,this.position=0,this.backColor=10526880,this.borderColor=8421504,this.barColor=0,this.rect=new h,this.rect.left=this.app.gaCxWin/2-this.width/2,this.rect.top=this.app.gaCyWin/2-this.height/2,this.rect.right=this.rect.left+this.width,this.rect.bottom=this.rect.top+this.height,this.reset(),this.wasExecuted=!1}function tl(t){this.app=t,this.isLoaded=!1,this.appSprite=new hc,this.subApp=new Ka(this.app,this.app.file,this.app.path,!0),this.subApp.isPreloaderSubApp=!0,this.subApp.setParentApp(this.app,this.app.preloaderFrameNumber,0,this.appSprite,this.app.gaCxWin,this.app.gaCyWin),this.subApp.digest(),this.subApp.loadPreloader=!1,this.subApp.subAppStopped=!1,this.subApp.dwOptions&=~Ka.AH2OPT_LOADDATAATSTART,this.subApp.startApplication(),this.subApp.setMouseOffsets(0,0),this.subApp.stepApplication(),this.appSprite.x=this.app.gaCxWin/2-this.subApp.frame.leWidth/2,this.appSprite.y=this.app.gaCyWin/2-this.subApp.frame.leHeight/2,this.stopOnLoad=0!=(this.app.dwOptions&Ka.AH2OPT_PRELOADERQUIT),this.app.subApps.push(this.subApp),this.delay=0,this.wasExecuted=!1}function el(t){this.app=t,this.joyBack=null,this.joyFront=null,this.joyUp=null,this.joyUpD=null,this.joyDown=null,this.joyDownD=null,this.joyLeft=null,this.joyLeftD=null,this.joyRight=null,this.joyRightD=null,this.fire1U=null,this.fire2U=null,this.fire1D=null,this.fire2D=null,this.imagesX=new Array(3),this.imagesY=new Array(3),this.joystickX=0,this.joystickY=0,this.joystick=0,this.flags=0,this.touches=new Array(3),this.bSetPositions=!1,this.joydeadzone=0,this.joyanglezone=0,this.joyradsize=0}function il(t){this.rhApp=t,this.rhFrame=null,this.rhMaxOI=0,this.rhStopFlag=0,this.rhEvFlag=0,this.rhNPlayers=0,this.rhGameFlags=0,this.rhPlayer=0,this.rhQuit=0,this.rhQuitBis=0,this.rhReturn=0,this.rhQuitParam=0,this.rhNObjects=0,this.rhMaxObjects=0,this.rhOiList=null,this.rhEvtProg=null,this.rhLevelSx=0,this.rhLevelSy=0,this.rhWindowX=0,this.rhWindowY=0,this.rhVBLDeltaOld=0,this.rhVBLObjet=0,this.rhVBLOld=0,this.rhMT_VBLStep=0,this.rhMT_VBLCount=0,this.rhMT_MoveStep=0,this.rhLoopCount=0,this.rhTimer=0,this.rhTimerOld=0,this.rhTimerDelta=0,this.rhOiListPtr=0,this.rhObListNext=0,this.rhDestroyPos=0,this.rhMouseUsed=0,this.rh2OldPlayer=null,this.rh2NewPlayer=null,this.rh2InputMask=null,this.rh2MouseKeys=0,this.rh2CreationCount=0,this.rh2MouseX=0,this.rh2MouseY=0,this.rh2MouseSaveX=0,this.rh2MouseSaveY=0,this.rh2PauseCompteur=0,this.rh2PauseTimer=0,this.rh2PauseVbl=0,this.rh3DisplayX=0,this.rh3DisplayY=0,this.rh3WindowSx=0,this.rh3WindowSy=0,this.rh3CollisionCount=0,this.rh3Scrolling=0,this.rh3XMinimum=0,this.rh3YMinimum=0,this.rh3XMaximum=0,this.rh3YMaximum=0,this.rh3XMinimumKill=0,this.rh3YMinimumKill=0,this.rh3XMaximumKill=0,this.rh3YMaximumKill=0,this.rh3Graine=0,this.rh4DemoMode=0,this.rh4PauseKey=0,this.rh4CurrentFastLoop=null,this.rh4EndOfPause=0,this.rh4MouseWheelDelta=0,this.rh4OnMouseWheel=0,this.rh4FastLoops=null,this.rh4ExpValue1=0,this.rh4ExpValue2=0,this.rh4KpxReturn=0,this.rh4ObjectCurCreate=0,this.rh4ObjectAddCreate=0,this.rh4DoUpdate=0,this.rh4VBLDelta=0,this.rh4LoopTheoric=0,this.rh4EventCount=0,this.rh4BackDrawRoutines=null,this.rh4WindowDeltaX=0,this.rh4WindowDeltaY=0,this.rh4TimeOut=0,this.rh4TabCounter=0,this.rh4PosPile=0,this.rh4Results=null,this.rh4Operators=null,this.rh4OpeNull=null,this.rh4CurToken=0,this.rh4Tokens=null,this.rh4FrameRateArray=null,this.rh4FrameRatePos=0,this.rh4FrameRatePrevious=0,this.rhDestroyList=null,this.rh4SaveFrame=0,this.rh4SaveFrameCount=0,this.rh4MvtTimerCoef=0,this.questionObjectOn=null,this.bOperande=!1,this.rhWheelCount=0,this.rhObjectList=null,this.currentTabObject=null,this.buttonClickCount=-1,this.isColArray=new Array(2),this.flagFloat=!1,this.fadeTimerDelta=0,this.rhJoystickMask=255,this.noResume=!1,this.quitPause=!1}function rl(){this.cobLevObj=null,this.cobLevObjSeg=0,this.cobFlags=0,this.cobX=0,this.cobY=0,this.cobDir=0,this.cobLayer=0,this.cobZOrder=0}function sl(){this.oilOi=0,this.oilListSelected=0,this.oilType=0,this.oilObject=0,this.oilEvents=0,this.oilWrap=0,this.oilNextFlag=!1,this.oilNObjects=0,this.oilActionCount=0,this.oilActionLoopCount=0,this.oilCurrentRoutine=0,this.oilCurrentOi=0,this.oilNext=0,this.oilEventCount=0,this.oilNumOfSelected=0,this.oilOEFlags=0,this.oilLimitFlags=0,this.oilLimitList=0,this.oilOIFlags=0,this.oilOCFlags2=0,this.oilInkEffect=0,this.oilEffectParam=0,this.oilHFII=0,this.oilBackColor=0,this.oilQualifiers=null,this.oilName=null,this.oilEventCountOR=0,this.oilColList=null}function nl(){this.name=null,this.objects=null}function ol(){this.value=null,this.rsMini=0,this.rsMaxi=0,this.rsMiniDouble=0,this.rsMaxiDouble=0}function hl(){this.text=null,this.rsMini=0}function al(){this.values=null,this.strings=null,this.flags=0}function ll(){this.m_type=0,this.m_subType=ll.MSUBTYPE_OBJECT,this.m_identifier=0,this.m_stopFlag=!1,this.m_pHo=null,this.m_body=null,this.m_currentAngle=0,this.m_eventCount=0,this.m_collidingObject=null,this.ho=null,this.rh=null,this.rc=new h,this.m_addVX=0,this.m_addVY=0,this.m_addVFlag=!1,this.m_setVX=0,this.m_setVY=0,this.m_setVFlag=!1,this.m_image=-1,this.m_background=!1}function ul(){this.anDirs=null,this.anTrigo=null,this.anAntiTrigo=null}function cl(){this.ahAnimMax=0,this.ahAnims=null,this.ahAnimExists=null}function fl(){this.adMinSpeed=0,this.adMaxSpeed=0,this.adRepeat=0,this.adRepeatFrame=0,this.adNumberOfFrame=0,this.adFrames=null}function pl(){this.hoPtr=null,this.raAnimForced=0,this.raAnimDirForced=0,this.raAnimSpeedForced=0,this.raAnimStopped=!1,this.raAnimOn=0,this.raAnimOffset=null,this.raAnimDir=0,this.raAnimPreviousDir=0,this.raAnimDirOffset=null,this.raAnimSpeed=0,this.raAnimMinSpeed=0,this.raAnimMaxSpeed=0,this.raAnimDeltaSpeed=0,this.raAnimCounter=0,this.raAnimDelta=0,this.raAnimRepeat=0,this.raAnimRepeatLoop=0,this.raAnimFrame=0,this.raAnimNumberOfFrame=0,this.raAnimFrameForced=0,this.raRoutineAnimation=0,this.raOldAngle=-1}function ml(t,e){this.imageBank=t,this.app=t.app,this.handle=e}function gl(t){this.app=t,this.file=null,this.images=null,this.nHandlesReel=0,this.nHandlesTotal=0,this.nImages=0,this.offsetsToImage=null,this.handleToIndex=null,this.useCount=null,this.rcInfo=null,this.hsInfo=null,this.apInfo=null,this.pIfo=null,this.mosaics=null,this.oldMosaics=null,this.mosaicLoaded=null}function vl(){this.app=null,this.handle=0,this.width=0,this.height=0,this.xSpot=0,this.ySpot=0,this.xAP=0,this.yAP=0,this.useCount=0,this.img=null,this.maskNormal=null,this.maskPlatform=null,this.maskRotation=null,this.filePointer=null,this.mosaic=0,this.mosaicX=0,this.mosaicY=0,this.texID=-1,this.texCoords=null}function _l(t){this.app=t,this.file=null,this.fonts=null,this.offsetsToFonts=null,this.nFonts=0,this.handleToIndex=null,this.maxHandlesReel=0,this.maxHandlesTotal=0,this.useCount=null,this.nullFont=new Pl,this.nullFont.createDefaultFont()}function Pl(){this.useCount=0,this.handle=0,this.lfHeight=0,this.lfWeight=0,this.lfItalic=0,this.lfFaceName=null,this.font=null,this.isGraphic=!1}function El(t){this.app=t,this.sounds=null,this.nHandlesReel=0,this.nHandlesTotal=0,this.nSounds=0,this.offsetsToSounds=null,this.handleToIndex=null,this.useCount=null,this.file=null}function Al(t){this.application=t,this.context=t.soundPlayer.context,this.contextType=t.soundPlayer.contextType,this.gainNode=t.soundPlayer.gainNode,this.type=0,this.file=t.file,this.handle=-1,this.source=null,this.sound=null,this.useCount=0,this.bUninterruptible=!1,this.nLoops=0,this.numSound=0,this.name=null,this.bPaused=!1,this.bAllowGlobalResume=!1,this.bPlaying=!1,this.frequency=0,this.response=null,this.gain=null,this.volume=100}function Ol(t,e){this.name=t,this.pointers=new Array,this.position=0,this.m_bOR=!1,this.fastLoopIndex=e}function bl(t){this.poil=t,this.selectedInstances=new Array}function Sl(t){this.application=t,this.rhPtr=null,this.maxObjects=0,this.maxOi=0,this.nPlayers=0,this.nConditions=new Array(Dl.NUMBEROF_SYSTEMTYPES+Dl.OBJ_LAST),this.nQualifiers=0,this.nEvents=0,this.qualifiers=null,this.events=null,this.qualToOiList=null,this.listPointers=null,this.eventPointersGroup=null,this.eventPointersCnd=null,this.limitBuffer=null,this.rhEvents=new Array(Dl.NUMBEROF_SYSTEMTYPES+1),this.rhEventAlways=!1,this.rh4TimerEventsBase=0,this.colBuffer=null,this.qualOilPtr=0,this.qualOilPos=0,this.qualOilPtr2=0,this.qualOilPos2=0,this.rh4CheckDoneInstart=!1,this.rhEventGroup=null,this.rhCurCode=0,this.rh4PickFlags=new Array(4),this.rh2ActionLoop=!1,this.rh2ActionOn=!1,this.rh2EnablePick=!1,this.rh2EventCount=0,this.rh2ActionCount=0,this.rh2ActionLoopCount=0,this.rh4EventCountOR=0,this.rh4ConditionsFalse=!1,this.rh3DoStop=!1,this.rh2EventQualPos=null,this.rh2EventQualPosNum=0,this.rh2EventPos=0,this.rh2EventPosOiList=0,this.rh2EventPrev=null,this.rh2EventPrevOiList=null,this.evtNSelectedObjects=0,this.repeatFlag=!1,this.rh2EventType=0,this.rhCurOi=0,this.rhCurParam0=0,this.rhCurParam1=0,this.rh2CurrentClick=0,this.rh4_2ndObject=null,this.bReady=!1,this.rh2ShuffleBuffer=null,this.rhCurObjectNumber=0,this.rh1stObjectNumber=0,this.rh2PushedEvents=null,this.callEndForEach=!1,this.bTestAllKeys=!1,this.maxEvents=0,this.complexOnLoop=!1,this.childEventParam=null,this.childEventSelectionStack=new Array,this.defaultEvgFlagsMask=Tl.EVGFLAGS_DEFAULTMASK}function Tl(){this.evgNCond=0,this.evgNAct=0,this.evgFlags=0,this.evgInhibit=0,this.evgInhibitCpt=0,this.evgEvents=null,this.evgLine=0}function yl(){}function Cl(){this.id=0,this.evg=0}function Ll(){this.qOi=0,this.qType=0}function Il(t,e,i,r,s){this.routine=t,this.code=e,this.param=i,this.pHo=r,this.oi=s}function Fl(){this.qoiCurrentOi=0,this.qoiNext=0,this.qoiActionPos=0,this.qoiCurrentRoutine=0,this.qoiActionCount=0,this.qoiActionLoopCount=0,this.qoiNextFlag=!1,this.qoiSelectedFlag=!1,this.qoiList=null}function xl(){this.next=null,this.oi=0,this.index=0,this.name=null,this.number=0,this.stop=!1,this.objects=new Array}function wl(){this.next=null,this.type=0,this.name=null,this.timer=0,this.timerNext=0,this.timerPosition=0,this.loops=0,this.index=0,this.bDelete=!1}function Ml(){this.loHandle=0,this.loOiHandle=0,this.loX=0,this.loY=0,this.loParentType=0,this.loOiParentHandle=0,this.loLayer=0,this.loType=0,this.loInstances=null,this.loInstances=new Array(4);var t;for(t=0;t<4;t++)this.loInstances[t]=null}function Rl(){this.list=null,this.handleToIndex=null,this.nIndex=0,this.loFranIndex=0}function kl(t){this.app=t,this.pName=null,this.x=0,this.y=0,this.realX=0,this.realY=0,this.dx=0,this.dy=0,this.pObstacles=null,this.pPlatforms=null,this.addedBackdrops=null,this.bVisible=!1,this.pLadders=null,this.nZOrderMax=0,this.dwOptions=0,this.xCoef=0,this.yCoef=0,this.nBkdLOs=0,this.nFirstLOIndex=0,this.effect=0,this.effectParam=0,this.backUp_dwOptions=0,this.backUp_xCoef=0,this.backUp_yCoef=0,this.backUp_nBkdLOs=0,this.backUp_nFirstLOIndex=0,this.planeBack=null,this.planeQuickDisplay=null,this.planeSprites=null,this.angle=0,this.scale=this.scaleX=this.scaleY=1,this.xSpot=this.xDest=320,this.ySpot=this.yDest=240}function Nl(t,e,i,r,s,n){if(this.app=t,this.levelObject=r,this.type=0,this.obstacleType=0,this.x=e,this.y=i,this.width=0,this.height=0,this.poi=null,this.colBox=!1,this.imageUsed=null,this.borderWidth=0,this.color1=null,this.color2=null,this.borderColor=null,this.effect=0,this.effectParam=0,this.body=null,this.ho=null,r){if(this.poi=this.app.OIList.getOIFromHandle(r.loOiHandle),this.type=this.poi.oiType,this.obstacleType=this.poi.oiOC.ocObstacleType,this.borderWidth=this.poi.oiOC.ocBorderSize,this.gradientFlags=this.poi.oiOC.ocGradientFlags,this.effect=this.poi.oiInkEffect,this.effectParam=this.poi.oiInkEffectParam,this.width=this.poi.oiOC.ocCx,this.height=this.poi.oiOC.ocCy,this.colBox=0!=this.poi.oiOC.ocColMode,this.color1=this.poi.oiOC.ocColor1,this.color2=this.poi.oiOC.ocColor2,this.borderColor=this.poi.oiOC.ocBorderColor,1==this.type)this.imageUsed=this.app.imageBank.getImageFromHandle(this.poi.oiOC.ocImage),this.width=this.imageUsed.width,this.height=this.imageUsed.height;else if(this.type>=32){for(var o=this.app.run,h=null,a=0,l=0;l<o.rhNObjects;l++){for(;null==o.rhObjectList[a];)a++;if(h=o.rhObjectList[a],a++,h.lo==r)break}this.ho=h}}else{switch(this.type=Dl.OBJ_PASTED,this.imageUsed=s,this.width=this.imageUsed.width,this.height=this.imageUsed.height,this.x-=this.imageUsed.xSpot,this.y-=this.imageUsed.ySpot,n){case 0:this.obstacleType=Bl.OBSTACLE_NONE;break;case 1:this.obstacleType=Bl.OBSTACLE_SOLID;break;case 2:this.obstacleType=Bl.OBSTACLE_PLATFORM;break;case 3:this.obstacleType=Bl.OBSTACLE_LADDER}this.colBox=!1}}function Dl(){this.oiHandle=0,this.oiType=0,this.oiFlags=0,this.oiInkEffect=0,this.oiInkEffectParam=0,this.oiName=null,this.oiOC=null,this.oiFileOffset=0,this.oiLoadFlags=0,this.oiLoadCount=0,this.oiCount=0}function Hl(){this.oiMaxIndex=0,this.ois=0,this.oiMaxHandle=0,this.oiHandleToIndex=null,this.oiToLoad=null,this.oiLoaded=null,this.currentOI=0}function Bl(){}function Gl(){this.ocImage=0}function jl(){this.ocBorderSize=0,this.ocBorderColor=0,this.ocShape=0,this.ocFillType=0,this.ocLineFlags=0,this.ocColor1=0,this.ocColor2=0,this.ocGradientFlags=0,this.ocImage=0}function Yl(){this.ocOEFlags=0,this.ocQualifiers=null,this.ocFlags2=0,this.ocOEPrefs=0,this.ocIdentifier=0,this.ocBackColor=0,this.ocMovements=null,this.ocValues=null,this.ocStrings=null,this.ocAnimations=null,this.ocCounters=null,this.ocObject=null,this.ocExtension=0,this.ocVersion=0,this.ocID=0,this.ocPrivate=0,this.ocFadeIn=null,this.ocFadeOut=null}function Xl(){this.odCx=0,this.odCy=0,this.odVersion=0,this.odNStartFrame=0,this.odOptions=0,this.odName=null}function Wl(){this.ctInit=0,this.ctMini=0,this.ctMaxi=0}function Vl(){this.odCx=0,this.odCy=0,this.odPlayer=0,this.odDisplayType=0,this.odDisplayFlags=0,this.odFont=0,this.ocBorderSize=0,this.ocBorderColor=0,this.ocShape=0,this.ocFillType=0,this.ocLineFlags=0,this.ocColor1=0,this.ocColor2=0,this.ocGradientFlags=0,this.nFrames=0,this.frames=null}function Ul(){this.odDWSize=0,this.odVersion=0,this.odOptions=0,this.odBackColor=0,this.odCx=0,this.odCy=0,this.text=null}function Kl(){this.tsFont=0,this.tsFlags=0,this.tsColor=0,this.tsText=null}function ql(){this.otCx=0,this.otCy=0,this.otNumberOfText=0,this.otTexts=null}function zl(){this.hoNumber=0,this.hoNextSelected=0,this.hoAdRunHeader=null,this.hoHFII=0,this.hoOi=0,this.hoNumPrev=0,this.hoNumNext=0,this.hoType=0,this.hoCreationId=0,this.hoOiList=null,this.hoEvents=0,this.hoPrevNoRepeat=null,this.hoBaseNoRepeat=null,this.hoMark1=0,this.hoMark2=0,this.hoMT_NodeName=null,this.hoEventNumber=0,this.hoCommon=null,this.hoCalculX=0,this.hoX=0,this.hoCalculY=0,this.hoY=0,this.hoImgXSpot=0,this.hoImgYSpot=0,this.hoImgWidth=0,this.hoImgHeight=0,this.hoOEFlags=0,this.hoFlags=0,this.hoSelectedInOR=0,this.hoOffsetValue=0,this.hoLayer=0,this.hoLimitFlags=0,this.hoNextQuickDisplay=0,this.hoCurrentParam=0,this.hoIdentifier=0,this.hoCallRoutine=!1,this.roc=null,this.rom=null,this.roa=null,this.rov=null,this.ros=null}function Jl(){this.smoothing=!1,this.image=null,this.bShown=!1,this.nLayer=0,this.pLayer=null,this.startFade=0,this.sprite=null,this.bHandCursor=!1,this.rcRotate=null,this.ptRotate=null,this.bVisible=!0,this.scaleX=1,this.scaleY=1,this.angle=0,this.x=0,this.y=0,this.transitionImage=null}function Ql(){this.flags=0,this.odOptions=0,this.subApp=null,this.oldX=0,this.oldY=0,this.level=-1,this.oldLevel=-1,this.layer=null,this.bVisible=!0}function Zl(){this.rcPlayer=0,this.rcMovementType=0,this.rcAnim=0,this.rcImage=-1,this.rcScaleX=1,this.rcScaleY=1,this.rcAngle=0,this.rcDir=0,this.rcSpeed=0,this.rcMinSpeed=0,this.rcMaxSpeed=0,this.rcChanged=!1,this.rcCheckCollides=!1,this.rcOldX=0,this.rcOldY=0,this.rcOldImage=-1,this.rcOldAngle=0,this.rcOldDir=0,this.rcOldX1=0,this.rcOldY1=0,this.rcOldX2=0,this.rcOldY2=0}function $l(){this.type=0,this.rsValue=0,this.rsMini=0,this.rsMaxi=0,this.rsBoxCx=0,this.rsBoxCy=0,this.bShown=!1,this.bQuickDisplay=!1,this.rsColor1=0,this.rsColor2=0,this.rsOldFrame=0,this.nIndex=0,this.displayFlags=0,this.bDeleted=!1,this.bFloat=!1,this.plane=null,this.pLayer=null,this.fontHeight=0,this.font=null,this.bAddedToPlane=!1,this.computed=!1}function tu(){this.rsPlayer=0,this.rsValue=0,this.rsBoxCx=0,this.rsBoxCy=0,this.rsFont=0,this.rsColor1=0,this.type=0,this.bShown=!0,this.nLayer=0,this.nIndex=0,this.plane=null,this.displayFlags=0,this.pLayer=null,this.bAddedToFrame=!1,this.fontHeight=0,this.alpha=1,this.composite="source-over",this.computed=!1}function eu(){this.rsPlayer=0,this.rsValue=0,this.rsBoxCx=0,this.rsBoxCy=0,this.rsFont=0,this.rsColor1=0,this.type=0,this.bShown=!0,this.nLayer=0,this.nIndex=0,this.plane=null,this.displayFlags=0,this.pLayer=null,this.bAddedToFrame=!1,this.fontHeight=0,this.alpha=1,this.composite="source-over",this.computed=!1}function iu(){this.rsTextBuffer=null,this.currentText=null,this.rsMaxi=0,this.rsMini=0,this.rsFont=0,this.rsTextColor=0,this.nLayer=0,this.font=null,this.bShown=!0,this.flags=0,this.rsHidden=0,this.pLayer=null,this.plane=null,this.bAddedToPlane=!1,this.rect=new h,this.deltaY=0,this.rsBoxCx=0,this.rsBoxCy=0,this.textSurface=null,this.computed=!1}function ru(){this.rsBoxCx=0,this.rsBoxCy=0,this.rcA=null,this.currentDown=0,this.xMouse=0,this.yMouse=0,this.textSurfaces=new Array}function su(t,e){this.ext=e.rhApp.extLoader.loadRunObject(t),this.noHandle=!1,this.privateData=0,this.objectCount=0,this.objectNumber=0,this.bAddedToPlane=!1,this.bShown=!0,this.nLayer=0,this.pLayer=null,this.plane=null}function nu(){}function ou(){this.x=0,this.y=0,this.dir=0,this.layer=0,this.bRepeat=!1}function hu(t){this.value1=t.file.readAShort(),this.value2=t.file.readAShort()}function au(t){this.timer=t.file.readAInt(),this.loops=t.file.readAInt(),this.comparaison=t.file.readAShort()}function lu(t){this.color=t.file.readAColor()}function uu(t){this.delay=t.file.readAInt(),this.compteur=t.file.readAInt()}function cu(t){this.comparaison=t.file.readAShort();for(var e,i=t.file.getFilePointer(),r=0;;){if(r++,0==t.file.readAInt())break;e=t.file.readAShort(),e>6&&t.file.skipBytes(e-6)}t.file.seek(i),this.tokens=new Array(r);var s;for(s=0;s<r;s++)this.tokens[s]=Nn.create(t.file)}function du(t){var e=t.file.readAShort();t.file.skipBytes(4),this.data=0,e>6&&(this.data=t.file.getFilePointer(),t.file.skipBytes(e-6))}function fu(t){this.grpFlags=t.file.readAShort(),this.grpId=t.file.readAShort()}function pu(t){t.file.skipBytes(4),this.pointer=0,this.id=t.file.readAShort()}function mu(t){this.value=t.file.readAInt(),this.value2=0}function gu(t){this.key=t.file.readAShort()}function vu(t){this.oiList=t.file.readShort(),this.oi=t.file.readShort(),this.type=t.file.readShort()}function _u(t){for(t.file.skipBytes(4),this.evgOffsetList=0,this.ois=new Array;;){var e=t.file.readShort(),i=t.file.readShort();if(-1==e)break;this.ois.push(e),this.ois.push(i)}}function Pu(){}function Eu(t){this.posOINUMParent=t.file.readShort(),this.posFlags=t.file.readShort(),this.posX=t.file.readShort(),this.posY=t.file.readShort(),this.posSlope=t.file.readShort(),this.posAngle=t.file.readShort(),this.posDir=t.file.readAInt(),this.posTypeParent=t.file.readShort(),this.posOiList=t.file.readShort(),this.posLayer=t.file.readShort()}function Au(t){this.posOINUMParent=t.file.readShort(),this.posFlags=t.file.readShort(),this.posX=t.file.readShort(),this.posY=t.file.readShort(),this.posSlope=t.file.readShort(),this.posAngle=t.file.readShort(),this.posDir=t.file.readAInt(),this.posTypeParent=t.file.readShort(),this.posOiList=t.file.readShort(),this.posLayer=t.file.readShort(),this.cdpHFII=t.file.readAShort(),this.cdpOi=t.file.readAShort()}function Ou(t){this.posOINUMParent=t.file.readShort(),this.posFlags=t.file.readShort(),this.posX=t.file.readShort(),this.posY=t.file.readShort(),this.posSlope=t.file.readShort(),this.posAngle=t.file.readShort(),this.posDir=t.file.readAInt(),this.posTypeParent=t.file.readShort(),this.posOiList=t.file.readShort(),this.posLayer=t.file.readShort(),this.cdpHFII=t.file.readShort(),this.cdpOi=t.file.readShort(),t.file.skipBytes(4),this.shtSpeed=t.file.readAShort()}function bu(t){this.sndHandle=t.file.readAShort(),this.sndFlags=t.file.readAShort()}function Su(t){this.value=t.file.readAShort()}function Tu(t){this.string=t.file.readAString()}function yu(t){this.timer=t.file.readAInt(),this.loops=t.file.readAInt()}function Cu(t){this.x1=t.file.readShort(),this.y1=t.file.readShort(),this.x2=t.file.readShort(),this.y2=t.file.readShort()}function Lu(t,e,i){this.index=t.file.readAInt(),this.op=t.file.readAInt(),this.global=e,i?this.val=t.file.readADouble():(this.val=t.file.readAInt(),
t.file.skipBytes(4))}function Iu(t){this.flags=t.file.readAInt(),this.flagMasks=t.file.readAInt(),this.flagValues=t.file.readAInt(),this.values=new Array;for(var e=1,i=2,r=4,s=0;s<4&&0!=(this.flags&e);s++){var n=new Lu(t,0!=(this.flags&i),0!=(this.flags&r));e<<=4,i<<=4,r<<=4,this.values.push(n)}}function Fu(){this.clips=[]}function xu(t){if(this.xScale=1,this.yScale=1,this.oldEffect=-1,this.smoothing=!1,this.oldSmoothing=!1,this.dxw=0,this.dyw=0,!(this._context=t.getContext("2d")))throw new Error("Failed to init standard renderer")}function wu(){this.dllName="",this.transID=0,this.transDuration=0,this.transFlags=0,this.transColor=0,this.dataOffset=0}function Mu(){}function Ru(){this.m_initTime=0,this.m_currentTime=0,this.m_endTime=0,this.m_duration=0,this.m_overflow=!1,this.m_running=!1,this.m_starting=!1,this.source1=null,this.source2=null,this.dest=null,this.destContext=null}function ku(t){this.app=t}function Nu(){}function Du(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0,this.m_style=0}function Hu(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0}function Bu(){this.bpNbBands=0,this.bpDirection=0,this.m_wbande=0,this.m_rw=0,this.m_prc=null}function Gu(){this.dwPos=0,this.dwPos2=0,this.m_source2Width=0,this.m_source2Height=0}function ju(){this.m_direction=0,this.m_wbande=0,this.m_rw=0}function Yu(){}function Xu(){this.dwPos=0,this.dwStyle=0,this.dwScrolling=0,this.m_source2Width=0,this.m_source2Height=0}function Wu(){this.m_spotPercent,this.m_spotSize=0,this.m_nbBlockPerLine=0,this.m_nbBlockPerCol=0,this.m_nbBlocks=0,this.m_lastNbBlocks=0,this.m_bitbuf=null}function Vu(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0}function Uu(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0,this.m_refresh=0}function Ku(){this.m_direction,this.m_wbande,this.m_rw}function qu(){this.dwStyle=0,this.dwPos=0,this.dwStretch=0,this.m_source2Width=0,this.m_source2Height=0}function zu(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0}function Ju(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0,this.m_phase=0}function Qu(){this.dwStyle=0,this.m_source2Width=0,this.m_source2Height=0,this.m_index=0,this.m_index2=0}function Zu(){this.dwPos=0,this.dwCheck1=0,this.dwCheck2=0,this.m_source2Width=0,this.m_source2Height=0,this.m_angle=0}function $u(){this.dwPos=0,this.dwCheck1=0,this.m_source2Width=0,this.m_source2Height=0,this.m_curcircle=0}function tc(){this.zpSpotPercent=0,this.zpStartPoint=0,this.zpDirection=0,this.m_spotSize=0,this.m_nbBlockPerLine=0,this.m_nbBlockPerCol=0,this.m_nbBlocks=0,this.m_lastNbBlocks=0,this.m_curx=0,this.m_cury=0,this.m_currentDirection=0,this.m_currentStartPoint=0,this.m_left=0,this.m_top=0,this.m_right=0,this.m_bottom=0}function ec(){this.dwStyle=0,this.dwPos=0,this.m_source2Width=0,this.m_source2Height=0,this.m_linepos=0,this.m_dir=0}function ic(){}function rc(){this.dwPos=0,this.m_source2Width=0,this.m_source2Height=0}function sc(t,e){var i=new s;Kc.application=new Ka(t,i,e),i.getFile(e,nc)}function nc(){Kc.application.load()}function oc(){Kc.application.stepApplication()}function hc(){this.x=0,this.y=0,this.visible=!0,this.children=new Array,this.bZoom=!1}function ac(){}function lc(){this.mask=null,this.lineWidth=0,this.height=0,this.width=0,this.xSpot=0,this.ySpot=0,this.lineWidth=0}function uc(){this.mask=null,this.angle=0,this.scaleX=1,this.scaleY=1,this.tick=0}function cc(){this.hoPtr=null,this.rsFlash=0,this.rsFlashCpt=0,this.rsLayer=0,this.rsZOrder=0,this.rsCreaFlags=0,this.rsBackColor=0,this.rsEffect=0,this.rsEffectParam=0,this.rsFlags=0,this.rsSpriteType=0,this.rsTransparency=0,this.rsTrans=null}function dc(){this.nStrings=0,this.strings=null}function fc(){this.nValues=0,this.values=null,this.flags=0}function pc(){this.rvValueFlags=0,this.rvValues=null,this.rvStrings=null}function mc(t){this.app=t,this.extensions=null,this.numOfConditions=0}function gc(){this.handle=0}function vc(){this.ho=null,this.rh=null}function _c(){}function Pc(){}function Ec(){}function Ac(){this.element=null,this.controlIgnoreHeight=!1,this.bnShownOld=!1}function Oc(){this.mvType=100,this.mvControl=0,this.mvMoveAtStart=0,this.mvDirAtStart=0,this.mvOpt=0}function bc(){this.nMovements=0,this.moveList=null}function Sc(){this.mbSpeed=0,this.mbBounce=0,this.mbAngles=0,this.mbSecurity=0,this.mbDecelerate=0}function Tc(){this.mgSpeed=0,this.mgAcc=0,this.mgDec=0,this.mgBounceMult=0,this.mgDir=0}function yc(){this.mmDx=0,this.mmFx=0,this.mmDy=0,this.mmFy=0,this.mmFlags=0}function Cc(){this.mtNumber=0,this.mtMinSpeed=0,this.mtMaxSpeed=0,this.mtLoop=0,this.mtRepos=0,this.mtReverse=0,this.steps=null}function Lc(){this.mdSpeed=0,this.mdDir=0,this.mdDx=0,this.mdDy=0,this.mdCosinus=0,this.mdSinus=0,this.mdLength=0,this.mdPause=0,this.mdName=null}function Ic(){this.mpSpeed=0,this.mpAcc=0,this.mpDec=0,this.mpJumpControl=0,this.mpGravity=0,this.mpJump=0}function Fc(){this.mrSpeed=0,this.mrAcc=0,this.mrDec=0,this.mrRot=0,this.mrBounceMult=0,this.mrAngles=0,this.mrOkReverse=0}function xc(){}function wc(){this.moduleName=null,this.mvtID=0,this.data=0,this.isPhysics=!1}function Mc(){this.hoPtr=null,this.rmAcc=0,this.rmDec=0,this.rmCollisionCount=0,this.rmStopSpeed=0,this.rmAccValue=0,this.rmDecValue=0,this.rmOpt=0}function Rc(){this.MB_StartDir=0,this.MB_Angles=0,this.MB_Securite=0,this.MB_SecuCpt=0,this.MB_Bounce=0,this.MB_Speed=0,this.MB_MaskBounce=0,this.MB_LastBounce=0,this.MB_Blocked=!1}function kc(){this.MBul_Wait=!1,this.MBul_ShootObject=null}function Nc(){}function Dc(){this.MG_Bounce=0,this.MG_OkDirs=0,this.MG_BounceMu=0,this.MG_Speed=0,this.MG_LastBounce=0,this.MG_DirMask=0}function Hc(){this.MM_DXMouse=0,this.MM_DYMouse=0,this.MM_FXMouse=0,this.MM_FYMouse=0,this.MM_Stopped=0,this.MM_OldSpeed=0}function Bc(){this.MT_Speed=0,this.MT_Sinus=0,this.MT_Cosinus=0,this.MT_Longueur=0,this.MT_XOrigin=0,this.MT_YOrigin=0,this.MT_XDest=0,this.MT_YDest=0,this.MT_MoveNumber=0,this.MT_Direction=!1,this.MT_Movement=null,this.MT_Calculs=0,this.MT_XStart=0,this.MT_YStart=0,this.MT_Pause=0,this.MT_GotoNode=null,this.MT_FlagBranch=!1}function Gc(){this.MP_Type=0,this.MP_Bounce=0,this.MP_BounceMu=0,this.MP_XSpeed=0,this.MP_Gravity=0,this.MP_Jump=0,this.MP_YSpeed=0,this.MP_XMB=0,this.MP_YMB=0,this.MP_HTFOOT=0,this.MP_JumpControl=0,this.MP_JumpStopped=0,this.MP_PreviousDir=0,this.MP_ObjectUnder=null,this.MP_XObjectUnder=0,this.MP_YObjectUnder=0,this.MP_NoJump=!1}function jc(){this.MR_Bounce=0,this.MR_BounceMu=0,this.MR_Speed=0,this.MR_RotSpeed=0,this.MR_RotCpt=0,this.MR_RotPos=0,this.MR_RotMask=0,this.MR_OkReverse=0,this.MR_OldJoy=0,this.MR_LastBounce=0}function Yc(){}function Xc(t){this.movement=t,this.callParam=0}function Wc(){this.ho=null,this.rh=null}function Vc(){this.rmObject=null,this.rmMvtNum=0,this.rmMovement=null,this.rmWrapping=0,this.rmMoveFlag=!1,this.rmReverse=0,this.rmBouncing=!1,this.rmEventFlags=0}function Uc(){this.parameters=null,this.ret=0,this.bError=!1}var Kc=this,qc={};qc.extend=function(t,e){var i=Object.create(t.prototype||t);if(void 0!==e&&(e=e.prototype||e))for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i},qc.HIWORD=function(t){return t>>16},qc.LOWORD=function(t){return 65535&t},qc.MAKELONG=function(t,e){return e<<16|65535&t},qc.getRValueFlash=function(t){return t>>>16&255},qc.getGValueFlash=function(t){return t>>>8&255},qc.getBValueFlash=function(t){return 255&t},qc.RGBFlash=function(t,e,i){return(255&t)<<16|(255&e)<<8|255&i},qc.swapRGB=function(t){return(255&t)<<16|(255&t>>>8)<<8|255&t>>>16},qc.clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},qc.getColorString=function(t){for(var e=(t>>>16&255).toString(16),i=(t>>>8&255).toString(16),r=(255&t).toString(16);e.length<2;)e="0"+e;for(;i.length<2;)i="0"+i;for(;r.length<2;)r="0"+r;return"#"+e+i+r},qc.floatToInt=function(t){return t<0?Math.ceil(t):Math.floor(t)},qc.approximateInt=function(t){return Math.round(t)},qc.isInt=function(t){return Math.ceil(t)==t},qc.createEllipse=function(t,e,i,r,s){ox=r/2*.5522848,oy=s/2*.5522848,xe=e+r,ye=i+s,xm=e+r/2,ym=i+s/2,t.beginPath(),t.moveTo(e,ym),t.bezierCurveTo(e,ym-oy,xm-ox,i,xm,i),t.bezierCurveTo(xm+ox,i,xe,ym-oy,xe,ym),t.bezierCurveTo(xe,ym+oy,xm+ox,ye,xm,ye),t.bezierCurveTo(xm-ox,ye,e,ym+oy,e,ym),t.closePath()},qc.drawRect=function(t,e){t.beginPath(),t.moveTo(e.left,e.top),t.lineTo(e.right,e.top),t.lineTo(e.right,e.bottom),t.lineTo(e.left,e.bottom),t.lineTo(e.left,e.top),t.closePath(),t.stroke()},qc.drawLine=function(t,e,i,r,s){t.beginPath(),t.moveTo(e,i),t.lineTo(r,s),t.closePath(),t.stroke()},qc.formatDiscName=function(t,e){for(var i=t.toString();i.length<4;)i="0"+i;return i+="."+e},qc.compareStringsIgnoreCase=function(t,e){return t==e||(t=t.toLowerCase(),e=e.toLowerCase(),t==e)},qc.parseName=function(t){var e=t.lastIndexOf("\\");return e>0&&(t=t.substring(e+1)),t},qc.MAX_HEIGHTS=40,qc.aHeightNormalToLF=[0,1,2,3,5,7,8,9,11,12,13,15,16,17,19,20,21,23,24,25,27,28,29,31,32,33,35,36,37,39,40,41,43,44,45,47,48,49,51,52],qc.heightNormalToLF=function(t){return t<qc.MAX_HEIGHTS?qc.aHeightNormalToLF[t]:Math.round(96*t/72)},qc.DT_LEFT=0,qc.DT_TOP=0,qc.DT_CENTER=1,qc.DT_RIGHT=2,qc.DT_BOTTOM=8,qc.DT_VCENTER=4,qc.DT_SINGLELINE=32,qc.DT_CALCRECT=1024,qc.DT_VALIGN=2048,qc.drawText=function(t,e,i,r,s,n){if(0==e.length)return 0!=(1024&i)&&(r.right=r.left,r.bottom=r.top),0;s.isGraphic||(t.font=s.getFont());var o=0,a=String.fromCharCode(10),l=String.fromCharCode(13),u=e.indexOf(a);if(u>=0){var c=new h;c.copyRect(r);var d,f,p,m,g=0,v=0;do{p=-1,g<e.length&&(p=e.indexOf(l,g)),m=Math.max(u,p),p==u-1&&u--,d=e.substring(g,u),f=qc.drawIt(t,d,i,c,n,s),v=Math.max(v,c.right-c.left),o+=f,c.top+=f,c.bottom=r.bottom,c.right=r.right,g=m+1,u=-1,g<e.length?u=e.indexOf(a,g):(f=qc.drawIt(t,"",i,c,n,s),v=Math.max(v,c.right-c.left),o+=f,c.top+=f,c.bottom=r.bottom,c.right=r.right)}while(u>=0);return g<e.length&&(d=e.substring(g),f=qc.drawIt(t,d,i,c,n,s),v=Math.max(v,c.right-c.left),o+=f),0!=(i&qc.DT_CALCRECT)?(r.right=r.left+v,r.bottom=c.bottom,o):o}return o=qc.drawIt(t,e,i|qc.DT_VALIGN,r,n,s)},qc.xPos=null,qc.drawIt=function(t,e,i,s,n,o){0==e.length&&(e=" ");var h,a;h=o.getHeight(),a=o.isGraphic?o.measureText(" "):t.measureText(" ").width;var l,u,c,d=s.right-s.left,f=0,p=0,m=0,g=0,v=0;null==qc.xPos&&(qc.xPos=new Array(100));var _,P,E=!1,A=!1,O=s.top,b=h;0!=(1&b)&&b++;var S=O;do{for(m=f,c=0,u=0,v+=h;;){if(qc.xPos[c]=u,c+=1,l=p,p=-1,m<e.length&&(p=e.indexOf(" ",m)),-1==p&&(p=e.length),p<m){u-=a;break}if(P=e.substring(m,p),_=o.isGraphic?o.measureText(P):t.measureText(P).width,u+_>d){if(--c>0){_-=a,u-=a,p=l;break}var T;for(T=m;T<p;T++){if(_=o.isGraphic?o.measureText(e.substring(T,T+1)):t.measureText(e.substring(T,T+1)).width,u+_>=d){if(--T>0){g=Math.max(u,g),0==(i&qc.DT_CALCRECT)&&(u=0!=(i&qc.DT_CENTER)?s.left+(s.right-s.left)/2-u/2:0!=(i&qc.DT_RIGHT)?s.right-u:s.left,P=e.substring(m,T),n.push(new r(u,O,P))),p=T-1,E=!0,A=!0;break}p=-1,p=T<e.length?e.indexOf(" ",T):-1,E=!0,p>=0&&(A=!0);break}u+=_}}if(E)break;if((u+=_)+a>d)break;u+=a,m=p+1}if(0==A){if(E)break;g=Math.max(u,g);var y;if(0==(i&qc.DT_CALCRECT))for(u=0!=(i&qc.DT_CENTER)?s.left+(s.right-s.left)/2-u/2:0!=(i&qc.DT_RIGHT)?s.right-u:s.left,m=f,y=0;y<c&&(p=-1,m<e.length&&(p=e.indexOf(" ",m)),-1==p&&(p=e.length),!(p<m));y++)P=e.substring(m,p),n.push(new r(u+qc.xPos[y],O,P)),m=p+1}E=!1,A=!1,O+=h,f=p+1}while(f<e.length);return s.right=s.left+g,s.bottom=S+v,v},qc.displayText=function(t,e,i,r,s,n,o,h){var a,l;if(s.isGraphic)for(a=0;a<r.length;a++)l=r[a],s.fillText(t,l.text,e+l.x,i+l.y);else for(t.font=s.getFont(),t.fillStyle=qc.getColorString(n),t.textAlign="left",t.textBaseline="top",a=0;a<r.length;a++)l=r[a],t.fillText(l.text,e+l.x,i+l.y)},qc.intToString=function(t,e){var i=t.toString();if(0!=(e&$l.CPTDISPFLAG_INTNDIGITS)){var r=e&$l.CPTDISPFLAG_INTNDIGITS;if(i.length>r)i=i.substring(i.length-r);else for(;i.length<r;)i="0"+i}return i},qc.doubleToString=function(t,e){var i;if(0==(e&$l.CPTDISPFLAG_FLOAT_FORMAT))i=t.toString();else{var r=Math.floor(1+((e&$l.CPTDISPFLAG_FLOATNDIGITS)>>$l.CPTDISPFLAG_FLOATNDIGITS_SHIFT)),s=-1;0!=(e&$l.CPTDISPFLAG_FLOAT_USENDECIMALS)?s=(e&$l.CPTDISPFLAG_FLOATNDECIMALS)>>$l.CPTDISPFLAG_FLOATNDECIMALS_SHIFT:0!=t&&t>-1&&t<1&&(s=r,!0),i=s<0?t.toPrecision(r):t.toFixed(s);var n,o,h;if(0!=(e&$l.CPTDISPFLAG_FLOAT_PADD))for(n=0,o=0;o<i.length;o++)"."!=(h=i.charAt(o))&&"+"!=h&&"-"!=h&&"e"!=h&&"E"!=h&&n++;var a=!1;for("-"==i.charAt(0)&&(a=!0,i=i.substr(1));n<r;)i="0"+i,n++;a&&(i="-"+i)}return i},qc.subtractFilename=function(t,e){for(var i=t,r=e,s=r.indexOf("\\");s>=0;)i.substring(0,s)==r.substring(0,s)&&(r=r.substring(s+1),i=i.substring(s+1)),s=r.indexOf("\\",s+1);return i};var zc=!1,Jc=!1,Qc=!1,Zc=window.XMLHttpRequest?new XMLHttpRequest:null;if(Zc&&Zc.overrideMimeType)try{Jc="string"==typeof(new XMLHttpRequest).responseType,navigator.userAgent.toLowerCase().indexOf("safari")>=0&&(Jc=!1)}catch(t){}else{zc=!0;var $c=document.createElement("script");$c.type="text/vbscript",$c.innerHTML='Function BinFileReaderImpl_IE_VBAjaxLoader(fileName)\n\t                Dim xhr\n\t                Set xhr = CreateObject("Microsoft.XMLHTTP")\n\t                xhr.Open "GET", fileName, False\n\t                xhr.setRequestHeader "Accept-Charset", "x-user-defined"\n\t                xhr.send\n\t                Dim byteArray()\n\t                if xhr.Status = 200 Then\n\t                    Dim byteString\n\t                    Dim i\n\t                    byteString=xhr.responseBody\n\t                    ReDim byteArray(LenB(byteString))\n\t                    For i = 1 To LenB(byteString)\n\t                        byteArray(i-1) = AscB(MidB(byteString, i, 1))\n\t                    Next\n\t                End If\n\t                BinFileReaderImpl_IE_VBAjaxLoader=byteArray\n\t            End Function',document.head.appendChild($c)}if(Jc){var td=new FileReader;try{td.readAsBinaryString&&(Qc=!0)}catch(t){}td=null}Zc=null,s.prototype={readUnsignedByte:function(){return 255&this.ccfBytes.charCodeAt(this.pointer++)},getChecksum:function(){var t,e=0;for(t=0;t<this.end;t++)e+=255&this.ccfBytes.charCodeAt(t)^170;return e},getFile:function(t,e,i){if(this.callback=e,zc)try{var r,s=BinFileReaderImpl_IE_VBAjaxLoader(t).toArray(),n=s.length;for(n>i&&(n=i),r=0;r<n;r++)this.ccfBytes+=String.fromCharCode(s[r]);this.end=this.ccfBytes.length,this.callback()}catch(t){}else{var o=new XMLHttpRequest;o.open("GET",t,!0);var h=this;Jc?(o.responseType="blob",o.onload=function(){if(4==o.readyState&&200==o.status){var t=new FileReader;t.onloadend=function(){if(Qc)h.ccfBytes+=t.result;else{var e,i=new Uint8Array(t.result);for(e=0;e<i.length;e++)h.ccfBytes+=String.fromCharCode(i[e])}h.end=h.ccfBytes.length,h.callback()},Qc?t.readAsBinaryString(o.response):t.readAsArrayBuffer(o.response)}},o.send(null)):(o.overrideMimeType("text/plain; charset=x-user-defined"),o.onload=function(){4==o.readyState&&200==o.status&&(h.ccfBytes+=o.responseText,h.end=h.ccfBytes.length,h.callback())},o.send(null))}},openFileASync:function(t,e){this.parent=e;var i=new XMLHttpRequest;i.open("GET",t,!0),i.overrideMimeType("text/plain; charset=x-user-defined");var r=this;i.onload=function(){if(4==i.readyState&&200==i.status)return r.ccfBytes=i.responseText,r.end=r.ccfBytes.length,r.pointer=0,r.offset=0,r.bUnicode=!1,void r.parent.dataReceived(!0)},i.send(null)},getBytes:function(){return this.ccfBytes},setBinary:function(t){this.ccfBytes=t,this.end=t.length;var e=this;this.readUnsignedByte=function(){return 255&e.ccfBytes.charCodeAt(e.pointer++)}},createFromFile:function(t,e){var i=new s;return i.ccfBytes=this.ccfBytes,i.offset=t,i.pointer=t,i.end=t+e,i.bUnicode=this.bUnicode,i},getLength:function(){return this.end-this.offset},setUnicode:function(t){this.bUnicode=t},detectUnicode:function(){var t=this.readUnsignedByte(),e=this.readUnsignedByte(),i=this.readUnsignedByte();255==t&&254==e?(this.bUnicode=!0,this.pointer--):239==t&&187==e&&191==i?this.bUnicode=!1:(this.bUnicode=!1,this.pointer-=3)},skipBytes:function(t){this.pointer+=t},adjustTo8:function(){0!=(7&this.pointer)&&(this.pointer+=8-(7&this.pointer))},isEOF:function(){return this.pointer>=this.end},readInString:function(t){var e,i="";for(e=0;e<t;e++)i+=String.fromCharCode(this.readUnsignedByte());return i},readAByte:function(){return this.readUnsignedByte()},readAShort:function(){var t;return t=this.readUnsignedByte(),256*this.readUnsignedByte()+t},readShort:function(){var t,e;t=this.readUnsignedByte(),e=this.readUnsignedByte();var i=256*e+t;return i<32768?i:i-65536},readAChar:function(){var t;return t=this.readUnsignedByte(),256*this.readUnsignedByte()+t},readACharArray:function(t){var e,i,r,s=new Array;for(r=0;r<t;r++)e=this.readUnsignedByte(),i=this.readUnsignedByte(),s[r]=256*i+e;return s},readAInt:function(){var t,e,i,r;t=this.readUnsignedByte(),e=this.readUnsignedByte(),i=this.readUnsignedByte(),r=this.readUnsignedByte();var s=16777216*r+65536*i+256*e+t;return s<=2147483647?s:s-4294967296},readAColor:function(){var t,e,i;return t=this.readUnsignedByte(),e=this.readUnsignedByte(),i=this.readUnsignedByte(),this.readUnsignedByte(),65536*t+256*e+i},readAFloat:function(){var t,e,i,r;t=this.readUnsignedByte(),e=this.readUnsignedByte(),i=this.readUnsignedByte(),r=this.readUnsignedByte();var s=16777216*r+65536*i+256*e+t;return s>2147483648&&(s-=4294967296),s/65536},readADouble:function(){var t,e,i,r,s,n,o,h;t=this.readUnsignedByte(),e=this.readUnsignedByte(),i=this.readUnsignedByte(),r=this.readUnsignedByte(),s=this.readUnsignedByte(),n=this.readUnsignedByte(),o=this.readUnsignedByte(),h=this.readUnsignedByte();var a=72057594037927940*h+281474976710656*o+1099511627776*n+4294967296*s+16777216*r+65536*i+256*e+t;return a>0x8000000000000000&&(a-=0x10000000000000000),a/4294967296},readAString:function(t){var e="";if(this.bUnicode){if(arguments.length<1){if(this.isEOF())return e;for(var i=this.pointer,r=this.readAChar();r&&!this.isEOF();)r=this.readAChar();var s=(this.pointer-i-2)/2;return this.pointer=i,e=this.readAString(s),this.readUnsignedByte(),this.readUnsignedByte(),e}e="";for(var n,i=this.pointer,o=0;o<t&&0!=(n=this.readAChar());o++)e+=String.fromCharCode(n);return this.pointer=i+2*t,e}if(arguments.length<1){if(this.isEOF())return e;for(var i=this.pointer,r=this.readUnsignedByte();r&&!this.isEOF();)r=this.readUnsignedByte();var s=this.pointer-i-1;return this.pointer=i,e=this.readAString(s),this.readUnsignedByte(),e}for(var n,i=this.pointer,o=0;o<t&&0!=(n=this.readUnsignedByte());++o)e+=String.fromCharCode(n);return this.pointer=i+t,e},readAStringEOL:function(){var t,e,i,r,s=this.pointer,n="";if(0==this.bUnicode){if(this.isEOF())return;for(t=this.readUnsignedByte();10!=t&&13!=t&&!this.isEOF();)t=this.readUnsignedByte();return e=this.pointer,this.pointer=s,i=1,10!=t&&13!=t&&(i=0),e>s+i&&(n=this.readAString(e-s-i)),10!=t&&13!=t||(this.readUnsignedByte(),r=this.readAByte(),10==t&&13!=r&&this.pointer--,13==t&&10!=r&&this.pointer--),n}if(!this.isEOF()){for(t=this.readAChar();10!=t&&13!=t&&!this.isEOF();)t=this.readAChar();return e=this.pointer,this.pointer=s,i=2,10!=t&&13!=t&&(i=0),e>s+i&&(n=this.readAString((e-s-i)/2)),10!=t&&13!=t||(this.pointer+=2,r=this.readAChar(),10==t&&13!=r&&(this.pointer-=2),13==t&&10!=r&&(this.pointer-=2)),n}},skipAString:function(){var t;if(0==this.bUnicode)do{t=this.readUnsignedByte()}while(0!=t&&!this.EOF());else do{t=this.readAChar()}while(0!=t&&!this.EOF())},getFilePointer:function(){return this.pointer},seek:function(t){t>=this.end&&(t=this.end),this.pointer=t},skipBack:function(t){var e=this.pointer;e-=t,e<0&&(e=0),this.pointer=e},readBytesAsArray:function(t){var e,i=t.length;for(e=0;e<i;e++)t[e]=this.readUnsignedByte()},readBuffer:function(t){var e,i=new Array;for(e=0;e<t;e++)i[e]=this.readUnsignedByte();return i},readLogFont:function(){var t=new l;return t.readLogFont(this),t},readLogFont16:function(){var t=new l;return t.readLogFont16(this),t}},n.prototype={add:function(t){this.array.push(t)},isEmpty:function(){return 0==this.array.length},insert:function(t,e){this.array.splice(t,0,e)},get:function(t){return t<this.array.length?this.array[t]:null},put:function(t,e){this.array[t]=e},set:function(t,e){t<this.array.length&&(this.array[t]=e)},removeIndex:function(t){t<this.array.length&&this.array.splice(t,1)},indexOf:function(t){return this.array.indexOf(t)},contains:function(t){return this.array.indexOf(t)>=0},removeObject:function(t){var e=this.array.indexOf(t);e>=0&&this.array.splice(e,1)},size:function(){return this.array.length},clear:function(){this.array.length=0},sort:function(t){Array.prototype.sort.call(this.array,t)}},h.prototype={load:function(t){this.left=t.readAInt(),this.top=t.readAInt(),this.right=t.readAInt(),this.bottom=t.readAInt()},copyRect:function(t){this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom},ptInRect:function(t,e){return t>=this.left&&t<this.right&&e>=this.top&&e<this.bottom},intersectRect:function(t){return(this.left>=t.left&&this.left<t.right||this.right>=t.left&&this.right<t.right||t.left>=this.left&&t.left<this.right||t.right>=this.left&&t.right<this.right)&&(this.top>=t.top&&this.top<t.bottom||this.bottom>=t.top&&this.bottom<t.bottom||t.top>=this.top&&t.top<this.bottom||t.bottom>=this.top&&t.bottom<this.bottom)}},l.prototype={copy:function(t){this.lfHeight=t.lfHeight,this.lfWeight=t.lfWeight,this.lfItalic=t.lfItalic,this.lfFaceName=t.lfFaceName},getFont:function(){var t;t=this.lfItalic?"italic ":"normal ";var e=100*Math.floor(this.lfWeight/100);return e=Math.max(e,100),e=Math.min(e,900),t+=e+" ",t+=this.lfHeight+"px ",t+=this.lfFaceName},getHeight:function(){return this.lfHeight+Math.ceil(this.lfHeight/8)},init:function(){this.lfFaceName="Arial",this.lfHeight=13,this.lfWeight=400,this.lfItalic=0},readLogFont:function(t){this.lfHeight=t.readAInt(),this.lfHeight<0&&(this.lfHeight=-this.lfHeight),t.skipBytes(12),this.lfWeight=t.readAInt(),this.lfItalic=t.readAByte(),this.lfUnderline=t.readAByte(),this.lfStrikeOut=t.readAByte(),t.skipBytes(5),this.lfFaceName=t.readAString(32)},readLogFont16:function(t){this.lfHeight=t.readShort(),this.lfHeight<0&&(this.lfHeight=-this.lfHeight),t.skipBytes(6),this.lfWeight=t.readAShort(),this.lfItalic=t.readAByte(),this.lfUnderline=t.readAByte(),this.lfStrikeOut=t.readAByte(),t.skipBytes(5);var e=t.bUnicode;t.bUnicode=!1,this.lfFaceName=t.readAString(32),t.bUnicode=e}},u.separator="{@24}",u.INIFLAG_UTF8=1,u.INIFLAG_UTF16=2,u.prototype={saveIni:function(){if(null!=this.strings&&null!=this.currentFileName){var t,e="";for(t=0;t<this.strings.size();t++)e+=this.strings.get(t)+u.separator;localStorage.setItem(this.currentFileName,e)}},loadIni:function(t){var e=!0;if(null!=this.currentFileName&&qc.compareStringsIgnoreCase(t,this.currentFileName)&&(e=!1),e){this.saveIni(),this.currentFileName=t,this.strings=new n;var i=localStorage.getItem(this.currentFileName);if(i)for(var r=0,s=i.indexOf(u.separator,0);s>=0;)this.strings.add(i.substring(r,s)),r=s+u.separator.length,s=i.indexOf(u.separator,r);else{var o=null;if(null==o){var h=this.app.getEmbeddedFile(this.currentFileName);null!=h&&(o=h.open())}if(o){var a=!1;for(o.detectUnicode(),void 0!==this.flags&&(this.flags&u.INIFLAG_UTF8&&(this.bUnicode=!1,a=!0),this.flags&u.INIFLAG_UTF16&&(this.bUnicode=!0));0==o.isEOF();){var l=o.readAStringEOL();if(a&&(l=this.decodeUtf8(l)),"<"==l.substring(0,1)){this.strings.clear();break}if(null==l)break;this.strings.add(l)}}}}},decodeUtf8:function(t){for(var e="",i=0,r=0,s=0,n=0;i<t.length;)r=t.charCodeAt(i),r<128?(e+=String.fromCharCode(r),i++):r>191&&r<224?(s=t.charCodeAt(i+1),e+=String.fromCharCode((31&r)<<6|63&s),i+=2):(s=t.charCodeAt(i+1),n=t.charCodeAt(i+2),e+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&n),i+=3);return e},findSection:function(t){var e,i,r;for(e=0;e<this.strings.size();e++)if(i=this.strings.get(e),"["==i.charAt(0)){var s=i.lastIndexOf("]");if(s>=1&&(r=i.substring(1,s),qc.compareStringsIgnoreCase(t,r)))return e}return-1},findKey:function(t,e){for(var i,r,s;t<this.strings.size();t++){if(i=this.strings.get(t),"["==i.charAt(0))return-1;if((s=i.indexOf("="))>=0){for(var n=0;n<s&&32==i.charCodeAt(n);)n++;for(;s>n&&32==i.charCodeAt(s-1);)s--;if(s>n&&(r=i.substring(0,s),qc.compareStringsIgnoreCase(r,e)))return t}}return-1},getPrivateProfileString:function(t,e,i,r){this.loadIni(r);var s=this.findSection(t);if(s>=0&&(s=this.findKey(s+1,e))>=0){var n=this.strings.get(s),o=n.indexOf("=");return n.substring(o+1)}return i},writePrivateProfileString:function(t,e,i,r){this.loadIni(r);var s,n=this.findSection(t);if(n<0)return s="["+t+"]",this.strings.add(s),s=e+"="+i,void this.strings.add(s);var o=this.findKey(n+1,e);if(o>=0)return s=e+"="+i,void this.strings.set(o,s);for(o=n+1;o<this.strings.size();o++)if(s=this.strings.get(o),"["==s.charAt(0))return s=e+"="+i,void this.strings.insert(o,s);s=e+"="+i,this.strings.add(s)},deleteItem:function(t,e,i){this.loadIni(i);var r=this.findSection(t);if(r>=0){var s=this.findKey(r+1,e);s>=0&&this.strings.removeIndex(s),this.saveIni()}},deleteGroup:function(t,e){this.loadIni(e);var i=this.findSection(t);if(i>=0){for(this.strings.removeIndex(i);;){if(i>=this.strings.size())break;if("["==this.strings.get(i).charAt(0))break;this.strings.removeIndex(i)}this.saveIni()}}},d.prototype={measureText:function(t,e){return e=this.app.getGraphicFont(e),e.isGraphic?e.measureText(t):(this.canvasContext.font=e.getFont(),this.canvasContext.measureText(t).width)},setText:function(t,e,i,r,s){if(t==this.lastText&&e==this.lastFlags&&i==this.lastRect&&r==this.lastFont&&s==this.lastColor)return this.lastHt;var n=this.canvasContext;n.clearRect(0,0,this.width,this.height),i||(i=new h(0,0,this.width,this.height));var o=new Array(0);r=this.app.getGraphicFont(r);var a=qc.drawText(n,t,e,i,r,o);if(0!=a){var l=0;0!=(e&qc.DT_BOTTOM)?l=this.height-a:0!=(e&qc.DT_VCENTER)&&(l=this.height/2-a/2),qc.displayText(n,0,l,o,r,s,0,0)}return this.lastText=t,this.lastFlags=e,this.lastRect=i,this.lastFont=r,this.lastColor=s,this.lastHt=a,a},manualClear:function(t){if(!t)return void this.canvasContext.clearRect(0,0,this.width,this.height);this.canvasContext.fillStyle=qc.getColorString(t),this.canvasContext.fillRect(0,0,this.width,this.height)},manualDrawText:function(t,e,i,r,s,n,o){var a=(this.canvasContext,new Array(0));i||(i=new h(0,0,this.width,this.height)),s=this.app.getGraphicFont(s);var l=qc.drawText(this.canvasContext,t,e,i,s,a);if(0!=l){var u=0;switch(0!=(e&qc.DT_BOTTOM)?u=this.height-l:0!=(e&qc.DT_VCENTER)&&(u=this.height/2-l/2),n){case 1:qc.displayText(this.canvasContext,1,u+1,a,s,o,0,0),qc.displayText(this.canvasContext,0,u,a,s,r,0,0);break;case 2:qc.displayText(this.canvasContext,1,u,a,s,o,0,0),qc.displayText(this.canvasContext,1,u+2,a,s,o,0,0),qc.displayText(this.canvasContext,0,u+1,a,s,o,0,0),qc.displayText(this.canvasContext,2,u+1,a,s,o,0,0),qc.displayText(this.canvasContext,1,u+1,a,s,r,0,0);break;case 0:qc.displayText(this.canvasContext,0,u,a,s,r,0,0)}}},resize:function(t,e){t==this.width&&e==this.height||(this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e)},draw:function(t,e,i,r,s){t.renderSimpleImage(this.canvas,e,i,this.width,this.height,r,s)}},f.dataBrowser=[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],f.dataOS=[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"MacOS"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPod",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],f.prototype={searchString:function(t){for(var e=0;e<t.length;e++){var i=t[e].string,r=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!=i.indexOf(t[e].subString))return t[e].identity}else if(r)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!=e)return parseFloat(t.substring(e+this.versionSearchString.length+1))}},p.prototype={replaceColor:function(t,e,i,r){this.app=t.rhApp;var s=e.hoOi,n=t.rhApp.OIList.getOIFromHandle(s);if(null!=n){this.dwMax=-1,this.mode=0,n.enumElements(this,null);for(var o=e;0==(2147483648&o.hoNumPrev);)o=t.rhObjectList[2147483647&o.hoNumPrev];for(;;){if(-1!=o.roc.rcImage&&o.roc.rcImage>this.dwMax&&(this.dwMax=o.roc.rcImage),-1!=o.roc.rcOldImage&&o.roc.rcOldImage>this.dwMax&&(this.dwMax=o.roc.rcOldImage),0!=(2147483648&o.hoNumNext))break;o=t.rhObjectList[o.hoNumNext]}this.pImages=new Array(this.dwMax+1);var h;for(h=0;h<this.dwMax+1;h++)this.pImages[h]=-1;this.mode=1,n.enumElements(this,null);var a;for(a=0;a<=this.dwMax;a++)if(-1!=this.pImages[a]){var l=t.rhApp.imageBank.getImageFromHandle(a),u=qc.performReplacement(t.rhApp,l,r,i);null!=u&&(this.pImages[a]=t.rhApp.imageBank.addImage(u))}for(o=e;0==(2147483648&o.hoNumPrev);)o=t.rhObjectList[2147483647&o.hoNumPrev];for(;;){if(-1!=o.roc.rcImage&&-1!=this.pImages[o.roc.rcImage]&&(o.roc.rcImage=this.pImages[o.roc.rcImage]),-1!=o.roc.rcOldImage&&-1!=this.pImages[o.roc.rcOldImage]&&(o.roc.rcOldImage=this.pImages[o.roc.rcOldImage]),0!=(2147483648&o.hoNumNext))break;o=t.rhObjectList[o.hoNumNext]}this.mode=2,n.enumElements(this,null),this.mode=3,n.enumElements(this,null),n.oiLoadFlags|=Dl.OILF_TORELOAD}},enumerate:function(t){switch(this.mode){case 0:return t>this.dwMax&&(this.dwMax=t),-1;case 1:return this.pImages[t]=1,-1;case 2:return this.app.imageBank.delImage(t),-1;case 3:return this.app.imageBank.getImageFromHandle(this.pImages[t]).useCount++,this.pImages[t]}return-1}},qc.performReplacement=function(t,e,i,r){var s=document.createElement("canvas");s.width=e.width,s.height=e.height;var n=s.getContext("2d");0==e.mosaic?n.drawImage(e.img,0,0):n.drawImage(t.imageBank.mosaics[e.mosaic],e.mosaicX,e.mosaicY,e.width,e.height,0,0,e.width,e.height);var o,h,a,l=n.getImageData(0,0,e.width,e.height),u=r>>16&255,c=r>>8&255,d=255&r,f=i>>16&255,p=i>>8&255,m=255&i;for(a=0;a<e.height;a++)for(h=0;h<e.width;h++)o=4*(a*e.width+h),l.data[o]==f&&l.data[o+1]==p&&l.data[o+2]==m&&(l.data[o]=u,l.data[o+1]=c,l.data[o+2]=d);n.putImageData(l,0,0);var g=new vl;return g.app=t,g.width=e.width,g.height=e.height,g.xSpot=e.xSpot,g.ySpot=e.ySpot,g.xAP=e.xAP,g.yAP=e.yAP,g.useCount=0,g.img=s,g.maskNormal=e.maskNormal,g.maskPlatform=e.maskPlatform,g.maskRotation=e.maskRotation,g},m.FONTFLAG_ITALIC=1,m.FONTFLAG_UNDERLINE=2,m.FONTFLAG_BOLD=4,m.FLAG_PRIORITY=8,m.prototype={compareFont:function(t){if(this.fontName!=t.lfFaceName)return!1;if(this.fontHeight!=t.lfHeight)return!1;var e=0!=(this.fontFlags&m.FONTFLAG_ITALIC),i=0!=t.lfItalic;return e==i&&(e=0!=(this.fontFlags&m.FONTFLAG_BOLD),i=t.lfWeight>400,e==i)},getHeight:function(){return this.height+this.interline},measureText:function(t){var e,i,r=0,s=t.length;for(e=0;e<s;e++)i=this.characters.indexOf(t.charAt(e)),r+=i>=0?this.charWidths[i]+this.interchar:this.width;return r},measureChar:function(t){var e=characters.indexOf(String.fromCharCode(t));return e>=0?this.charWidths[e]+this.interchar:this.width},fillText:function(t,e,i,r){var s,n,o,h,a,l,u=e.length,c=this.image
;if(0==(this.flags&m.FLAG_PRIORITY))for(s=0;s<u;s++)h=this.characters.indexOf(e.charAt(s)),h>=0?(l=Math.floor(h/this.nChars),a=h-l*this.nChars,o=l*(this.height+1),n=a*(this.width+1),0==c.mosaic?t.drawImage(c.img,n,o,this.width,this.height,Math.round(i),Math.round(r),this.width,this.height):t.drawImage(c.app.imageBank.mosaics[c.mosaic],n+c.mosaicX,o+c.mosaicY,this.width,this.height,Math.round(i),Math.round(r),this.width,this.height),i+=this.charWidths[h]+this.interchar):(t.fillStyle=qc.getColorString(this.color),t.fillRect(i,r,this.width,this.height),i+=this.width);else for(i+=this.measureText(e),s=u-1;s>=0;s--)h=this.characters.indexOf(e.charAt(s)),h>=0?(i-=this.charWidths[h]+this.interchar,l=h/this.nChars,a=h-l*this.nChars,o=l*(this.height+1),n=a*(this.width+1),0==c.mosaic?t.drawImage(c.img,n,o,this.width,this.height,Math.round(i),Math.round(r),this.width,this.height):t.drawImage(c.app.imageBank.mosaics[c.mosaic],n+c.mosaicX,o+c.mosaicY,this.width,this.height,Math.round(i),Math.round(r),this.width,this.height)):(i-=this.width,t.fillStyle=qc.getColorString(this.color),t.fillRect(i,r,this.width,this.height))}},g.prototype={selectAll:function(t){var e=this.OiList[t];e.oilNumOfSelected=e.oilNObjects,e.oilListSelected=e.oilObject,e.oilEventCount=this.eventProgram.rh2EventCount;for(var i=e.oilObject;0==(2147483648&i);){var r=this.ObjectList[i];r.hoNextSelected=r.hoNumNext,i=r.hoNumNext}},selectNone:function(t){var e=this.OiList[t];null!=e&&(e.oilNumOfSelected=0,e.oilListSelected=-1,e.oilEventCount=this.eventProgram.rh2EventCount)},selectOneObject:function(t){var e=t.hoOiList;e.oilNumOfSelected=1,e.oilEventCount=this.eventProgram.rh2EventCount,e.oilListSelected=t.hoNumber,this.ObjectList[t.hoNumber].hoNextSelected=-1},selectObjects:function(t,e){var i=this.OiList[t];if(null!=i&&(i.oilNumOfSelected=e.length,i.oilEventCount=eventProgram.rh2EventCount,0!=e.length)){var r=0,s=e[r].hoNumber;for(i.oilListSelected=s;r<e.length;)currentNumber=e[r++].hoNumber,this.ObjectList[s].hoNextSelected=currentNumber,s=currentNumber;this.ObjectList[s].hoNextSelected=-1}},filterObjects:function(t,e,i,r){return 0!=(32768&e)?0!=((this.filterQualifierObjects(t,32767&e,i,r)?1:0)^(i?1:0)):0!=((this.filterNonQualifierObjects(t,e,i,r)?1:0)^(i?1:0))},filterQualifierObjects:function(t,e,i,r){for(var s=this.QualToOiList[e],n=!1,o=0;o<s.qoiList.length;){var h=s.qoiList[o+1];n=0!=((n?1:0)|(this.filterNonQualifierObjects(t,h,i,r)?1:0)),o+=2}return n},filterNonQualifierObjects:function(t,e,i,r){var s=this.OiList[e];if(null==s)return!1;var n=!1;if(s.oilEventCount!=this.eventProgram.rh2EventCount&&this.selectAll(e),s.oilNumOfSelected<=0)return!1;for(var o=-1,h=0,a=s.oilListSelected,l=null;0==(2147483648&a);){var u=this.ObjectList[a],c=r(t,u),d=0!=((c?1:0)^(i?1:0));n=0!=((n?1:0)|(d?1:0)),d&&(-1==o&&(o=a),null!=l&&(l.hoNextSelected=a),l=u,h++),a=u.hoNextSelected}return null!=l&&(l.hoNextSelected=-1),s.oilListSelected=o,s.oilNumOfSelected=h,n},getNumberOfSelected:function(t){if(0!=(32768&t)){t&=32767;for(var e=0,i=this.QualToOiList[t],r=0;r<i.qoiList.length;){e+=this.OiList[i.qoiList[r+1]].oilNumOfSelected,r+=2}return e}return this.OiList[t].oilNumOfSelected},objectIsOfType:function(t,e){if(0!=(32768&e)){e&=32767;for(var i=this.QualToOiList[e],r=0;r<i.qoiList.length;){if(this.OiList[i.qoiList[r+1]].oilOi==t.hoOi)return!0;r+=2}return!1}return t.hoOi==this.OiList[e].oilOi},GetOILFromOI:function(t){for(i=0;i<this.run.rhMaxOI;++i){var e=this.OiList[i];if(e.oilOi==t)return e}return null}},v.prototype={countTokens:function(){return this.tokens.size()},nextToken:function(){if(this.numToken<this.tokens.size()){var t=this.tokens.get(this.numToken++);return null==t?"":t}return""}},_.ACTFLAGS_REPEAT=1,_.ACT_EXTSETFRICTION=17408,_.ACT_EXTSETELASTICITY=17664,_.ACT_EXTAPPLYIMPULSE=17920,_.ACT_EXTAPPLYANGULARIMPULSE=18176,_.ACT_EXTAPPLYFORCE=18432,_.ACT_EXTAPPLYTORQUE=18688,_.ACT_EXTSETLINEARVELOCITY=18944,_.ACT_EXTSETANGULARVELOCITY=19200,_.ACT_EXTFOREACH=19456,_.ACT_EXTFOREACH2=19712,_.ACT_EXTSTOPFORCE=19968,_.ACT_EXTSTOPTORQUE=20224,_.ACT_EXTSETDENSITY=20480,_.ACT_EXTSETGRAVITYSCALE=20736,_.ACT_STARTLOOP=983039,_.create=function(t){var e=!1,i=!1,r=!1,s=!1,n=!1,o=!1,h=!1,a=!1,l=!1,u=!1,c=t.file.getFilePointer(),d=t.file.readAShort(),f=null,p=t.file.readAInt();switch(p){case 65535:case 131071:f=new E;break;case 262143:f=new I;break;case 327679:f=new M;break;case 393215:f=new A;break;case 458751:f=new b;break;case 524287:f=new S;break;case 983039:f=new k;break;case 1048575:f=new w;break;case 1114111:f=new L;break;case 1179647:f=new T;break;case 1310719:f=new C;break;case 1572863:case 1638399:f=new E;break;case 1835007:f=new F,e=!0;break;case 1900543:f=new I;break;case 1966079:f=new F,e=!0;break;case 2031615:f=new I;break;case 2097151:f=new O,i=!0;break;case 2162687:f=new A;break;case 2228223:f=new O,i=!0;break;case 2293759:f=new A;break;case 2359295:f=new R,r=!0;break;case 2424831:f=new M;break;case 2490367:f=new R,r=!0;break;case 2555903:f=new M;break;case 2883583:f=new N;break;case 2949119:f=new E;break;case 65534:f=new U;break;case 131070:f=new nt;break;case 327678:f=new V;break;case 458750:f=new ot;break;case 524286:f=new Y;break;case 589822:f=new J;break;case 786430:f=new X;break;case 851966:f=new W;break;case 917502:f=new j;break;case 983038:f=new z;break;case 1048574:f=new st;break;case 1114110:f=new Q;break;case 1179646:f=new $;break;case 1245182:f=new E;break;case 1310718:f=new et;break;case 1376254:f=new tt;break;case 1441790:f=new rt;break;case 1507326:case 1572862:f=new E;break;case 1638398:f=new G;break;case 1703934:f=new q;break;case 2031614:f=new B;break;case 2097150:f=new ht;break;case 2162686:f=new Z;break;case 2228222:f=new it;break;case 2424830:f=new K;break;case 65533:f=new oe;break;case 131069:f=new ge;break;case 196605:f=new ne;break;case 262141:f=new he;break;case 327677:f=new se;break;case 393213:f=new we;break;case 458749:f=new Me;break;case 524285:f=new Zt;break;case 589821:f=new $t;break;case 655357:f=new te;break;case 983037:f=new ce;break;case 1048573:f=new de;break;case 1114109:f=new ae;break;case 1179645:f=new he;break;case 1245181:f=new fe;break;case 1310717:f=new le;break;case 1376253:f=new ue;break;case 1441789:f=new Ee;break;case 1507325:f=new Pe;break;case 1572861:f=new ee;break;case 1638397:f=new re;break;case 1703933:f=new ie;break;case 1769469:f=new _e;break;case 1835005:f=new ve;break;case 2097149:f=new pe;break;case 2162685:case 2228221:case 2293757:case 2359293:case 2424829:f=new E;break;case 2490365:f=new me;break;case 65532:f=new Qt;break;case 131068:f=new zt;break;case 196604:f=new Jt;break;case 65530:f=new D;break;case 131066:f=new H;break;case 65529:f=new Vt;break;case 131065:f=new Xt;break;case 196601:f=new Bt;break;case 262137:f=new Gt;break;case 327673:f=new qt;break;case 393209:f=new Ht;break;case 458745:f=new Kt;break;case 524281:f=new Ut;break;case 589817:f=new jt;break;case 655353:f=new Yt;break;case 720889:f=new Wt;break;case 65531:f=new Re;break;case 131067:f=new ke;break;case 5242883:f=new at;break;case 5308419:f=new lt;break;case 5373955:f=new ut;break;case 5439491:f=new mt;break;case 5505027:f=new pt;break;case 5570563:f=new ft;break;case 5636099:f=new dt;break;case 5701635:f=new ct;break;case 5767171:f=new gt;break;case 5242882:f=new Oe;break;case 5308418:f=new Ae;break;case 5373954:f=new Ki;break;case 5439490:f=new Ie;break;case 5505026:f=new Se;break;case 5570562:f=new Te;break;case 5636098:f=new Ce;break;case 5701634:f=new Le;break;case 5767170:f=new be;break;case 5242887:f=new Ot;break;case 5308423:f=new vt;break;case 5373959:f=new bt;break;case 5439495:f=new At;break;case 5505031:f=new Et;break;case 5570567:f=new _t;break;case 5636103:f=new Pt;break;case 5242884:f=new Fe;break;case 5242889:f=new Ft;break;case 5308425:f=new xt;break;case 5373961:f=new Ct;break;case 5439497:f=new It;break;case 5505033:f=new St;break;case 5636105:f=new yt;break;case 5701641:f=new Nt;break;case 5767177:f=new Dt;break;case 5832713:f=new Tt;break;case 5898249:f=new kt;break;case 5963785:f=new Lt;break;case 6029321:f=new wt;break;case 6094857:f=new Mt;break;case 6160393:f=new Rt;break;default:switch(4294901760&p){case 0:f=new bi,u=!0;break;case 65536:f=new Ii;break;case 2<<16:f=new Hi;break;case 3<<16:f=new Bi;break;case 4<<16:f=new Ji;break;case 5<<16:f=new qi;break;case 6<<16:f=new Wi;break;case 7<<16:f=new ei;break;case 8<<16:f=new ir;break;case 9<<16:f=new He;break;case 655360:f=new ci;break;case 720896:f=new ni;break;case 786432:f=new oi;break;case 851968:f=new di;break;case 917504:f=new ti;break;case 983040:f=new Qi;break;case 16<<16:f=new zi;break;case 17<<16:f=new Ke;break;case 18<<16:f=new qe;break;case 19<<16:f=new Je;break;case 20<<16:f=new hi;break;case 21<<16:f=new ai;break;case 22<<16:f=new ui;break;case 23<<16:f=new vi;break;case 24<<16:f=new We;break;case 25<<16:f=new Xi;break;case 26<<16:f=new Ze;break;case 27<<16:f=new Yi;break;case 28<<16:f=new Ue;break;case 29<<16:f=new Gi;break;case 30<<16:f=new ji;break;case 31<<16:f=new ki,s=!0;break;case 32<<16:f=new Zi,n=!0;break;case 33<<16:f=new tr,o=!0;break;case 34<<16:f=new Ve;break;case 35<<16:f=new Ai,h=!0;break;case 36<<16:f=new Ye,a=!0;break;case 37<<16:f=new Ge,l=!0;break;case 38<<16:f=new $e;break;case 39<<16:f=new wi;break;case 40<<16:f=new ze;break;case 41<<16:f=new li;break;case 42<<16:f=new fi;break;case 43<<16:f=new gi;break;case 44<<16:f=new xi;break;case 45<<16:f=new _i;break;case 46<<16:f=new Be;break;case 47<<16:f=new Ci;break;case 48<<16:f=new Qe;break;case 49<<16:f=new Di;break;case 50<<16:f=new Ti;break;case 51<<16:f=new yi;break;case 52<<16:f=new mi;break;case 53<<16:f=new Li;break;case 54<<16:f=new Ri;break;case 55<<16:f=new E;break;case 56<<16:f=new Mi;break;case 57<<16:f=new Ui;break;case 58<<16:f=new Vi;break;case 59<<16:f=new ri;break;case 60<<16:f=new ii;break;case 61<<16:f=new si;break;case 62<<16:f=new E;break;case 63<<16:f=new Pi;break;case 64<<16:f=new E;break;case 65<<16:f=new pi;break;case 66<<16:f=new Fi;break;case 67<<16:f=new E;break;case 68<<16:f=new rr;break;case 69<<16:f=new sr;break;case 70<<16:f=new ur;break;case 71<<16:f=new nr;break;case 72<<16:f=new or;break;case 73<<16:f=new hr;break;case 74<<16:f=new ar;break;case 75<<16:f=new lr;break;case 76<<16:f=new Ne;break;case 77<<16:f=new De;break;case 78<<16:f=new cr;break;case 79<<16:f=new dr;break;default:f=new Pc}}if(null!=f){f.evtCode=p,f.evtOi=t.file.readShort(),f.evtOiList=t.file.readShort(),f.evtFlags=t.file.readAByte(),f.evtFlags2=t.file.readAByte(),f.evtNParams=t.file.readAByte(),f.evtDefType=t.file.readAByte();var m=0;if(u){f.evtNParams--;var g=t.file.getFilePointer(),v=t.file.readAShort();t.file.readAShort();m=t.file.readAShort(),t.file.seek(g+v)}if(f.evtNParams>0){f.evtParams=new Array(f.evtNParams);var _;for(_=0;_<f.evtNParams;_++)f.evtParams[_]=nu.create(t)}if(0!=m){var P=null;switch(m){case 1:P=new Si}null!=P&&(P.evtCode=f.evtCode,P.evtOi=f.evtOi,P.evtOiList=f.evtOiList,P.evtFlags=f.evtFlags,P.evtFlags2=f.evtFlags2,P.evtNParams=f.evtNParams,P.evtDefType=f.evtDefType,P.evtParams=f.evtParams,f=P)}if(e||i||r){var y=f.evtParams[0];f.num=y.value;var x=f.evtParams[1];f.value=x.tokens[0].value}if(s||n||o){var P=null,y=f.evtParams[0];if(53!=y.code){var ye=y.value,x=f.evtParams[1];ye>=0&&2==x.tokens.length&&(x.tokens[1].code<=0||x.tokens[1].code>=1310720)&&(65535!=x.tokens[0].code&&1572863!=x.tokens[0].code||(s?(P=new Ni,P.num=ye,P.value=x.tokens[0].value):n?(P=new $i,P.num=ye,P.value=x.tokens[0].value):o&&(P=new er,P.num=ye,P.value=x.tokens[0].value))),null!=P&&(P.evtCode=f.evtCode,P.evtOi=f.evtOi,P.evtOiList=f.evtOiList,P.evtFlags=f.evtFlags,P.evtFlags2=f.evtFlags2,P.evtNParams=f.evtNParams,P.evtDefType=f.evtDefType,P.evtParams=f.evtParams,f=P)}}if(h||a||l){var P=null,xe=f.evtParams[0];2==xe.tokens.length&&(xe.tokens[1].code<=0||xe.tokens[1].code>=1310720)&&65535==xe.tokens[0].code&&(h?(P=new Oi,P.mask=1<<xe.tokens[0].value):a?(P=new Xe,P.mask=1<<xe.tokens[0].value):l&&(P=new je,P.mask=1<<xe.tokens[0].value)),null!=P&&(P.evtCode=f.evtCode,P.evtOi=f.evtOi,P.evtOiList=f.evtOiList,P.evtFlags=f.evtFlags,P.evtFlags2=f.evtFlags2,P.evtNParams=f.evtNParams,P.evtDefType=f.evtDefType,P.evtParams=f.evtParams,f=P)}}return t.file.seek(c+d),f},P.FLFLAG_STOP=1,E.prototype={execute:function(t){}},A.prototype={execute:function(t){var e;e=52==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.get_EventExpressionAny(this.evtParams[1]);t.rhApp.addGlobalValueAt(e,i)}},O.prototype={execute:function(t){t.rhApp.addGlobalValueAt(this.num,this.value)}},b.prototype={execute:function(t){var e=this.evtParams[0],i=e.pointer,r=t.rhEvtProg.events[i],s=r.evgEvents[0],n=s.evtParams[0],o=0!=(n.grpFlags&fu.GRPFLAGS_GROUPINACTIVE);n.grpFlags&=~fu.GRPFLAGS_GROUPINACTIVE,o&&this.grpActivate(t,i)},grpActivate:function(t,e){var i,r=t.rhEvtProg.events[e],s=r.evgEvents[0],n=s.evtParams[0],o=!1;if(0==(n.grpFlags&fu.GRPFLAGS_PARENTINACTIVE))for(r.evgFlags&=~Tl.EVGFLAGS_INACTIVE,e++,o=!1,i=1;;){switch(r=t.rhEvtProg.events[e],s=r.evgEvents[0],s.evtCode){case-589825:if(n=s.evtParams[0],1==i&&(n.grpFlags&=~fu.GRPFLAGS_PARENTINACTIVE),0==(n.grpFlags&fu.GRPFLAGS_GROUPINACTIVE)){e=this.grpActivate(t,e);continue}i++;break;case-655361:i--,0==i&&(r.evgFlags&=~Tl.EVGFLAGS_INACTIVE,o=!0,e++);break;case-1441793:1==i&&(r.evgFlags&=~Tl.EVGFLAGS_INACTIVE,r.evgFlags&=~Tl.EVGFLAGS_ONCE);break;case-2686977:r.evgFlags|=Tl.EVGFLAGS_INACTIVE;break;default:1==i&&(r.evgFlags&=~Tl.EVGFLAGS_INACTIVE)}if(o)break;e++}else for(e++,o=!1,i=1;;e++){switch(r=t.rhEvtProg.events[e],s=r.evgEvents[0],s.evtCode){case-589825:i++;break;case-655361:i--,0==i&&(o=!0,e++);break;case-2686977:r.evgFlags|=Tl.EVGFLAGS_INACTIVE}if(o)break}return e}},S.prototype={execute:function(t){var e=this.evtParams[0],i=e.pointer,r=t.rhEvtProg.events[i],s=r.evgEvents[0],n=s.evtParams[0],o=0==(n.grpFlags&fu.GRPFLAGS_GROUPINACTIVE);n.grpFlags|=fu.GRPFLAGS_GROUPINACTIVE,1==o&&0==(n.grpFlags&fu.GRPFLAGS_PARENTINACTIVE)&&this.grpDeactivate(t,i)},grpDeactivate:function(t,e){var i=t.rhEvtProg.events[e],r=i.evgEvents[0],s=r.evtParams[0];i.evgFlags|=Tl.EVGFLAGS_INACTIVE;var n,o,h;for(e++,o=!1,n=1;;){switch(i=t.rhEvtProg.events[e],r=i.evgEvents[0],r.evtCode){case-589825:if(s=r.evtParams[0],h=0==(s.grpFlags&fu.GRPFLAGS_PARENTINACTIVE),1==n&&(s.grpFlags|=fu.GRPFLAGS_PARENTINACTIVE),0!=h&&0==(s.grpFlags&fu.GRPFLAGS_GROUPINACTIVE)){e=this.grpDeactivate(t,e);continue}n++;break;case-655361:n--,0==n&&(i.evgFlags|=Tl.EVGFLAGS_INACTIVE,o=!0,e++);break;default:1==n&&(i.evgFlags|=Tl.EVGFLAGS_INACTIVE)}if(o)break;e++}return e}},T.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rh3Graine=e}},C.prototype={execute:function(t){var e;e=59==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.get_EventExpressionString(this.evtParams[1]);t.rhApp.setGlobalStringAt(e,i)}},L.prototype={execute:function(t){var e=this.evtParams[0];if(e.tokens[0].code==Nn.EXP_LONG&&0==e.tokens[1].code){var i=t.get_EventExpressionInt(this.evtParams[1]),r=t.rh4FastLoops.get(e.tokens[0].value);r.index=i}else{var s=t.get_EventExpressionString(this.evtParams[0]);if(0==s.length)return;var r,n,i=t.get_EventExpressionInt(this.evtParams[1]);for(n=0;n<t.rh4FastLoops.size();n++)if(r=t.rh4FastLoops.get(n),qc.compareStringsIgnoreCase(r.name,s))return void(r.index=i)}}},I.prototype={execute:function(t){var e;e=52==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.get_EventExpressionAny(this.evtParams[1]);t.rhApp.setGlobalValueAt(e,i)}},F.prototype={execute:function(t){t.rhApp.setGlobalValueAt(this.num,this.value)}},w.prototype={execute:function(t){var e=this.evtParams[0];if(e.tokens[0].code==Nn.EXP_LONG&&0==e.tokens[1].code){var i=t.rh4FastLoops.get(e.tokens[0].value);i.flags|=P.FLFLAG_STOP}else{var r=t.get_EventExpressionString(this.evtParams[0]);if(0==r.length)return;var i,s;for(s=0;s<t.rh4FastLoops.size();s++)i=t.rh4FastLoops.get(s),qc.compareStringsIgnoreCase(i.name,r)&&(i.flags|=P.FLFLAG_STOP)}}},M.prototype={execute:function(t){var e;e=52==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.get_EventExpressionAny(this.evtParams[1]);t.rhApp.addGlobalValueAt(e,-i)}},R.prototype={execute:function(t){t.rhApp.addGlobalValueAt(this.num,-this.value)}},k.prototype={execute:function(t){var e,i,r=!1;if(0==t.rhEvtProg.complexOnLoop&&null!=t.rh4PosOnLoop){var s=this.evtParams[0].fastFastLoop;if(0==s&&(e=t.get_EventExpressionString(this.evtParams[0]),r=!0,0!=e.length)){var n;for(n=0;n<t.rh4PosOnLoop.length;n++)if(qc.compareStringsIgnoreCase(e,t.rh4PosOnLoop[n].name)){s=n+1;break}}if(0!=s){var o=t.rh4PosOnLoop[s-1];if(0==o.m_bOR){i=Math.floor(t.get_EventExpressionInt(this.evtParams[1]));var h=t.rh4FastLoops.get(o.fastLoopIndex);h.flags&=~P.FLFLAG_STOP;var a=!1;i<0&&(a=!0,i=10);var l=t.rh4CurrentFastLoop,u=t.rhEvtProg.rh2ActionLoop,c=t.rhEvtProg.rh2ActionLoopCount;t.rhEvtProg.rhEventGroup;for(h.index=0;h.index<i&&(t.rh4CurrentFastLoop=h.name,t.rhEvtProg.rh2ActionOn=!1,t.rhEvtProg.computeEventFastLoopList(o.pointers),0==(h.flags&P.FLFLAG_STOP));h.index++)a&&(i=h.index+10);return t.rhEvtProg.rh2ActionLoopCount=c,t.rhEvtProg.rh2ActionLoop=u,t.rh4CurrentFastLoop=l,void(t.rhEvtProg.rh2ActionOn=!0)}}}if(r||(e=t.get_EventExpressionString(this.evtParams[0])),0!=e.length){i=Math.floor(t.get_EventExpressionInt(this.evtParams[1]));var d=t.addFastLoop(e),h=t.rh4FastLoops.get(d);h=t.rh4FastLoops.get(d),h.flags&=~P.FLFLAG_STOP;var a=!1;i<0&&(a=!0,i=10);var l=t.rh4CurrentFastLoop,u=t.rhEvtProg.rh2ActionLoop,c=t.rhEvtProg.rh2ActionLoopCount;t.rhEvtProg.rhEventGroup;for(h.index=0;h.index<i&&(t.rh4CurrentFastLoop=h.name,t.rhEvtProg.rh2ActionOn=!1,t.rhEvtProg.handle_GlobalEvents(-983041),0==(h.flags&P.FLFLAG_STOP));h.index++)a&&(i=h.index+10);t.rhEvtProg.rh2ActionLoopCount=c,t.rhEvtProg.rh2ActionLoop=u,t.rh4CurrentFastLoop=l,t.rhEvtProg.rh2ActionOn=!0}}},N.prototype={execute:function(t){t.rhEvtProg.childEventParam=this.evtParams[0]}},D.prototype={execute:function(t){0==t.rhMouseUsed&&t.hideMouse()}},H.prototype={execute:function(t){0==t.rhMouseUsed&&t.showMouse()}},B.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.soundPlayer.lockChannel(e-1)}},G.prototype={execute:function(t){t.rhApp.soundPlayer.pause()}},j.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.soundPlayer.pauseChannel(e-1)}},Y.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;i>=0&&t.rhApp.soundPlayer.pauseSample(i)}},X.prototype={execute:function(t){var e=this.evtParams[0],i=t.get_EventExpressionInt(this.evtParams[1]),r=!1,s=-1;if(45==e.code){var n=t.get_EventExpressionString(e);s=t.rhApp.soundBank.getSoundHandleFromName(n)}else r=0!=(e.sndFlags&bu.PSOUNDFLAG_UNINTERRUPTABLE),s=e.sndHandle;s>=0&&t.rhApp.soundPlayer.play(s,1,i-1,r,-1,0)}},W.prototype={execute:function(t){var e=this.evtParams[0],i=!1,r=-1;if(45==e.code){var s=t.get_EventExpressionString(e);r=t.rhApp.soundBank.getSoundHandleFromName(s)}else i=0!=(e.sndFlags&bu.PSOUNDFLAG_UNINTERRUPTABLE),r=e.sndHandle;var n=t.get_EventExpressionInt(this.evtParams[1]),o=t.get_EventExpressionInt(this.evtParams[2]);r>=0&&t.rhApp.soundPlayer.play(r,o,n-1,i,-1,0)}},V.prototype={execute:function(t){var e=this.evtParams[0],i=t.get_EventExpressionInt(this.evtParams[1]),r=!1,s=-1;if(45==e.code){var n=t.get_EventExpressionString(e);s=t.rhApp.soundBank.getSoundHandleFromName(n)}else r=0!=(e.sndFlags&bu.PSOUNDFLAG_UNINTERRUPTABLE),s=e.sndHandle;s>=0&&t.rhApp.soundPlayer.play(s,i,-1,r,-1,0)}},U.prototype={execute:function(t){var e=this.evtParams[0],i=!1,r=-1;if(45==e.code){var s=t.get_EventExpressionString(e);r=t.rhApp.soundBank.getSoundHandleFromName(s)}else i=0!=(e.sndFlags&bu.PSOUNDFLAG_UNINTERRUPTABLE),r=e.sndHandle;r>=0&&t.rhApp.soundPlayer.play(r,1,-1,i,-1,0)}},K.prototype={execute:function(t){var e=this.evtParams[0],i=!1,r=-1;if(45==e.code){var s=t.get_EventExpressionString(e);r=t.rhApp.soundBank.getSoundHandleFromName(s)}else i=0!=(e.sndFlags&bu.PSOUNDFLAG_UNINTERRUPTABLE),r=e.sndHandle;if(r>=0){var n=t.get_EventExpressionInt(this.evtParams[1]),o=t.get_EventExpressionInt(this.evtParams[2]),h=t.get_EventExpressionInt(this.evtParams[3]),a=t.get_EventExpressionInt(this.evtParams[5]);t.rhApp.soundPlayer.play(r,o,n-1,i,h,a)}}},q.prototype={execute:function(t){t.rhApp.soundPlayer.resume()}},z.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.soundPlayer.resumeChannel(e-1)}},J.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;i>=0&&t.rhApp.soundPlayer.resumeSample(i)}},Q.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&t.rhApp.soundPlayer.setPositionChannel(e-1,i)}},Z.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&t.rhApp.soundPlayer.setFrequencyChannel(e-1,i)}},$.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&i<=100&&t.rhApp.soundPlayer.setVolumeChannel(e-1,i)}},tt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);e>=0&&e<=100&&t.rhApp.soundPlayer.setMainVolume(e)}},et.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;var s=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&s>=0&&t.rhApp.soundPlayer.setPositionSample(i,s)}},it.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;var s=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&s>=0&&t.rhApp.soundPlayer.setFrequencySample(i,s)}},rt.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;var s=t.get_EventExpressionInt(this.evtParams[1]);i>=0&&s>=0&&s<=100&&t.rhApp.soundPlayer.setVolumeSample(i,s)}},st.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.soundPlayer.stopChannel(e-1)}},nt.prototype={execute:function(t){t.rhApp.soundPlayer.stopAllSounds()}},ot.prototype={execute:function(t){var e=this.evtParams[0],i=-1;if(45==e.code){var r=t.get_EventExpressionString(e);i=t.rhApp.soundBank.getSoundHandleFromName(r)}else i=e.sndHandle;i>=0&&t.rhApp.soundPlayer.stopSample(i)}},ht.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.soundPlayer.unlockChannel(e-1)}},at.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(0!=(e.rsHidden&il.COF_FIRSTTEXT)?(e.ros.obHide(),e.ros.rsFlags&=~cc.RSFLAG_VISIBLE,e.hoFlags|=zl.HOF_NOCOLLISION):(e.hoFlags|=zl.HOF_DESTROYED,t.destroy_Add(e.hoNumber)))}},lt.prototype={execute:function(t){var e=this.evtParams[1];t.txtDoDisplay(this,e.value)}},ut.prototype={execute:function(t){var e=this.evtParams[1],i=t.txtDoDisplay(this,e.value);if(i>=0){var r=this.evtParams[2],s=t.rhObjectList[i];2==r.code?(s.ros.rsFlash=r.timer,s.ros.rsFlashCpt=r.timer):(s.ros.rsFlash=t.get_EventExpressionInt(r),s.ros.rsFlashCpt=s.ros.rsFlash)}}},ct.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.txtChange(-1)}},dt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=e.rsMini+1;e.txtChange(i)}}},ft.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=e.rsMini-1;i<0&&(i=0),e.txtChange(i)}}},pt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=31==this.evtParams[0].code?this.evtParams[0].value:t.get_EventExpressionInt(this.evtParams[0])-1,e.txtChange(i)}}},mt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;24==this.evtParams[0].code?i=this.evtParams[0].color:(i=t.get_EventExpressionInt(this.evtParams[0]),i=qc.swapRGB(i)),il.setObjectTextColor(e,i)}}},gt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[0]);(null==e.rsTextBuffer||null!=e.rsTextBuffer&&i!=e.rsTextBuffer)&&(e.txtSetString(i),e.txtChange(-1))}}},vt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionAny(this.evtParams[0]);e.cpt_Add(i)}}},_t.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;this.evtParams[0].code==nu.PARAM_EXPRESSIONNUM?(i=t.get_EventExpressionInt(this.evtParams[0]),i=qc.swapRGB(i)):i=this.evtParams[0].color,e.cpt_SetColor1(i)}}},Pt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;this.evtParams[0].code==nu.PARAM_EXPRESSIONNUM?(i=t.get_EventExpressionInt(this.evtParams[0]),i=qc.swapRGB(i)):i=this.evtParams[0].color,e.cpt_SetColor2(i)}}},Et.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionAny(this.evtParams[0]);e.cpt_SetMax(i)}}},At.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionAny(this.evtParams[0]);e.cpt_SetMin(i)}}},Ot.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionAny(this.evtParams[0]);e.cpt_ToFloat(i),e.cpt_Change(i)}}},bt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionAny(this.evtParams[0]);e.cpt_Sub(i)}}},St.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.endApp()}},Tt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.hide()}},yt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.jumpFrame(i)}}},Ct.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.nextFrame()}},Lt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.pause()}},It.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.previousFrame()}},Ft.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.restartApp()}},xt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.restartFrame()}},wt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.resume()}},Mt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.setWidth(i)}}},Rt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.setHeight(i)}}},kt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0])-1,r=t.get_EventExpressionString(this.evtParams[1]);e.setGlobalString(i,r)}}},Nt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0])-1,r=t.get_EventExpressionAny(this.evtParams[1]);e.setGlobalValue(i,r)}}},Dt.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.show()}},Ht.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi;e=t.rhApp.getLives()[i]+e,t.actPla_FinishLives(i,e)}},Bt.prototype={execute:function(t){t.rh2InputMask[this.evtOi]=0}},Gt.prototype={execute:function(t){t.rh2InputMask[this.evtOi]=255}},jt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);if(!(e>Ka.CTRLTYPE_KEYBOARD)){e==Ka.CTRLTYPE_MOUSE&&(e=Ka.CTRLTYPE_KEYBOARD);var i=this.evtOi;i>=4||(t.rhApp.getCtrlType()[i]=e)}}},Yt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);if(!(e>=8)){var i=this.evtOi;if(!(i>=4)){var r=this.evtParams[1].key;t.rhApp.pcCtrlKeys[i*Ka.MAX_KEY+e]=r}}}},Xt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi;t.actPla_FinishLives(i,e)}},Wt.prototype={execute:function(t){var e=this.evtOi;if(!(e>=Ka.MAX_PLAYER)){var i=t.get_EventExpressionString(this.evtParams[0]);t.rhApp.playerNames[e]=i}}},Vt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi,r=t.rhApp.getScores();r[i]=e,t.update_PlayerObjects(i,Dl.OBJ_SCORE,r[i])}},Ut.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi;e=t.rhApp.getLives()[i]-e,t.actPla_FinishLives(i,e)}},Kt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi,r=t.rhApp.getScores();r[i]-=e,r[i]<0&&(r[i]=0),t.update_PlayerObjects(i,Dl.OBJ_SCORE,r[i])}},qt.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=this.evtOi,r=t.rhApp.getScores();r[i]+=e,t.update_PlayerObjects(i,Dl.OBJ_SCORE,r[i])}},zt.prototype={execute:function(t){var e;e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer;for(var i=t.get_EventExpressionString(this.evtParams[1]),r=t.rh4TimerEvents,s=null;null!=r;)s=r,r=r.next;var n=new wl;null==s?t.rh4TimerEvents=n:s.next=n,n.type=wl.TIMEREVENTTYPE_ONESHOT,n.timer=t.rhTimer+e,n.name=i,n.next=null}},Jt.prototype={execute:function(t){var e;e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer;var i,r=t.get_EventExpressionInt(this.evtParams[1]);i=22==this.evtParams[2].code?t.get_EventExpressionInt(this.evtParams[2]):this.evtParams[2].timer;for(var s=t.get_EventExpressionString(this.evtParams[3]),n=t.rh4TimerEvents,o=null;null!=n;)o=n,n=n.next;var h=new wl;null==o?t.rh4TimerEvents=h:o.next=h,h.type=wl.TIMEREVENTTYPE_REPEAT,h.timer=t.rhTimer+e,h.timerNext=i,h.timerPosition=0,h.loops=r,h.index=0,h.next=null,h.name=s}},Qt.prototype={execute:function(t){var e;e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer;var i=t.rhApp.timer;t.rhTimer=e,t.rhTimerOld=i-t.rhTimer,t.rhEvtProg.restartTimerEvents()}},Zt.prototype={execute:function(t){var e=this.evtParams[0],i=new ou;e.read_Position(t,0,i),t.setDisplay(i.x,i.y,i.layer,3)}},$t.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.setDisplay(e,0,-1,1)}},te.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.setDisplay(0,e,-1,2)}},ee.prototype={execute:function(t){var e;24==this.evtParams[0].code?e=this.evtParams[0].color:(e=t.get_EventExpressionInt(this.evtParams[0]),e=qc.swapRGB(e)),t.rhFrame.leBackground=e,t.rhApp.frameColor=e}},te.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.setDisplay(0,e,-1,2)}},ie.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0])-1;t.deleteAllBackdrop2(e)}},re.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0])-1,i=t.get_EventExpressionInt(this.evtParams[1]),r=t.get_EventExpressionInt(this.evtParams[2]),s=0!=t.get_EventExpressionInt(this.evtParams[3]);t.deleteBackdropAt(e,i,r,s)}},se.prototype={execute:function(t){t.rhApp.subAppStopped=!0,t.rhApp.isSubApp&&!t.rhApp.isPreloaderSubApp&&(t.rhQuit=il.LOOPEXIT_ENDGAME)}},ne.prototype={execute:function(t){var e;if(26==this.evtParams[0].code){if(e=this.evtParams[0].value,-1==t.rhApp.HCellToNCell(e))return}else{if((e=t.get_EventExpressionInt(this.evtParams[0])-1)<0||e>=4096)return
;t.rhApp.bShiftFrameNumber&&e++,e|=32768}t.rhQuit=il.LOOPEXIT_GOTOLEVEL,t.rhQuitParam=e,t.rhApp.subAppStopped=!0}},oe.prototype={execute:function(t){t.rhQuit=il.LOOPEXIT_NEXTLEVEL,t.rhApp.subAppStopped=!0}},he.prototype={execute:function(t){t.rh4PauseKey=this.evtParams[0].key,t.rhQuit=il.LOOPEXIT_PAUSEGAME}},ae.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.gaFrameRate=e}},le.prototype={execute:function(t){t.rhApp.gaNewFlags|=Ka.GANF_VSYNC}},ue.prototype={execute:function(t){t.rhApp.gaNewFlags&=~Ka.GANF_VSYNC}},ce.prototype={execute:function(t){t.rhApp.enterFullScreen()}},de.prototype={execute:function(t){t.rhApp.exitFullScreen()}},fe.prototype={execute:function(t){t.rh4PauseKey=-1,t.rhQuit=il.LOOPEXIT_PAUSEGAME}},pe.prototype={execute:function(t){}},me.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);t.rhApp.dwOptions&=~Ka.AH2OPT_RESAMPLESTRETCH,e&&(t.rhApp.dwOptions|=Ka.AH2OPT_RESAMPLESTRETCH)}},ge.prototype={execute:function(t){t.rhApp.subAppStopped=!0,t.rhQuit=il.LOOPEXIT_PREVLEVEL}},ve.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.rhFrame.leHeight;t.rhFrame.leHeight=e,i==t.rhFrame.leVirtualRect.bottom&&(t.rhFrame.leVirtualRect.bottom=t.rhLevelSy=e);var r;for(r=0;r<t.rhFrame.nLayers;r++)t.rhFrame.layers[r].resetLevelBackground();t.drawLevel()}},_e.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.rhFrame.leWidth;t.rhFrame.leWidth=e,i==t.rhFrame.leVirtualRect.right&&(t.rhFrame.leVirtualRect.right=t.rhLevelSx=e);var r;for(r=0;r<t.rhFrame.nLayers;r++)t.rhFrame.layers[r].resetLevelBackground();t.drawLevel()}},Pe.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);e<t.rhFrame.leHeight&&(e=t.rhFrame.leHeight),e>2147479552&&(e=2147479552),t.rhFrame.leVirtualRect.bottom!=e&&(t.rhFrame.leVirtualRect.bottom=t.rhLevelSy=e)}},Ee.prototype={execute:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);e<t.rhFrame.leWidth&&(e=t.rhFrame.leWidth),e>2147479552&&(e=2147479552),t.rhFrame.leVirtualRect.right!=e&&(t.rhFrame.leVirtualRect.right=t.rhLevelSx=e)}},Ae.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=e.getChildMaxIndex();e.setChildIndex(i-1)}}},Oe.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(null!=e.roa&&e.roa.animIn(0),t.activeToBackdrop(e,this.evtParams[0].value))}},be.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);i%=360,i<0&&(i+=360);var r=t.GetMBase(e);if(r)return void r.setAngle(i);var s=!1;0!=t.get_EventExpressionInt(this.evtParams[1])&&(s=!0);var n=!1;if(0!=(e.ros.rsFlags&cc.RSFLAG_ROTATE_ANTIA)&&(n=!0),e.roc.rcAngle!=i||n!=s){e.roc.rcAngle=i,e.ros.rsFlags&=~cc.RSFLAG_ROTATE_ANTIA,s&&(e.ros.rsFlags|=cc.RSFLAG_ROTATE_ANTIA),e.roc.rcChanged=!0;var o=e.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(e.roc.rcImage,e.roc.rcAngle,e.roc.rcScaleX,e.roc.rcScaleY);e.hoImgWidth=o.width,e.hoImgHeight=o.height,e.hoImgXSpot=o.xSpot,e.hoImgYSpot=o.ySpot}}}},Se.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){e.roa.animIn(0);var i;24==this.evtParams[0].code?i=this.evtParams[0].color:(i=t.get_EventExpressionInt(this.evtParams[0]),i=qc.swapRGB(i));var r;24==this.evtParams[1].code?r=this.evtParams[1].color:(r=t.get_EventExpressionInt(this.evtParams[1]),r=qc.swapRGB(r)),i!=r&&(null==this.replace&&(this.replace=new p),this.replace.replaceColor(t,e,r,i))}}},Te.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionDouble(this.evtParams[0]);i<0&&(i=0);var r=!1;0!=t.get_EventExpressionInt(this.evtParams[1])&&(r=!0),e.ros.rsFlags&=~cc.RSFLAG_ROTATE_ANTIA,r&&(e.ros.rsFlags|=cc.RSFLAG_ROTATE_ANTIA),e.setScale(i,i)}}},Ce.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionDouble(this.evtParams[0]);i<0&&(i=0);var r=!1;0!=t.get_EventExpressionInt(this.evtParams[1])&&(r=!0),e.ros.rsFlags&=~cc.RSFLAG_ROTATE_ANTIA,r&&(e.ros.rsFlags|=cc.RSFLAG_ROTATE_ANTIA),e.setScale(i,e.roc.rcScaleY)}}},Le.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionDouble(this.evtParams[0]);i<0&&(i=0);var r=!1;0!=t.get_EventExpressionInt(this.evtParams[1])&&(r=!0),e.ros.rsFlags&=~cc.RSFLAG_ROTATE_ANTIA,r&&(e.ros.rsFlags|=cc.RSFLAG_ROTATE_ANTIA),e.setScale(e.roc.rcScaleX,i)}}},Ie.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(null!=e.roa&&e.roa.animIn(0),t.activeToBackdrop(e,this.evtParams[0].value))}},Fe.prototype={execute:function(t){if(0==(32768&this.evtOiList))return void this.qstCreate(t,this.evtOi);if(32767!=(32767&this.evtOiList)){var e,i=t.rhEvtProg.qualToOiList[32767&this.evtOiList];for(e=0;e<i.qoiList.length;e+=2)this.qstCreate(t,i.qoiList[e])}},qstCreate:function(t,e){var i=this.evtParams[0],r=new ou;i.read_Position(t,16,r)&&t.f_CreateObject(i.cdpHFII,e,r.x,r.y,r.dir,0,t.rhFrame.nLayers-1,-1)}},we.prototype={execute:function(t){t.rhQuit=il.LOOPEXIT_NEWGAME}},Me.prototype={execute:function(t){t.rhQuit=il.LOOPEXIT_RESTART}},Re.prototype={execute:function(t){var e=this.evtParams[0],i=new ou;if(e.read_Position(t,17,i)){i.bRepeat?(this.evtFlags|=_.ACTFLAGS_REPEAT,t.rhEvtProg.rh2ActionLoop=!0):this.evtFlags&=~_.ACTFLAGS_REPEAT;var r=t.f_CreateObject(e.cdpHFII,e.cdpOi,i.x,i.y,i.dir,0,i.layer,-1);if(r>=0){var s=t.rhObjectList[r];t.rhEvtProg.evt_AddCurrentObject(s),s&&s.hoType>=32&&t.addPhysicsAttractor(s);var n=t.GetMBase(s);n?n.CreateBody():null!=t.rhBox2DBase&&t.rh4Box2DBase.rAddNormalObject(s)}}}},ke.prototype={execute:function(t){var e=t.get_EventExpressionString(this.evtParams[0]),i=new ou;if(this.evtParams[1].read_Position(t,17,i)){i.bRepeat?(this.evtFlags|=_.ACTFLAGS_REPEAT,t.rhEvtProg.rh2ActionLoop=!0):this.evtFlags&=~_.ACTFLAGS_REPEAT;var r;for(r=t.rhApp.OIList.getFirstOI();null!=r&&!(r.oiType>=2&&qc.compareStringsIgnoreCase(r.oiName,e));r=t.rhApp.OIList.getNextOI());if(null!=r){var s=t.f_CreateObject(-1,r.oiHandle,i.x,i.y,i.dir,0,i.layer,-1);if(s>=0){var n=t.rhObjectList[s];t.rhEvtProg.evt_AddCurrentObject(n),n&&n.hoType>=32&&t.addPhysicsAttractor(n);var o=t.GetMBase(n);o?o.CreateBody():null!=t.rhBox2DBase&&t.rh4Box2DBase.rAddNormalObject(n)}}}}},Ne.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[0]);t.rhEvtProg.addForEach(i,e,this.evtOiList),t.rhEvtProg.callEndForEach=!0}}},De.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[1]);t.rhEvtProg.addForEach(i,e,this.evtOiList),e=t.rhEvtProg.get_CurrentObjects(this.evtParams[0].oiList),null!=e&&t.rhEvtProg.addForEach(i,e,this.evtParams[0].oiList),t.rhEvtProg.callEndForEach=!0}}},He.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&null!=e.rom.rmMovement.bounce&&e.rom.rmMovement.bounce()}},Be.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[0]);e.roc.rcMovementType==Oc.MVTYPE_TAPED&&e.rom.rmMovement.mtBranchNode(i)}}},Ge.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.rov){var i=t.get_EventExpressionInt(this.evtParams[0]),r=1<<i;0!=(e.rov.rvValueFlags&r)?e.rov.rvValueFlags&=~r:e.rov.rvValueFlags|=r}}},je.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rov&&(0!=(e.rov.rvValueFlags&this.mask)?e.rov.rvValueFlags&=~this.mask:e.rov.rvValueFlags|=this.mask)}},Ye.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.rov){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rov.rvValueFlags&=~(1<<i)}}},Xe.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rov&&(e.rov.rvValueFlags&=~this.mask)}},We.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){if(3==e.hoType){return void(0!=(e.rsHidden&il.COF_FIRSTTEXT)?(e.ros.obHide(),e.ros.rsFlags&=~cc.RSFLAG_VISIBLE,e.hoFlags|=zl.HOF_NOCOLLISION):(e.hoFlags|=zl.HOF_DESTROYED,t.destroy_Add(e.hoNumber)))}0==(e.hoFlags&zl.HOF_DESTROYED)&&(e.hoFlags|=zl.HOF_DESTROYED,0!=(e.hoOEFlags&Yl.OEFLAG_ANIMATIONS)||0!=(e.hoOEFlags&Yl.OEFLAG_SPRITES)?t.init_Disappear(e):(e.hoCallRoutine=!1,t.destroy_Add(e.hoNumber)))}}},Ve.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value;var r=this.evtParams[2];0==t.rhEvtProg.rh2ActionLoopCount?r.value=t.get_EventExpressionInt(this.evtParams[1]):r.value++,i>=0&&null!=e.rov&&(i>=e.rov.rvValues.length&&e.rov.growValues(i+10),e.rov.rvValues[i]=r.value)}}},Ue.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.ros&&(e.ros.obHide(),e.ros.rsFlags&=~cc.RSFLAG_VISIBLE,2==this.evtParams[0].code?(e.ros.rsFlash=this.evtParams[0].timer,e.ros.rsFlashCpt=this.evtParams[0].timer):(e.ros.rsFlash=t.get_EventExpressionInt(this.evtParams[0]),e.ros.rsFlashCpt=e.ros.rsFlash))}},Ke.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=10==this.evtParams[0].code?this.evtParams[0].value:t.get_EventExpressionInt(this.evtParams[0]),i<0&&(i=0),e.roa.animation_Force(i),e.roc.rcChanged=!0}}},qe.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=29==this.evtParams[0].code?t.get_Direction(this.evtParams[0].value):t.get_EventExpressionInt(this.evtParams[0]),e.roa.animDir_Force(i),e.roc.rcChanged=!0}}},ze.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.roa.animFrame_Force(i),e.roc.rcChanged=!0}}},Je.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=t.get_EventExpressionInt(this.evtParams[0]),e.roa.animSpeed_Force(i)}}},Qe.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[0]);e.roc.rcMovementType==Oc.MVTYPE_TAPED&&e.rom.rmMovement.mtGotoNode(i)}}},Ze.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&il.objectHide(e)}},$e.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=this.evtParams[0],r=i.value1,s=i.value2;r==cc.BOP_BLEND&&(s=0),e.ros.modifSpriteEffect(r,s)}}},ti.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=this.evtParams[0],r=new ou;if(i.read_Position(t,0,r)){var s=r.x,n=r.y;s-=e.hoX,n-=e.hoY;var o=t.GetMBase(e);if(null==o){var h=il.get_DirFromPente(s,n);h&=31,t.getDir(e)!=h&&(e.roc.rcDir=h,e.roc.rcChanged=!0,e.rom.rmMovement.setDir(h))}else{var a=180*Math.atan2(-n,s)/3.141592653589;a<0&&(a=360+a),o.setAngle(a)}}}}},ei.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);null!=e.rom&&e.rom.rmMovement.setMaxSpeed(i)}}},ii.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=t.rhEvtProg.get_ParamActionObjects(this.evtParams[0].oiList,this);if(null==i)return;var r=i.getChildIndex();e.getChildIndex()<r&&e.setChildIndex(r+1)}}},ri.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=t.rhEvtProg.get_ParamActionObjects(this.evtParams[0].oiList,this);if(null==i)return;var r=i.getChildIndex();r<e.getChildIndex()&&e.setChildIndex(r)}}},si.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=t.get_EventExpressionInt(this.evtParams[0]);if(i>0&&i<=t.rhFrame.nLayers&&e.hoLayer!=i-1){i-=1;t.rhFrame.layers[i];null!=e.ros&&(e.hoLayer=i,e.ros.rsLayer=i,e.delSprite(),e.ros.createSprite(!1))}}}},ni.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&e.rom.nextMovement(e)}},oi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&e.rom.previousMovement(e)}},hi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(e.roa.animation_Restore(),e.roc.rcChanged=!0)}},ai.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(e.roa.animDir_Restore(),e.roc.rcChanged=!0)}},li.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(e.roa.animFrame_Restore(),e.roc.rcChanged=!0)}},ui.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.roa.animSpeed_Restore()}},ci.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&e.rom.rmMovement.reverse()}},di.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value,null!=e.rom&&e.rom.selectMovement(e,i)}}},fi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.setAcc(i)}}},pi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=qc.clamp(255-t.get_EventExpressionInt(this.evtParams[0]),0,255),r=0==(e.ros.rsEffect&cc.BOP_RGBAFILTER);e.ros.rsEffect=e.ros.rsEffect&cc.BOP_MASK|cc.BOP_RGBAFILTER;var s=16777215;r||(s=e.ros.rsEffectParam);var n=i<<24,o=16777215&s;e.ros.rsEffectParam=n|o,e.ros.modifSpriteEffect(e.ros.rsEffect,e.ros.rsEffectParam)}}},mi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]),r=il.getObjectFont(e);r.lfWeight=0!=i?700:400,il.setObjectFont(e,r,null)}}},gi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.setDec(i)}}},vi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=29==this.evtParams[0].code?t.get_Direction(this.evtParams[0].value):t.get_EventExpressionInt(this.evtParams[0]),i&=31,t.getDir(e)!=i&&(e.roc.rcDir=i,e.roc.rcChanged=!0,e.rom.rmMovement.setDir(i),2==e.hoType&&e.roa.animIn(0))}}},_i.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=this.evtParams[0].value;e.rom.rmMovement.set8Dirs(i)}}},Pi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=this.evtParams[0].string,r=cc.BOP_COPY;null!=i&&0!=i.length&&("Add"==i?r=cc.BOP_ADD:"Invert"==i?r=cc.BOP_INVERT:"Sub"==i?r=cc.BOP_SUB:"Mono"==i?r=cc.BOP_MONO:"Blend"==i?r=cc.BOP_BLEND:"XOR"==i?r=cc.BOP_XOR:"OR"==i?r=cc.BOP_OR:"AND"==i&&(r=cc.BOP_AND)),e.ros.modifSpriteEffect(r,e.ros.rsEffectParam)}}},Ei.prototype={execute:function(t){}};Ai.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.rov){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rov.rvValueFlags|=1<<i}}},Oi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rov&&(e.rov.rvValueFlags|=this.mask)}},bi.prototype={execute:function(t){t.rhEvtProg.get_ActionObjects(this)}},Si.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.rov){var i=t.get_EventExpressionInt(this.evtParams[0]),r=t.get_EventExpressionInt(this.evtParams[1]);e.rov.rvValueFlags&=~(1<<i),r&&(e.rov.rvValueFlags|=1<<i)}}},Ti.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionString(this.evtParams[0]),r=il.getObjectFont(e);r.lfFaceName=i,il.setObjectFont(e,r,null)}}},yi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]),r=t.get_EventExpressionInt(this.evtParams[1]),s=il.getObjectFont(e),n=s.lfHeight;if(s.lfHeight=qc.heightNormalToLF(i),0==r)il.setObjectFont(e,s,null);else if(i!=n){var o=new h,a=1;0!=n&&(a=i/n),o.right=Math.floor(e.hoImgWidth*a),o.bottom=Math.floor(e.hoImgHeight*a),o.left=0,o.top=0,il.setObjectFont(e,s,o)}}}},Ci.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.setGravity(i)}}},Li.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]),r=il.getObjectFont(e);r.lfItalic=i,il.setObjectFont(e,r,null)}}},Ii.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=this.evtParams[0],r=new ou;if(i.read_Position(t,1,r)&&(il.setXPosition(e,r.x),il.setYPosition(e,r.y),-1!=r.dir)){var s=r.dir&=31;t.getDir(e)!=s&&(e.roc.rcDir=s,e.roc.rcChanged=!0,e.rom.rmMovement.setDir(s),2==e.hoType&&e.roa.animIn(0))}}}},Fi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=t.get_EventExpressionInt(this.evtParams[0]),r=0==(e.ros.rsEffect&cc.BOP_RGBAFILTER);e.ros.rsEffect=e.ros.rsEffect&cc.BOP_MASK|cc.BOP_RGBAFILTER;var s,n=e.ros.rsEffectParam;s=r?-1==e.ros.rsEffectParam?4278190080:255-2*e.ros.rsEffectParam<<24:4278190080&n;var o=qc.swapRGB(16777215&i),h=s|o;e.ros.rsEffectParam=h,e.ros.modifSpriteEffect(e.ros.rsEffect,e.ros.rsEffectParam)}}},xi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.setRotSpeed(i)}}},wi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=e.ros){var i=t.get_EventExpressionInt(this.evtParams[0]);i<0&&(i=0),i>128&&(i=128),e.roc.rcChanged=!0,e.ros.setSemiTransparency(i)}}},Mi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;22==this.evtParams[0].code?(i=t.get_EventExpressionInt(this.evtParams[0]),i=qc.swapRGB(i)):i=this.evtParams[0].color,il.setObjectTextColor(e,i)}}},Ri.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]),r=il.getObjectFont(e);r.lfUnderline=i,il.setObjectFont(e,r,null)}}},ki.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;if((i=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value)>=0&&null!=e.rov){i>=e.rov.rvValues.length&&e.rov.growValues(i+10);var r=t.get_EventExpressionAny(this.evtParams[1]);e.rov.rvValues[i]=r}}}},Ni.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&this.num>=0&&null!=e.rov&&(this.num>=e.rov.rvValues.length&&e.rov.growValues(this.num+10),e.rov.rvValues[this.num]=this.value)}},Di.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;i=62==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value,i>=0&&null!=e.rov&&(i>=e.rov.rvStrings.length&&e.rov.growStrings(i+10),e.rov.rvStrings[i]=t.get_EventExpressionString(this.evtParams[1]))}}},Hi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);il.setXPosition(e,Math.floor(i))}}},Bi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);il.setYPosition(e,Math.floor(i))}}},Gi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=this.evtParams[0],r=new ou;i.read_Position(t,17,r)&&e.shtCreate(i,r.x,r.y,r.dir)}}},ji.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=new ou;if(this.evtParams[0].read_Position(t,17,i)){var r=new ou;if(this.evtParams[1].read_Position(t,0,r)){var s=r.x,n=r.y,o=il.get_DirFromPente(s-i.x,n-i.y);e.shtCreate(this.evtParams[0],i.x,i.y,o)}}}}},Yi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&il.objectShow(e)}},Xi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&t.rhEvtProg.rh2ShuffleBuffer.add(e)}},Wi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=t.get_EventExpressionInt(this.evtParams[0]);null!=e.rom&&e.rom.rmMovement.setSpeed(i)}}},Vi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.setChildIndex(0)}},Ui.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=e.getChildMaxIndex();e.setChildIndex(i)}}},Ki.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&e.setChildIndex(0)}},Ae.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=e.getChildMaxIndex();e.setChildIndex(i)}}},qi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&e.rom.rmMovement.start()}},zi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(e.roa.raAnimStopped=!1)}},Ji.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&e.rom.rmMovement.stop()}},Qi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&(e.roa.raAnimStopped=!0)}},Zi.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;if((i=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value)>=0&&null!=e.rov){i>=e.rov.rvValues.length&&e.rov.growValues(i+10);var r=t.get_EventExpressionAny(this.evtParams[1]);e.rov.rvValues[i]+=r}}}},$i.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&this.num>=0&&null!=e.rov&&(this.num>=e.rov.rvValues.length&&e.rov.growValues(this.num+10),e.rov.rvValues[this.num]+=this.value)}},tr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i;if((i=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value)>=0&&null!=e.rov){i>=e.rov.rvValues.length&&e.rov.growValues(i+10);var r=t.get_EventExpressionAny(this.evtParams[1]);e.rov.rvValues[i]-=r}}}},er.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&this.num>=0&&null!=e.rov&&(this.num>=e.rov.rvValues.length&&e.rov.growValues(this.num+10),e.rov.rvValues[this.num]-=this.value)}},ir.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=e.rom&&(e.rom.rmEventFlags|=Vc.EF_WRAP)}},rr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.callMovement(_.ACT_EXTSETFRICTION,i)}}},sr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.callMovement(_.ACT_EXTSETELASTICITY,i)}}},nr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.callMovement(_.ACT_EXTAPPLYANGULARIMPULSE,i)}}},or.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=new Array;i[0]=t.get_EventExpressionInt(this.evtParams[0]),i[1]=t.get_EventExpressionInt(this.evtParams[1]),e.rom.rmMovement.callMovement(_.ACT_EXTAPPLYFORCE,i)}}},hr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.callMovement(_.ACT_EXTAPPLYTORQUE,i)}}},ar.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=new Array;i[0]=t.get_EventExpressionDouble(this.evtParams[0]),i[1]=t.get_EventExpressionDouble(this.evtParams[1]),e.rom.rmMovement.callMovement(_.ACT_EXTSETLINEARVELOCITY,i)}}},lr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=t.get_EventExpressionInt(this.evtParams[0]);e.rom.rmMovement.callMovement(_.ACT_EXTSETANGULARVELOCITY,i)}}},ur.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e&&null!=t.GetMBase(e)){var i=new Array;i[0]=t.get_EventExpressionInt(this.evtParams[0]),i[1]=t.get_EventExpressionInt(this.evtParams[1]),e.rom.rmMovement.callMovement(_.ACT_EXTAPPLYIMPULSE,i)}}},cr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=t.GetMBase(e)&&e.rom.rmMovement.callMovement(_.ACT_EXTSTOPFORCE,0)}},dr.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);null!=e&&null!=t.GetMBase(e)&&e.rom.rmMovement.callMovement(_.ACT_EXTSTOPTORQUE,0)}},fr.NUM_ONEVENT=6,fr.CND_ONLOOP=-983041,fr.CND_OR=-1507329,fr.CND_ORLOGICAL=-1572865,fr.create=function(t){var e=t.file.getFilePointer(),i=t.file.readAShort(),r=null,s=t.file.readAInt();switch(s){case-2752513:r=new kn;break;case-2686977:r=new pr;break;case-2555905:r=new Rn;break;case-2490369:r=new Sr;break;case-2424833:r=new br;break;case-2359297:r=new Or;break;case-2293761:r=new Ar;break;case-2228225:r=new Er;break;case-2162689:r=new Pr;break;case-2097153:r=new Sr;break;case-2031617:r=new br;break;case-1966081:r=new Or;break;case-1900545:r=new Ar;break;case-1835009:r=new Er;break;case-1769473:r=new Pr;break;case-1703937:r=new pr;break;case-1638401:r=new gr;break;case-1572865:case-1507329:r=new pr;break;case-1441793:r=new Cr;break;case-1245185:r=new Tr;break;case-983041:r=new xr;break;case-720897:r=new yr;break;case-655361:case-589825:case-524289:r=new pr;break;case-458753:r=new _r;break;case-393217:r=new Ir;break;case-327681:r=new Fr;break;case-262145:r=new wr;break;case-196609:r=new Lr;break;case-131073:r=new vr;break;case-65537:r=new pr;break;case-1:r=new mr;break;case-524290:r=new Ds;break;case-458754:r=new ks;break;case-327682:r=new Hs;break;case-131074:r=new Rs;break;case-2:r=new Ns;break;case-458755:r=new is;break;case-393219:r=new rs;break;case-327683:r=new ss;break;case-262147:r=new ns;break;case-196611:r=new os;break;case-131075:r=new pr;break;case-65539:r=new mr;break;case-3:r=new hs;break;case-458756:r=new fs;break;case-393220:r=new ps;break;case-327684:r=new as;break;case-262148:r=new us;break;case-196612:r=new ls;break;case-131076:r=new cs;break;case-65540:r=new ds;break;case-4:r=new ms;break;case-720902:r=new xs;break;case-655366:r=new ws;break;case-589830:r=new Fs;break;case-524294:r=new Ms;break;case-458758:r=new Ls;break;case-393222:r=new ys;break;case-327686:r=new Ts;break;case-262150:r=new Ss;break;case-196614:r=new Is;break;case-131078:r=new Cs;break;case-65542:r=new Os;break;case-6:r=new bs;break;case-327687:r=new vs;break;case-262151:r=new Ps;break;case-196615:r=new gs;break;case-131079:r=new _s;break;case-65543:r=new As;break;case-7:r=new Es;break;case-1441797:r=new kr;break;case-1376261:r=new Hr;break;case-1310725:r=new Gr;break;case-1245189:r=new Yr;break;case-1179653:r=new Zr;break;case-1114117:r=new Nr;break;case-1048581:r=new Mr;break;case-983045:r=new Wr;break;case-917509:r=new qr;break;case-851973:r=new Jr;break;case-786437:r=new Ur;break;case-720901:r=new Br;break;case-655365:r=new jr;break;case-458757:r=new Xr;break;case-393221:r=new $r;break;case-327685:r=new Dr;break;case-262149:r=new Rr;break;case-196613:r=new Vr;break;case-131077:r=new zr;break;case-65541:r=new Qr;break;case-5:r=new Kr;break;case-5308409:r=new Us;break;case-5439484:r=new Bs;break;case-5373948:r=new js;break;case-5308412:r=new Gs;break;case-5505015:r=new Ws;break;case-5439479:r=new Vs;break;case-5373943:r=new Ys;break;case-5308407:r=new Xs;break;default:switch(4294901760&s){case-43<<16:case-42<<16:r=new rn;break;case-41<<16:r=new es;break;case-40<<16:r=new An;break;case-39<<16:r=new On;break;case-38<<16:r=new Pn;break;case-37<<16:r=new mn;break;case-36<<16:r=new nn;break;case-35<<16:r=new Fn;break;case-34<<16:r=new ts;break;case-33<<16:r=new Sn;break;case-32<<16:r=new Cn;break;case-31<<16:r=new Tn;break;case-30<<16:r=new yn;break;case-29<<16:r=new wn;break;case-28<<16:r=new Ks;break;case-27<<16:r=new en;break;case-26<<16:r=new sn;break;case-25<<16:r=new fn;break;case-24<<16:r=new dn;break;case-23<<16:r=new gn;break;case-22<<16:r=new bn;break;case-21<<16:r=new un;break;case-20<<16:r=new In;break;case-19<<16:r=new Qs;break;case-18<<16:r=new Zs;break;case-17<<16:r=new on;break;case-16<<16:r=new hn;break;case-983040:r=new tn;break;case-917504:r=new ln;break;case-851968:r=new an;break;case-786432:r=new Ln;break;case-720896:r=new pn;break;case-655360:r=new En;break;case-9<<16:r=new _n;break;case-8<<16:r=new cn;break;case-7<<16:r=new Mn;break;case-6<<16:r=new Js;break;case-5<<16:r=new xn;break;case-4<<16:r=new vn;break;case-3<<16:r=new zs;break;case-2<<16:r=new qs;break;case-65536:r=new $s;break;default:r=new Ec}}if(null!=r&&(r.evtCode=s,r.evtOi=t.file.readShort(),r.evtOiList=t.file.readShort(),r.evtFlags=t.file.readAByte(),r.evtFlags2=t.file.readAByte(),r.evtNParams=t.file.readAByte(),r.evtDefType=t.file.readAByte(),r.evtIdentifier=t.file.readAShort(),r.evtNParams>0)){r.evtParams=new Array(r.evtNParams);var n;for(n=0;n<r.evtNParams;n++)r.evtParams[n]=nu.create(t)}return t.file.seek(e+i),r},fr.negaTRUE=function(t){return!(t.evtFlags2&yl.EVFLAG2_NOT)},fr.negaFALSE=function(t){return!!(t.evtFlags2&yl.EVFLAG2_NOT)},fr.negate=function(t,e){return t.evtFlags2&yl.EVFLAG2_NOT?!e:e},fr.compute_GlobalNoRepeat=function(t){var e=t.rhEvtProg.rhEventGroup,i=e.evgInhibit;e.evgInhibit=t.rhLoopCount;var r=t.rhLoopCount;return r!=i&&--r!=i},fr.compute_NoRepeatCol=function(t,e){var i,r=e.hoBaseNoRepeat;if(null==r)r=new n,e.hoBaseNoRepeat=r;else for(i=0;i<r.size();i++)if(r.get(i)==t)return!1;if(r.add(t),null==(r=e.hoPrevNoRepeat))return!0;for(i=0;i<r.size();i++)if(r.get(i)==t)return!1;return!0},fr.checkMark=function(t,e){return 0!=e&&(e==t.rhLoopCount||e==t.rhLoopCount-1)},pr.prototype={eva1:function(t,e){return!1},eva2:function(t){return!1}},mr.prototype={eva1:function(t,e){return!0},eva2:function(t){return!0}},fr.prototype={compute_NoRepeat:function(t){return fr.compute_NoRepeatCol(this.evtIdentifier,t)},evaChooseValueOld:function(t,e){for(var i=0,r=t.rhEvtProg.evt_FirstObjectFromType(Dl.OBJ_SPR);null!=r;){i++;var s=t.get_EventExpressionInt(this.evtParams[0]);0==e.evaluate(r,s)&&(i--,t.rhEvtProg.evt_DeleteCurrentObject()),r=t.rhEvtProg.evt_NextObjectFromType()}return 0!=i},evaChooseValue:function(t,e){for(var i=0,r=t.rhEvtProg.evt_FirstObjectFromType(-1);null!=r;){i++;var s=t.get_EventExpressionInt(this.evtParams[0]);0==e.evaluate(r,s)&&(i--,t.rhEvtProg.evt_DeleteCurrentObject()),r=t.rhEvtProg.evt_NextObjectFromType()}return 0!=i},evaExpObject:function(t,e){var i,r=t.rhEvtProg.evt_FirstObject(this.evtOiList),s=t.rhEvtProg.evtNSelectedObjects,n=this.evtParams[0],o=n.tokens[0];if(o.code!=Nn.EXP_LONG&&o.code!=Nn.EXP_DOUBLE||0!=n.tokens[1].code)for(;null!=r;)i=t.get_EventExpressionInt(n),0==e.evaExpRoutine(r,i,n.comparaison)&&(s--,t.rhEvtProg.evt_DeleteCurrentObject()),r=t.rhEvtProg.evt_NextObject();else for(var i=o.value;null!=r;)0==e.evaExpRoutine(r,i,n.comparaison)&&(s--,t.rhEvtProg.evt_DeleteCurrentObject()),r=t.rhEvtProg.evt_NextObject();return 0!=s},evaObject:function(t,e){for(var i=t.rhEvtProg.evt_FirstObject(this.evtOiList),r=t.rhEvtProg.evtNSelectedObjects;null!=i;)0==e.evaObjectRoutine(i)&&(r--,t.rhEvtProg.evt_DeleteCurrentObject()),i=t.rhEvtProg.evt_NextObject();return 0!=r},compareCondition:function(t,e,i){var r=t.get_EventExpressionAny(this.evtParams[e]),s=this.evtParams[e].comparaison;return il.compareTo(i,r,s)},isColliding:function(t){if(t.rhEvtProg.rh4ConditionsFalse)return t.rhEvtProg.evt_FirstObject(this.evtOiList),
t.rhEvtProg.evt_FirstObject(this.evtParams[0].oiList),!1;var e=!1;0!=(this.evtFlags2&yl.EVFLAG2_NOT)&&(e=!0);var i=t.rhEvtProg.evt_FirstObject(this.evtOiList);if(null==i)return fr.negaFALSE(this);var r,s=t.rhEvtProg.evtNSelectedObjects,o=this.evtParams[0].oi;if(o>=0)t.isColArray[0]=o,t.isColArray[1]=this.evtParams[0].oiList,r=t.isColArray;else{r=t.rhEvtProg.qualToOiList[32767&this.evtParams[0].oiList].qoiList}var h,a,l,u=!1,c=new n;do{if(null==(h=t.objectAllCol_IXY(i,i.roc.rcImage,i.roc.rcAngle,i.roc.rcScaleX,i.roc.rcScaleY,i.hoX,i.hoY,r)))0==e&&(s--,t.rhEvtProg.evt_DeleteCurrentObject());else{for(u=!1,a=0;a<h.size();a++)l=h.get(a),0==(l.hoFlags&zl.HOF_DESTROYED)&&(c.add(l),u=!0);1==e?1==u&&(s--,t.rhEvtProg.evt_DeleteCurrentObject()):0==u&&(s--,t.rhEvtProg.evt_DeleteCurrentObject())}i=t.rhEvtProg.evt_NextObject()}while(null!=i);if(0==s)return!1;if(null==(i=t.rhEvtProg.evt_FirstObject(this.evtParams[0].oiList)))return!1;if(s=t.rhEvtProg.evtNSelectedObjects,0==e){do{for(a=0;a<c.size()&&(l=c.get(a),i!=l);a++);a==c.size()&&(s--,t.rhEvtProg.evt_DeleteCurrentObject()),i=t.rhEvtProg.evt_NextObject()}while(null!=i);return 0!=s}do{for(a=0;a<c.size();a++)if(l=c.get(a),i==l){s--,t.rhEvtProg.evt_DeleteCurrentObject();break}i=t.rhEvtProg.evt_NextObject()}while(null!=i);return 0!=s}},gr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);if(e>=i)return!0;if(i>=1&&e>0&&e<=i){if(t.random(i)<=e)return!0}return!1}},vr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionAny(this.evtParams[0]),i=t.get_EventExpressionAny(this.evtParams[1]),r=this.evtParams[1].comparaison;return il.compareTo(e,i,r)}},_r.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;e=52==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.rhApp.getGlobalValueAt(e),r=t.get_EventExpressionAny(this.evtParams[1]),s=this.evtParams[1].comparaison;return il.compareTo(i,r,s)}},Pr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)==this.evtParams[1].tokens[0].value}},Er.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)!=this.evtParams[1].tokens[0].value}},Ar.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)<=this.evtParams[1].tokens[0].value}},Or.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)<this.evtParams[1].tokens[0].value}},br.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)>=this.evtParams[1].tokens[0].value}},Sr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0].value;return t.rhApp.getGlobalValueAt(e)>this.evtParams[1].tokens[0].value}},Tr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;e=59==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0])-1:this.evtParams[0].value;var i=t.rhApp.getGlobalStringAt(e),r=t.get_EventExpressionAny(this.evtParams[1]),s=this.evtParams[1].comparaison;return il.compareTo(i,r,s)}},yr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0!=(t.rhEvtProg.events[this.evtParams[0].pointer].evgFlags&Tl.EVGFLAGS_INACTIVE)?fr.negaFALSE(this):fr.negaTRUE(this)}},Cr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.rhEventGroup;return 0!=(e.evgFlags&Tl.EVGFLAGS_ONCE)?fr.negaFALSE(this):(e.evgFlags|=Tl.EVGFLAGS_ONCE,fr.negaTRUE(this))}},Lr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.rhEventGroup;return 0!=(e.evgFlags&Tl.EVGFLAGS_NOMORE)?(this.evtParams[0].code==nu.PARAM_EXPRESSIONNUM&&(e.evgInhibit=t.get_EventExpressionInt(this.evtParams[0])/10),!0):0==(e.evgFlags&(Tl.EVGFLAGS_REPEAT|Tl.EVGFLAGS_NOTALWAYS))&&(this.evtParams[0].code==nu.PARAM_EXPRESSIONNUM?e.evgInhibit=t.get_EventExpressionInt(this.evtParams[0])/10:e.evgInhibit=this.evtParams[0].timer/10,e.evgInhibitCpt=0,e.evgFlags|=Tl.EVGFLAGS_NOMORE,!0)}},Ir.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.rhEventGroup;return 0!=(e.evgFlags&Tl.EVGFLAGS_NOTALWAYS)||0==(e.evgFlags&Tl.EVGFLAGS_NOMORE)&&(e.evgInhibit=-2,e.evgFlags|=Tl.EVGFLAGS_NOTALWAYS,!0)}},Fr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.rhEventGroup;return 0==(e.evgFlags&Tl.EVGFLAGS_ONCE)&&(e.evgFlags|=Tl.EVGFLAGS_ONCE,!0)}},xr.prototype={eva1:function(t,e){var i=this.evtParams[0];if(2==i.tokens.length&&262143==i.tokens[0].code&&0==i.tokens[1].code)return!!qc.compareStringsIgnoreCase(t.rh4CurrentFastLoop,i.tokens[0].string);var r=t.get_EventExpressionString(i);return 0!=qc.compareStringsIgnoreCase(t.rh4CurrentFastLoop,r)&&(t.rhEvtProg.rh2ActionOn=!1,!0)},eva2:function(t){return!1}},wr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.rhEventGroup;return 0!=(e.evgFlags&Tl.EVGFLAGS_REPEAT)||0==(e.evgFlags&Tl.EVGFLAGS_NOMORE)&&(e.evgInhibitCpt=t.get_EventExpressionInt(this.evtParams[0]),e.evgFlags|=Tl.EVGFLAGS_REPEAT,!0)}},Mr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){if(t.rhEvtProg.count_ObjectsFromType(0,-1),0==t.rhEvtProg.evtNSelectedObjects)return!1;var e=t.random(t.rhEvtProg.evtNSelectedObjects),i=t.rhEvtProg.count_ObjectsFromType(0,e);return t.rhEvtProg.evt_DeleteCurrent(),t.rhEvtProg.evt_AddCurrentObject(i),!0}},Rr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){if(t.rhEvtProg.count_ObjectsFromType(Dl.OBJ_SPR,-1),0==t.rhEvtProg.evtNSelectedObjects)return!1;var e=t.random(t.rhEvtProg.evtNSelectedObjects),i=t.rhEvtProg.count_ObjectsFromType(Dl.OBJ_SPR,e);return t.rhEvtProg.evt_DeleteCurrentType(Dl.OBJ_SPR),t.rhEvtProg.evt_AddCurrentObject(i),!0}},kr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]),r=t.get_EventExpressionInt(this.evtParams[2]),s=t.get_EventExpressionInt(this.evtParams[3]);return 0!=t.rhEvtProg.select_LineOfSight(e,i,r,s)}},Nr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0!=t.rhEvtProg.select_ZoneTypeObjects(this.evtParams[0],0)}},Dr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0!=t.rhEvtProg.select_ZoneTypeObjects(this.evtParams[0],Dl.OBJ_SPR)}},Hr.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return this.evaChooseValue(t,this)},evaluate:function(t,e){return null!=t.rov&&0==(t.rov.rvValueFlags&1<<e)}}),Br.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return this.evaChooseValueOld(t,this)},evaluate:function(t,e){return null!=t.rov&&0==(t.rov.rvValueFlags&1<<e)}}),Gr.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return this.evaChooseValue(t,this)},evaluate:function(t,e){return null!=t.rov&&0!=(t.rov.rvValueFlags&1<<e)}}),jr.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return this.evaChooseValueOld(t,this)},evaluate:function(t,e){return null!=t.rov&&0!=(t.rov.rvValueFlags&1<<e)}}),Yr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){for(var e=0,i=t.rhEvtProg.evt_FirstObjectFromType(-1);null!=i;){e++;var r;r=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value;var s=t.get_EventExpressionAny(this.evtParams[1]);if(null!=i.rov){var n=i.rov.getValue(r),o=this.evtParams[1].comparaison;0==il.compareTo(n,s,o)&&(t.rhEvtProg.evt_DeleteCurrentObject(),e--)}i=t.rhEvtProg.evt_NextObjectFromType()}return 0!=e}},Xr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){for(var e=0,i=t.rhEvtProg.evt_FirstObjectFromType(Dl.OBJ_SPR);null!=i;){e++;var r;r=53==evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value;var s=t.get_EventExpressionAny(this.evtParams[1]);if(null!=i.rov){var n=i.rov.getValue(r),o=this.evtParams[1].comparaison;0==il.compareTo(n,s,o)&&(t.rhEvtProg.evt_DeleteCurrentObject(),e--)}i=t.rhEvtProg.evt_NextObjectFromType()}return 0!=e}},Wr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];if(t.rhEvtProg.count_ZoneTypeObjects(e,-1,0),0==t.rhEvtProg.evtNSelectedObjects)return!1;var i=t.random(t.rhEvtProg.evtNSelectedObjects),r=t.rhEvtProg.count_ZoneTypeObjects(e,i,0);return t.rhEvtProg.evt_DeleteCurrent(),t.rhEvtProg.evt_AddCurrentObject(r),!0}},Vr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];if(t.rhEvtProg.count_ZoneTypeObjects(e,-1,Dl.OBJ_SPR),0==t.rhEvtProg.evtNSelectedObjects)return!1;var i=t.random(t.rhEvtProg.evtNSelectedObjects),r=t.rhEvtProg.count_ZoneTypeObjects(e,i,Dl.OBJ_SPR);return t.rhEvtProg.evt_DeleteCurrent(),t.rhEvtProg.evt_AddCurrentObject(r),!0}},Ur.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return t.rhEvtProg.count_ZoneTypeObjects(this.evtParams[0],-1,0),0==t.rhEvtProg.evtNSelectedObjects}},Kr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return t.rhEvtProg.count_ZoneTypeObjects(this.evtParams[0],-1,Dl.OBJ_SPR),0==t.rhEvtProg.evtNSelectedObjects}},qr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionAny(this.evtParams[0]),i=this.evtParams[0].comparaison;return il.compareTo(t.rhNObjects,e,i)}},zr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){t.rhEvtProg.count_ObjectsFromType(Dl.OBJ_SPR,-1);var e=t.get_EventExpressionAny(this.evtParams[0]),i=this.evtParams[0].comparaison;return il.compareTo(t.rhEvtProg.evtNSelectedObjects,e,i)}},Jr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){t.rhEvtProg.count_ZoneTypeObjects(this.evtParams[0],-1,0);var e=t.get_EventExpressionAny(this.evtParams[1]),i=this.evtParams[1].comparaison;return il.compareTo(t.rhEvtProg.evtNSelectedObjects,e,i)}},Qr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){t.rhEvtProg.count_ZoneTypeObjects(this.evtParams[0],-1,Dl.OBJ_SPR);var e=t.get_EventExpressionAny(this.evtParams[1]),i=this.evtParams[1].comparaison;return il.compareTo(t.rhEvtProg.evtNSelectedObjects,e,i)}},Zr.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);return t.rhEvtProg.pickFromId(e)}},$r.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);return t.rhEvtProg.pickFromId(e)}},ts.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){if(t.rhEvtProg.count_ObjectsFromOiList(this.evtOiList,-1),0==t.rhEvtProg.evtNSelectedObjects)return!1;var e=t.random(t.rhEvtProg.evtNSelectedObjects),i=t.rhEvtProg.count_ObjectsFromOiList(this.evtOiList,e);if(this.evtNParams>0){var r=this.evtParams[0];if(68==r.code&&0==r.evaluate(i))return!1}return t.rhEvtProg.evt_ForceOneObject(this.evtOiList,i),!0}},es.prototype={eva1:function(t,e){var i=t.get_EventExpressionString(this.evtParams[0]);if(null!=t.rh4CurrentForEach&&qc.compareStringsIgnoreCase(t.rh4CurrentForEach.name,i)){if(this.evtNParams>1){var r=this.evtParams[1];if(0==r.evaluate(e))return!1}return t.rhEvtProg.evt_ForceOneObject(this.evtOiList,e),!0}if(null!=t.rh4CurrentForEach2&&qc.compareStringsIgnoreCase(t.rh4CurrentForEach2.name,i)){if(this.evtNParams>1){var r=this.evtParams[1];if(0==r.evaluate(e))return!1}return t.rhEvtProg.evt_ForceOneObject(this.evtOiList,e),!0}return!1},eva2:function(t){var e=null,i=t.get_EventExpressionString(this.evtParams[0]),r=t.rh4CurrentForEach;if(null!=r&&qc.compareStringsIgnoreCase(r.name,i)&&r.oi==this.evtOiList){var s=r.index%r.number;e=r.objects[s]}if(null!=(r=t.rh4CurrentForEach2)&&qc.compareStringsIgnoreCase(r.name,i)&&r.oi==this.evtOiList){var s=r.index%r.number;e=r.objects[s]}if(null!=e){if(this.evtNParams>1){if(0==this.evtParams[1].evaluate(e))return!1}return t.rhEvtProg.evt_ForceOneObject(this.evtOiList,e),!0}return!1}},is.prototype={eva1:function(t,e){return!0},eva2:function(t){return t.rh4EndOfPause==t.rhLoopCount-1}},rs.prototype={eva1:function(t,e){return 0!=(t.rhApp.gaNewFlags&Ka.GANF_VSYNC)&&window.requestAnimationFrame},eva2:function(t){return 0!=(t.rhApp.gaNewFlags&Ka.GANF_VSYNC)&&window.requestAnimationFrame}},ss.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);return null!=t.y_GetLadderAt(-1,e,i)?fr.negaTRUE(this):fr.negaFALSE(this)}},ns.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0])-t.rhWindowX,i=t.get_EventExpressionInt(this.evtParams[1])-t.rhWindowY;return t.colMask_Test_XY(e,i,-1,za.CM_TEST_OBSTACLE)?fr.negaTRUE(this):fr.negaFALSE(this)}},os.prototype={eva1:function(t,e){return!0},eva2:function(t){return!1}},hs.prototype={eva1:function(t,e){return!(t.rhLoopCount>2)},eva2:function(t){return!(t.rhLoopCount>2)}},as.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionString(this.evtParams[0]);return qc.compareStringsIgnoreCase(e,t.rhEvtProg.rhCurParam0)}},ls.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];return e.compteur-=t.rhTimerDelta,!(e.compteur>0)&&(e.compteur+=e.delay,!0)}},us.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;return e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer,t.rh4TimeOut>e}},cs.prototype={eva1:function(t,e){if(0!=(this.evtFlags&yl.EVFLAGS_DONE))return!1;var i=this.evtParams[0].timer;return!(t.rhTimer<i)&&(this.evtFlags|=yl.EVFLAGS_DONE,!0)},eva2:function(t){return!1}},ds.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;return e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer,!(t.rhTimer>e)}},fs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e,i=this.evtParams[1];if(0==i.value2)e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer,i.value=e,i.value2=-1;else if(i.value-=t.rhTimerDelta,i.value<=0)return e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer,i.value+=e,!0;return!1}},ps.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer;var i=this.evtParams[1];return t.rhTimer>=e&&(i.value==t.rhLoopCount?(i.value=t.rhLoopCount+1,!1):(i.value=t.rhLoopCount+1,!0))}},ms.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;return e=22==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].timer,t.rhTimer>e}},gs.prototype={eva1:function(t,e){if(this.evtOi!=t.rhEvtProg.rhCurOi)return!1;var i=t.rhEvtProg.rhCurParam0;return(i&=this.evtParams[0].value)==this.evtParams[0].value},eva2:function(t){var e=this.evtOi,i=t.rh2NewPlayer[e]&t.rhPlayer[e],r=i;return r&=this.evtParams[0].value,this.evtParams[0].value==r}},vs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhPlayer[this.evtOi];return e&=this.evtParams[0].value,e!=this.evtParams[0].value?fr.negaFALSE(this):fr.negaTRUE(this)}},_s.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionAny(this.evtParams[0]),i=this.evtParams[0].comparaison;return il.compareTo(t.rhApp.getLives()[this.evtOi],e,i)}},Ps.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0==t.rhApp.getLives()[this.evtOi]}},Es.prototype={eva1:function(t,e){return!1},eva2:function(t){return!1}},As.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhApp.getScores(),i=t.get_EventExpressionAny(this.evtParams[0]),r=this.evtParams[0].comparaison;return il.compareTo(e[this.evtOi],i,r)}},Os.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return fr.negate(this,t.rhApp.keyBuffer[this.evtParams[0].key])}},bs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0==t.rhApp.keyBuffer[this.evtParams[0].key]?fr.negaFALSE(this):fr.compute_GlobalNoRepeat(t)?fr.negaTRUE(this):fr.negaFALSE(this)}},Ss.prototype={eva1:function(t,e){var i=t.rhEvtProg.rhCurParam0;return this.evtParams[0].value==i},eva2:function(t){return this.evtParams[0].value==t.rhEvtProg.rh2CurrentClick}},Ts.prototype={eva1:function(t,e){var i=t.rhEvtProg.rhCurParam0;if(this.evtParams[0].value==i){var r=this.evtParams[1];if(t.rh2MouseX>=r.x1&&t.rh2MouseX<r.x2&&t.rh2MouseY>=r.y1&&t.rh2MouseY<r.y2)return!0}return!1},eva2:function(t){if(this.evtParams[0].value==t.rhEvtProg.rh2CurrentClick){var e=this.evtParams[1];if(t.rh2MouseX>=e.x1&&t.rh2MouseX<e.x2&&t.rh2MouseY>=e.y1&&t.rh2MouseY<e.y2)return!0}return!1}},ys.prototype={eva1:function(t,e){var i=this.evtParams[0];if(t.rhEvtProg.rhCurParam0!=i.value)return!1;var r=t.rhEvtProg.rhCurParam1,s=this.evtParams[1];if(r==s.oi)return t.rhEvtProg.evt_AddCurrentObject(t.rhEvtProg.rh4_2ndObject),!0;var n=s.oiList;if(0==(32768&n))return!1;var o,h=t.rhEvtProg.qualToOiList[32767&n];for(o=0;o<h.qoiList.length;o+=2)if(h.qoiList[o]==r)return t.rhEvtProg.evt_AddCurrentQualifier(n),t.rhEvtProg.evt_AddCurrentObject(t.rhEvtProg.rh4_2ndObject),!0;return!1},eva2:function(t){var e=this.evtParams[0];if(t.rhEvtProg.rh2CurrentClick!=e.value)return!1;var i=this.evtParams[1];return t.getMouseOnObjectsEDX(i.oiList,!1)}},Cs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];return t.rh2MouseX>=e.x1&&t.rh2MouseX<e.x2&&t.rh2MouseY>=e.y1&&t.rh2MouseY<e.y2?fr.negaTRUE(this):fr.negaFALSE(this)}},Ls.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=0;switch(this.evtParams[0].key){case 1:e=Ka.VK_LBUTTON;break;case 2:e=Ka.VK_RBUTTON;break;case 4:e=Ka.VK_MBUTTON}return 0==t.rhApp.keyBuffer[e]?fr.negaFALSE(this):fr.negaTRUE(this)}},Is.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=0!=(this.evtFlags2&yl.EVFLAG2_NOT);return t.getMouseOnObjectsEDX(this.evtParams[0].oiList,e)}},Fs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return t.isMouseOn()?fr.negaTRUE(this):fr.negaFALSE(this)}},xs.prototype={eva1:function(t,e){return!0},eva2:function(t){return t.rhWheelCount==t.rh4EventCount}},ws.prototype={eva1:function(t,e){return!0},eva2:function(t){return t.rhWheelCount==t.rh4EventCount}},Ms.prototype={eva1:function(t,e){return!0},eva2:function(t){return!1}},Rs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return t.rhApp.soundPlayer.isSoundPlaying()?fr.negaFALSE(this):fr.negaTRUE(this)}},ks.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);return t.rhApp.soundPlayer.isChannelPlaying(e-1)?fr.negaFALSE(this):fr.negaTRUE(this)}},Ns.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0],i=!1,r=-1;if(45==e.code){var s=t.get_EventExpressionString(e);r=t.rhApp.soundBank.getSoundHandleFromName(s)}else r=e.sndHandle;return r>=0&&(i=t.rhApp.soundPlayer.isSamplePlaying(r)),i?fr.negaFALSE(this):fr.negaTRUE(this)}},Ds.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.get_EventExpressionInt(this.evtParams[0]);return t.rhApp.soundPlayer.isChannelPaused(e-1)?fr.negaTRUE(this):fr.negaFALSE(this)}},Hs.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0],i=!1,r=-1;if(45==e.code){var s=t.get_EventExpressionString(e);r=t.rhApp.soundBank.getSoundHandleFromName(s)}else r=e.sndHandle;return r>=0&&(i=t.rhApp.soundPlayer.isSamplePaused(r)),i?fr.negaTRUE(this):fr.negaFALSE(this)}},Bs.prototype={eva1:function(t,e){var i=t.get_EventExpressionInt(this.evtParams[0]);return t.rhEvtProg.rhCurParam0==i},eva2:function(t){return!1}},Gs.prototype={eva1:function(t,e){return!0},eva2:function(t){return!1}},js.prototype={eva1:function(t,e){return!0},eva2:function(t){return!1}},Ys.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,t.appFinished())}}),Xs.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,t.frameChanged())}}),Ws.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,t.isPaused())}}),Vs.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,t.isVisible())}}),Us.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){for(var e,i,r=t.rhEvtProg.evt_FirstObject(this.evtOiList),s=t.rhEvtProg.evtNSelectedObjects;null!=r;)e=r.cpt_GetValue(),i=t.get_EventExpressionAny(this.evtParams[0]),0==il.compareTo(e,i,this.evtParams[0].comparaison)&&(s--,t.rhEvtProg.evt_DeleteCurrentObject()),r=t.rhEvtProg.evt_NextObject();return 0!=s}},Ks.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return 0!=(t.ros.rsFlags&cc.RSFLAG_HIDDEN)}}),qs.prototype=qc.extend(new fr,{eva1:function(t,e){return(10==this.evtParams[0].code?this.evtParams[0].value:t.get_EventExpressionInt(this.evtParams[0]))==t.rhEvtProg.rhCurParam0&&(t.rhEvtProg.evt_AddCurrentObject(e),!0)},eva2:function(t){return 10==this.evtParams[0].code?this.evaObject(t,this):this.evaExpObject(t,this)},evaObjectRoutine:function(t){return this.evtParams[0].value==t.roa.raAnimOn&&0==t.roa.raAnimNumberOfFrame},evaExpRoutine:function(t,e,i){return e==t.roa.raAnimOn&&0==t.roa.raAnimNumberOfFrame}}),zs.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 10==this.evtParams[0].code?this.evaObject(t,this):this.evaExpObject(t,this)},evaObjectRoutine:function(t){return this.evtParams[0].value!=t.roa.raAnimOn?fr.negaFALSE(this):0!=t.roa.raAnimNumberOfFrame?fr.negaTRUE(this):fr.negaFALSE(this)},evaExpRoutine:function(t,e,i){return e!=t.roa.raAnimOn?fr.negaFALSE(this):0!=t.roa.raAnimNumberOfFrame?fr.negaTRUE(this):fr.negaFALSE(this)}}),Js.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,t.rom.rmBouncing)}}),Qs.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.rom.rmMovement.rmAcc,e,i)}}),Zs.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.rom.rmMovement.rmDec,e,i)}}),$s.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.roa.raAnimFrame,e,i)}}),tn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.roc.rcSpeed,e,i)}}),en.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.evt_FirstObject(this.evtOiList);if(null==e)return!1;var i,r,s=t.rhEvtProg.evtNSelectedObjects,n=this.evtParams[1];do{var o;o=53==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value,o>=0&&null!=e.rov?(i=o<e.rov.rvValues.length?e.rov.getValue(o):0,r=t.get_EventExpressionAny(n),0==il.compareTo(i,r,n.comparaison)&&(s--,t.rhEvtProg.evt_DeleteCurrentObject())):(s--,t.rhEvtProg.evt_DeleteCurrentObject()),e=t.rhEvtProg.evt_NextObject()}while(null!=e);return 0!=s}},rn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.evt_FirstObject(this.evtOiList);if(null==e)return!1;var i,r=t.rhEvtProg.evtNSelectedObjects,s=this.evtParams[0].value,n=this.evtParams[1],o=n.tokens[0].value;do{s>=0&&null!=e.rov?(i=s<e.rov.rvValues.length?e.rov.getValue(s):0,0==il.compareTo(i,o,n.comparaison)&&(r--,t.rhEvtProg.evt_DeleteCurrentObject())):(r--,t.rhEvtProg.evt_DeleteCurrentObject()),e=t.rhEvtProg.evt_NextObject()}while(null!=e);return 0!=r}},sn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){var r=t.hoCreationId<<16|65535&t.hoNumber;return il.compareTer(r,e,i)}}),nn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.evt_FirstObject(this.evtOiList);if(null==e)return!1;var i,r,s=t.rhEvtProg.evtNSelectedObjects;do{var n;n=62==this.evtParams[0].code?t.get_EventExpressionInt(this.evtParams[0]):this.evtParams[0].value,n>=0&&null!=e.rov&&n<e.rov.rvStrings.length?(i=e.rov.getString(n),r=t.get_EventExpressionAny(this.evtParams[1]),0==il.compareTo(i,r,this.evtParams[1].comparaison)&&(s--,t.rhEvtProg.evt_DeleteCurrentObject())):(s--,t.rhEvtProg.evt_DeleteCurrentObject()),e=t.rhEvtProg.evt_NextObject()}while(null!=e);return 0!=s}},on.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.hoX,e,i)}}),hn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return il.compareTer(t.hoY,e,i)}}),an.prototype=qc.extend(new fr,{eva1:function(t,e){return this.compute_NoRepeat(e)?(t.rhEvtProg.evt_AddCurrentObject(e),!0):0!=(t.rhEvtProg.rhEventGroup.evgFlags&Tl.EVGFLAGS_STOPINGROUP)&&(t.rhEvtProg.rh3DoStop=!0,!0)},eva2:function(t){return fr.negate(this,this.evaObject(t,this))},evaObjectRoutine:function(t){return t.hoAdRunHeader.colMask_TestObject_IXY(t,t.roc.rcImage,t.roc.rcAngle,t.roc.rcScaleX,t.roc.rcScaleY,t.hoX,t.hoY,0,ac.CM_TEST_PLATFORM)}}),ln.prototype=qc.extend(new fr,{eva1:function(t,e){var i=t.rhObjectList[t.rhEvtProg.rh1stObjectNumber];if(null==i);for(var r=this.evtOi,s=this.evtParams[0],n=s.oi;;){if(r==e.hoOi){if(n==i.hoOi)break;if(n>=0)return!1;if(this.colGetList(t,s.oiList,i.hoOi))break;return!1}if(n==e.hoOi){if(r==i.hoOi)break;if(r>=0)return!1;if(this.colGetList(t,this.evtOiList,i.hoOi))break;return!1}if(r<0){if(n<0){if(this.colGetList(t,this.evtOiList,e.hoOi)){if(this.colGetList(t,s.oiList,i.hoOi))break;if(0==this.colGetList(t,s.oiList,e.hoOi))return!1;if(this.colGetList(t,this.evtOiList,i.hoOi))break;return!1}if(this.colGetList(t,this.evtOiList,i.hoOi))break;return!1}if(n==i.hoOi)break;return!1}if(n>=0)return!1;if(r!=i.hoOi)return!1;break}var o=i.hoCreationId<<16|65535&this.evtIdentifier;if(0==fr.compute_NoRepeatCol(o,e)){if(0==(t.rhEvtProg.rhEventGroup.evgFlags&Tl.EVGFLAGS_STOPINGROUP))return!1;t.rhEvtProg.rh3DoStop=!0}if(o=e.hoCreationId<<16|65535&this.evtIdentifier,0==fr.compute_NoRepeatCol(o,i)){if(0==(t.rhEvtProg.rhEventGroup.evgFlags&Tl.EVGFLAGS_STOPINGROUP))return!1;t.rhEvtProg.rh3DoStop=!0}return r<0&&t.rhEvtProg.evt_DeleteCurrentQualifier(this.evtOiList),n<0&&t.rhEvtProg.evt_DeleteCurrentQualifier(s.oiList),t.rhEvtProg.evt_AddCurrentObject(e),t.rhEvtProg.evt_AddCurrentObject(i),i.rom.rmMovement.rmCollisionCount==t.rh3CollisionCount?e.rom.rmMovement.rmCollisionCount=t.rh3CollisionCount:e.rom.rmMovement.rmCollisionCount==t.rh3CollisionCount&&(i.rom.rmMovement.rmCollisionCount=t.rh3CollisionCount),!0},eva2:function(t){return this.isColliding(t)},colGetList:function(t,e,i){if(-1==e)return!1;var r,s=t.rhEvtProg.qualToOiList[32767&e];for(r=0;r<s.qoiList.length;r+=2)if(s.qoiList[r]==i)return!0;return!1}}),un.prototype=qc.extend(new fr,{eva1:function(t,e){return!0},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return t.roc.rcMovementType==Oc.MVTYPE_TAPED&&fr.checkMark(t.hoAdRunHeader,t.hoMark2)}}),cn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 29==this.evtParams[0].code?this.evaObject(t,this):this.evaExpObject(t,this)},evaObjectRoutine:function(t){var e,i=this.evtParams[0].value;for(e=0;e<32;e++)if(0!=(1<<e&i)&&t.hoAdRunHeader.getDir(t)==e)return fr.negaTRUE(this);return fr.negaFALSE(this)},evaExpRoutine:function(t,e,i){return e&=31,fr.negate(this,t.roc.rcDir==e)}}),dn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){return e&=31,null==t.rov||0==(t.rov.rvValueFlags&1<<e)}}),fn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];if(68!=e.code)return this.evaExpObject(t,this);for(var i=t.rhEvtProg.evt_FirstObject(this.evtOiList),r=t.rhEvtProg.evtNSelectedObjects;null!=i;)0==e.evaluateNoGlobal(i)&&(r--,t.rhEvtProg.evt_DeleteCurrentObject()),i=t.rhEvtProg.evt_NextObject();return 0!=r},evaExpRoutine:function(t,e,i){return e&=31,null!=t.rov&&0!=(t.rov.rvValueFlags&1<<e)}}),pn.prototype=qc.extend(new fr,{eva1:function(t,e){return 0!=(this.evtParams[0].value&t.rhEvtProg.rhCurParam0)&&(this.compute_NoRepeat(e)?(t.rhEvtProg.evt_AddCurrentObject(e),!0):0!=(t.rhEvtProg.rhEventGroup.evgFlags&Tl.EVGFLAGS_STOPINGROUP)&&(t.rhEvtProg.rh3DoStop=!0,!0))},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,0!=(t.rom.rmEventFlags&Vc.EF_GOESOUTPLAYFIELD))}}),mn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return il.getObjectFont(t).lfWeight>=400}}),gn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return t.hoAdRunHeader.colMask_TestObject_IXY(t,t.roc.rcImage,t.roc.rcAngle,t.roc.rcScaleX,t.roc.rcScaleY,t.hoX,t.hoY,0,ac.CM_TEST_OBSTACLE)?fr.negaTRUE(this):t.hoAdRunHeader.colMask_TestObject_IXY(t,t.roc.rcImage,t.roc.rcAngle,t.roc.rcScaleX,t.roc.rcScaleY,t.hoX,t.hoY,0,ac.CM_TEST_PLATFORM)?fr.negaTRUE(this):fr.negaFALSE(this)}}),vn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.isColliding(t)},eva2:function(t){return this.isColliding(t)}}),_n.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){var e=t.hoX-t.hoImgXSpot,i=e+t.hoImgWidth,r=t.hoY-t.hoImgYSpot,s=r+t.hoImgHeight;return 0!=t.hoAdRunHeader.quadran_In(e,r,i,s)?fr.negaFALSE(this):fr.negaTRUE(this)}}),Pn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return 0!=il.getObjectFont(t).lfItalic}}),En.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){var e=t.hoX-t.hoImgXSpot,i=e+t.hoImgWidth,r=t.hoY-t.hoImgYSpot,s=r+t.hoImgHeight;return 0!=t.hoAdRunHeader.quadran_In(e,r,i,s)?fr.negaTRUE(this):fr.negaFALSE(this)}}),An.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return 0!=il.getObjectFont(t).lfStrikeOut}}),
On.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return 0!=il.getObjectFont(t).lfUnderline}}),bn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaExpObject(t,this)},eva2:function(t){return this.evaExpObject(t,this)},evaExpRoutine:function(t,e,i){var r=t.hoAdRunHeader.rhWindowX+e,s=t.hoX-t.hoImgXSpot;if(s<=r)return fr.negaTRUE(this);if(r=t.hoAdRunHeader.rhWindowX+t.hoAdRunHeader.rh3WindowSx-e,(s+=t.hoImgWidth)>=r)return fr.negaTRUE(this);var n=t.hoAdRunHeader.rhWindowY+e,o=t.hoY-t.hoImgYSpot;return o<=n?fr.negaTRUE(this):(n=t.hoAdRunHeader.rhWindowY+t.hoAdRunHeader.rh3WindowSy-e,o+=t.hoImgHeight,o>=n?fr.negaTRUE(this):fr.negaFALSE(this))}}),Sn.prototype={eva1:function(t,e){return null==e?this.eva2(t):this.evtOi>=0?e.hoOi==this.evtOi:this.evaNoMoreObject(t,1)},eva2:function(t){return this.evaNoMoreObject(t,0)},evaNoMoreObject:function(t,e){var i,r=this.evtOiList;if(0==(32768&r))return i=t.rhOiList[r],0==i.oilNObjects;if(32767==(32767&r))return!1;var s,n=t.rhEvtProg.qualToOiList[32767&r],o=0;for(s=0;s<n.qoiList.length;s+=2)i=t.rhOiList[n.qoiList[s+1]],o+=i.oilNObjects;return 0==(o-=e)}},Tn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){return 0==t.rhEvtProg.count_ZoneOneObject(this.evtOiList,this.evtParams[0])}},yn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=t.rhEvtProg.count_ZoneOneObject(this.evtOiList,this.evtParams[0]),i=t.get_EventExpressionInt(this.evtParams[1]);return il.compareTer(e,i,this.evtParams[1].comparaison)}},Cn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e,i=0,r=this.evtOiList;if(0==(32768&r))e=t.rhOiList[r],i=e.oilNObjects;else if(32767!=(32767&r)){var s,n=t.rhEvtProg.qualToOiList[32767&r];for(s=0;s<n.qoiList.length;s+=2)e=t.rhOiList[n.qoiList[s+1]],i+=e.oilNObjects}var o=t.get_EventExpressionInt(this.evtParams[0]);return il.compareTer(i,o,this.evtParams[0].comparaison)}},Ln.prototype=qc.extend(new fr,{eva1:function(t,e){return 0!=(this.evtParams[0].value&t.rhEvtProg.rhCurParam0)&&(this.compute_NoRepeat(e)?(t.rhEvtProg.evt_AddCurrentObject(e),!0):0!=(t.rhEvtProg.rhEventGroup.evgFlags&Tl.EVGFLAGS_STOPINGROUP)&&(t.rhEvtProg.rh3DoStop=!0,!0))},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,0!=(t.rom.rmEventFlags&Vc.EF_GOESOUTPLAYFIELD))}}),In.prototype=qc.extend(new fr,{eva1:function(t,e){return!0},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return t.roc.rcMovementType==Oc.MVTYPE_TAPED&&fr.checkMark(t.hoAdRunHeader,t.hoMark1)}}),Fn.prototype=qc.extend(new fr,{eva1:function(t,e){var i=t.get_EventExpressionString(this.evtParams[0]);return null!=e.hoMT_NodeName&&e.hoMT_NodeName==i},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){if(t.roc.rcMovementType!=Oc.MVTYPE_TAPED)return!1;if(fr.checkMark(t.hoAdRunHeader,t.hoMark1)){var e=t.hoAdRunHeader.get_EventExpressionString(this.evtParams[0]);if(null!=t.hoMT_NodeName&&t.hoMT_NodeName==e)return!0}return!1}}),xn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,0==t.rom.rmReverse)}}),wn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,0==(t.ros.rsFlags&cc.RSFLAG_HIDDEN))}}),Mn.prototype=qc.extend(new fr,{eva1:function(t,e){return this.evaObject(t,this)},eva2:function(t){return this.evaObject(t,this)},evaObjectRoutine:function(t){return fr.negate(this,0==t.roc.rcSpeed)}}),Rn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e;return e=67==this.evtParams[0].code?this.evtParams[0].value:t.get_EventExpressionInt(this.evtParams[0]),5==e?fr.negaTRUE(this):fr.negaFALSE(this)}},kn.prototype={eva1:function(t,e){return this.eva2(t)},eva2:function(t){var e=this.evtParams[0];if(0!=e.ois.length&&0!=t.rhEvtProg.childEventSelectionStack.length){var i=t.rhEvtProg.childEventSelectionStack[t.rhEvtProg.childEventSelectionStack.length-1];t.rhEvtProg.evt_RestoreSelectedObjects(e.ois,i)}return fr.negaTRUE(this)}},Nn.EXP_EXTGETFRICTION=8960,Nn.EXP_EXTGETRESTITUTION=9216,Nn.EXP_EXTGETDENSITY=9472,Nn.EXP_EXTGETVELOCITY=9728,Nn.EXP_EXTGETANGLE=9984,Nn.EXP_EXTGETMASS=10752,Nn.EXP_EXTGETANGULARVELOCITY=11008,Nn.EXP_STRING=262143,Nn.EXP_LONG=65535,Nn.EXP_DOUBLE=1572863,Nn.create=function(t){var e=t.getFilePointer(),i=null,r=t.readAInt();switch(r){case 0:i=new Hn;break;case 131072:i=new Do;break;case 262144:i=new Io;break;case 393216:i=new xo;break;case 524288:i=new ao;break;case 655360:i=new Fo;break;case 786432:i=new Ho;break;case 917504:i=new eo;break;case 1048576:i=new Mo;break;case 1179648:i=new Zo;break;case 65535:i=new Bn;break;case 131071:i=new Bo;break;case 196607:i=new Jo;break;case 262143:i=new Vn;break;case 327679:i=new Vo;break;case 393215:i=new zo;break;case 458751:case 524287:case 589823:case 655359:i=new Dn;break;case 720895:i=new Xo;break;case 786431:i=new ho;break;case 851967:i=new Ko;break;case 917503:i=new Wo;break;case 983039:i=new bo;break;case 1048575:i=new Oo;break;case 1114111:i=new _o;break;case 1179647:i=new oo;break;case 1245183:i=new lo;break;case 1310719:i=new Eo;break;case 1376255:i=new jo;break;case 1441791:i=new Co;break;case 1507327:i=new Ao;break;case 1572863:i=new Gn;break;case 1638399:i=new Wn;break;case 1900543:i=new Po;break;case 1966079:i=new $n;break;case 2031615:i=new no;break;case 2097151:i=new fo;break;case 2162687:i=new to;break;case 2228223:i=new io;break;case 2293759:i=new ro;break;case 2359295:i=new Ro;break;case 2686975:i=new Lo;break;case 2752511:i=new yo;break;case 2818047:i=new vo;break;case 2883583:i=new go;break;case 2949119:i=new mo;break;case 3014655:i=new po;break;case 3080191:i=new So;break;case 3145727:i=new wo;break;case 3211263:i=new Yo;break;case 3276799:i=new Uo;break;case 3342335:i=new Xn;break;case 3407871:i=new To;break;case 3473407:i=new qo;break;case 3538943:i=new uo;break;case 3604479:i=new Go;break;case 3866623:i=new co;break;case 3932159:i=new so;break;case 3997695:i=new Hn;break;case 4063231:i=new Dn;break;case 4128767:i=new qn;break;case 4194303:i=new zn;break;case 4259839:i=new Jn;break;case 4325375:i=new Qn;break;case 4456447:i=new Zn;break;case-1:i=new ko;break;case-65537:i=new No;break;case-131073:i=new Qo;break;case 65534:i=new Ea;break;case 131070:i=new ba;break;case 196606:i=new Oa;break;case 262142:i=new Hn;break;case 327678:i=new Sa;break;case 393214:i=new Ta;break;case 458750:i=new Aa;break;case 524286:i=new ga;break;case 589822:i=new va;break;case 655358:i=new fa;break;case 720894:i=new _a;break;case 786430:i=new pa;break;case 851966:i=new ma;break;case 65533:i=new ah;break;case 131069:i=new uh;break;case 196605:i=new vh;break;case 262141:i=new _h;break;case 327677:i=new Eh;break;case 393213:i=new Ph;break;case 458749:i=new gh;break;case 524285:i=new mh;break;case 589821:i=new lh;break;case 655357:i=new ch;break;case 720893:i=new hh;break;case 786429:i=new ph;break;case 851965:i=new fh;break;case 917501:i=new dh;break;case 983037:case 1048573:i=new Hn;break;case 1114109:i=new nh;break;case 1179645:i=new oh;break;case 1245181:i=new Hn;break;case 65532:i=new sh;break;case 131068:i=new th;break;case 196604:i=new rh;break;case 262140:i=new eh;break;case 327676:i=new ih;break;case 393212:i=new $o;break;case 65530:i=new Ca;break;case 131066:i=new La;break;case 196602:i=new ya;break;case 65529:i=new Ma;break;case 131065:i=new wa;break;case 196601:i=new Ia;break;case 262137:i=new Fa;break;case 327673:i=new xa;break;case 65531:i=new Ah;break;case 5242883:i=new Rh;break;case 5308419:i=new Fh;break;case 5373955:i=new wh;break;case 5439491:i=new Mh;break;case 5505027:i=new xh;break;case 5242882:i=new ua;break;case 5308418:i=new ca;break;case 5373954:i=new da;break;case 5439490:i=new la;break;case 5242887:i=new yh;break;case 5308423:i=new Th;break;case 5373959:i=new Sh;break;case 5439495:i=new Oh;break;case 5505031:i=new bh;break;case 5242889:i=new Ih;break;case 5308425:i=new Lh;break;case 5373961:i=new Ch;break;default:switch(4294901760&r){case 65536:i=new ha;break;case 2<<16:i=new zh;break;case 3<<16:i=new ta;break;case 4<<16:i=new Dh;break;case 5<<16:i=new Bh;break;case 6<<16:i=new Gh;break;case 7<<16:i=new ia;break;case 8<<16:i=new ra;break;case 9<<16:i=new aa;break;case 655360:i=new oa;break;case 720896:i=new sa;break;case 786432:i=new qh;break;case 851968:i=new jh;break;case 917504:i=new Jh;break;case 983040:i=new Zh;break;case 16<<16:i=new jn;break;case 17<<16:i=new Kh;break;case 18<<16:i=new Qh;break;case 19<<16:i=new Yn;break;case 20<<16:i=new Xh;break;case 21<<16:i=new Wh;break;case 22<<16:i=new Yh;break;case 23<<16:i=new Uh;break;case 24<<16:i=new Vh;break;case 25<<16:i=new ea;break;case 26<<16:i=new na;break;case 27<<16:i=new Hh;break;case 28<<16:i=new $h;break;case 29<<16:i=new Hn;break;case 30<<16:i=new Un;break;case 31<<16:i=new Kn;break;case 32<<16:i=new kh;break;case 33<<16:i=new Nh;break;case 34<<16:i=new Ra;break;case 35<<16:i=new ka;break;case 36<<16:i=new Na;break;case 37<<16:i=new Da;break;case 38<<16:i=new Ha;break;case 39<<16:i=new Ba;break;case 40<<16:i=new Ga;break;case 41<<16:i=new ja;break;case 42<<16:i=new Ya;break;case 43<<16:i=new Xa;break;case 44<<16:i=new Wa;break;default:i=new _c}}if(null!=i&&(i.code=r,0!=r)){var s,n=t.readAShort();switch(r){case 262143:i.string=t.readAString();break;case 65535:i.value=t.readAInt();break;case 1572863:i.value=t.readADouble();break;case 1638399:case 3342335:t.skipBytes(4),i.number=t.readAShort();break;default:if(s=65535&r,0!=(32768&s)&&(s-=65536),s>=2||s==Dl.OBJ_PLAYER)switch(i.oi=t.readShort(),i.oiList=t.readShort(),4294901760&r){case 16<<16:case 19<<16:i.number=t.readAShort()}}t.seek(e+n)}return i},Dn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=""}};Hn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=0}},Bn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=this.value}},Gn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=this.value,t.flagFloat=!0}},jn.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i;i=null!=e.rov?e.rov.getValue(this.number):0,qc.isInt(i)||(t.flagFloat=!0),t.rh4Results[t.rh4PosPile]=i}},Yn.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]="");t.rh4Results[t.rh4PosPile]=e.rov.getString(this.number)}},Xn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.getGlobalStringAt(this.number)}},Wn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.getGlobalValueAt(this.number)}},Vn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=this.string}},Un.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.get_ExpressionInt();if(null!=e&&null!=e.rov&&i>=0&&i<e.rov.rvValues.length){var r=e.rov.getValue(i);return qc.isInt(r)||(t.flagFloat=!0),void(t.rh4Results[t.rh4PosPile]=r)}t.rh4Results[t.rh4PosPile]=0}},Kn.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.get_ExpressionInt();if(null!=e&&null!=e.rov&&i>=0&&i<e.rov.rvStrings.length)return void(t.rh4Results[t.rh4PosPile]=e.rov.getString(i));t.rh4Results[t.rh4PosPile]=""}},qn.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.getExpression();t.rh4CurToken++;var s=t.getExpression(),n=r-e,o=s-i;t.rh4Results[t.rh4PosPile]=qc.approximateInt(Math.sqrt(n*n+o*o))}},zn.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression(),r=180*Math.atan2(-i,e)/3.141592653589;r<0&&(r=360+r),t.rh4Results[t.rh4PosPile]=qc.approximateInt(r)}},Jn.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.getExpression();e=Math.max(e,i),e=Math.min(e,r),t.rh4Results[t.rh4PosPile]=e}},Qn.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4Results[t.rh4PosPile]=e+t.random(i-e+1)}},Zn.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]="Html5"}},$n.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.abs(e)}},$n.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.abs(e)}},to.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=57.29577951308232*Math.acos(e),t.flagFloat=!0}},eo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]&=t.rh4Results[t.rh4PosPile+1]}},io.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=57.29577951308232*Math.asin(e),t.flagFloat=!0}},ro.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=57.29577951308232*Math.atan(e),t.flagFloat=!0}},so.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4Results[t.rh4PosPile]=57.29577951308232*Math.atan2(e,i),t.flagFloat=!0}},no.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.ceil(e)}},oo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]="0b"+e.toString(2)}},ho.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.cos(e/57.29577951308232),t.flagFloat=!0}},ao.prototype={evaluate:function(t){var e=t.rh4Results[t.rh4PosPile],i=t.rh4Results[t.rh4PosPile+1];0!=i?0==t.flagFloat?t.rh4Results[t.rh4PosPile]=qc.floatToInt(e/i):t.rh4Results[t.rh4PosPile]/=t.rh4Results[t.rh4PosPile+1]:t.rh4Results[t.rh4PosPile]=0}},lo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.exp(e),t.flagFloat=!0}},uo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.get_ExpressionInt();if(r>=e.length)return void(t.rh4Results[t.rh4PosPile]=-1);t.rh4Results[t.rh4PosPile]=e.indexOf(i,r)}},co.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.get_ExpressionInt();i<1&&(i=1),t.rh4CurToken++;var r,s=t.get_ExpressionInt(),n=e.toString(),o=new String,h=n.indexOf(".");if(h>=0){for(r=h+1;r<n.length&&"0"==n.charAt(r);r++);r==n.length&&(h=-1)}var a=0;if(h>=0){for(e<0&&(o+="-",a++);a<h;)o+=n.charAt(a),a++;if(s>0)for(o+=".",a++,r=0;r<s&&r+a<n.length;r++)o+=n.charAt(a+r);else if(s<0)for(o+=".",a++;a<n.length;)o+=n.charAt(a),a++}else{for(;a<n.length&&"."!=n.charAt(a);)o+=n.charAt(a),a++;if(s>0)for(o+=".",r=0;r<s;r++)o+="0"}t.rh4Results[t.rh4PosPile]=o}},fo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.floor(e)}},po.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e>>>16&255}},mo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e>>>8&255}},go.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=255&e}},vo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4CurToken++;var i=t.get_ExpressionInt();t.rh4CurToken++;var r=t.get_ExpressionInt(),s=((255&r)<<16)+((255&i)<<8)+(255&e);t.rh4Results[t.rh4PosPile]=s}},_o.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]="0x"+e.toString(16)}},Po.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=qc.floatToInt(e)}},Eo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.get_ExpressionInt();i<0&&(i=0),i>e.length&&(i=e.length),t.rh4Results[t.rh4PosPile]=e.substring(0,i)}},Ao.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e.length}},Oo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.log(e),t.flagFloat=!0}},bo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.log(e)/Math.log(10),t.flagFloat=!0}},So.prototype={evaluate:function(t){t.rh4CurToken++;var e,i=t.rh4Tokens[t.rh4CurToken];if(t.rh4Tokens[t.rh4CurToken+1].code<=0||t.rh4Tokens[t.rh4CurToken+1].code>=1310720){if(i.code==Nn.EXP_LONG)return e=t.rh4FastLoops.get(i.value),t.rh4CurToken++,void(t.rh4Results[t.rh4PosPile]=e.index);if(i.code==Nn.EXP_STRING){var r=t.rh4CurToken,s=i.string;t.rh4CurToken++;var n;for(n=0;n<t.rh4FastLoops.size();n++)if(e=t.rh4FastLoops.get(n),qc.compareStringsIgnoreCase(e.name,s))return t.rh4Tokens[r]=new Bn,t.rh4Tokens[r].code=Nn.EXP_LONG,t.rh4Tokens[r].value=n,void(t.rh4Results[t.rh4PosPile]=e.index);return void(t.rh4Results[t.rh4PosPile]=0)}}var n,s=t.getExpression();for(n=0;n<t.rh4FastLoops.size();n++)if(e=t.rh4FastLoops.get(n),qc.compareStringsIgnoreCase(e.name,s))return void(t.rh4Results[t.rh4PosPile]=e.index);t.rh4Results[t.rh4PosPile]=0}},To.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e.toLowerCase()}},yo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.max(e,i)}},Co.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.get_ExpressionInt();t.rh4CurToken++;var r=t.get_ExpressionInt();i<0&&(i=0),i>e.length&&(i=e.length),r<0&&(r=0),i+r>e.length&&(r=e.length-i),t.rh4Results[t.rh4PosPile]=e.substr(i,r)}},Lo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.min(e,i)}},Io.prototype={evaluate:function(t){t.bOperande?(t.rh4CurToken++,t.rh4Tokens[t.rh4CurToken].evaluate(t),t.rh4Results[t.rh4PosPile]=-t.rh4Results[t.rh4PosPile]):t.rh4Results[t.rh4PosPile]-=t.rh4Results[t.rh4PosPile+1]}},Fo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]%=t.rh4Results[t.rh4PosPile+1]}},xo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]*=t.rh4Results[t.rh4PosPile+1]}},wo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]="\n"}},Mo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]|=t.rh4Results[t.rh4PosPile+1]}},Ro.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=4294967295^e}},ko.prototype={evaluate:function(t){t.rh4CurToken++,t.rh4Results[t.rh4PosPile]=t.getExpression()}},No.prototype={evaluate:function(t){}},Do.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]+=t.rh4Results[t.rh4PosPile+1]}},Ho.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=Math.pow(t.rh4Results[t.rh4PosPile],t.rh4Results[t.rh4PosPile+1]),t.flagFloat=!0}},Bo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.random(e)}},Go.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.get_ExpressionInt();r>e.length&&(r=e.length);for(var s,n=-1;;){s=n;var o=e.indexOf(i,n+1);if(-1==o)break;if((n=o)>r)break}t.rh4Results[t.rh4PosPile]=s}},jo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4CurToken++;var i=t.get_ExpressionInt();i<0&&(i=0),i>e.length&&(i=e.length),t.rh4Results[t.rh4PosPile]=e.substring(e.length-i,e.length)}},Yo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.round(e)}},Xo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.sin(e/57.29577951308232),t.flagFloat=!0}},Wo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e<0?0:Math.sqrt(e),t.flagFloat=!0}},Vo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e.toString()}},Uo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt()-1;t.rh4Results[t.rh4PosPile]=t.rhApp.getGlobalStringAt(e)}},Ko.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=Math.tan(e/57.29577951308232),t.flagFloat=!0}},qo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=e.toUpperCase()}},zo.prototype={evaluate:function(t){t.rh4CurToken++;for(var e=t.getExpression(),i=0;i<e.length&&32==e.charAt(i);)i++;var r=0;if(i<e.length)if(e=e.substr(i),"0b"==e.substr(0,2)||"0B"==e.substr(i,2))r=parseInt(e.substr(i+2),2);else{var s=parseInt(e);if(r=parseFloat(e),isNaN(r)||isNaN(s))r=0;else{0==r&&0!=s&&(r=s);var n=qc.floatToInt(r);n!=r&&(t.flagFloat=!0)}}t.rh4Results[t.rh4PosPile]=r}},Jo.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt()-1;t.rh4Results[t.rh4PosPile]=t.rhApp.getGlobalValueAt(e)}},Qo.prototype={evaluate:function(t){}},Zo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]^=t.rh4Results[t.rh4PosPile+1]}},Qo.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=0}},$o.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhEvtProg.rhCurParam1}},th.prototype={evaluate:function(t){var e=qc.floatToInt(t.rhTimer/10);t.rh4Results[t.rh4PosPile]=e%100}},eh.prototype={evaluate:function(t){var e=qc.floatToInt(t.rhTimer/36e5);t.rh4Results[t.rh4PosPile]=e}},ih.prototype={evaluate:function(t){var e=qc.floatToInt(t.rhTimer/6e4);t.rh4Results[t.rh4PosPile]=e%60}},rh.prototype={evaluate:function(t){var e=qc.floatToInt(t.rhTimer/1e3);t.rh4Results[t.rh4PosPile]=e%60}},sh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhTimer}},nh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=0}},oh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=16777215}},hh.prototype={evaluate:function(t){var e,i=0;for(e=0;e<il.MAX_FRAMERATE;e++)i+=t.rh4FrameRateArray[e];t.rh4Results[t.rh4PosPile]=Math.round(1e3*il.MAX_FRAMERATE/i)}},ah.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.currentFrame}},lh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.currentFrame+1}},uh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhNPlayers}},ch.prototype={evaluate:function(t){var e,i;t.rh4CurToken++,e=t.get_ExpressionInt(),t.rh4CurToken++,i=t.get_ExpressionInt();var r=0;null!=t.y_GetLadderAt(-1,e,i)?r=2:t.colMask_Test_XY(e,i,-1,za.CM_TEST_OBSTACLE)&&(r=1),t.rh4Results[t.rh4PosPile]=r}},dh.prototype={evaluate:function(t){var e=t.rhFrame.leBackground;t.rhApp.isPreloaderSubApp&&(e=t.rhApp.parentApp.frame.leBackground),t.rh4Results[t.rh4PosPile]=qc.swapRGB(e)}},fh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhFrame.leVirtualRect.bottom}},ph.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhFrame.leVirtualRect.right}},mh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhFrame.leHeight}},gh.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhFrame.leWidth}},vh.prototype={evaluate:function(t){var e=t.rhWindowX;0!=(t.rh3Scrolling&il.RH3SCROLLING_SCROLL)&&(e=t.rh3DisplayX),e<0&&(e=0),t.rh4Results[t.rh4PosPile]=e}},_h.prototype={evaluate:function(t){var e=t.rhWindowX;0!=(t.rh3Scrolling&il.RH3SCROLLING_SCROLL)&&(e=t.rh3DisplayX),e+=t.rh3WindowSx,e>t.rhLevelSx&&(e=t.rhLevelSx),t.rh4Results[t.rh4PosPile]=e}},Ph.prototype={evaluate:function(t){var e=t.rhWindowY;0!=(t.rh3Scrolling&il.RH3SCROLLING_SCROLL)&&(e=t.rh3DisplayY),e+=t.rh3WindowSy,e>t.rhLevelSy&&(e=t.rhLevelSy),t.rh4Results[t.rh4PosPile]=e}},Eh.prototype={evaluate:function(t){var e=t.rhWindowY;0!=(t.rh3Scrolling&il.RH3SCROLLING_SCROLL)&&(e=t.rh3DisplayY),e<0&&(e=0),t.rh4Results[t.rh4PosPile]=e}},Ah.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhNObjects}},Oh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.cpt_GetColor1();t.rh4Results[t.rh4PosPile]=qc.swapRGB(i)}},bh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.cpt_GetColor2();t.rh4Results[t.rh4PosPile]=qc.swapRGB(i)}},Sh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.cpt_GetMax()}},Th.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.cpt_GetMin()}},yh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.cpt_GetValue(),e.bFloat&&(t.flagFloat=!0)}},Ch.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.get_ExpressionInt()-1;if(null==e)return void(t.rh4Results[t.rh4PosPile]="");t.rh4Results[t.rh4PosPile]=e.getGlobalString(i)}},Lh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.get_ExpressionInt()-1;if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.getGlobalValue(i)}},Ih.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.getFrameNumber()}},Fh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]="");null!=e.rsTextBuffer?t.rh4Results[t.rh4PosPile]=e.rsTextBuffer:t.rh4Results[t.rh4PosPile]=""}},xh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void t.getCurrentResult().forceInt(0);t.rh4Results[t.rh4PosPile]=e.rsMaxi}},wh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(t.rh4CurToken++,null==e)return void(t.rh4Results[t.rh4PosPile]="");var i=t.get_ExpressionInt();if(i<0)return void(null!=e.rsTextBuffer?t.rh4Results[t.rh4PosPile]=e.rsTextBuffer:t.rh4Results[t.rh4PosPile]="");i>=e.rsMaxi&&(i=e.rsMaxi-1);var r=e.hoCommon.ocObject;t.rh4Results[t.rh4PosPile]=r.otTexts[i].tsText}},Mh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void t.getCurrentResult().forceInt(0);null!=e.rsTextBuffer?t.rh4Results[t.rh4PosPile]=parseFloat(e.rsTextBuffer):t.rh4Results[t.rh4PosPile]=0}},Rh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rsMini+1}},kh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.getExpression();if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var s=i-e.hoX,n=r-e.hoY;t.rh4Results[t.rh4PosPile]=qc.approximateInt(Math.sqrt(s*s+n*n))}},Nh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.getExpression();t.rh4CurToken++;var r=t.getExpression();if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var s=180*Math.atan2(-(r-e.hoY),i-e.hoX)/3.141592653589;s<0&&(s=360+s),t.rh4Results[t.rh4PosPile]=qc.approximateInt(s)}},Dh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.getAcc()}},Hh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.ros.rsEffect,r=e.ros.rsEffectParam,s=0;switch(i&cc.BOP_MASK){case cc.BOP_EFFECTEX:s=255-(r>>24&255);break;case cc.BOP_BLEND:s=255-(128==r?0:255-2*r);break;default:i&cc.BOP_RGBAFILTER&&(s=255-(r>>24&255))}t.rh4Results[t.rh4PosPile]=s}},Bh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.getDec()}},Gh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=t.getDir(e)}},jh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);t.rh4CurToken++;var i=t.get_ExpressionInt();if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);if(i&=31,null!=e.rov){var r=0;0!=(1<<i&e.rov.rvValueFlags)&&(r=1),t.rh4Results[t.rh4PosPile]=r}else t.rh4Results[t.rh4PosPile]=0}},Yh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=il.getObjectTextColor(e);i=qc.swapRGB(i),t.rh4Results[t.rh4PosPile]=i}},Xh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]="");var i=il.getObjectFont(e);t.rh4Results[t.rh4PosPile]=i.lfFaceName}},Wh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=il.getObjectFont(e);t.rh4Results[t.rh4PosPile]=Math.round(72*i.lfHeight/96)}},Vh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.getGravity()}},Uh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoLayer+1}},Kh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=0;null!=e.ros&&(i=e.ros.getSemiTransparency()),t.rh4Results[t.rh4PosPile]=i}},qh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.hoCreationId<<16|65535&e.hoNumber;t.rh4Results[t.rh4PosPile]=i}},zh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=0;null!=e.roa&&(i=e.roa.raAnimFrame),t.rh4Results[t.rh4PosPile]=i}},Jh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=0;null!=e.roa&&(i=e.roa.raAnimOn),t.rh4Results[t.rh4PosPile]=i}},Qh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=0;null!=e.roa&&(i=e.rom.rmMvtNum),t.rh4Results[t.rh4PosPile]=i}},Zh.prototype={evaluate:function(t){var e,i=this.oiList;if(0==(32768&i))e=t.rhOiList[i],t.rh4Results[t.rh4PosPile]=e.oilNObjects;else{var r=0;if(-1!=i){var s,n=t.rhEvtProg.qualToOiList[32767&i];for(s=0;s<n.qoiList.length;s+=2)e=t.rhOiList[n.qoiList[s+1]],r+=e.oilNObjects}t.rh4Results[t.rh4PosPile]=r}}},$h.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.ros.rsEffect,r=e.ros.rsEffectParam,s=0,n=r;s=(i&cc.BOP_MASK)==cc.BOP_EFFECTEX||0!=(i&cc.BOP_RGBAFILTER)?qc.swapRGB(16777215&n):16777215,t.rh4Results[t.rh4PosPile]=s}},ta.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=0
;null!=e.roa&&(i=e.rom.rmMovement.getSpeed()),t.rh4Results[t.rh4PosPile]=i}},ea.prototype={evaluate:function(t){var e=0,i=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null!=i&&(e=i.hoX,null!=i.roa&&i.roc.rcImage>=0)){var r;if(null!=(r=t.rhApp.imageBank.getImageInfoEx(i.roc.rcImage,i.roc.rcAngle,i.roc.rcScaleX,i.roc.rcScaleY)))return void(t.rh4Results[t.rh4PosPile]=e+r.xAP-r.xSpot)}t.rh4Results[t.rh4PosPile]=e}},ia.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoX-e.hoImgXSpot}},ra.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoX-e.hoImgXSpot+e.hoImgWidth}},sa.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoX}},na.prototype={evaluate:function(t){var e=0,i=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null!=i&&(e=i.hoY,null!=i.roa&&i.roc.rcImage>=0)){var r;if(null!=(r=t.rhApp.imageBank.getImageInfoEx(i.roc.rcImage,i.roc.rcAngle,i.roc.rcScaleX,i.roc.rcScaleY)))return void(t.rh4Results[t.rh4PosPile]=e+r.yAP-r.ySpot)}t.rh4Results[t.rh4PosPile]=e}},Dh.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.getAcc()}},oa.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoY-e.hoImgYSpot+e.hoImgHeight}},ha.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoY}},aa.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoY-e.hoImgYSpot}},la.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=e.roc.rcAngle,r=t.GetMBase(e);r&&(i=r.getAngle())==ll.ANGLE_MAGIC&&(i=e.roc.rcAngle),t.rh4Results[t.rh4PosPile]=i}},ua.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(t.rh4CurToken++,null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=t.get_ExpressionInt();t.rh4CurToken++;var r=t.get_ExpressionInt(),s=0;if(-1!=e.roc.rcImage){var n=t.rhApp.imageBank.getImageFromHandle(e.roc.rcImage);null!=n?(s=n.getPixel(i,r),s=qc.swapRGB(s)):s=0}t.rh4Results[t.rh4PosPile]=s}},ca.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.roc.rcScaleX,t.flagFloat=!0}},da.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.roc.rcScaleY,t.flagFloat=!0}},fa.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getDurationChannel(e-1)}},pa.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getFrequencyChannel(e-1)}},ma.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getSndNameChannel(e-1)}},ga.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getPositionChannel(e-1)}},va.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getDurationSample(e)}},_a.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getFrequencySample(e)}},Pa.prototype={evaluate:function(t){var e=100*t.rhApp.soundPlayer.getMainPan();e<0?e-=.5:e+=.5,t.rh4Results[t.rh4PosPile]=e}},Ea.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getMainVolume()}},Aa.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getPositionSample(e)}},Oa.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.get_ExpressionInt();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getVolumeChannel(e-1)}},ba.prototype={evaluate:function(t){t.rh4CurToken++;var e=t.getExpression();t.rh4Results[t.rh4PosPile]=t.rhApp.soundPlayer.getVolumeSample(e)}},Sa.prototype={evaluate:function(t){t.rh4CurToken++;t.getExpression();t.rh4Results[t.rh4PosPile]=0}},Ta.prototype={evaluate:function(t){t.rh4CurToken++;t.getExpression();t.rh4Results[t.rh4PosPile]=0}},ya.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=40*t.rhApp.deltaWheel}},Ca.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.getXMouse()}},La.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.getYMouse()}},Ia.prototype={evaluate:function(t){var e=this.oi,i=Ka.CTRLTYPE_KEYBOARD;e<Ka.MAX_PLAYER&&(i=t.rhApp.getCtrlType()[e]),i==Ka.CTRLTYPE_KEYBOARD&&(i=Ka.CTRLTYPE_MOUSE),t.rh4Results[t.rh4PosPile]=i}},Fa.prototype={evaluate:function(t){this.oi;t.rh4CurToken++;var e=(t.get_ExpressionInt(),"");key<Ka.MAX_KEY&&(vkCode>=96&&vkCode<=105?(c=vkCode-96,e="Numpad"+c.toString()):vkCode>=112&&vkCode<=126?(c=vkCode-112,e="F"+c.toString()):vkCode>=48&&vkCode<=57?(c=vkCode-48,e=c.toString()):e=vkCode>=65&&vkCode<=90?String.fromCharCode(vkCode):"Control key"),t.rh4Results[t.rh4PosPile]=e}},xa.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.playerNames[this.oi]}},wa.prototype={evaluate:function(t){t.rh4Results[t.rh4PosPile]=t.rhApp.getLives()[this.oi]}},Ma.prototype={evaluate:function(t){var e=t.rhApp.getScores();t.rh4Results[t.rh4PosPile]=e[this.oi]}},Ra.prototype={evaluate:function(t){var e=0;null!=t.rhEvtProg.get_ExpressionObjects(this.oiList)&&(null!=t.rh4CurrentForEach&&this.oiList==t.rh4CurrentForEach.oi&&(e=t.rh4CurrentForEach.index),null!=t.rh4CurrentForEach2&&this.oiList==t.rh4CurrentForEach2.oi&&(e=t.rh4CurrentForEach2.index)),t.rh4Results[t.rh4PosPile]=e}},ka.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETFRICTION,0)}},Na.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETRESTITUTION,0)}},Da.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETDENSITY,0)}},Ha.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETVELOCITY,0)}},Ba.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETANGLE,0)}},Na.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETRESTITUTION,0)}},Ga.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoImgWidth}},ja.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.hoImgHeight}},Ya.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETMASS,0)}},Xa.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==t.GetMBase(e))return void(t.rh4Results[t.rh4PosPile]=0);t.rh4Results[t.rh4PosPile]=e.rom.rmMovement.callMovement(Nn.EXP_EXTGETANGULARVELOCITY,0)}},Wa.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]="");t.rh4Results[t.rh4PosPile]=e.hoOiList.oilName}},Kc.FusionVersion="Clickteam Fusion HTML5 Exporter Build 292.24",Ka.MAX_PLAYER=4,Ka.RUNTIME_VERSION=770,Ka.MAX_KEY=8,Ka.GA_NOHEADING=2,Ka.GA_STRETCHTOFIT=4,Ka.GA_SPEEDINDEPENDANT=8,Ka.GA_STRETCH=16,Ka.GA_MENUHIDDEN=128,Ka.GA_MENUBAR=256,Ka.GA_MAXIMISE=512,Ka.GA_MIX=1024,Ka.GA_FULLSCREENATSTART=2048,Ka.GANF_SAMPLESOVERFRAMES=1,Ka.GANF_RUNFRAME=4,Ka.GANF_SAMPLESEVENIFNOTFOCUS=8,Ka.GANF_NOTHICKFRAME=64,Ka.GANF_DONOTCENTERFRAME=128,Ka.GANF_DISABLE_CLOSE=512,Ka.GANF_HIDDENATSTART=1024,Ka.GANF_VSYNC=4096,Ka.GAOF_JAVASWING=4096,Ka.GAOF_JAVAAPPLET=8192,Ka.RUNTIME_CM=1,Ka.SL_RESTART=0,Ka.SL_STARTFRAME=1,Ka.SL_FRAMEFADEINLOOP=2,Ka.SL_FRAMELOOP=3;Ka.SL_FRAMEFADEOUTLOOP=4,Ka.SL_ENDFRAME=5,Ka.SL_QUIT=6,Ka.SL_WAITFORMOCHI=7,Ka.MAX_VK=203,Ka.VK_LEFT=37,Ka.VK_RIGHT=39,Ka.VK_UP=38,Ka.VK_DOWN=40,Ka.VK_LBUTTON=200,Ka.VK_MBUTTON=201,Ka.VK_RBUTTON=202,Ka.VK_NUMPAD0=96,Ka.VK_NUMPAD1=97,Ka.VK_NUMPAD2=98,Ka.VK_NUMPAD3=99,Ka.VK_NUMPAD4=100,Ka.VK_NUMPAD5=101,Ka.VK_NUMPAD6=102,Ka.VK_NUMPAD7=103,Ka.VK_NUMPAD8=104,Ka.VK_NUMPAD9=105,Ka.VK_S=83,Ka.VK_D=68,Ka.VK_E=69,Ka.VK_X=88,Ka.VK_F12=123,Ka.VK_SHIFT=16,Ka.VK_CONTROL=17,Ka.VK_MENU=18,Ka.CTRLTYPE_MOUSE=0,Ka.CTRLTYPE_JOY1=1,Ka.CTRLTYPE_JOY2=2,Ka.CTRLTYPE_JOY3=3,Ka.CTRLTYPE_JOY4=4,Ka.CTRLTYPE_KEYBOARD=5,Ka.ARF_INGAMELOOP=4,Ka.BUILDFLAG_TEST=128,Ka.AH2OPT_KEEPSCREENRATIO=1,Ka.AH2OPT_RESAMPLESTRETCH=4,Ka.AH2OPT_WEBGL=65536,Ka.AH2OPT_KEEPRESOURCESBETWEENFRAMES=32768,Ka.AH2OPT_RUNEVENIFNOTFOCUS=1048576,Ka.AH2OPT_PRELOADERQUIT=8388608,Ka.AH2OPT_LOADDATAATSTART=16777216,Ka.AH2OPT_LOADSOUNDSONTOUCH=33554432,Ka.AH2OPT_DESTROYIFNOINACTIVATE=67108864,Ka.MAX_TOUCHES=10,Ka.FAKE_TOUCHIDENTIFIER=592880741,Ka.TOUCHID_EMPTY=1770410840,Ka.MOUSE_DOUBLE_CLICK_DELAY=300,Kc.loadApplication=Va,Kc.loadInfo=Ua,Ka.prototype={loadInfo:function(){var t=this.infoFile.readAInt();if(this.infoVersion<0&&(this.infoVersion=t),t!=this.infoVersion){this.infoFile.setUnicode(!0);var e=this.infoFile.readAString(),i=this.infoPath+e;window.open(i,"_self")}this.infoCounter=25},load:function(){this.numberOfFiles=this.file.readAShort(),this.currentFile=1,this.loadingFile=new s;var t=this.file.readAInt(),e=this.path.substring(0,this.path.length-1)+this.currentFile.toString();this.loadingFile.getFile(e,Va,t)},loadApplication:function(){if(++this.currentFile>this.numberOfFiles){var t=new ed(this.loadingFile.getBytes(),"content"),e=t.file("Application.ccj").asBinary();return this.loadingFile=null,this.file=new s,this.file.setBinary(e),this.digest(),void this.startApplication()}var i=this.file.readAInt(),r=this.path.substring(0,this.path.length-1)+this.currentFile.toString();this.loadingFile.getFile(r,Va,i)},digest:function(){this.file.seek(0);var t=this.file.readBuffer(4);this.bUnicode=!1,80==t[0]&&65==t[1]&&77==t[2]&&85==t[3]&&(this.bUnicode=!0),this.file.setUnicode(this.bUnicode),this.file.skipBytes(8),this.file.skipBytes(4),this.OIList=new Hl,this.imageBank=new gl(this),this.fontBank=new _l(this),this.soundBank=new El(this),this.soundPlayer=new Ja(this);for(var e,i,r,s=0;32639!=s;)if(s=this.file.readAShort(),this.file.readAShort(),0!=(r=this.file.readAInt())){switch(e=this.file.getFilePointer()+r,s){case 8739:for(this.loadAppHeader(),this.frameOffsets=new Array(this.gaNbFrames),this.frameEffects=new Array(this.gaNbFrames),this.frameEffectParams=new Array(this.gaNbFrames),this.framePasswords=new Array(this.gaNbFrames),i=0;i<this.gaNbFrames;i++)this.framePasswords[i]=null;break;case 8773:this.dwOptions=this.file.readAInt(),this.dwBuildType=this.file.readAInt(),this.dwBuildFlags=this.file.readAInt(),this.wScreenRatioTolerance=this.file.readAShort(),this.wScreenAngle=this.file.readAShort();break;case 8740:this.appName=this.file.readAString();break;case 8774:this.codePage=this.file.readAInt();break;case 8750:this.appEditorFilename=this.file.readAString();break;case 8782:this.m_touchMe=this.file.readAString();break;case 8754:this.loadGlobalValues();break;case 8755:this.loadGlobalStrings();break;case 8745:case 8767:this.extLoader=new mc(this),this.extLoader.createList(this.file),this.OIList.preLoad(this.file);break;case 8747:this.loadFrameHandles(r);break;case 8778:this.preloaderType=this.file.readAInt(),this.preloaderCircleCenterX=this.file.readAInt(),this.preloaderCircleCenterY=this.file.readAInt(),this.preloaderCircleRadius=this.file.readAInt(),this.preloaderCircleThickness=this.file.readAInt(),this.preloaderCircleColor=this.file.readAColor(),this.preloaderBackColor=this.file.readAInt(),-1!=this.preloaderBackColor&&(this.file.skipBack(4),this.preloaderBackColor=this.file.readAColor()),this.preloaderFrameNumber=this.file.readAInt(),this.loadPreloader=!0;break;case 13107:this.frameOffsets[this.frameMaxIndex]=this.file.getFilePointer();for(var n,o=0;32639!=o;)if(o=this.file.readAShort(),this.file.readAShort(),0!=(n=this.file.readAInt())){var h=this.file.getFilePointer()+n;switch(o){case 13108:0==this.frameMaxIndex&&(this.file.skipBytes(8),this.firstFrameColor=this.file.readAColor());break;case 13110:this.framePasswords[this.frameMaxIndex]=this.file.readAString();break;case 13129:this.frameEffects[this.frameMaxIndex]=this.file.readAInt(),this.frameEffectParams[this.frameMaxIndex]=this.file.readAInt();break;case 13128:var i,a=n/6;for(i=0;i<a;i++){var l=this.file.readAShort();this.file.skipBytes(4),0!=l&&(this.mosaics[l]=1,this.mosaicMaxHandle=Math.max(this.mosaicMaxHandle,l+1))}}this.file.seek(h)}this.frameMaxIndex++;break;case 8760:var u=this.file.readAInt();for(this.embeddedFiles=new Array(u),i=0;i<u;i++)this.embeddedFiles[i]=new Qa(this),this.embeddedFiles[i].preLoad();break;case 26214:this.imageBank.preLoad(this.file);break;case 26215:this.fontBank.preLoad(this.file);break;case 26216:this.soundBank.preLoad(this.file)}this.file.seek(e)}this.context=new xu(this.canvas),this.soundPlayer.setMultipleSounds(0!=(this.gaFlags&Ka.GA_MIX)),null==this.parentApp&&(this.mainSprite=new hc)},setParentApp:function(t,e,i,r,s,n){this.parentApp=t,this.parentOptions=i,this.mainSprite=r,this.startFrame=e,this.parentWidth=s,this.parentHeight=n},initScreenZoom:function(){this.bZoom=!1,this.scAngle=0,this.scScale=this.scScaleX=this.scScaleY=1,this.scXSpot=this.scXDest=this.gaCxWin/2,this.scYSpot=this.scYDest=this.gaCyWin/2},setUpdate:function(){window.setTimeout(oc.bind(this),20)},startApplication:function(){this.iOS=!!(/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&void 0!==navigator.standalone),this.iOS&&this.soundBank.nHandlesReel>0&&(this.silentSound=new Al(this),this.silentSound.loadSilent()),this.resizeCanvas(),this.sysEvents=new n,this.keyBuffer=new Array(Ka.MAX_VK);var t;for(t=0;t<Ka.MAX_VK;t++)this.keyBuffer[t]=!1;if(this.canvas.application=this,null==this.parentApp){var e=this;if(window.addEventListener("keypress",function(t){e.doKeyPress(t)},!1),window.addEventListener("keydown",function(t){e.hasFocus||(window.focus(),e.hasFocus=!0),e.enableSoundsInChrome(),e.doKeyDown(t)},!1),window.addEventListener("keyup",function(t){e.doKeyUp(t)},!1),window.addEventListener("blur",function(t){e.hasFocus=!1},!1),window.addEventListener("focus",function(t){e.hasFocus=!0},!1),window!==window.top)try{var i=window.top;i.addEventListener("focus",function(){e.hasFocus=!0,e.canvas.focus()}),i.addEventListener("blur",function(){e.hasFocus=!1})}catch(t){}window.addEventListener("resize",function(t){e.resizeCanvas()},!1),document.addEventListener("blur",function(t){e.hasFocus=!1},!1),document.addEventListener("focus",function(t){e.hasFocus=!0},!1),document.addEventListener("fullscreenchange",function(){e.fullScreen=document.fullscreen,e.resizeCanvas()},!1),document.addEventListener("mozfullscreenchange",function(){e.fullScreen=document.mozFullScreen,e.resizeCanvas()},!1),document.addEventListener("webkitfullscreenchange",function(){e.fullScreen=document.webkitIsFullScreen,e.resizeCanvas()},!1),window.PointerEvent?("undefined"==typeof CRunMultipleTouch||(this.canvas.setAttribute("style","-ms-touch-action: none;"),this.canvas.setAttribute("style","touch-action: none;")),this.canvas.addEventListener("pointerdown",function(t){switch(t.pointerType){case"mouse":case"pen":e.mouseDown(t,!0);break;case"touch":e.touchStart(t,!0)}t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("pointermove",function(t){switch(t.pointerType){case"mouse":case"pen":e.mouseMove(t,e.canvas);break;case"touch":e.touchMove(t,!0)}t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("pointerup",function(t){switch(t.pointerType){case"mouse":case"pen":e.mouseUp(t);break;case"touch":e.touchEnd(t,!0)}t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("pointercancel",function(t){switch(t.pointerType){case"touch":e.touchEnd(t,!0)}t.preventDefault&&t.preventDefault()},!1)):(this.canvas.addEventListener("mousemove",function(t){e.mouseMove(t,e.canvas),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("mousedown",function(t){e.mouseDown(t,!1),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("mouseup",function(t){e.mouseUp(t),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("mouseout",function(t){e.mouseOut(t),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("click",function(t){e.click(t),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("dblclick",function(t){e.dblClick(t),t.preventDefault&&t.preventDefault()},!1)),this.canvas.addEventListener("contextmenu",function(t){t.preventDefault&&t.preventDefault()},!1);var r=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";for(document.attachEvent?document.attachEvent("on"+r,function(t){e.mouseWheel(t)}):document.addEventListener&&document.addEventListener(r,function(t){e.mouseWheel(t)},!1),document.onselectstart=function(){return!1},this.canvas.onselectstart=function(t){return t.preventDefault&&t.preventDefault(),!1},this.touchable=this.isTouchable(),this.touchCalls=new n,this.touchesID=new Array(Ka.MAX_TOUCHES),this.bTouchesLocked=new Array(Ka.MAX_TOUCHES),this.touchesLocked=new Array(Ka.MAX_TOUCHES),this.touchesX=new Array(Ka.MAX_TOUCHES),this.touchesY=new Array(Ka.MAX_TOUCHES),t=0;t<Ka.MAX_TOUCHES;t++)this.touchesID[t]=Ka.TOUCHID_EMPTY,this.touchesX[t]=0,this.touchesY[t]=0,this.bTouchesLocked[t]=!1,this.touchesLocked[t]=0;this.nTouches=0,this.touchable&&!window.PointerEvent&&(this.canvas.addEventListener("touchstart",function(t){e.touchStart(t,!1),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("touchmove",function(t){e.touchMove(t,!1),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("touchend",function(t){e.touchEnd(t,!1),t.preventDefault&&t.preventDefault()},!1),this.canvas.addEventListener("touchcancel",function(t){e.touchEnd(t,!1),t.preventDefault&&t.preventDefault()},!1)),window.focus(),this.setUpdate()}else{for(this.touchable=this.parentApp.touchable,this.touchCalls=new n,this.touchesID=new Array(Ka.MAX_TOUCHES),this.bTouchesLocked=new Array(Ka.MAX_TOUCHES),this.touchesLocked=new Array(Ka.MAX_TOUCHES),this.touchesX=new Array(Ka.MAX_TOUCHES),this.touchesY=new Array(Ka.MAX_TOUCHES),t=0;t<Ka.MAX_TOUCHES;t++)this.touchesID[t]=Ka.TOUCHID_EMPTY,this.touchesX[t]=0,this.touchesY[t]=0,this.bTouchesLocked[t]=!1,this.touchesLocked[t]=0;this.nTouches=0}this.xMouseOffset=0,this.yMouseOffset=0,this.appRunningState=0,this.currentFrame=-2,this.run=new il(this)},resizeCanvas:function(){var t,e,i=this.gaCxWin,r=this.gaCyWin;this.fullScreen||this.gaFlags&Ka.GA_STRETCH?(t=window.innerWidth,e=window.innerHeight,document.documentElement.style.overflow="hidden",document.body.scroll="no"):(t=i,e=r);var s=t/i,n=e/r;if((this.dwOptions&Ka.AH2OPT_KEEPSCREENRATIO||this.gaFlags&Ka.GA_STRETCH&&this.gaFlags&Ka.GA_STRETCHTOFIT)&&(s=n=Math.min(s,n)),s!=this.scaleX||n!=this.scaleY){this.scaleX=s,this.scaleY=n,this.canvas.width=Math.floor(this.scaleX*i),this.canvas.height=Math.floor(this.scaleY*r),this.context.setScale(this.scaleX,this.scaleY);var o=(window.innerWidth,this.canvas.width,window.innerHeight,this.canvas.height,this.canvas.offsetParent);o&&(o.style.width=this.canvas.width.toString()+"px",o.style.height=this.canvas.height.toString()+"px",o.position="absolute")}this.run&&this.run.autoResize()},resetKeyBuffer:function(){var t;for(t=0;t<Ka.MAX_VK;t++)this.keyBuffer[t]=!1},isTouchable:function(){var t,e=["Android","webOS","iPhone","iPad","iPod","Blackberry","Windows Phone","Touch"],i=navigator.userAgent;for(t in e)if(i.indexOf(e[t])>=0)return!0;return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0},dataHasLoaded:function(t){this.dataLoading.removeObject(t),this.imagesLoaded++},addDataToLoad:function(t){this.dataToLoad.add(t),this.imagesToLoad++,this.loading=!0},stepApplication:function(){this.infoPath&&--this.infoCounter<0&&(this.infoCounter=1e9,this.infoFile=new s,this.infoFile.getFile(this.infoPath+"info.dat",Ua));var t=new Date;if(this.timer=t.getTime(),this.playApplication(!1)){if(this.loading){if(null==this.preloader){var e=this.frameColor;return this.loadPreloader?(this.preloader=0==this.preloaderType?new Za(this):new tl(this),0==this.preloaderType&&-1!=this.preloaderBackColor&&(e=this.preloaderBackColor)):this.preloader=new $a(this),this.preloaderLoaded=!1,this.resetted=!0,void(null==this.parentApp&&(this.frame.leClearBackground?this.context.clearBackground(0,0,this.canvas.width,this.canvas.height):this.context.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,e),this.setUpdate()))}if(null!=this.preloader&&0==this.preloaderLoaded)return this.preloaderLoaded=this.preloader.load(),void(null==this.parentApp&&this.setUpdate());for(;this.dataToLoad.size()>0&&this.dataLoading.size()<this.dataLoadingStep;){var i=this.dataToLoad.get(0);this.dataLoading.add(i),this.dataToLoad.removeIndex(0),i.doLoad()}this.soundPlayer.decodeData();var r=!1;if(0==this.dataToLoad.size()&&0==this.dataLoading.size()&&(r=!0),null==this.preloader||(0==(this.dwOptions&Ka.AH2OPT_LOADDATAATSTART)||this.preloader.wasExecuted)&&0==(this.frame.html5Options&za.HTML5FOPT_DISPLAYPRELOADER)||(this.resetted||(this.preloader.reset(),this.resetted=!0),this.preloader.step(),(r=this.preloader.isComplete())&&(this.preloader.wasExecuted=!0)),r&&(this.resetted=!1,this.run.resume(),this.run.callComputeNewDisplay(),this.loading=!1,this.imageBank.resetToLoad(),this.soundBank.resetToLoad(),this.fontBank.resetToLoad(),this.imagesToLoad=0,this.imagesLoaded=0,this.bStartFadeIn)){this.bStartFadeIn=!1;0!=this.run.doRunLoop()?this.appRunningState=Ka.SL_ENDFRAME:(this.appRunningState=Ka.SL_FRAMELOOP,this.startFrameFadeIn(this.transitionOldSurface),this.transitionOldSurface=null)}null==this.parentApp&&this.setUpdate()}else if(null==this.parentApp){if(null==this.transitionDisplay){if(this.context.resetEffect(0!=(this.dwOptions&Ka.AH2OPT_RESAMPLESTRETCH)),this.previousFrameGraphics)this.context.renderSimpleImage(this.previousFrameGraphics,0,0,this.gaCxWin,this.gaCyWin,0,0);else{this.frame.leClearBackground?this.context.clearBackground(0,0,this.gaCxWin,this.gaCyWin):this.context.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.frameColor)}var n=this.context._context;if(this.bZoom&&(bRestore=!0,n.save(),n.translate(this.scXDest,this.scYDest),0!=this.scAngle&&n.rotate(.0174532925*-this.scAngle),n.scale(Math.max(.001,this.scScaleX),Math.max(.001,this.scScaleY)),n.translate(-this.scXSpot,-this.scYSpot)),this.mainSprite.draw(this.context,0,0),this.bZoom&&n.restore(),this.joystickOn&&this.joystick.draw(this.context),this.versionCodeDisplay){if(this.versionCodeDisplay--,!this.versionCodeSurface){var o=new Pl;o.createDefaultFont(),o.lfHeight=16,this.versionCodeSurface=new d(this,this.gaCxWin,30),this.versionCodeSurface.manualClear(16711680),this.versionCodeSurface.manualDrawText(window.FusionVersion,qc.DT_CENTER|qc.DT_VCENTER,null,16777215,o,1,10526880)}this.versionCodeSurface.draw(this.context,0,0,0,0)}}else this.context.resetEffect(),this.context.renderSimpleImage(this.transitionDisplay,0,0,this.gaCxWin,this.gaCyWin,0,0);if(0!=(this.gaNewFlags&Ka.GANF_VSYNC)&&window.requestAnimationFrame)window.requestAnimationFrame(oc);else{var h=(new Date).getTime()-this.timer;h=Math.max(1e3/this.gaFrameRate-h,1),window.setTimeout(oc,h)}}return!0}return this.endApplication(),!1},drawSubApplication:function(t,e,i,r){this.loading||(this.context.resetEffect(0!=(this.dwOptions&Ka.AH2OPT_RESAMPLESTRETCH)),null==this.transitionDisplay?(r||this.context.renderSolidColor(e,i,this.parentWidth,this.parentHeight,this.frameColor),this.context.clip(e,i,this.parentWidth,this.parentHeight),this.mainSprite.draw(this.context,0,0),this.context.unClip()):(this.context.resetEffect(),this.context.renderSimpleImage(this.transitionDisplay,e,i,this.gaCxWin,this.gaCyWin,0,0)))},checkFocus:function(){if(0==(this.dwOptions&Ka.AH2OPT_RUNEVENIFNOTFOCUS))if(this.hasFocus)this.bStoppedFocus&&(this.run.resume(),this.bStoppedFocus=!1);else{var t=this.gaNewFlags&Ka.GANF_SAMPLESEVENIFNOTFOCUS;this.run.pause(t),this.bStoppedFocus=!0}},playApplication:function(t){this.checkFocus();var e=!0,i=!0;do{switch(this.appRunningState){case Ka.SL_RESTART:if(this.initGlobal(),this.nextFrame=this.startFrame,this.appRunningState=1,this.killGlobalData(),t){e=!1;break}case Ka.SL_STARTFRAME:this.startTheFrame();break;case Ka.SL_FRAMEFADEINLOOP:0==this.loopFrameFadeIn()?(this.endFrameFadeIn(),this.appRunningState!=Ka.SL_QUIT&&this.appRunningState!=Ka.SL_RESTART||this.endFrame()):e=!1;break;case Ka.SL_FRAMELOOP:this.run.doRunLoop(),0!=this.run.rhQuit?this.startFrameFadeOut()?this.appRunningState=Ka.SL_FRAMEFADEOUTLOOP:this.endFrame():e=!1;break;case Ka.SL_FRAMEFADEOUTLOOP:0==this.loopFrameFadeOut()?(this.endFrameFadeOut(),this.appRunningState!=Ka.SL_QUIT&&this.appRunningState!=Ka.SL_RESTART||this.endFrame()):e=!1;break;case Ka.SL_ENDFRAME:this.endFrame();break;default:e=!1}}while(1==e);return this.appRunningState==Ka.SL_QUIT&&(i=!1),i},endApplication:function(){null!=this.soundPlayer&&this.soundPlayer.stopAllSounds()},startTheFrame:function(){this.nextFrame!=this.currentFrame&&(this.frame=new za(this),this.frame.loadFullFrame(this.nextFrame)),this.frameColor=this.frame.leBackground,this.currentFrame=this.nextFrame,this.frame.leX=this.frame.leY=0,this.frame.leLastScrlX=this.frame.leLastScrlY=0,this.frame.rhOK=!1,this.initScreenZoom();var t;for(null!=this.parentApp?(this.xOffset=0,this.yOffset=0):(this.xOffset=this.gaCxWin/2-this.frame.leEditWinWidth/2,this.yOffset=this.gaCyWin/2-this.frame.leEditWinHeight/2),t=0;t<this.frame.nLayers;t++)this.frame.layers[t].createPlanes(this.xOffset,this.yOffset);if(this.frame.leFlags&za.LEF_DISPLAYNAME&&(document.title=this.frame.frameName),this.previousFrameGraphics=null,this.frame.leFlags&za.LEF_KEEPDISPLAY&&(this.previousFrameGraphics=this.transitionOldSurface),this.frame.leFlags&za.LEF_TRANSPARENTBKD&&(this.frame.leClearBackground=!0),this.run.setFrame(this.frame),this.run.initRunLoop(null!=this.frame.fadeIn),this.appRunningState=Ka.SL_FRAMELOOP,null!=this.frame.fadeIn)if(this.loading)this.bStartFadeIn=!0;else{var e=this.run.doRunLoop();0!=e?this.appRunningState=Ka.SL_ENDFRAME:(this.appRunningState=Ka.SL_FRAMELOOP,this.startFrameFadeIn(this.transitionOldSurface),this.transitionOldSurface=null)}else this.transitionOldSurface=null;this.loading?this.run.pause(!0):this.run.callComputeNewDisplay()},resetLayers:function(){null!=this.parentApp?(this.xOffset=0,this.yOffset=0):(this.xOffset=this.gaCxWin/2-this.frame.leEditWinWidth/2,this.yOffset=this.gaCyWin/2-this.frame.leEditWinHeight/2);var t;for(t=0;t<this.frame.nLayers;t++)this.frame.layers[t].resetPlanes(this.xOffset,this.yOffset)},endFrame:function(){var t;if(t=this.run.killRunLoop(!1),0!=(this.gaNewFlags&Ka.GANF_RUNFRAME))this.appRunningState=Ka.SL_QUIT;else switch(qc.LOWORD(t)){case 1:this.nextFrame=this.currentFrame+1,1==this.preloaderType&&this.nextFrame==this.preloaderFrameNumber&&this.nextFrame++,this.appRunningState=Ka.SL_STARTFRAME,this.nextFrame>=this.gaNbFrames&&(this.appRunningState=Ka.SL_QUIT);break;case 2:this.nextFrame=Math.max(0,this.currentFrame-1),1==this.preloaderType&&this.nextFrame==this.preloaderFrameNumber&&(0==this.nextFrame?this.nextFrame=this.currentFrame:this.nextFrame--),this.appRunningState=Ka.SL_STARTFRAME;break;case 3:this.appRunningState=Ka.SL_STARTFRAME,0!=(32768&qc.HIWORD(t))?(this.nextFrame=32767&qc.HIWORD(t),this.nextFrame>=this.gaNbFrames&&(this.nextFrame=this.gaNbFrames-1),this.nextFrame<0&&(this.nextFrame=0)):qc.HIWORD(t)<this.frameMaxHandle?(this.nextFrame=this.frameHandleToIndex[qc.HIWORD(t)],-1==this.nextFrame&&(this.nextFrame=this.currentFrame+1)):this.nextFrame=this.currentFrame+1;break;case 4:this.appRunningState=Ka.SL_RESTART,this.nextFrame=this.startFrame;break;default:this.appRunningState=Ka.SL_QUIT}if(this.appRunningState==Ka.SL_STARTFRAME&&(this.nextFrame<0||this.nextFrame>=this.gaNbFrames)&&(this.appRunningState=this.currentFrame),this.appRunningState!=Ka.SL_STARTFRAME||this.nextFrame!=this.currentFrame){var e;for(e=0;e<this.frame.nLayers;e++)this.frame.layers[e].deletePlanes();this.frame=null,this.currentFrame=-1}},getTransitionManager:function(){return null==this.transitionManager&&(this.transitionManager=new ku(this)),this.transitionManager},startFrameFadeIn:function(t){var e=null,i=null,r=this.frame.fadeIn;if(null!=r){e=document.createElement("canvas"),e.width=this.gaCxWin,e.height=this.gaCyWin,i=document.createElement("canvas"),i.width=this.gaCxWin,i.height=this.gaCyWin;var s=new xu(i);s.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.frameColor),this.mainSprite.draw(s,0,0),s=new xu(e),0!=(r.transFlags&wu.TRFLAG_COLOR)?s.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,r.transColor):(s.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.gaBorderColour),null!=t&&s.renderSimpleImage(t,0,0,t.width,t.height,0,0)),this.transitionDisplay=document.createElement("canvas"),this.transitionDisplay.width=this.gaCxWin,this.transitionDisplay.height=this.gaCyWin;if(this.transitionDisplay.getContext("2d").drawImage(e,0,0),this.transition=this.getTransitionManager().createTransition(r,this.transitionDisplay,e,i),null!=this.transition)return this.appRunningState=Ka.SL_FRAMEFADEINLOOP,!0}return this.transitionDisplay=null,this.appRunningState=Ka.SL_FRAMELOOP,this.run.createRemainingFrameObjects(),!1},loopFrameFadeIn:function(){return null!=this.transition&&(!this.transition.isCompleted()&&(this.transition.stepDraw(Ru.TRFLAG_FADEIN),!0))},endFrameFadeIn:function(){return null!=this.transition&&(this.transition.end(),this.transition=null,this.transitionDisplay=null,this.appRunningState==Ka.SL_FRAMEFADEINLOOP&&(this.appRunningState=Ka.SL_FRAMELOOP),this.run.createRemainingFrameObjects()),!0},startFrameFadeOut:function(){var t=null,e=null,i=this.frame.fadeOut;if(null!=i){t=document.createElement("canvas"),t.width=this.gaCxWin,t.height=this.gaCyWin,e=document.createElement("canvas"),e.width=this.gaCxWin,e.height=this.gaCyWin;var r=new xu(t);r.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.frameColor),this.mainSprite.draw(r,0,0),r=new xu(e),0!=(i.transFlags&wu.TRFLAG_COLOR)?r.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,i.transColor):r.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,0),this.transitionDisplay=document.createElement("canvas"),
this.transitionDisplay.width=this.gaCxWin,this.transitionDisplay.height=this.gaCyWin;if(this.transitionDisplay.getContext("2d").drawImage(t,0,0),this.transition=this.getTransitionManager().createTransition(i,this.transitionDisplay,t,e),null!=this.transition)return this.appRunningState=Ka.SL_FRAMEFADEOUTLOOP,!0}return this.transitionDisplay=null,!1},loopFrameFadeOut:function(){if(null!=this.transition){if(this.transition.isCompleted())return this.endFrameFadeOut(),!1;this.transition.stepDraw(Ru.TRFLAG_FADEOUT)}return!0},endFrameFadeOut:function(){return null!=this.transition&&(this.transitionOldSurface=this.transition.source2,this.transition.end(),this.transition=null,this.transitionDisplay=null,this.appRunningState==Ka.SL_FRAMEFADEOUTLOOP&&(this.appRunningState=Ka.SL_ENDFRAME)),!0},loadAppHeader:function(){this.file.skipBytes(4),this.gaFlags=this.file.readAShort(),this.gaNewFlags=this.file.readAShort(),this.gaMode=this.file.readAShort(),this.gaOtherFlags=this.file.readAShort(),this.gaCxWin=this.file.readAShort(),this.gaCyWin=this.file.readAShort(),this.gaScoreInit=this.file.readAInt(),this.gaLivesInit=this.file.readAInt();var t,e;for(this.pcCtrlType=new Array(Ka.MAX_PLAYER),t=0;t<Ka.MAX_PLAYER;t++)this.pcCtrlType[t]=this.file.readAShort();for(this.pcCtrlKeys=new Array(Ka.MAX_PLAYER*Ka.MAX_KEY),t=0;t<Ka.MAX_PLAYER;t++)for(e=0;e<Ka.MAX_KEY;e++)this.pcCtrlKeys[t*Ka.MAX_KEY+e]=this.file.readAShort();this.gaBorderColour=this.file.readAColor(),this.gaNbFrames=this.file.readAInt(),this.gaFrameRate=this.file.readAInt(),this.file.skipBytes(1),this.file.skipBytes(3)},loadGlobalValues:function(){this.nGlobalValuesInit=this.file.readAShort(),this.globalValuesInit=new Array(this.nGlobalValuesInit),this.globalValuesInitTypes=new Array(this.nGlobalValuesInit);var t;for(t=0;t<this.nGlobalValuesInit;t++)this.globalValuesInit[t]=this.file.readAInt();this.file.readBytesAsArray(this.globalValuesInitTypes)},loadGlobalStrings:function(){this.nGlobalStringsInit=this.file.readAInt(),this.globalStringsInit=new Array(this.nGlobalStringsInit);var t;for(t=0;t<this.nGlobalStringsInit;t++)this.globalStringsInit[t]=this.file.readAString()},loadFrameHandles:function(t){this.frameMaxHandle=t/2,this.frameHandleToIndex=new Array(this.frameMaxHandle);var e;for(e=0;e<this.frameMaxHandle;e++)this.frameHandleToIndex[e]=this.file.readAShort()},HCellToNCell:function(t){return null==this.frameHandleToIndex||-1==t||t>=this.frameMaxHandle?-1:this.frameHandleToIndex[t]},getGraphicFont:function(t){if(this.graphicFonts){var e;for(e=0;e<this.graphicFonts.size();e++)if(gFont=this.graphicFonts.get(e),gFont.compareFont(t))return gFont}return t},killGlobalData:function(){this.adGO=null},initGlobal:function(){var t;if(null==this.parentApp||null!=this.parentApp&&0==(this.parentOptions&Ql.CCAF_SHARE_LIVES))for(this.lives=new Array(Ka.MAX_PLAYER),t=0;t<Ka.MAX_PLAYER;t++)this.lives[t]=4294967295^this.gaLivesInit;else this.lives=null;if(null==this.parentApp||null!=this.parentApp&&0==(this.parentOptions&Ql.CCAF_SHARE_SCORES))for(this.scores=new Array(Ka.MAX_PLAYER),t=0;t<Ka.MAX_PLAYER;t++)this.scores[t]=4294967295^this.gaScoreInit;else this.scores=null;for(this.playerNames=new Array(Ka.MAX_PLAYER),t=0;t<Ka.MAX_PLAYER;t++)this.playerNames[t]="";if(null==this.parentApp||null!=this.parentApp&&0==(this.parentOptions&Ql.CCAF_SHARE_GLOBALVALUES))for(this.gValues=new Array(this.nGlobalValuesInit),t=0;t<this.nGlobalValuesInit;t++)this.gValues[t]=this.globalValuesInit[t];else this.gValues=null;if(null==this.parentApp||null!=this.parentApp&&0==(this.parentOptions&Ql.CCAF_SHARE_GLOBALVALUES))for(this.gStrings=new Array(this.nGlobalStringsInit),t=0;t<this.nGlobalStringsInit;t++)this.gStrings[t]=this.globalStringsInit[t];else this.gStrings=null},getLives:function(){for(var t=this;null==t.lives;)t=this.parentApp;return t.lives},getScores:function(){for(var t=this;null==t.scores;)t=this.parentApp;return t.scores},getCtrlType:function(){for(var t=this;null!=t.parentApp&&0!=(t.parentOptions&Ql.CCAF_SHARE_PLAYERCTRLS);)t=t.parentApp;return t.pcCtrlType},getCtrlKeys:function(){for(var t=this;null!=t.parentApp&&0!=(t.parentOptions&Ql.CCAF_SHARE_PLAYERCTRLS);)t=t.parentApp;return t.pcCtrlKeys},getGlobalValues:function(){for(var t=this;null==t.gValues;)t=t.parentApp;return t.gValues},getNGlobalValues:function(){return null!=this.gValues?gValues.length:0},getGlobalStrings:function(){for(var t=this;null==t.gStrings;)t=t.parentApp;return t.gStrings},getNGlobalStrings:function(){return null!=this.gStrings?gStrings.length:0},checkGlobalValue:function(t){var e=this.getGlobalValues();if(t<0||t>1e3)return null;var i=e.length;if(t+1>i){var r;for(r=i;r<t+1;r++)e.push(0)}return e},getGlobalValueAt:function(t){var e=this.checkGlobalValue(t);return null!=e?e[t]:0},setGlobalValueAt:function(t,e){var i=this.checkGlobalValue(t);null!=i&&(i[t]=e)},addGlobalValueAt:function(t,e){var i=this.checkGlobalValue(t);null!=i&&(i[t]+=e)},checkGlobalString:function(t){var e=this.getGlobalStrings();if(t<0||t>1e3)return null;var i=e.length;if(t+1>i){var r;for(r=i;r<t+1;r++)e.push("")}return e},getGlobalStringAt:function(t){var e=this.checkGlobalString(t);return null!=e?e[t]:""},setGlobalStringAt:function(t,e){var i=this.checkGlobalString(t);null!=i&&(i[t]=e)},doKeyPress:function(t){t&&(this.versionCode.charCodeAt(this.versionCodePos)==t.charCode?++this.versionCodePos==this.versionCode.length&&(this.versionCodeDisplay=250,this.versionCodePos=0):this.versionCodePos=0)},doKeyDown:function(t){if(t){var e=t.keyCode;this.keyBuffer[e]=!0,this.keyNew=!0,null!=this.run&&null!=this.run.rhEvtProg&&this.run.rhEvtProg.onKeyDown(e);var i;for(i=0;i<this.subApps.length;i++)this.subApps[i].doKeyDown(t)}},doKeyUp:function(t){if(t){var e=t.keyCode;this.keyBuffer[e]=!1;var i;for(i=0;i<this.subApps.length;i++)this.subApps[i].doKeyUp(t)}},getKeyState:function(t){return this.keyBuffer[t]},setMouseOffsets:function(t,e){this.xMouseOffset=t,this.yMouseOffset=e},mouseMove:function(t,e,i){t.pageX?(this.mouseX=t.pageX,this.mouseY=t.pageY):t.clientY&&(this.mouseX=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,this.mouseY=t.clientY+document.body.scrollTop+document.documentElement.scrollTop);for(var r=0,s=0,n=e;n&&"BODY"!=n.tagName;)r+=n.offsetTop,s+=n.offsetLeft,n=n.offsetParent;this.bMouseIn=!0,this.mouseX-=s+this.xMouseOffset,this.mouseY-=r+this.yMouseOffset,this.mouseX=Math.floor(this.mouseX/this.scaleX),this.mouseY=Math.floor(this.mouseY/this.scaleY),null!=this.run&&null!=this.run.rhEvtProg&&this.run.rhEvtProg.onMouseMove();var o;for(o=0;o<this.subApps.length;o++)this.subApps[o].mouseMove(t,e);this.touchMove(new qa(t.pageX,t.pageY,this.canvas),!1)},_mouseButtonFromEvent:function(t){if(t.which)switch(t.which){case 2:return Ka.VK_MBUTTON;case 3:return Ka.VK_RBUTTON;default:return Ka.VK_LBUTTON}else switch(t.button){case 2:return Ka.VK_RBUTTON;case 4:return Ka.VK_MBUTTON;default:return Ka.VK_LBUTTON}},mouseUp:function(t){var e=this._mouseButtonFromEvent(t);this.mouseMove(t,this.canvas,305419896),this.bMouseIn=!0,this.keyBuffer[e]=!1;var i;for(i=0;i<this.subApps.length;i++)this.subApps[i].mouseUp(t);this.touchEnd(new qa(t.pageX,t.pageY,this.canvas),!1)},mouseDown:function(t,e){var i=this._mouseButtonFromEvent(t);if(this.mouseMove(t,this.canvas,305419896),this.bMouseIn=!0,this.keyNew=!0,this.keyBuffer[i]=!0,this.enableSoundsInChrome(),null!=this.run&&null!=this.run.rhEvtProg)if(e){var r=Date.now(),s=null!==this.mouseDoubleClickTimestamp&&this.mouseDoubleClickCode==i&&r-this.mouseDoubleClickTimestamp<=Ka.MOUSE_DOUBLE_CLICK_DELAY?2:1;this.mouseDoubleClickCode=i,this.mouseDoubleClickTimestamp=r,this.run.rhEvtProg.onMouseButton(i-Ka.VK_LBUTTON,s)}else this.browserDetect.isIE?this.run.rhEvtProg.onMouseButton(i-Ka.VK_LBUTTON,1):this.run.rhEvtProg.onMouseButton(i-Ka.VK_LBUTTON,t.detail%2==0?2:1);var n;for(n=0;n<this.subApps.length;n++)this.subApps[n].mouseDown(t,e);this.touchStart(new qa(t.pageX,t.pageY,this.canvas),!1),window.focus()},forceMouseButton:function(t){this.keyBuffer[Ka.VK_LBUTTON]=t;var e;for(e=0;e<this.subApps.length;e++)this.subApps[e].forceMouseButton(t)},mouseOut:function(t){this.bMouseIn=!1,this.keyBuffer[Ka.VK_LBUTTON]=!1,this.keyBuffer[Ka.VK_MBUTTON]=!1,this.keyBuffer[Ka.VK_RBUTTON]=!1;var e;for(e=0;e<this.subApps.length;e++)this.subApps[e].mouseOut(t);this.touchEnd(new qa(t.pageX,t.pageY,this.canvas),!1)},click:function(t){if(this.browserDetect.isIE){var e;for(e=0;e<this.subApps.length;e++)this.subApps[e].click(t)}},dblClick:function(t){if(this.browserDetect.isIE){null!=this.run&&null!=this.run.rhEvtProg&&this.run.rhEvtProg.onMouseButton(0,2);var e;for(e=0;e<this.subApps.length;e++)this.subApps[e].dblClick(t)}},mouseWheel:function(t){this.bMouseIn=!0,void 0!==t.wheelDelta?this.deltaWheel=t.wheelDelta/40:this.deltaWheel=-t.detail,null!=this.run&&null!=this.run.rhEvtProg&&this.run.onMouseWheel(this.deltaWheel)},enableSoundsInChrome:function(){this.browserDetect.isIE||null==this.soundContext||"suspended"!=this.soundContext.state||this.soundContext.resume()},touchStart:function(t,e){if(this.enableSoundsInChrome(),!this.iOS&&this.silentSound&&(this.silentSound.playIt(),this.silentSound=null),null!=this.touchesID){var i,r,s=e?1:t.changedTouches.length;for(i=0;i<s;i++){var n;for(e?(n=t,n.identifier=t.pointerId):n=t.changedTouches[i],r=0;r<Ka.MAX_TOUCHES;r++)if(this.touchesID[r]==Ka.TOUCHID_EMPTY){for(this.touchesID[r]=n.identifier,this.bTouchesLocked[r]=!1,o=0;o<this.touchCalls.size();o++)if(this.touchCalls.get(o).touchStarted(n)){this.bTouchesLocked[r]=!0,this.touchesLocked[r]=o;break}if(!this.bTouchesLocked[r]&&(this.touchesX[r]=this.getTouchX(n),this.touchesY[r]=this.getTouchY(n),this.mouseTouch==Ka.TOUCHID_EMPTY&&n.identifier!=Ka.FAKE_TOUCHIDENTIFIER)){this.mouseTouch=r,this.mouseX=this.touchesX[r],this.mouseY=this.touchesY[r],this.bMouseIn=!0,this.keyNew=!0,this.keyBuffer[Ka.VK_LBUTTON]=!0,null!=this.run&&null!=this.run.rhEvtProg&&this.run.rhEvtProg.onMouseButton(0,1);var h;for(h=0;h<this.subApps.length;h++)this.subApps[h].touchStart(t,e)}break}}}},touchMove:function(t,e){if(null!=this.touchesID){var i,r,s,n=e?1:t.changedTouches.length;for(i=0;i<n;i++){var o;for(e?(o=t,o.identifier=t.pointerId):o=t.changedTouches[i],r=0;r<Ka.MAX_TOUCHES;r++)if(this.touchesID[r]==o.identifier){if(this.bTouchesLocked[r])this.touchCalls.get(this.touchesLocked[r]).touchMoved(o);else{for(s=0;s<this.touchCalls.size();s++)this.touchCalls.get(s).touchMoved(o);this.touchesX[r]=this.getTouchX(o),this.touchesY[r]=this.getTouchY(o)}if(this.mouseTouch==r){this.mouseX=this.touchesX[r],this.mouseY=this.touchesY[r],null!=this.run&&null!=this.run.rhEvtProg&&this.run.rhEvtProg.onMouseMove();var h;for(h=0;h<this.subApps.length;h++)this.subApps[h].touchMove(t,e)}break}}}},touchEnd:function(t,e){if(this.iOS&&this.silentSound&&(this.silentSound.playIt(),this.silentSound=null),null!=this.touchesID){var i,r,s,n=e?1:t.changedTouches.length;for(i=0;i<n;i++){var o;for(e?(o=t,o.identifier=t.pointerId):o=t.changedTouches[i],r=0;r<Ka.MAX_TOUCHES;r++)if(this.touchesID[r]==o.identifier){if(this.touchesID[r]=Ka.TOUCHID_EMPTY,this.bTouchesLocked[r])this.touchCalls.get(this.touchesLocked[r]).touchEnded(o);else{for(s=0;s<this.touchCalls.size();s++)this.touchCalls.get(s).touchEnded(o);this.touchesX[r]=this.getTouchX(o),this.touchesY[r]=this.getTouchY(o)}if(r==this.mouseTouch){this.mouseX=this.touchesX[r],this.mouseY=this.touchesY[r],this.mouseTouch=Ka.TOUCHID_EMPTY,this.keyBuffer[Ka.VK_LBUTTON]=!1;var h;for(h=0;h<this.subApps.length;h++)this.subApps[h].touchEnd(t,e)}}}}},getTouchX:function(t){for(var e=t.pageX,i=t.target;i&&"BODY"!=i.tagName;)e-=i.offsetLeft,i=i.offsetParent;return Math.floor((e-this.xMouseOffset)/this.scaleX)},getTouchY:function(t){for(var e=t.pageY,i=t.target;i&&"BODY"!=i.tagName;)e-=i.offsetTop,i=i.offsetParent;return Math.floor((e-this.yMouseOffset)/this.scaleY)},addTouchCall:function(t){this.touchCalls.add(t)},removeTouchCall:function(t){this.touchCalls.removeObject(t)},getEmbeddedFile:function(t){if(null!=this.embeddedFiles){var e,i=t.lastIndexOf("\\");for(i<0&&(i=t.lastIndexOf("/")),i>=0&&(t=t.substring(i+1)),e=0;e<this.embeddedFiles.length;e++)if(this.embeddedFiles[e].path==t)return this.embeddedFiles[e]}return null},showCursor:function(t){this.cursorCount=t,this.cursorCount>=0?this.canvas.style.cursor=this.cursor:this.canvas.style.cursor="none"},enterFullScreen:function(){this.canvas.requestFullScreen?this.canvas.requestFullScreen():this.canvas.webkitRequestFullScreen?this.canvas.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):this.canvas.mozRequestFullScreen&&this.canvas.mozRequestFullScreen()},exitFullScreen:function(){this.gaFlags&=~Ka.GA_STRETCH,document.cancelFullScreen?document.cancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen()},startJoystick:function(t,e){null==this.joystick&&(this.joystick=new el(this),this.joystick.loadImages(),this.joystick.reset(e),this.joystickOn=1,null!=this.frame&&0!=(this.frame.html5Options&za.HTML5FOPT_JOYSTICK_DPAD)?(this.canvas.setAttribute("style","-ms-touch-action: manipulation;"),this.canvas.setAttribute("style","touch-action: manipulation;")):(this.canvas.setAttribute("style","-ms-touch-action: none;"),this.canvas.setAttribute("style","touch-action: none;")),this.touchCalls.indexOf(this.joystick)<0&&this.touchCalls.add(this.joystick))},startAccJoystick:function(){this.startAccelerometer(),this.joystickOn=2},endJoystick:function(){null!=this.joystick&&(1==this.joystickOn&&this.touchCalls.removeObject(this.joystick),this.joystick=null),2==this.joystickOn&&this.endAccelerometer(),this.joystickOn=0},startAccelerometer:function(){if(0==this.accelerometer){window.DeviceMotionEvent&&(this.accelerometerHandler=this._handleOnDeviceMotion.bind(this),window.addEventListener("devicemotion",this.accelerometerHandler))}this.accelerometer++},_handleOnDeviceMotion:function(t){var e=t.acceleration.x/9.780318,i=t.acceleration.y/9.780318,r=t.acceleration.z/9.780318,s=t.accelerationIncludingGravity.x/9.780318,n=t.accelerationIncludingGravity.y/9.780318,o=t.accelerationIncludingGravity.z/9.780318;switch(this.accX=e,this.accY=i,this.accZ=r,this.accGravX=s,this.accGravY=n,this.accGravZ=o,window.orientation){case 0:this.accX=-e,this.accY=i,this.accGravX=-s,this.accGravY=n;break;case 90:this.accX=i,this.accY=e,this.accGravX=n,this.accGravY=s;break;case 180:this.accX=e,this.accY=-i,this.accGravX=s,this.accGravY=-n;break;case-90:this.accX=-i,this.accY=-e,this.accGravX=-n,this.accGravY=-s}this.iOS&&(this.accX=-this.accX,this.accY=-this.accY,this.accGravX=-this.accGravX,this.accGravY=-this.accGravY)},endAccelerometer:function(){--this.accelerometer<=0&&(window.DeviceMotionEvent&&window.removeEventListener("devicemotion",this.accelerometerHandler),this.accelerometer=0)},getJoystick:function(){var t=0;return this.accGravX<-.2&&(t|=4),this.accGravX>.2&&(t|=8),this.accGravY<-.2&&(t|=1),this.accGravY>.2&&(t|=2),t},drawContinue:function(t){if(t.touchMe){switch(null==this.silentSound&&(t.touchMePhase=2),t.touchMePhase){case 0:t.touchMeAlpha>0&&(t.touchMeAlpha-=2,t.touchMeAlpha<0&&(t.touchMeAlpha=0,phase++));break;case 1:break;case 2:t.touchMeAlpha<128&&(t.touchMeAlpha+=4,t.touchMeAlpha>=128&&(t.touchMeAlpha=128,t.touchMeQuit=!0))}this.context.renderSolidColor(t.touchMeRect.left,t.touchMeRect.top,t.touchMeRect.right-t.touchMeRect.left,t.touchMeRect.bottom-t.touchMeRect.top,this.frameColor,0,0),t.touchMe.draw(this.context,t.touchMeRect.left,t.touchMeRect.top,cc.BOP_BLEND,t.touchMeAlpha),t.touchMeQuit&&(t.touchMe=null,t.touchMeRect=null,t.touchMeFont=null)}else if(t.touchMeQuit=!0,null!=this.silentSound&&0!=(this.dwOptions&Ka.AH2OPT_LOADSOUNDSONTOUCH)){t.touchMeFont=new Pl,t.touchMeFont.createDefaultFont(),t.touchMeFont.lfHeight=24;var e=t.touchMeFont.lfHeight+6;t.touchMe=new d(this,120,e);var i=t.touchMe.measureText(this.m_touchMe,t.touchMeFont)+64;t.touchMe.resize(i,e),t.touchMe.manualClear(),t.touchMe.manualDrawText(this.m_touchMe,qc.DT_VCENTER|qc.DT_CENTER,null,16776960,t.touchMeFont,2,0),t.touchMeRect=new h,t.touchMeRect.left=this.gaCxWin/2-i/2,t.touchMeRect.top=this.gaCyWin/2-e/2,t.touchMeRect.right=t.touchMeRect.left+i,t.touchMeRect.bottom=t.touchMeRect.top+e,t.touchMeAlpha=128,t.touchMePhase=0,t.touchMeQuit=!1,this.context.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.frameColor,0,0)}return t.touchMeQuit}},za.LEF_DISPLAYNAME=1,za.LEF_GRABDESKTOP=2,za.LEF_KEEPDISPLAY=4,za.LEF_TOTALCOLMASK=32,za.LEF_RESIZEATSTART=256,za.LEF_NOSURFACE=2048,za.LEF_TIMEDMVTS=32768,za.LEF_TRANSPARENTBKD=131072,za.CM_TEST_OBSTACLE=0,za.CM_TEST_PLATFORM=1,za.CM_OBSTACLE=1,za.CM_PLATFORM=2,za.HEIGHT_PLATFORM=6,za.IPHONEOPT_JOYSTICK_FIRE1=1,za.IPHONEOPT_JOYSTICK_FIRE2=2,za.IPHONEOPT_JOYSTICK_LEFTHAND=4,za.HTML5FOPT_JOYSTICK_DPAD=8,za.HTML5FOPT_DISPLAYPRELOADER=256,za.JOYSTICK_NONE=0,za.JOYSTICK_TOUCH=1,za.JOYSTICK_ACCELEROMETER=2,za.JOYSTICK_EXT=3,za.prototype={loadFullFrame:function(t){this.app.file.seek(this.app.frameOffsets[t]),this.evtProg=new Sl(this.app),this.LOList=new Rl,this.leVirtualRect=new h;var e,i=0;for(this.m_wRandomSeed=-1;32639!=i;)if(i=this.app.file.readAShort(),this.app.file.readAShort(),0!=(e=this.app.file.readAInt())){switch(this.posEnd=this.app.file.getFilePointer()+e,i){case 13108:this.loadHeader(),null!=this.app.parentApp&&0!=(this.app.parentOptions&Ql.CCAF_DOCKED)?(this.leEditWinWidth=this.app.cx,this.leEditWinHeight=this.app.cy):(this.leEditWinWidth=Math.min(this.app.gaCxWin,this.leWidth),this.leEditWinHeight=Math.min(this.app.gaCyWin,this.leHeight));break;case 13128:var r=e/6;this.mosaicHandles=new Array(r),this.mosaicX=new Array(r),this.mosaicY=new Array(r),this.mosaicMaxHandle=0;var s;for(s=0;s<r;s++)this.mosaicHandles[s]=this.app.file.readAShort(),this.mosaicMaxHandle=Math.max(this.mosaicMaxHandle,this.mosaicHandles[s]),this.mosaicX[s]=this.app.file.readAShort(),this.mosaicY[s]=this.app.file.readAShort();this.mosaicMaxHandle++;break;case 13130:this.joystick=this.app.file.readAShort(),this.html5Options=this.app.file.readAShort();break;case 13122:this.leVirtualRect.load(this.app.file);break;case 13124:this.m_wRandomSeed=this.app.file.readAShort();break;case 13127:this.m_dwMvtTimerBase=this.app.file.readAInt();break;case 13109:this.frameName=this.app.file.readAString();break;case 13115:this.fadeIn=new wu,this.fadeIn.load(this.app.file);break;case 13116:this.fadeOut=new wu,this.fadeOut.load(this.app.file);break;case 13121:this.loadLayers();break;case 13125:this.loadLayerEffects();break;case 13112:this.LOList.load(this.app);break;case 13117:this.evtProg.load(this.app),this.maxObjects=this.evtProg.maxObjects}this.app.file.seek(this.posEnd)}this.app.OIList.resetToLoad();var s;for(s=0;s<this.LOList.nIndex;s++){var n=this.LOList.getLOFromIndex(s);this.app.OIList.setToLoad(n.loOiHandle)}for(this.app.imageBank.resetToLoad(),this.app.soundBank.resetToLoad(),this.app.fontBank.resetToLoad(),this.app.OIList.load(this.app.file),this.app.OIList.enumElements(this.app.imageBank,this.app.fontBank),this.app.dwOptions&Ka.AH2OPT_LOADDATAATSTART&&(this.app.fontBank.setAllToLoad(),this.app.soundBank.setAllToLoad(),(0==this.app.mosaicMaxHandle||this.app.isPreloaderSubApp)&&this.app.imageBank.setAllToLoad()),this.app.imageBank.load(this.app.file),this.app.fontBank.load(this.app.file),this.evtProg.enumSounds(this.app.soundBank),this.app.soundBank.load(),this.app.OIList.resetOICurrent(),s=0;s<this.LOList.nIndex;s++){var o=this.LOList.list[s];o.loType>=Dl.OBJ_SPR&&this.app.OIList.setOICurrent(o.loOiHandle)}},loadLayers:function(){this.nLayers=this.app.file.readAInt(),this.layers=new Array(this.nLayers);var t;for(t=0;t<this.nLayers;t++)this.layers[t]=new kl(this.app),this.layers[t].load(this.app.file)},loadLayerEffects:function(){var t;for(t=0;t<this.nLayers;t++)this.layers[t].effect=this.app.file.readAInt(),this.layers[t].effectParam=this.app.file.readAInt(),this.app.file.skipBytes(12)},loadHeader:function(){this.leWidth=this.app.file.readAInt(),this.leHeight=this.app.file.readAInt(),this.leBackground=this.app.file.readAColor(),this.leFlags=this.app.file.readAInt()}},Ja.NCHANNELS=48,Ja.prototype={addDataToDecode:function(t){null==this.dataToDecode&&(this.dataToDecode=new n),this.dataToDecode.add(t)},decodeData:function(){if(null!=this.dataToDecode&&this.dataToDecode.size()>0&&!this.decoding){var t=this.dataToDecode.get(0);this.dataToDecode.removeIndex(0),this.decoding=!0;var e=this;e.context.decodeAudioData(t.response,function(i){t.buffer=i,t.response=null,e.app.dataHasLoaded(t),e.decoding=!1})}},reset:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)this.bLocked[t]=!1},lockChannel:function(t){t>=0&&t<Ja.NCHANNELS&&(this.bLocked[t]=!0)},unlockChannel:function(t){t>=0&&t<Ja.NCHANNELS&&(this.bLocked[t]=!1)},play:function(t,e,i,r,s,n){var o;if(0!=this.bOn){var h=this.app.soundBank.getSoundFromHandle(t);if(null!=h){if(0==this.bMultipleSounds&&(i=0),i<0){for(o=0;o<Ja.NCHANNELS&&(null!=this.channels[o]||0!=this.bLocked[o]);o++);if(o==Ja.NCHANNELS)for(o=0;o<Ja.NCHANNELS&&(0!=this.bLocked[o]||null==this.channels[o]||0!=this.channels[o].bUninterruptible);o++);i=o,i>=0&&i<Ja.NCHANNELS&&-1==s&&(this.volumes[i]=this.mainVolume)}if(!(i<0||i>=Ja.NCHANNELS)){if(null!=this.channels[i]){if(1==this.channels[i].bUninterruptible)return;this.channels[i]!=h&&(this.channels[i].stop(),this.channels[i]=null)}for(o=0;o<Ja.NCHANNELS;o++)this.channels[o]==h&&(this.channels[o].stop(),this.channels[o]=null);this.channels[i]=h,-1!=s&&(this.volumes[i]=s),h.play(e,r,this.volumes[i]),0!=n&&h.setFrequency(n)}}}},setMultipleSounds:function(t){this.bMultipleSounds=t},keepCurrentSounds:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)null!=this.channels[t]&&this.channels[t].isPlaying()&&this.app.soundBank.setToLoad(this.channels[t].handle)},setOnOff:function(t){t!=bOn&&(this.bOn=t,0==this.bOn&&this.stopAllSounds())},getOnOff:function(){return this.bOn},stopAllSounds:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)null!=this.channels[t]&&(this.channels[t].stop(),this.channels[t]=null)},stopSample:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)null!=this.channels[e]&&this.channels[e].handle==t&&(this.channels[e].stop(),this.channels[e]=null)},stopChannel:function(t){t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&(this.channels[t].stop(),this.channels[t]=null)},isSamplePaused:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)if(null!=this.channels[e]&&this.channels[e].handle==t)return this.channels[e].isPaused();return!1},isSoundPlaying:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)if(null!=this.channels[t]&&this.channels[t].isPlaying())return!0;return!1},isSamplePlaying:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)if(null!=this.channels[e]&&this.channels[e].handle==t)return this.channels[e].isPlaying();return!1},isChannelPlaying:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].isPlaying()},isChannelPaused:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].isPaused()},pause:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)null!=this.channels[t]&&this.channels[t].globalpause()},pauseChannel:function(t){t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].pause()},pauseSample:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)null!=this.channels[e]&&this.channels[e].handle==t&&this.channels[e].pause()},resume:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)null!=this.channels[t]&&this.channels[t].globalresume()},resumeChannel:function(t){t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].resume()},resumeSample:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)null!=this.channels[e]&&this.channels[e].handle==t&&this.channels[e].resume()},setVolumeChannel:function(t,e){e<0&&(e=0),e>100&&(e=100),t>=0&&t<Ja.NCHANNELS&&(this.volumes[t]=e,null!=this.channels[t]&&this.channels[t].setVolume(e))},setFrequencyChannel:function(t,e){t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].setFrequency(e)},setFrequencySample:function(t,e){var i;for(i=0;i<Ja.NCHANNELS;i++)null!=this.channels[i]&&this.channels[i].handle==t&&this.channels[i].setFrequency(e)},setPositionChannel:function(t,e){t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&this.channels[t].setPosition(e)},setPositionSample:function(t,e){var i;for(i=0;i<Ja.NCHANNELS;i++)null!=this.channels[i]&&this.channels[i].handle==t&&this.channels[i].setPosition(e)},getVolumeChannel:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]?this.volumes[t]:0},setVolumeSample:function(t,e){e<0&&(e=0),e>100&&(e=100);var i;for(i=0;i<Ja.NCHANNELS;i++)null!=this.channels[i]&&this.channels[i].handle==t&&(this.volumes[i]=e,this.channels[i].setVolume(e))},setMainVolume:function(t){var e;for(this.mainVolume=t,e=0;e<Ja.NCHANNELS;e++)this.volumes[e]=t,null!=this.channels[e]&&this.channels[e].setVolume(t)},getMainVolume:function(){return this.mainVolume},getChannel:function(t){var e;for(e=0;e<Ja.NCHANNELS;e++)if(null!=this.channels[e]&&this.channels[e].name==t)return e;return-1},getDurationChannel:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]?this.channels[t].getDuration():0},getPositionChannel:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]?this.channels[t].getPosition():0},getFrequencyChannel:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]?this.channels[t].getFrequency():0},getSndNameChannel:function(t){return t>=0&&t<Ja.NCHANNELS&&null!=this.channels[t]&&(this.channels[t].isPlaying()||this.channels[t].isPaused())?this.channels[t].name:""},getVolumeSample:function(t){var e=this.getChannel(t);return e>=0?this.volumes[e]:0},getDurationSample:function(t){var e=this.getChannel(t);return e>=0?this.channels[e].getDuration():0},getPositionSample:function(t){var e=this.getChannel(t);return e>=0?this.channels[e].getPosition():0},getFrequencySample:function(t){var e=this.getChannel(t);return e>=0?this.channels[e].getFrequency():0},checkSounds:function(){var t;for(t=0;t<Ja.NCHANNELS;t++)null!=this.channels[t]&&this.channels[t].checkSound()&&(this.channels[t]=null)}},Qa.prototype={preLoad:function(){var t=this.app.file.readAShort();this.path=this.app.file.readAString(t);var e=this.path.lastIndexOf("\\");e>=0&&(this.path=this.path.substring(e+1)),this.length=this.app.file.readAInt(),this.offset=this.app.file.getFilePointer(),this.app.file.skipBytes(this.length)},open:function(){return this.app.file.createFromFile(this.offset,this.length)}},Za.prototype={load:function(){return this.isLoaded},reset:function(){this.phase=0,this.oldAngle=0,this.counter=25},step:function(){switch(this.phase){case 0:-1!=this.app.preloaderBackColor?this.context.renderSolidColor(0,0,this.app.gaCxWin,this.app.gaCyWin,this.app.preloaderBackColor):this.context.clearBackground(0,0,this.app.gaCxWin,this.app.gaCyWin),this.context.renderSimpleImage(this.image,this.xCenter-this.image.width/2,this.yCenter-this.image.height/2,this.image.width,this.image.height,0,0),this.phase++;break;case 1:this.angle=this.app.imagesLoaded/this.app.imagesToLoad*2*Math.PI,this.drawIt(this.angle),this.app.imagesLoaded==this.app.imagesToLoad&&this.phase++;break;case 2:this.counter>0&&this.counter--,0==this.counter&&this.phase++;break;case 3:this.app.drawContinue(this)&&this.phase++}},isComplete:function(){return 4==this.phase},drawIt:function(t){var e,i,r,s,n;for(e=this.oldAngle;e<=t;e+=.005){i=this.xCenter+Math.cos(e)*(this.radius-this.size),r=this.yCenter-Math.sin(e)*(this.radius-this.size),s=this.xCenter+Math.cos(e)*this.radius,n=this.yCenter-Math.sin(e)*this.radius,this.context.renderLine(i,r,s,n,this.color,1,0,0);var o;for(o=0;o<3;o++)i=this.xCenter+Math.cos(e)*(this.radius-this.size-o),r=this.yCenter-Math.sin(e)*(this.radius-this.size-o),s=this.xCenter+Math.cos(e)*(this.radius-this.size-o-1),n=this.yCenter-Math.sin(e)*(this.radius-this.size-o-1),this.context.renderLine(i,r,s,n,this.color,1,0,0),i=this.xCenter+Math.cos(e)*(this.radius+o),r=this.yCenter-Math.sin(e)*(this.radius+o),s=this.xCenter+Math.cos(e)*(this.radius+o+1),n=this.yCenter-Math.sin(e)*(this.radius+o+1),this.context.renderLine(i,r,s,n,this.color,1,0,0)}this.oldAngle=t}},$a.prototype={load:function(){return!0},reset:function(){this.quit=!1,this.phase=0,this.alpha=128,this.position=0},step:function(){if(this.app.imagesLoaded<this.app.imagesToLoad)switch(this.phase){case 0:this.alpha>0&&(this.alpha-=2,this.alpha<=0&&(this.alpha=0,this.phase++))}else switch(this.phase){case 0:case 1:this.phase=2;break;case 2:this.alpha<128&&(this.alpha+=4),this.alpha>=128&&(this.alpha=128,null==this.app.silentSound?this.quit=!0:this.phase++);break;default:return void(this.quit=this.app.drawContinue(this))}this.context.renderSolidColor(this.rect.left,this.rect.top,this.width,this.height,this.backColor,cc.BOP_BLEND,this.alpha),this.context.renderRect(this.rect.left,this.rect.top,this.width,this.height,this.borderColor,1,cc.BOP_BLEND,this.alpha),this.position=this.app.imagesLoaded/this.app.imagesToLoad*(this.width-2),this.context.renderSolidColor(this.rect.left+1,this.rect.top+1,this.position,this.height-2,this.barColor,cc.BOP_BLEND,this.alpha)},isComplete:function(){return this.quit&&this.app.imagesLoaded==this.app.imagesToLoad}},tl.prototype={load:function(){return this.step(),!this.subApp.loading},reset:function(){this.subApp.run.f_StopSamples(),this.subApp.run.killFrameObjects(),this.subApp.run.y_KillLevel(!1),this.subApp.run.resetFrameLayers(-1,!1),this.subApp.run.rhEvtProg.unBranchPrograms(),this.subApp.run.freeMouse(),this.subApp.run.freeRunHeader(),this.subApp.run.rhFrame.leX=this.subApp.run.rhFrame.leLastScrlX=this.subApp.run.rh3DisplayX=0,this.subApp.run.rhFrame.leY=this.subApp.run.rhFrame.leLastScrlY=this.subApp.run.rh3DisplayY=0,this.subApp.resetLayers(),this.subApp.run.allocRunHeader(),this.subApp.run.initAsmLoop(),this.subApp.run.resetFrameLayers(-1,!1),this.subApp.run.prepareFrame(),this.subApp.run.createFrameObjects(!1),this.subApp.run.drawLevel(),this.subApp.run.loadGlobalObjectsData(),this.subApp.run.rhEvtProg.prepareProgram(),this.subApp.run.rhEvtProg.assemblePrograms(this.subApp.run),this.subApp.run.f_InitLoop(),this.subApp.run.captureMouse(),this.subApp.run.rhQuit=0,this.subApp.run.rhQuitParam=0,this.subApp.subAppStopped=!1,this.app.subApps.push(this.subApp),this.delay=0},step:function(){this.subApp.subAppStopped||(this.stopOnLoad&&(this.subApp.subAppStopped=this.app.imagesLoaded==this.app.imagesToLoad),0==this.subApp.stepApplication()&&(this.subApp.subAppStopped=!0),this.subApp.drawSubApplication(this.context,this.appSprite.x,this.appSprite.y,!1)),this.subApp.subAppStopped&&this.app.silentSound&&this.app.drawContinue(this)},isComplete:function(){var t=this.subApp.subAppStopped;if(this.app.silentSound&&(t=!1),t){if(this.delay>0&&--this.delay>0)return!1;var e;for(e=0;e<this.app.subApps.length;e++)if(this.app.subApps[e]==this.subApp){this.app.subApps.splice(e,1);break}}return t}},el.KEY_JOYSTICK=0,el.KEY_FIRE1=1,el.KEY_FIRE2=2,el.KEY_NONE=-1,el.MAX_TOUCHES=3,el.JFLAG_JOYSTICK=1,el.JFLAG_FIRE1=2,el.JFLAG_FIRE2=4,el.JFLAG_LEFTHANDED=8,el.JFLAG_DPAD=16,el.JPOS_NOTDEFINED=2147483648,el.JOY_ANGLEGAP=70,el.DEADZONE=.25,el.prototype={loadImages:function(){null==this.joyBack&&(this.joyBack=vl.createFromFile(this.app,"joyback.png"),this.joyFront=vl.createFromFile(this.app,"joyfront.png")),null==this.joyUp&&0!=(this.app.frame.html5Options&za.HTML5FOPT_JOYSTICK_DPAD)&&(this.joyUp=vl.createFromFile(this.app,"joyup.png"),this.joyUpD=vl.createFromFile(this.app,"joyupd.png"),this.joyDown=vl.createFromFile(this.app,"joydown.png"),this.joyDownD=vl.createFromFile(this.app,"joydownd.png"),this.joyLeft=vl.createFromFile(this.app,"joyleft.png"),this.joyLeftD=vl.createFromFile(this.app,"joyleftd.png"),this.joyRight=vl.createFromFile(this.app,"joyright.png"),this.joyRightD=vl.createFromFile(this.app,"joyrightd.png")),null==this.fire1U&&(this.fire1U=vl.createFromFile(this.app,"fire1U.png"),this.fire2U=vl.createFromFile(this.app,"fire2U.png"),this.fire1D=vl.createFromFile(this.app,"fire1D.png"),this.fire2D=vl.createFromFile(this.app,"fire2D.png"))},reset:function(t){
this.flags=t,null!=this.joyBack&&0!=this.joyBack.width?this.setPositions():this.bSetPositions=!0,this.joyanglezone=el.JOY_ANGLEGAP*Math.PI/180},setPositions:function(){var t,e;t=this.app.gaCxWin,e=this.app.gaCyWin,0!=(this.flags&el.JFLAG_DPAD)?this.joyradsize=Math.ceil(Math.sqrt(this.joyLeft.width*this.joyLeft.width+this.joyUp.height*this.joyUp.height)):this.joyradsize=Math.ceil(Math.sqrt(this.joyBack.width/2*this.joyBack.width/2+this.joyBack.height/2*this.joyBack.height/2)),this.joydeadzone=el.DEADZONE*this.joyradsize,0==(this.flags&el.JFLAG_LEFTHANDED)?(0!=(this.flags&el.JFLAG_JOYSTICK)&&(0!=(this.flags&el.JFLAG_DPAD)?(this.imagesX[el.KEY_JOYSTICK]=16+this.joyLeft.width,this.imagesY[el.KEY_JOYSTICK]=e-16-this.joyDown.height):(this.imagesX[el.KEY_JOYSTICK]=16+this.joyBack.width/2,this.imagesY[el.KEY_JOYSTICK]=e-16-this.joyBack.height/2)),0!=(this.flags&el.JFLAG_FIRE1)&&0!=(this.flags&el.JFLAG_FIRE2)?(this.imagesX[el.KEY_FIRE1]=t-this.fire1U.width/2-32,this.imagesY[el.KEY_FIRE1]=e-this.fire1U.height/2-16,this.imagesX[el.KEY_FIRE2]=t-this.fire2U.width/2-16,this.imagesY[el.KEY_FIRE2]=e-this.fire2U.height/2-this.fire1U.height-24):0!=(this.flags&el.JFLAG_FIRE1)?(this.imagesX[el.KEY_FIRE1]=t-this.fire1U.width/2-16,this.imagesY[el.KEY_FIRE1]=e-this.fire1U.height/2-16):0!=(this.flags&el.JFLAG_FIRE2)&&(this.imagesX[el.KEY_FIRE2]=t-this.fire2U.width/2-16,this.imagesY[el.KEY_FIRE2]=e-this.fire2U.height/2-16)):(0!=(this.flags&el.JFLAG_JOYSTICK)&&(0!=(this.flags&el.JFLAG_DPAD)?(this.imagesX[el.KEY_JOYSTICK]=t-16-this.joyLeft.width,this.imagesY[el.KEY_JOYSTICK]=e-16-this.joyDown.height):(this.imagesX[el.KEY_JOYSTICK]=t-16-this.joyBack.width/2,this.imagesY[el.KEY_JOYSTICK]=e-16-this.joyBack.height/2)),0!=(this.flags&el.JFLAG_FIRE1)&&0!=(this.flags&el.JFLAG_FIRE2)?(this.imagesX[el.KEY_FIRE1]=this.fire1U.width/2+16+2*this.fire2U.width/3,this.imagesY[el.KEY_FIRE1]=e-this.fire1U.height/2-16,this.imagesX[el.KEY_FIRE2]=this.fire2U.width/2+16,this.imagesY[el.KEY_FIRE2]=e-this.fire2U.height/2-this.fire1U.height-24):0!=(this.flags&el.JFLAG_FIRE1)?(this.imagesX[el.KEY_FIRE1]=this.fire1U.width/2+16,this.imagesY[el.KEY_FIRE1]=e-this.fire1U.height/2-16):0!=(this.flags&el.JFLAG_FIRE2)&&(this.imagesX[el.KEY_FIRE2]=this.fire2U.width/2+16,this.imagesY[el.KEY_FIRE2]=e-this.fire2U.height/2-16))},setXPosition:function(t,e){0!=(t&el.JFLAG_JOYSTICK)?this.imagesX[el.KEY_JOYSTICK]=e:0!=(t&el.JFLAG_FIRE1)?this.imagesX[el.KEY_FIRE1]=e:0!=(t&el.JFLAG_FIRE2)&&(this.imagesX[el.KEY_FIRE2]=e)},setYPosition:function(t,e){0!=(t&el.JFLAG_JOYSTICK)?this.imagesY[el.KEY_JOYSTICK]=e:0!=(t&el.JFLAG_FIRE1)?this.imagesY[el.KEY_FIRE1]=e:0!=(t&el.JFLAG_FIRE2)&&(this.imagesY[el.KEY_FIRE2]=e)},draw:function(t){this.bSetPositions&&(this.bSetPositions=!1,this.setPositions());var e,i;if(0!=(this.flags&el.JFLAG_JOYSTICK))if(0!=(this.flags&el.JFLAG_DPAD)){var r=1&this.joystick?this.joyUpD:this.joyUp;e=this.imagesX[el.KEY_JOYSTICK]-r.width/2,i=this.imagesY[el.KEY_JOYSTICK]-r.height,t.renderImage(r,e,i,0,1,1,0,0),r=2&this.joystick?this.joyDownD:this.joyDown,e=this.imagesX[el.KEY_JOYSTICK]-r.width/2,i=this.imagesY[el.KEY_JOYSTICK],t.renderImage(r,e,i,0,1,1,0,0),r=4&this.joystick?this.joyLeftD:this.joyLeft,e=this.imagesX[el.KEY_JOYSTICK]-r.width,i=this.imagesY[el.KEY_JOYSTICK]-r.height/2,t.renderImage(r,e,i,0,1,1,0,0),r=8&this.joystick?this.joyRightD:this.joyRight,e=this.imagesX[el.KEY_JOYSTICK],i=this.imagesY[el.KEY_JOYSTICK]-r.height/2,t.renderImage(r,e,i,0,1,1,0,0)}else e=this.imagesX[el.KEY_JOYSTICK]-this.joyBack.width/2,i=this.imagesY[el.KEY_JOYSTICK]-this.joyBack.height/2,t.renderImage(this.joyBack,e,i,0,1,1,0,0),e=this.imagesX[el.KEY_JOYSTICK]+this.joystickX-this.joyFront.width/2,i=this.imagesY[el.KEY_JOYSTICK]+this.joystickY-this.joyFront.height/2,t.renderImage(this.joyFront,e,i,0,1,1,0,0);if(0!=(this.flags&el.JFLAG_FIRE1)){var s=0==(16&this.joystick)?this.fire1U:this.fire1D;e=this.imagesX[el.KEY_FIRE1]-s.width/2,i=this.imagesY[el.KEY_FIRE1]-s.height/2,t.renderImage(s,e,i,0,1,1,0,0)}if(0!=(this.flags&el.JFLAG_FIRE2)){var s=0==(32&this.joystick)?this.fire2U:this.fire2D;e=this.imagesX[el.KEY_FIRE2]-s.width/2,i=this.imagesY[el.KEY_FIRE2]-s.height/2,t.renderImage(s,e,i,0,1,1,0,0)}},updateJoystickState:function(t,e){this.joystickX=t-this.imagesX[el.KEY_JOYSTICK],this.joystickY=e-this.imagesY[el.KEY_JOYSTICK],0==(this.flags&el.JFLAG_DPAD)&&(this.joystickX<-this.joyBack.width/4&&(this.joystickX=-this.joyBack.width/4),this.joystickX>this.joyBack.width/4&&(this.joystickX=this.joyBack.width/4),this.joystickY<-this.joyBack.height/4&&(this.joystickY=-this.joyBack.height/4),this.joystickY>this.joyBack.height/4&&(this.joystickY=this.joyBack.height/4));var i=(2*Math.PI-Math.atan2(this.joystickY,this.joystickX))%(2*Math.PI);this.joystick&=240;var r=Math.sqrt(this.joystickX*this.joystickX+this.joystickY*this.joystickY);if(r>this.joydeadzone&&r<=this.joyradsize){this.joystickX=Math.cos(i)*this.joyradsize/2,this.joystickY=Math.sin(i)*-this.joyradsize/2;var s=0;if(i>=0)for(;;){if(this.insideZone(i,0,this.joyanglezone)||this.insideZone(i,2*Math.PI,this.joyanglezone)){s=8;break}if(this.insideZone(i,Math.PI/2,this.joyanglezone)){s=1;break}if(this.insideZone(i,Math.PI,this.joyanglezone)){s=4;break}if(this.insideZone(i,Math.PI/4*6,this.joyanglezone)){s=2;break}if(this.insideZone(i,Math.PI/4,Math.PI/2-this.joyanglezone)){s=9;break}if(this.insideZone(i,Math.PI/4*3,Math.PI/2-this.joyanglezone)){s=5;break}if(this.insideZone(i,Math.PI/4*5,Math.PI/2-this.joyanglezone)){s=6;break}if(this.insideZone(i,Math.PI/4*7,Math.PI/2-this.joyanglezone)){s=10;break}break}this.joystick|=s}},touchStarted:function(t){var e=!1,i=this.app.getTouchX(t),r=this.app.getTouchY(t),s=this.getKey(i,r);return s!=el.KEY_NONE&&(this.touches[s]=t.identifier,s==el.KEY_JOYSTICK&&(this.joystick&=240,e=!0,0!=(this.flags&el.JFLAG_DPAD)&&this.updateJoystickState(i,r)),s==el.KEY_FIRE1?(this.joystick|=16,e=!0):s==el.KEY_FIRE2&&(this.joystick|=32,e=!0)),e},touchMoved:function(t){var e=this.app.getTouchX(t),i=this.app.getTouchY(t);this.getKey(e,i)==el.KEY_JOYSTICK&&(this.touches[el.KEY_JOYSTICK]=t.identifier),this.touches[el.KEY_JOYSTICK]==t.identifier&&this.updateJoystickState(e,i)},insideZone:function(t,e,i){return t>e-i/2&&t<e+i/2},touchEnded:function(t){var e;for(e=0;e<el.MAX_TOUCHES;e++)if(this.touches[e]==t.identifier){switch(this.touches[e]=0,e){case el.KEY_JOYSTICK:this.joystickX=0,this.joystickY=0,this.joystick&=240;break;case el.KEY_FIRE1:this.joystick&=-17;break;case el.KEY_FIRE2:this.joystick&=-33}break}},getKey:function(t,e){if(0!=(this.flags&el.JFLAG_JOYSTICK))if(0!=(this.flags&el.JFLAG_DPAD)){if(t>=this.imagesX[el.KEY_JOYSTICK]-this.joyLeft.width&&t<this.imagesX[el.KEY_JOYSTICK]+this.joyRight.width&&e>this.imagesY[el.KEY_JOYSTICK]-this.joyUp.height&&e<this.imagesY[el.KEY_JOYSTICK]+this.joyDown.height)return el.KEY_JOYSTICK}else if(t>=this.imagesX[el.KEY_JOYSTICK]-this.joyBack.width/2&&t<this.imagesX[el.KEY_JOYSTICK]+this.joyBack.width/2&&e>this.imagesY[el.KEY_JOYSTICK]-this.joyBack.height/2&&e<this.imagesY[el.KEY_JOYSTICK]+this.joyBack.height/2)return el.KEY_JOYSTICK;return 0!=(this.flags&el.JFLAG_FIRE1)&&t>=this.imagesX[el.KEY_FIRE1]-this.fire1U.width/2&&t<this.imagesX[el.KEY_FIRE1]+this.fire1U.width/2&&e>this.imagesY[el.KEY_FIRE1]-this.fire1U.height/2&&e<this.imagesY[el.KEY_FIRE1]+this.fire1U.height/2?el.KEY_FIRE1:0!=(this.flags&el.JFLAG_FIRE2)&&t>=this.imagesX[el.KEY_FIRE2]-this.fire2U.width/2&&t<this.imagesX[el.KEY_FIRE2]+this.fire2U.width/2&&e>this.imagesY[el.KEY_FIRE2]-this.fire2U.height/2&&e<this.imagesY[el.KEY_FIRE2]+this.fire2U.height/2?el.KEY_FIRE2:el.KEY_NONE},getJoystick:function(){return this.joystick}},il.GAMEFLAGS_VBLINDEP=2,il.GAMEFLAGS_LIMITEDSCROLL=4,il.GAMEFLAGS_FIRSTLOOPFADEIN=16,il.GAMEFLAGS_LOADONCALL=32,il.GAMEFLAGS_REALGAME=64,il.GAMEFLAGS_PLAY=128,il.GAMEFLAGS_INITIALISING=512,il.DLF_DONTUPDATE=2,il.DLF_DRAWOBJECTS=4,il.DLF_RESTARTLEVEL=8,il.DLF_DONTUPDATECOLMASK=16,il.DLF_COLMASKCLIPPED=32,il.DLF_SKIPLAYER0=64,il.DLF_REDRAWLAYER=128,il.DLF_STARTLEVEL=256,il.GAME_XBORDER=480,il.GAME_YBORDER=300,il.COLMASK_XMARGIN=64,il.COLMASK_YMARGIN=16,il.WRAP_X=1,il.WRAP_Y=2,il.WRAP_XY=4,il.RH3SCROLLING_SCROLL=1,il.RH3SCROLLING_REDRAWLAYERS=2,il.RH3SCROLLING_REDRAWALL=4,il.RH3SCROLLING_REDRAWTOTALCOLMASK=8,il.OBSTACLE_NONE=0,il.OBSTACLE_SOLID=1,il.OBSTACLE_PLATFORM=2,il.OBSTACLE_LADDER=3,il.OBSTACLE_TRANSPARENT=4,il.COF_NOMOVEMENT=1,il.COF_HIDDEN=2,il.COF_FIRSTTEXT=4,il.COF_CREATEDATSTART=8,il.MAX_FRAMERATE=10,il.LOOPEXIT_NEXTLEVEL=1,il.LOOPEXIT_PREVLEVEL=2,il.LOOPEXIT_GOTOLEVEL=3,il.LOOPEXIT_NEWGAME=4,il.LOOPEXIT_PAUSEGAME=5,il.LOOPEXIT_SAVEAPPLICATION=6,il.LOOPEXIT_LOADAPPLICATION=7,il.LOOPEXIT_SAVEFRAME=8,il.LOOPEXIT_LOADFRAME=9,il.LOOPEXIT_ENDGAME=-2,il.LOOPEXIT_QUIT=100,il.LOOPEXIT_RESTART=101,il.BORDER_LEFT=1,il.BORDER_RIGHT=2,il.BORDER_TOP=4,il.BORDER_BOTTOM=8,il.BORDER_ALL=15,il.MAX_INTERMEDIATERESULTS=128,il.INTBAD=2147483647,il.FANIDENTIFIER=1110591041,il.TREADMILLIDENTIFIER=1110594637,il.PARTICULESIDENTIFIER=1110600435,il.MAGNETIDENTIFIER=1110874198,il.ROPEANDCHAINIDENTIFIER=1110634490,il.BASEIDENTIFIER=1110590791;il.plMasks=[0,0,0,0,255,0,0,0,255,255,0,0,255,255,255,0,255,255,255,255],il.Table_InOut=[0,il.BORDER_LEFT,il.BORDER_RIGHT,0,il.BORDER_TOP,il.BORDER_TOP+il.BORDER_LEFT,il.BORDER_TOP+il.BORDER_RIGHT,0,il.BORDER_BOTTOM,il.BORDER_BOTTOM+il.BORDER_LEFT,il.BORDER_BOTTOM+il.BORDER_RIGHT,0,0,0,0,0],il.bMoveChanged=!1,il.compareTo=function(t,e,i){switch(i){case 0:return t==e;case 1:return t!=e;case 2:return t<=e;case 3:return t<e;case 4:return t>=e;case 5:return t>e}return!1},il.compareTer=function(t,e,i){switch(i){case 0:return t==e;case 1:return t!=e;case 2:return t<=e;case 3:return t<e;case 4:return t>=e;case 5:return t>e}return!1},il.getObjectFont=function(t){var e=null;return e=t.hoType>=Dl.KPX_BASE?t.ext.getRunObjectFont():t.getFont(),null==e&&(e=new l),e},il.setObjectFont=function(t,e,i){t.hoType>=Dl.KPX_BASE?t.ext.setRunObjectFont(e,i):t.setFont(e,i)},il.getObjectTextColor=function(t){return t.hoType>=Dl.KPX_BASE?t.ext.getRunObjectTextColor():t.getFontColor()},il.setObjectTextColor=function(t,e){t.hoType>=Dl.KPX_BASE?t.ext.setRunObjectTextColor(e):t.setFontColor(e)},il.objectShow=function(t){null!=t.ros&&(t.ros.obShow(),t.ros.rsFlags|=cc.RSFLAG_VISIBLE,t.ros.rsFlash=0)},il.objectHide=function(t){null!=t.ros&&(t.ros.obHide(),t.ros.rsFlags&=~cc.RSFLAG_VISIBLE,t.ros.rsFlash=0)},il.setXPosition=function(t,e){null!=t.rom?t.rom.rmMovement.setXPosition(e):t.hoX!=e&&(t.hoX=e,null!=t.roc&&(t.roc.rcChanged=!0,t.roc.rcCheckCollides=!0))},il.setYPosition=function(t,e){null!=t.rom?t.rom.rmMovement.setYPosition(e):t.hoY!=e&&(t.hoY=e,null!=t.roc&&(t.roc.rcChanged=!0,t.roc.rcCheckCollides=!0))},il.get_DirFromPente=function(t,e){if(0==t)return e>=0?24:8;if(0==e)return t>=0?0:16;var i,r=!1,s=!1;t<0&&(r=!0,t=-t),e<0&&(s=!0,e=-e);var n,o=256*t/e;for(n=0;!(o>=Mc.CosSurSin32[n]);n+=2);return i=Mc.CosSurSin32[n+1],s&&(i=32-i,i&=31),r&&(i-=8,i&=31,i=-i,i&=31,i+=8,i&=31),i},il.prototype={setFrame:function(t){this.rhFrame=t},allocRunHeader:function(){this.rhObjectList=new Array(this.rhFrame.maxObjects),this.rhEvtProg=this.rhFrame.evtProg,this.rhMaxOI=0;var t;for(t=this.rhApp.OIList.getFirstOI();null!=t;t=this.rhApp.OIList.getNextOI())t.oiType>=Dl.OBJ_SPR&&this.rhMaxOI++;-1==this.rhFrame.m_wRandomSeed?this.rh3Graine=65535&this.rhApp.timer:this.rh3Graine=this.rhFrame.m_wRandomSeed;var e=Math.round(this.rhFrame.maxObjects/32+1);this.rhDestroyList=new Array(e),this.rh4FastLoops=new n,this.rh4CurrentFastLoop="",this.rhMaxObjects=this.rhFrame.maxObjects,this.rhNPlayers=this.rhEvtProg.nPlayers,this.rhFrame.leX=0,this.rhFrame.leY=0,this.rhWindowX=this.rhFrame.leX,this.rhWindowY=this.rhFrame.leY,this.rh4WindowDeltaX=0,this.rh4WindowDeltaY=0,this.rhLevelSx=this.rhFrame.leVirtualRect.right,-1==this.rhLevelSx&&(this.rhLevelSx=2147479552),this.rhLevelSy=this.rhFrame.leVirtualRect.bottom,-1==this.rhLevelSy&&(this.rhLevelSy=2147479552),this.rhNObjects=0,this.rhStopFlag=0,this.rhQuit=0,this.rhQuitBis=0,this.rhGameFlags&=il.GAMEFLAGS_PLAY,this.rhGameFlags|=il.GAMEFLAGS_LIMITEDSCROLL,this.rh4FrameRatePos=0,this.rh4FrameRatePrevious=0,this.rh4FrameRateArray=new Array(il.MAX_FRAMERATE),this.rh4BackDrawRoutines=null,this.rh4SaveFrame=0,this.rh4SaveFrameCount=-3,this.rhWheelCount=-1,this.rh4PosOnLoop=null,this.rhGameFlags|=il.GAMEFLAGS_REALGAME,this.rh4Results=new Array(il.MAX_INTERMEDIATERESULTS),this.rh4Operators=new Array(il.MAX_INTERMEDIATERESULTS),this.rh4OpeNull=new Hn,this.rh4OpeNull.code=0,this.rh2OldPlayer=new Array(4),this.rh2NewPlayer=new Array(4),this.rh2InputMask=new Array(4),this.rhPlayer=new Array(4),this.rh4MvtTimerCoef=0;var i;for(i=0;i<il.MAX_FRAMERATE;i++)this.rh4FrameRateArray[i]=50;this.quitPause=!1,this.bodiesCreated=!1,this.rhFrame.rhOK=!0},freeRunHeader:function(){this.rhFrame.rhOK=!1,this.rhObjectList=null,this.rhOiList=null,this.rhDestroyList=null,this.rh4CurrentFastLoop=null,this.rh4FastLoops=null,this.rh4BackDrawRoutines=null,this.rh4PosOnLoop=null;var t;for(t=0;t<il.MAX_INTERMEDIATERESULTS;t++)this.rh4Results[t]=0;this.rh4OpeNull=null},initRunLoop:function(t){if(this.allocRunHeader(),this.rhApp.joystickOn=0,null==this.rhApp.parentApp&&this.rhApp.touchable)if(this.rhFrame.joystick==za.JOYSTICK_EXT)null==this.rhApp.joystick&&(this.rhApp.joystick=new el(this.rhApp),this.rhApp.joystick.loadImages()),this.rhApp.joystick.reset(0),this.rhApp.startJoystick();else if(this.rhFrame.joystick!=za.JOYSTICK_NONE){var e=0;0!=(this.rhFrame.html5Options&za.IPHONEOPT_JOYSTICK_FIRE1)&&(e=el.JFLAG_FIRE1),0!=(this.rhFrame.html5Options&za.IPHONEOPT_JOYSTICK_FIRE2)&&(e|=el.JFLAG_FIRE2),0!=(this.rhFrame.html5Options&za.IPHONEOPT_JOYSTICK_LEFTHAND)&&(e|=el.JFLAG_LEFTHANDED),0!=(this.rhFrame.html5Options&za.HTML5FOPT_JOYSTICK_DPAD)&&(e|=el.JFLAG_DPAD),this.rhFrame.joystick==za.JOYSTICK_TOUCH&&(e|=el.JFLAG_JOYSTICK),0!=(e&(el.JFLAG_FIRE1|el.JFLAG_FIRE2|el.JFLAG_JOYSTICK))&&(this.rhApp.startJoystick(e),this.rhApp.joystick.reset(e)),this.rhFrame.joystick==za.JOYSTICK_ACCELEROMETER&&this.rhApp.startAccJoystick()}this.rhJoystickMask=255,t&&(this.rhGameFlags|=il.GAMEFLAGS_FIRSTLOOPFADEIN),this.initAsmLoop(),this.resetFrameLayers(-1,!1),this.prepareFrame(),this.rhLoopCount=0,this.createFrameObjects(t),this.drawLevel(),this.hideShowLayers(),this.loadGlobalObjectsData(),this.rhEvtProg.prepareProgram(),this.rhEvtProg.assemblePrograms(this),this.showMouse(),this.captureMouse(),this.rhQuitParam=0,this.f_InitLoop(),this.bodiesCreated=!1},doRunLoop:function(){if(this.rh2PauseCompteur>0&&null==this.rhApp.modalSubappObject)this.quitPause&&(1==this.rhApp.keyNew&&(this.rh4PauseKey>=0?this.rhApp.keyBuffer[this.rh4PauseKey]&&(this.resume(),this.rhQuit=0,this.rh4EndOfPause=this.rhLoopCount,this.rhEvtProg.handle_GlobalEvents(-458755)):this.rhApp.keyNew&&(this.resume(),this.rhQuit=0,this.rh4EndOfPause=this.rhLoopCount,this.rhEvtProg.handle_GlobalEvents(-458755))),this.rhApp.keyNew=!1),null!=this.questionObjectOn&&this.questionObjectOn.handleQuestion(),t=this.rhQuit;else{this.rhApp.appRunFlags|=Ka.ARF_INGAMELOOP;var t=this.f_GameLoop();if(this.rhApp.appRunFlags&=~Ka.ARF_INGAMELOOP,0!=(this.rhGameFlags&il.GAMEFLAGS_FIRSTLOOPFADEIN)){var e=new Date;this.fadeTimerDelta=e.getTime()-this.rhTimerOld,this.y_KillLevel(!0),this.rhEvtProg.unBranchPrograms()}}if(t==il.LOOPEXIT_NEXTLEVEL||t==il.LOOPEXIT_PREVLEVEL||t==il.LOOPEXIT_GOTOLEVEL){this.rhApp.transitionOldSurface=document.createElement("canvas"),this.rhApp.transitionOldSurface.width=this.rhApp.gaCxWin,this.rhApp.transitionOldSurface.height=this.rhApp.gaCyWin;var i=new xu(this.rhApp.transitionOldSurface);this.rhApp.frame.leClearBackground?i.clearBackground(0,0,this.gaCxWin,this.gaCyWin):i.renderSolidColor(0,0,this.gaCxWin,this.gaCyWin,this.frameColor),i.renderSolidColor(0,0,this.rhApp.gaCxWin,this.rhApp.gaCyWin,this.rhApp.frameColor),this.rhApp.mainSprite.draw(i,0,0)}if(0!=t){switch(t){case 5:this.pause(),this.rhApp.keyNew=!1,this.quitPause=!0,t=0;break;case 101:if(this.rhFrame.fade)break;this.f_StopSamples(),this.killFrameObjects(),this.y_KillLevel(!1),this.resetFrameLayers(-1,!1),this.rhEvtProg.unBranchPrograms(),this.freeMouse(),this.freeRunHeader(),this.rhFrame.leX=this.rhFrame.leLastScrlX=this.rh3DisplayX=0,this.rhFrame.leY=this.rhFrame.leLastScrlY=this.rh3DisplayY=0,this.rhApp.resetLayers(),this.allocRunHeader(),this.initAsmLoop(),this.resetFrameLayers(-1,!1),this.prepareFrame(),this.createFrameObjects(!1),this.drawLevel(),this.loadGlobalObjectsData(),this.rhEvtProg.prepareProgram(),this.rhEvtProg.assemblePrograms(this),this.f_InitLoop(),this.showMouse(),this.captureMouse(),t=0,this.rhQuitParam=0;break;case 100:case-2:this.rhEvtProg.handle_GlobalEvents(-196611)}}return this.rhQuit=t,t},killRunLoop:function(t){var e;return this.rhQuit>100&&(this.rhQuit=il.LOOPEXIT_ENDGAME),e=this.rhQuitParam,this.saveGlobalObjectsData(),this.killFrameObjects(),this.y_KillLevel(t),this.rhEvtProg.unBranchPrograms(),this.freeRunHeader(),this.freeMouse(),this.resetFrameLayers(-1,!0),this.rhApp.endJoystick(),qc.MAKELONG(this.rhQuit,e)},initAsmLoop:function(){var t;for(t=0;t<this.rhMaxObjects;t++)this.rhObjectList[t]=null},prepareFrame:function(){var t,e,i,r;this.rhGameFlags|=il.GAMEFLAGS_LOADONCALL,this.rhGameFlags|=il.GAMEFLAGS_INITIALISING,this.rh2CreationCount=0;var s,n=0;for(this.rhOiList=new Array(this.rhMaxOI),this.rhMouseUsed=0,t=this.rhApp.OIList.getFirstOI();null!=t;t=this.rhApp.OIList.getNextOI())if((r=t.oiType)>=Dl.OBJ_SPR){if(this.rhOiList[n]=new sl,this.rhOiList[n].copyData(t),this.rhOiList[n].oilHFII=-1,r==Dl.OBJ_TEXT||r==Dl.OBJ_QUEST)for(s=this.rhFrame.LOList.first_LevObj();null!=s;s=this.rhFrame.LOList.next_LevObj())if(s.loOiHandle==this.rhOiList[n].oilOi){this.rhOiList[n].oilHFII=s.loHandle;break}if(n++,e=t.oiOC,0!=(e.ocOEFlags&Yl.OEFLAG_MOVEMENTS)&&null!=e.ocMovements)for(i=0;i<e.ocMovements.nMovements;i++){var o=e.ocMovements.moveList[i];o.mvType==Oc.MVTYPE_MOUSE&&(this.rhMouseUsed|=1<<o.mvControl-1)}}var h;for(h=0;h<this.rhFrame.nLayers;h++)this.rhFrame.layers[h].nZOrderMax=1;return 0},createRemainingFrameObjects:function(){var t,e,i,r,s,n;for(this.rhGameFlags&=~il.GAMEFLAGS_FIRSTLOOPFADEIN,r=0,n=this.rhFrame.LOList.first_LevObj();null!=n;r++,n=this.rhFrame.LOList.next_LevObj())if(t=this.rhApp.OIList.getOIFromHandle(n.loOiHandle),e=t.oiOC,!((i=t.oiType)<Dl.KPX_BASE)&&0==(e.ocOEFlags&Yl.OEFLAG_RUNBEFOREFADEIN)&&(s=il.COF_CREATEDATSTART,n.loParentType==Ml.PARENT_NONE)){if(0==(e.ocFlags2&Yl.OCFLAGS2_VISIBLEATSTART)){if(i!=Dl.OBJ_TEXT)continue;s|=il.COF_HIDDEN}0==(e.ocOEFlags&Yl.OEFLAG_DONTCREATEATSTART)&&this.f_CreateObject(n.loHandle,n.loOiHandle,2147483648,2147483648,-1,s,-1,-1)}this.rhEvtProg.assemblePrograms(this);var o=new Date;this.rhTimerOld=o.getTime()-this.fadeTimerDelta},createFrameObjects:function(t){var e,i,r,s,n,o;for(s=0,o=this.rhFrame.LOList.first_LevObj();null!=o;s++,o=this.rhFrame.LOList.next_LevObj())if(e=this.rhApp.OIList.getOIFromHandle(o.loOiHandle),i=e.oiOC,r=e.oiType,n=il.COF_CREATEDATSTART,o.loParentType==Ml.PARENT_NONE){if(r==Dl.OBJ_TEXT&&(n|=il.COF_FIRSTTEXT),0==(i.ocFlags2&Yl.OCFLAGS2_VISIBLEATSTART)){if(r==Dl.OBJ_QUEST)continue;n|=il.COF_HIDDEN}t&&r>=Dl.KPX_BASE&&0==(i.ocOEFlags&Yl.OEFLAG_RUNBEFOREFADEIN)||0==(i.ocOEFlags&Yl.OEFLAG_DONTCREATEATSTART)&&this.f_CreateObject(o.loHandle,o.loOiHandle,2147483648,2147483648,-1,n,-1,-1)}this.rhGameFlags&=~il.GAMEFLAGS_INITIALISING},killFrameObjects:function(){var t;for(t=0;t<this.rhMaxObjects&&0!=this.rhNObjects;t++)if(null!=this.rhObjectList[t]){var e=this.rhObjectList[t];(e.hoType<32||e.hoCommon.ocIdentifier!=il.BASEIDENTIFIER)&&this.f_KillObject(t,!0)}for(t=0;t<this.rhMaxObjects&&0!=this.rhNObjects;t++)if(null!=this.rhObjectList[t]){var e=this.rhObjectList[t];e.hoType>=32&&e.hoCommon.ocIdentifier==il.BASEIDENTIFIER&&this.f_KillObject(t,!0)}},y_KillLevel:function(t){t||(0==(this.rhApp.gaNewFlags&Ka.GANF_SAMPLESOVERFRAMES)?this.rhApp.soundPlayer.stopAllSounds():this.rhApp.soundPlayer.keepCurrentSounds())},resetFrameLayers:function(t,e){var i,r;for(-1==t?(i=0,r=this.rhFrame.nLayers):(i=t,r=t+1),i=0;i<r;i++){var s=this.rhFrame.layers[i];s.reset(),s.deleteBackObjects(),e&&s.deletePlanes()}},captureMouse:function(){0!=this.rhMouseUsed&&this.setCursorCount(-1)},freeMouse:function(){0!=this.rhMouseUsed&&this.setCursorCount(0)},setCursorCount:function(t){t>=0?this.rhApp.showCursor(1):this.rhApp.showCursor(-1)},showMouse:function(){this.rhApp.showCursor(1)},hideMouse:function(){this.rhApp.showCursor(-1)},addFastLoop:function(t){var e,i;for(i=0;i<this.rh4FastLoops.size()&&(e=this.rh4FastLoops.get(i),!qc.compareStringsIgnoreCase(e.name,t));i++);if(i==this.rh4FastLoops.size()){var r=new P;this.rh4FastLoops.add(r),i=this.rh4FastLoops.size()-1,r.name=t,r.flags=0}return i},saveGlobalObjectsData:function(){var t,e,i,r,s,o,h;for(i=0;i<this.rhOiList.length;i++)if(e=this.rhOiList[i],h=e.oilObject,32767!=e.oilOi&&0==(2147483648&h)&&(s=this.rhApp.OIList.getOIFromHandle(e.oilOi),0!=(s.oiFlags&Dl.OIF_GLOBAL))){if(t=this.rhObjectList[h],e.oilType!=Dl.OBJ_TEXT&&e.oilType!=Dl.OBJ_COUNTER&&null==t.rov)continue;o=e.oilName+e.oilType.toString(),null==this.rhApp.adGO&&(this.rhApp.adGO=new n);var a=!1,l=null;for(r=0;r<this.rhApp.adGO.size();r++)if(l=this.rhApp.adGO.get(r),o==l.name){a=!0;break}0==a?(l=new nl,l.name=o,l.objects=new n,this.rhApp.adGO.add(l)):l.objects.clear();for(var u;;){if(t=this.rhObjectList[h],e.oilType==Dl.OBJ_TEXT){var c=new hl;c.text=t.rsTextBuffer,c.rsMini=t.rsMini,l.objects.add(c)}else if(e.oilType==Dl.OBJ_COUNTER){var d=new ol;d.value=t.rsValue,d.rsMini=t.rsMini,d.rsMaxi=t.rsMaxi,d.rsMiniDouble=t.rsMiniDouble,d.rsMaxiDouble=t.rsMaxiDouble,l.objects.add(d)}else{var f=new al;for(f.flags=t.rov.rvValueFlags,f.values=new Array(t.rov.rvValues.length),u=0;u<t.rov.rvValues.length;u++)f.values[u]=t.rov.rvValues[u];for(f.strings=new Array(t.rov.rvStrings.length),u=0;u<t.rov.rvStrings.length;u++)f.strings[u]=t.rov.rvStrings[u];l.objects.add(f)}if(0!=(2147483648&(h=t.hoNumNext)))break}}},loadGlobalObjectsData:function(){var t,e,i,r,s,n,o;if(null!=this.rhApp.adGO)for(i=0;i<this.rhOiList.length;i++)if(e=this.rhOiList[i],o=e.oilObject,32767!=e.oilOi&&o>=0&&(s=this.rhApp.OIList.getOIFromHandle(e.oilOi),0!=(s.oiFlags&Dl.OIF_GLOBAL)))for(n=e.oilName+e.oilType.toString(),r=0;r<this.rhApp.adGO.size();r++){var h=this.rhApp.adGO.get(r);if(n==h.name){for(var a=0;;){if(t=this.rhObjectList[o],e.oilType==Dl.OBJ_TEXT){var l=h.objects.get(a);t.rsTextBuffer=l.text,t.rsMini=l.rsMini,t.roc.rcChanged=!0,t.bTxtChanged=!0}else if(e.oilType==Dl.OBJ_COUNTER){var u=h.objects.get(a);t.rsValue=u.value,t.rsMini=u.rsMini,t.rsMaxi=u.rsMaxi,t.rsMiniDouble=u.rsMiniDouble,t.rsMaxiDouble=u.rsMaxiDouble,t.bCounterChanged=!0,t.roc.rcChanged=!0}else{var c=h.objects.get(a);t.rov.rvValueFlags=c.flags,t.rov.growValues(c.values.length),t.rov.growStrings(c.strings.length);var d;for(d=0;d<c.values.length;d++)t.rov.rvValues[d]=c.values[d];for(d=0;d<c.strings.length;d++)t.rov.rvStrings[d]=c.strings[d]}if(0!=(2147483648&(o=t.hoNumNext)))break;if(++a>=h.objects.size())break}break}}},f_CreateObject:function(t,e,i,r,s,n,o,h){for(;;){var a=new rl,l=null;-1!=t&&(l=this.rhFrame.LOList.getLOFromHandle(t));var u=this.rhApp.OIList.getOIFromHandle(e),c=u.oiOC;if(0==(c.ocFlags2&Yl.OCFLAGS2_VISIBLEATSTART)&&(n|=il.COF_HIDDEN),this.rhNObjects>=this.rhMaxObjects)break;var d=null,f=new zl;switch(u.oiType){case 2:d=new Jl;break;case 3:d=new iu;break;case 4:d=new ru;break;case 5:d=new tu;break;case 6:d=new eu;break;case 7:d=new $l;break;case 8:break;case 9:d=new Ql;break;default:d=new su(u.oiType,this),null==d.ext&&(d=null)}if(null==d)break;if(d.prototype=f,d.lo=l,h<0)for(h=0;h<this.rhMaxObjects&&null!=this.rhObjectList[h];h++);if(h>=this.rhMaxObjects)return-1;this.rhObjectList[h]=d,this.rhNObjects++,d.hoIdentifier=c.ocIdentifier,d.hoOEFlags=c.ocOEFlags,h>this.rh4ObjectCurCreate&&this.rh4ObjectAddCreate++,d.hoNumber=h,this.rh2CreationCount++,0==this.rh2CreationCount&&(this.rh2CreationCount=1),d.hoCreationId=this.rh2CreationCount,d.hoOi=e,d.hoHFII=t,d.hoType=u.oiType,this.oi_Insert(d),d.hoAdRunHeader=this,d.hoCallRoutine=!0,d.hoCommon=c,0==(d.hoOEFlags&Yl.OEFLAG_MANUALSLEEP)&&(d.hoOEFlags&=~Yl.OEFLAG_NEVERSLEEP,0!=(d.hoLimitFlags&sl.OILIMITFLAGS_QUICKBACK)&&0!=(this.rhFrame.leFlags&za.LEF_TOTALCOLMASK)&&(d.hoOEFlags|=Yl.OEFLAG_NEVERSLEEP),0!=(d.hoLimitFlags&(sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKBORDER))&&(d.hoOEFlags|=Yl.OEFLAG_NEVERSLEEP));var p=i;2147483648==p&&(p=l.loX),a.cobX=p,d.hoX=p;var m=r;2147483648==m&&(m=l.loY),a.cobY=m,d.hoY=m,null!=l&&-1==o&&(o=l.loLayer),a.cobLayer=o,d.hoLayer=o;var g=this.rhFrame.layers[o];return g.nZOrderMax++,a.cobZOrder=g.nZOrderMax,a.cobFlags=n,a.cobDir=s,a.cobLevObj=l,d.roc=null,0!=(d.hoOEFlags&(Yl.OEFLAG_ANIMATIONS|Yl.OEFLAG_MOVEMENTS|Yl.OEFLAG_SPRITES))&&(d.roc=new Zl,d.roc.init()),d.rom=null,0!=(d.hoOEFlags&Yl.OEFLAG_MOVEMENTS)&&(d.rom=new Vc,0==(a.cobFlags&il.COF_NOMOVEMENT)&&d.rom.init(0,d,c,a,-1)),d.roa=null,0!=(d.hoOEFlags&Yl.OEFLAG_ANIMATIONS)&&(d.roa=new pl,d.roa.init(d)),d.ros=null,0!=(d.hoOEFlags&Yl.OEFLAG_SPRITES)&&(d.ros=new cc,d.ros.init1(d,c,a)),d.rov=null,0!=(d.hoOEFlags&Yl.OEFLAG_VALUES)&&(d.rov=new pc,d.rov.init(d,c,a)),d.init(c,a),0!=(d.hoOEFlags&Yl.OEFLAG_SPRITES)&&d.ros.init2(!0),this.rhLoopCount>=1&&d.callComputeNewDisplay(),h}return-1},f_KillObject:function(t,e){var i=this.rhObjectList[t];if(null!=i){if(1==e&&0==i.hoCreationId)return this.rhObjectList[t]=null,void this.rhNObjects--;this.killShootPtr(i),null!=i.rom&&i.rom.kill(e),null!=i.rov&&i.rov.kill(e),null!=i.ros&&i.ros.kill(e),null!=i.roc&&i.roc.kill(e),i.kill(e),this.oi_Delete(i),this.rhObjectList[t]=null,this.rhNObjects--}},destroy_Add:function(t){var e=Math.floor(t/32),i=1<<(31&t);this.rhDestroyList[e]|=i,this.rhDestroyPos++},destroy_List:function(){if(0!=this.rhDestroyPos)for(var t,e,i=0;i<this.rhMaxObjects;){if(0!=(t=this.rhDestroyList[i/32])){for(this.rhDestroyList[i/32]=0,e=0;0!=t&&e<32;e++){if(0!=(1&t)){var r=this.rhObjectList[i+e];null!=r&&1==r.hoOiList.oilNObjects&&this.rhEvtProg.handle_Event(r,r.hoType|-33<<16),this.f_KillObject(i+e,!1),this.rhDestroyPos--}t>>=1}if(0==this.rhDestroyPos)return}i+=32}},killShootPtr:function(t){var e,i,r=0;if(0!=(t.hoFlags&zl.HOF_SHOOTER))for(e=0;e<this.rhNObjects;e++){for(;null==this.rhObjectList[r];)r++;if(i=this.rhObjectList[r],r++,null!=i.rom&&i.roc.rcMovementType==Oc.MVTYPE_BULLET){var s=i.rom.rmMovement;s.MBul_ShootObject==t&&1==s.MBul_Wait&&s.startBullet()}}},callComputeNewDisplay:function(){var t,e,i;for(t=0,i=0;t<this.rhNObjects;t++){for(;null==this.rhObjectList[i];)i++;e=this.rhObjectList[i],i++,e.createFont()}for(t=0,i=0;t<this.rhNObjects;t++){for(;null==this.rhObjectList[i];)i++;e=this.rhObjectList[i],i++,e.callComputeNewDisplay()}},oi_Insert:function(t){var e,i=t.hoOi;for(e=0;e<this.rhMaxOI&&this.rhOiList[e].oilOi!=i;e++);var r=this.rhOiList[e];if(0!=(2147483648&r.oilObject))r.oilObject=t.hoNumber,t.hoNumPrev=2147483648|e,t.hoNumNext=2147483648;else{var s=this.rhObjectList[r.oilObject];t.hoNumPrev=s.hoNumPrev,s.hoNumPrev=t.hoNumber,t.hoNumNext=s.hoNumber,r.oilObject=t.hoNumber}t.hoEvents=r.oilEvents,t.hoOiList=r,t.hoLimitFlags=r.oilLimitFlags,-1==t.hoHFII?t.hoHFII=r.oilHFII:-1==r.oilHFII&&(r.oilHFII=t.hoHFII),r.oilNObjects+=1},oi_Delete:function(t){var e=t.hoOiList;e.oilNObjects-=1;var i;if(0==(2147483648&t.hoNumPrev))if(i=this.rhObjectList[t.hoNumPrev],0==(2147483648&t.hoNumNext)){var r=this.rhObjectList[t.hoNumNext];null!=i&&(i.hoNumNext=t.hoNumNext),null!=r&&(r.hoNumPrev=t.hoNumPrev)}else null!=i&&(i.hoNumNext=2147483648);else 0==(2147483648&t.hoNumNext)?null!=(i=this.rhObjectList[t.hoNumNext])&&(i.hoNumPrev=t.hoNumPrev,e.oilObject=i.hoNumber):e.oilObject=2147483648},CreateBodies:function(){var t=this.GetBase();if(null!=t){var e,i=0;for(e=0;e<this.rhNObjects;i++,e++){for(;null==this.rhObjectList[i];)i++;var r=this.rhObjectList[i];r.hoType>=32&&(r.hoCommon.ocIdentifier==il.FANIDENTIFIER||r.hoCommon.ocIdentifier==il.TREADMILLIDENTIFIER||r.hoCommon.ocIdentifier==il.PARTICULESIDENTIFIER||r.hoCommon.ocIdentifier==il.ROPEANDCHAINIDENTIFIER||r.hoCommon.ocIdentifier==il.MAGNETIDENTIFIER?r.ext.rStartObject():r.hoCommon.ocIdentifier==il.BASEIDENTIFIER&&r.ext.rStartObject())}for(i=0,e=0;e<this.rhNObjects;i++,e++){for(;null==this.rhObjectList[i];)i++;var r=this.rhObjectList[i];if(0!=(r.hoOEFlags&Yl.OEFLAG_MOVEMENTS)){var s=!1;if(r.roc.rcMovementType==Oc.MVTYPE_EXT){var n=r.hoCommon.ocMovements.moveList[r.rom.rmMvtNum];n.isPhysics&&(r.rom.rmMovement.movement.CreateBody(),s=!0)}0==s&&2==r.hoType&&t.rAddNormalObject(r)}}for(i=0,e=0;e<this.rhNObjects;i++,e++){for(;null==this.rhObjectList[i];)i++;var r=this.rhObjectList[i];if(0!=(r.hoOEFlags&Yl.OEFLAG_MOVEMENTS)&&r.roc.rcMovementType==Oc.MVTYPE_EXT){var n=r.hoCommon.ocMovements.moveList[r.rom.rmMvtNum];n.isPhysics&&r.rom.rmMovement.movement.CreateJoint()}}}},GetBase:function(){if(0==this.rh4Box2DSearched){this.rh4Box2DSearched=!0,this.rh4Box2DBase=null;var t,e=0;for(t=0;t<this.rhNObjects;e++,t++){for(;null==this.rhObjectList[e];)e++;var i=this.rhObjectList[e];if(i.hoType>=32&&i.hoCommon.ocIdentifier==il.BASEIDENTIFIER){this.rh4Box2DBase=i.ext;break}}}return this.rh4Box2DBase},GetMBase:function(t){if(t&&0==(t.hoFlags&zl.HOF_DESTROYED)&&0!=(t.hoOEFlags&Yl.OEFLAG_MOVEMENTS)&&t.roc.rcMovementType==Oc.MVTYPE_EXT){if(t.hoCommon.ocMovements.moveList[t.rom.rmMvtNum].isPhysics)return t.rom.rmMovement.movement}return null},addPhysicsAttractor:function(t){if(t.hoCommon.ocIdentifier==il.FANIDENTIFIER||t.hoCommon.ocIdentifier==il.TREADMILLIDENTIFIER||t.hoCommon.ocIdentifier==il.MAGNETIDENTIFIER||t.hoCommon.ocIdentifier==il.ROPEANDCHAINIDENTIFIER){var e,i=0;for(e=0;e<this.rhNObjects;i++,e++){for(;null==this.rhObjectList[i];)i++;var r=this.rhObjectList[i];r.hoType>=32&&r.hoCommon.ocIdentifier==il.BASEIDENTIFIER&&(t.hoCommon.ocIdentifier==il.FANIDENTIFIER?t.ext.identifier==r.ext.identifier&&r.ext.fans.add(t.ext):t.hoCommon.ocIdentifier==il.TREADMILLIDENTIFIER?t.ext.identifier==r.ext.identifier&&r.ext.treadmills.add(t.ext):t.hoCommon.ocIdentifier==il.MAGNETIDENTIFIER?t.ext.identifier==r.ext.identifier&&r.ext.magnets.add(t.ext):t.hoCommon.ocIdentifier==il.ROPEANDCHAINIDENTIFIER&&t.ext.identifier==r.ext.identifier&&r.ext.ropes.add(t.ext))}if(t.hoCommon.ocIdentifier!=il.ROPEANDCHAINIDENTIFIER)for(i=0,e=0;e<this.rhNObjects;i++,e++){for(;null==this.rhObjectList[i];)i++;var s=this.rhObjectList[i];if(s.hoType==Dl.OBJ_SPR){var n=this.GetMBase(s);n&&t.ext.rAddObject(n)}}}},getDir:function(t){return null!=t.rom&&null!=t.rom.rmMovement?t.rom.rmMovement.getDir():t.roc.rcDir},pause:function(t){if(0==this.rh2PauseCompteur){this.rh2PauseCompteur=1,this.rh2PauseTimer=this.rhApp.timer;var e,i=0;for(e=0;e<this.rhNObjects;e++){for(;null==this.rhObjectList[i];)i++;var r=this.rhObjectList[i];i++,r.hoType>=Dl.KPX_BASE&&r.ext.pauseRunObject()}t||this.rhApp.soundPlayer.pause()}},resume:function(){if(!this.noResume&&0!=this.rh2PauseCompteur){this.rh2PauseCompteur=0,this.captureMouse();var t,e=0;for(t=0;t<this.rhNObjects;t++){for(;null==this.rhObjectList[e];)e++;var i=this.rhObjectList[e];e++,i.hoType>=Dl.KPX_BASE&&i.ext.continueRunObject()}this.rhApp.soundPlayer.resume();var r=this.rhApp.timer;r-=this.rh2PauseTimer,this.rhTimerOld+=r,this.rh4PauseKey=0,this.quitPause=!1}},f_StopSamples:function(){this.rhApp.soundPlayer.stopAllSounds()},autoResize:function(){var t,e=0;for(t=0;t<this.rhNObjects;t++){for(;null==this.rhObjectList[e];)e++;var i=this.rhObjectList[e];e++,i.autoResize()}},find_HeaderObject:function(t){var e,i=0;for(e=0;e<this.rhNObjects;e++){for(;null==this.rhObjectList[i];)i++;if(t==this.rhObjectList[i].hoHFII)return rhObjectList[i];i++}return null},check_Ladder:function(t,e,i){var r=this.y_GetLadderAt(t,e,i);return null!=r?r.top:il.INTBAD},y_GetLadderAt:function(t,e,i){e-=this.rhWindowX,i-=this.rhWindowY;var r,s;for(-1==t?(r=0,s=this.rhFrame.nLayers):(r=t,s=t+1);r<s;r++){var n=this.rhFrame.layers[r],o=n.getLadderAt(e,i);if(null!=o)return o}return null},f_InitLoop:function(){var t=this.rhApp.timer
;this.rhTimerOld=t,this.rhTimer=0,this.rhLoopCount=0,this.rh4LoopTheoric=0,this.rhQuit=0,this.rhQuitBis=0,this.rhDestroyPos=0;var e;for(e=0;e<(this.rhMaxObjects+31)/32;e++)this.rhDestroyList[e]=0;this.rh3WindowSx=this.rhFrame.leEditWinWidth,this.rh3WindowSy=this.rhFrame.leEditWinHeight,this.rh3XMinimumKill=-il.GAME_XBORDER,this.rh3YMinimumKill=-il.GAME_YBORDER,this.rh3XMaximumKill=this.rhLevelSx+il.GAME_XBORDER,this.rh3YMaximumKill=this.rhLevelSy+il.GAME_YBORDER;var i=this.rhWindowX;this.rh3DisplayX=i,i-=il.COLMASK_XMARGIN,i<0&&(i=this.rh3XMinimumKill),this.rh3XMinimum=i;var r=this.rhWindowY;this.rh3DisplayY=r,r-=il.COLMASK_YMARGIN,r<0&&(r=this.rh3YMinimumKill),this.rh3YMinimum=r;var s=this.rhWindowX;s+=this.rh3WindowSx+il.COLMASK_XMARGIN,s>this.rhLevelSx&&(s=this.rh3XMaximumKill),this.rh3XMaximum=s;var n=this.rhWindowY;for(n+=this.rh3WindowSy+il.COLMASK_YMARGIN,n>this.rhLevelSy&&(n=this.rh3YMaximumKill),this.rh3YMaximum=n,this.rh3Scrolling=0,this.rh4DoUpdate=0,this.rh4EventCount=0,this.rh4TimeOut=0,this.rh2PauseCompteur=0,this.rh4FakeKey=0,e=0;e<4;e++)this.rhPlayer[e]=0,this.rh2OldPlayer[e]=0,this.rh2InputMask[e]=255;for(this.rh2MouseKeys=0,this.rhEvtProg.callEndForEach=!1,this.rh4EndOfPause=-1,this.rh4OnMouseWheel=-1,this.rh4LoadCount=-1,this.rhEvtProg.rh4CheckDoneInstart=!1,this.rh4PauseKey=0,this.rh4Box2DBase=null,this.rh4Box2DSearched=!1,this.rh4ForEachs=null,this.rh4CurrentForEach=null,this.rh4CurrentForEach2=null,this.rh4TimerEvents=null,e=0;e<il.MAX_FRAMERATE;e++)this.rh4FrameRateArray[e]=20;this.rh4FrameRatePos=0},f_GameLoop:function(){if(this.rhApp.soundPlayer.checkSounds(),null!=this.rhApp.parentApp&&this.rhApp.loading)return this.rhTimerOld=this.rhApp.timer,this.rhTimer=0,this.rhQuit;if(null!=this.rhApp.modalSubappObject)return this.rhApp.modalSubappObject.handle(),0;this.bodiesCreated||(this.CreateBodies(),this.bodiesCreated=!0);var t=this.rhApp.timer,e=t-this.rhTimerOld,i=this.rhTimer;this.rhTimer=e,e-=i,this.rhTimerDelta=e,this.rh4TimeOut+=e,this.rhLoopCount+=1,this.rh4MvtTimerCoef=this.rhTimerDelta*this.rhFrame.m_dwMvtTimerBase/1e3,this.rh4FrameRateArray[this.rh4FrameRatePos]=e,++this.rh4FrameRatePos>=il.MAX_FRAMERATE&&(this.rh4FrameRatePos=0);var r;for(r=0;r<4;r++)this.rh2OldPlayer[r]=this.rhPlayer[r];if(this.joyTest(),1==this.rhApp.joystickOn?this.rhPlayer[0]|=this.rhApp.joystick.getJoystick()&this.rhJoystickMask:2==this.rhApp.joystickOn&&(this.rhPlayer[0]|=this.rhApp.getJoystick()&this.rhJoystickMask),0!=this.rhMouseUsed){this.getMouseCoords(),this.rh2MouseKeys=0,this.rhApp.keyBuffer[Ka.VK_LBUTTON]&&(this.rh2MouseKeys|=16),this.rhApp.keyBuffer[Ka.VK_RBUTTON]&&(this.rh2MouseKeys|=32);var s=this.rhMouseUsed;for(r=0;r<this.rhNPlayers;r++){if(0!=(1&this.mouseUsed)){var n=207&this.rhPlayer[r];n|=this.rh2MouseKeys,this.rhPlayer[r]=n}s>>=1}}else this.getMouseCoords();var o;for(r=0;r<4;r++)if(o=this.rhPlayer[r]&il.plMasks[4*this.rhNPlayers+r],o&=this.rh2InputMask[r],this.rhPlayer[r]=o,o^=this.rh2OldPlayer[r],this.rh2NewPlayer[r]=o,0!=o)if(0!=(240&(o&=this.rhPlayer[r])))this.rhEvtProg.rhCurOi=r,o=this.rh2NewPlayer[r],0!=(240&o)&&(this.rhEvtProg.rhCurParam0=o,this.rhEvtProg.handle_GlobalEvents(-196615)),0!=(15&o)&&(this.rhEvtProg.rhCurParam0=o,this.rhEvtProg.handle_GlobalEvents(-196615));else{var h=this.rhEvtProg.listPointers[this.rhEvtProg.rhEvents[-Dl.OBJ_PLAYER]+4];0!=h&&(this.rhEvtProg.rhCurParam0=o,this.rhEvtProg.computeEventList(h,null))}if(0!=this.rhNObjects){var a=this.rhNObjects,l=0;do{for(this.rh4ObjectAddCreate=0;null==this.rhObjectList[l];)l++;var u=this.rhObjectList[l];u.hoPrevNoRepeat=u.hoBaseNoRepeat,u.hoBaseNoRepeat=null,u.hoCallRoutine&&(this.rh4ObjectCurCreate=l,u.handle()),a+=this.rh4ObjectAddCreate,l++,a--}while(0!=a)}return this.rh3CollisionCount++,this.rhEvtProg.compute_TimerEvents(),this.rhEvtProg.handle_TimerEvents(),this.rhEvtProg.rhEventAlways&&0==(this.rhGameFlags&il.GAMEFLAGS_FIRSTLOOPFADEIN)&&this.rhEvtProg.computeEventList(0,null),this.rhEvtProg.handle_PushedEvents(),this.destroy_List(),this.doScroll(),this.rhEvtProg.rh2CurrentClick=-1,this.rh4EventCount++,this.rh4FakeKey=0,0==this.rhQuit?this.rhQuitBis:(this.rhQuit!=il.LOOPEXIT_NEXTLEVEL&&this.rhQuit!=il.LOOPEXIT_PREVLEVEL&&this.rhQuit!=il.LOOPEXIT_ENDGAME&&this.rhQuit!=il.LOOPEXIT_GOTOLEVEL&&this.rhQuit!=il.LOOPEXIT_QUIT&&this.rhQuit!=il.LOOPEXIT_NEWGAME||this.rhEvtProg.handle_GlobalEvents(-65539),this.rhQuit)},joyTest:function(){var t;for(t=0;t<4;t++)this.rhPlayer[t]=0;var e=this.rhApp.getCtrlKeys();for(t=0;t<4;t++){var i;for(i=0;i<Ka.MAX_KEY;i++)this.rhApp.keyBuffer[e[t*Ka.MAX_KEY+i]]&&(this.rhPlayer[t]|=1<<i)}},getMouseCoords:function(){this.rh2MouseX=this.rhApp.mouseX+this.rhWindowX-this.rhApp.xOffset,this.rh2MouseY=this.rhApp.mouseY+this.rhWindowY-this.rhApp.yOffset},newHandle_Collisions:function(t){t.rom.rmMoveFlag=!1,il.bMoveChanged=!1,t.rom.rmEventFlags=0;var e,i,r,s;if(0!=(t.hoLimitFlags&sl.OILIMITFLAGS_QUICKBORDER)){if(i=this.quadran_In(t.roc.rcOldX1,t.roc.rcOldY1,t.roc.rcOldX2,t.roc.rcOldY2),0!=i&&0==(r=this.quadran_In(t.hoX-t.hoImgXSpot,t.hoY-t.hoImgYSpot,t.hoX-t.hoImgXSpot+t.hoImgWidth,t.hoY-t.hoImgYSpot+t.hoImgHeight))&&0!=(s=i^r)&&(t.rom.rmEventFlags|=Vc.EF_GOESINPLAYFIELD,this.rhEvtProg.rhCurParam0=s,this.rhEvtProg.handle_Event(t,-720896|65535&t.hoType)),0!=((e=this.quadran_In(t.hoX-t.hoImgXSpot,t.hoY-t.hoImgYSpot,t.hoX-t.hoImgXSpot+t.hoImgWidth,t.hoY-t.hoImgYSpot+t.hoImgHeight))&t.rom.rmWrapping)){var n=t.rom.rmMoveFlag;0!=(e&il.BORDER_LEFT)?t.rom.rmMovement.setXPosition(t.hoX+this.rhLevelSx):0!=(e&il.BORDER_RIGHT)&&t.rom.rmMovement.setXPosition(t.hoX-this.rhLevelSx),0!=(e&il.BORDER_TOP)?t.rom.rmMovement.setYPosition(t.hoY+this.rhLevelSy):0!=(e&il.BORDER_BOTTOM)&&t.rom.rmMovement.setYPosition(t.hoY-this.rhLevelSy),t.roc.rcMovementType!=Oc.MVTYPE_PLATFORM&&t.roc.rcMovementType!=Oc.MVTYPE_EXT&&(t.rom.rmMoveFlag=n)}i=this.quadran_Out(t.roc.rcOldX1,t.roc.rcOldY1,t.roc.rcOldX2,t.roc.rcOldY2),i!=il.BORDER_ALL&&(r=this.quadran_Out(t.hoX-t.hoImgXSpot,t.hoY-t.hoImgYSpot,t.hoX-t.hoImgXSpot+t.hoImgWidth,t.hoY-t.hoImgYSpot+t.hoImgHeight),0!=(s=~i&r)&&(t.rom.rmEventFlags|=Vc.EF_GOESOUTPLAYFIELD,this.rhEvtProg.rhCurParam0=s,this.rhEvtProg.handle_Event(t,-786432|65535&t.hoType)))}if(0!=(t.hoLimitFlags&sl.OILIMITFLAGS_QUICKBACK)&&(t.roc.rcMovementType==Oc.MVTYPE_PLATFORM?t.rom.rmMovement.mpHandle_Background():this.colMask_TestObject_IXY(t,t.roc.rcImage,t.roc.rcAngle,t.roc.rcScaleX,t.roc.rcScaleY,t.hoX,t.hoY,0,za.CM_TEST_PLATFORM)&&this.rhEvtProg.handle_Event(t,-851968|65535&t.hoType)),0!=(t.hoLimitFlags&sl.OILIMITFLAGS_ONCOLLIDE)){var o=this.objectAllCol_IXY(t,t.roc.rcImage,t.roc.rcAngle,t.roc.rcScaleX,t.roc.rcScaleY,t.hoX,t.hoY,t.hoOiList.oilColList);if(null!=o){var h;for(h=0;h<o.size();h++){var a=o.get(h);if(0==(a.hoFlags&zl.HOF_DESTROYED)){var l=t.hoType,u=t,c=a;u.hoType>c.hoType&&(u=a,c=t,l=u.hoType),this.rhEvtProg.rhCurParam0=c.hoOi,this.rhEvtProg.rh1stObjectNumber=c.hoNumber,this.rhEvtProg.handle_Event(u,-917504|65535&l)}}}}return il.bMoveChanged},objectAllCol_IXY:function(t,e,i,r,s,o,h,a){var l,u,c=null,d=o-t.hoImgXSpot,f=d+t.hoImgWidth,p=h-t.hoImgYSpot,m=p+t.hoImgHeight;if(0!=(t.hoFlags&zl.HOF_NOCOLLISION)||0!=(t.hoFlags&zl.HOF_DESTROYED))return c;var g,v=!1,_=null,P=-1;t.hoType==Dl.OBJ_SPR&&0==(t.ros.rsFlags&cc.RSFLAG_COLBOX)&&(v=!0),t.hoType==Dl.OBJ_SPR&&(P=t.ros.rsLayer);var E=t.hoFlags;t.hoFlags|=zl.HOF_NOCOLLISION;var A,O,b,S,T=0;if(null!=a){var y=0;for(y=0;y<a.length;y+=2)for(var C=this.rhOiList[a[y+1]],L=C.oilObject;0==(2147483648&L);)if(O=this.rhObjectList[L],L=O.hoNumNext,0==(O.hoFlags&zl.HOF_NOCOLLISION)&&0==(O.hoFlags&zl.HOF_DESTROYED)&&(b=O.hoX-O.hoImgXSpot,S=O.hoY-O.hoImgYSpot,b<f&&b+O.hoImgWidth>d&&S<m&&S+O.hoImgHeight>p))switch(O.hoType){case Dl.OBJ_SPR:if((P<0||P>=0&&P==O.ros.rsLayer)&&0!=(O.ros.rsFlags&cc.RSFLAG_RAMBO)){if(0==v||0!=(O.ros.rsFlags&cc.RSFLAG_COLBOX)){null==c&&(c=new n),c.add(O);break}if(null==_&&null!=(g=this.rhApp.imageBank.getImageFromHandle(e))&&(_=g.getMask(0,i,r,s)),u=this.rhApp.imageBank.getImageFromHandle(O.roc.rcImage),null!=u&&(l=u.getMask(0,O.roc.rcAngle,O.roc.rcScaleX,O.roc.rcScaleY)),null!=_&&null!=l&&_.testMask(d,p,0,l,b,S,0)){null==c&&(c=new n),c.add(O);break}}break;case Dl.OBJ_TEXT:case Dl.OBJ_COUNTER:case Dl.OBJ_LIVES:case Dl.OBJ_SCORE:case Dl.OBJ_CCA:default:null==c&&(c=new n),c.add(O)}}else for(A=0;A<this.rhNObjects;A++){for(;null==this.rhObjectList[T];)T++;if(O=this.rhObjectList[T],T++,0==(O.hoFlags&zl.HOF_NOCOLLISION)&&(b=O.hoX-O.hoImgXSpot,S=O.hoY-O.hoImgYSpot,b<f&&b+O.hoImgWidth>d&&S<m&&S+O.hoImgHeight>p))switch(O.hoType){case Dl.OBJ_SPR:if((P<0||P>=0&&P==O.ros.rsLayer)&&0!=(O.ros.rsFlags&cc.RSFLAG_RAMBO)){if(0==v||0!=(O.ros.rsFlags&cc.RSFLAG_COLBOX)){null==c&&(c=new n),c.add(O);break}if(null==_&&null!=(g=this.rhApp.imageBank.getImageFromHandle(e))&&(_=g.getMask(0,i,r,s)),u=this.rhApp.imageBank.getImageFromHandle(O.roc.rcImage),null!=u&&(l=u.getMask(0,O.roc.rcAngle,O.roc.rcScaleX,O.roc.rcScaleY)),null!=_&&null!=l&&_.testMask(d,p,0,l,b,S,0)){null==c&&(c=new n),c.add(O);break}}break;case Dl.OBJ_TEXT:case Dl.OBJ_COUNTER:case Dl.OBJ_LIVES:case Dl.OBJ_SCORE:case Dl.OBJ_CCA:default:null==c&&(c=new n),c.add(O)}}return t.hoFlags=E,c},colMask_TestObject_IXY:function(t,e,i,r,s,n,o,h,a){var l,u,c,d,f,p,m=this.rhFrame.layers[t.hoLayer];switch(t.hoType){case Dl.OBJ_SPR:if(0!=(t.ros.rsFlags&cc.RSFLAG_COLBOX)){c=n-t.hoImgXSpot-this.rhWindowX,d=o-t.hoImgYSpot-this.rhWindowY,f=c+t.hoImgWidth,p=d+t.hoImgHeight;var g=null!=m.testRect(c,d,f,p,h,a);return g}return null!=(l=this.rhApp.imageBank.getImageFromHandle(t.roc.rcImage))&&(u=l.getMask(lc.GCMF_OBSTACLE,i,r,s),null!=m.testMask(u,n-this.rhWindowX,o-this.rhWindowY,h,a));default:c=n-t.hoImgXSpot-this.rhWindowX,d=o-t.hoImgYSpot-this.rhWindowY,f=c+t.hoImgWidth,p=d+t.hoImgHeight;var g=null!=m.testRect(c,d,f,p,h,a);return g}},colMask_Test_Rect:function(t,e,i,r,s,n){var o,h=s;-1==s&&(s=0,h=this.rhFrame.nLayers);var a,l=t+i,u=e+r;for(a=s;a<h;a++)if(o=this.rhFrame.layers[a],null!=o.testRect(t-this.rhWindowX+o.x,e-this.rhWindowY+o.y,l-this.rhWindowX+o.x,u-this.rhWindowY+o.y,0,n))return!0;return!1},colMask_Test_XY:function(t,e,i,r){var s,n=i;-1==i&&(i=0,n=this.rhFrame.nLayers);var o;for(o=i;o<n;o++)if(s=this.rhFrame.layers[o],s.testPoint(t-this.rhWindowX+s.x,e-this.rhWindowY+s.y,r))return!0;return!1},getObjectAtXY:function(t,e){var i,r,s,n,o,h,a,l=0,u=null,c=-1;for(i=0;i<this.rhNObjects;i++){for(;null==this.rhObjectList[l];)l++;if(r=this.rhObjectList[l],l++,s=r.hoX-r.hoImgXSpot,n=r.hoY-r.hoImgYSpot,o=s+r.hoImgWidth,h=n+r.hoImgHeight,t>=s&&t<o&&e>=n&&e<h&&0==(r.hoFlags&zl.HOF_DESTROYED)&&r.hoType==Dl.OBJ_SPR)if(0==(r.ros.rsFlags&cc.RSFLAG_COLBOX)){var d=this.rhApp.imageBank.getImageFromHandle(r.roc.rcImage),f=d.getMask(lc.GCMF_OBSTACLE,0,1,1);f.testPointEx(t-r.hoX,e-r.hoY,r.roc.rcAngle,r.roc.rcScaleX,r.roc.rcScaleY)&&(a=r.getChildIndex())>c&&(c=a,u=r)}else(a=r.getChildIndex())>c&&(c=a,u=r)}return u},quadran_Out:function(t,e,i,r){var s=0;return t<0&&(s|=il.BORDER_LEFT),e<0&&(s|=il.BORDER_TOP),i>this.rhLevelSx&&(s|=il.BORDER_RIGHT),r>this.rhLevelSy&&(s|=il.BORDER_BOTTOM),il.Table_InOut[s]},quadran_In:function(t,e,i,r){var s=15;return t<this.rhLevelSx&&(s&=~il.BORDER_RIGHT),e<this.rhLevelSy&&(s&=~il.BORDER_BOTTOM),i>0&&(s&=~il.BORDER_LEFT),r>0&&(s&=~il.BORDER_TOP),il.Table_InOut[s]},random:function(t){var e=31415*this.rh3Graine+1;return e&=65535,this.rh3Graine=e,e*t>>>16},get_Direction:function(t){if(0==t||-1==t)return this.random(32);var e,i=0,r=0,s=t;for(e=0;e<32;e++)0!=(1&s)&&(r++,i=e),s>>>=1;if(1==r)return i;for(r=this.random(r),s=t,e=0;e<32;e++){if(0!=(1&s)&&--r<0)return e;s>>>=1}return 0},get_EventExpressionAny:function(t){return this.rh4Tokens=t.tokens,this.rh4CurToken=0,this.flagFloat=!1,this.getExpression()},get_EventExpressionInt:function(t){return this.rh4Tokens=t.tokens,this.rh4CurToken=0,this.flagFloat=!1,this.getExpression()},get_EventExpressionDouble:function(t){return this.rh4Tokens=t.tokens,this.rh4CurToken=0,this.flagFloat=!1,this.getExpression()},get_EventExpressionString:function(t){return this.rh4Tokens=t.tokens,this.rh4CurToken=0,this.flagFloat=!1,this.getExpression()},get_ExpressionInt:function(){this.flagFloat=!1;var t=this.getExpression();return t<0?Math.ceil(t):Math.floor(t)},getExpression:function(){var t,e=this.rh4PosPile;this.rh4Operators[this.rh4PosPile]=this.rh4OpeNull;do{for(this.rh4PosPile++,this.bOperande=!0,this.rh4Tokens[this.rh4CurToken].evaluate(this),this.bOperande=!1,this.rh4CurToken++;;)if(t=this.rh4Tokens[this.rh4CurToken],t.code>0&&t.code<1310720)t.code>this.rh4Operators[this.rh4PosPile-1].code?(this.rh4Operators[this.rh4PosPile]=t,this.rh4CurToken++,this.rh4PosPile++,this.bOperande=!0,this.rh4Tokens[this.rh4CurToken].evaluate(this),this.bOperande=!1,this.rh4CurToken++):(this.rh4PosPile--,this.rh4Operators[this.rh4PosPile].evaluate(this));else{if(--this.rh4PosPile==e)break;this.rh4Operators[this.rh4PosPile].evaluate(this)}}while(this.rh4PosPile>e+1);return this.rh4Results[e+1]},getCurrentResult:function(){return this.rh4Results[this.rh4PosPile]},getPreviousResult:function(){return this.rh4Results[this.rh4PosPile-1]},getNextResult:function(){return this.rh4Results[this.rh4PosPile+1]},update_PlayerObjects:function(t,e,i){t++;var r,s=0;for(r=0;r<this.rhNObjects;r++){for(;null==this.rhObjectList[s];)s++;var n=this.rhObjectList[s];if(n.hoType==e)switch(e){case 5:case 6:n.rsPlayer==t&&n.setValue(i)}s++}},actPla_FinishLives:function(t,e){var i=this.rhApp.getLives();e!=i[t]&&(0==e&&0!=i[t]&&this.rhEvtProg.push_Event(0,-262151,0,null,t),i[t]=e,this.update_PlayerObjects(t,Dl.OBJ_LIVES,e))},getMouseOnObjectsEDX:function(t,e){var i=this.rhEvtProg.evt_FirstObject(t);if(null==i)return!!e;var r,s,o,h,a,l,u=this.rhEvtProg.evtNSelectedObjects,c=0,d=new n;for(r=0;r<this.rhNObjects;r++){for(;null==this.rhObjectList[c];)c++;if(s=this.rhObjectList[c],c++,o=s.hoX-s.hoImgXSpot,h=s.hoY-s.hoImgYSpot,a=o+s.hoImgWidth,l=h+s.hoImgHeight,this.rh2MouseX>=o&&this.rh2MouseX<a&&this.rh2MouseY>=h&&this.rh2MouseY<l&&0==(s.hoFlags&zl.HOF_DESTROYED))if(s.hoType==Dl.OBJ_SPR)if(0==(s.ros.rsFlags&cc.RSFLAG_COLBOX)){var f=this.rhApp.imageBank.getImageFromHandle(s.roc.rcImage),p=f.getMask(lc.GCMF_OBSTACLE,0,1,1);p.testPointEx(this.rh2MouseX-s.hoX,this.rh2MouseY-s.hoY,s.roc.rcAngle,s.roc.rcScaleX,s.roc.rcScaleY)&&d.add(s)}else d.add(s);else d.add(s)}if(0==d.size())return!!e;if(0==e){do{for(c=0;c<d.size()&&(s=d.get(c))!=i;c++);c==d.size()&&(u--,this.rhEvtProg.evt_DeleteCurrentObject()),i=this.rhEvtProg.evt_NextObject()}while(null!=i);return 0!=u}do{for(c=0;c<d.size();c++)if((s=d.get(c))==i)return!1;i=this.rhEvtProg.evt_NextObject()}while(null!=i);return!0},txtDisplay:function(t,e,i){var r=t.evtParams[0],s=new ou;if(r.read_Position(this,16,s)){var n,o=0;for(n=0;n<this.rhNObjects;n++){for(;null==this.rhObjectList[o];)o++;var h=this.rhObjectList[o];if(o++,h.hoType==Dl.OBJ_TEXT&&h.hoOi==e&&h.hoX==s.x&&h.hoY==s.y)return h.ros.obShow(),h.hoFlags&=~zl.HOF_NOCOLLISION,h.rsMini=-2,h.txtChange(i),h.ros.rsFlash=0,h.ros.rsFlags|=cc.RSFLAG_VISIBLE,h.hoNumber}var a=this.f_CreateObject(-1,e,s.x,s.y,0,0,this.rhFrame.nLayers-1,-1);if(a>=0)return this.rhObjectList[a].txtChange(i),a}return-1},txtDoDisplay:function(t,e){if(0==(32768&t.evtOiList))return this.txtDisplay(t,t.evtOi,e);if(32767==(32767&t.evtOiList))return-1;for(var i=32767&t.evtOiList,r=this.rhEvtProg.qualToOiList[i],s=0;s<r.qoiList.length;)this.txtDisplay(t,r.qoiList[s],e),s+=2;return-1},init_Disappear:function(t){var e=!1,i=0;if(0!=(t.hoOEFlags&Yl.OEFLAG_ANIMATIONS)){if(null!=t.ros&&t.ros.initFadeOut())return;null!=t.roa&&t.roa.anim_Exist(ul.ANIMID_DISAPPEAR)&&(i=1)}if(0==i&&(e=!0),e)return t.hoCallRoutine=!1,void this.destroy_Add(t.hoNumber);null!=t.ros&&(t.ros.setColFlag(!1),t.hoFlags|=zl.HOF_NOCOLLISION),null!=t.rom&&(t.rom.kill(!1),t.rom.initSimple(t,Oc.MVTYPE_DISAPPEAR,!1),t.roc.rcSpeed=0),0!=(1&i)&&(t.roa.animation_Force(ul.ANIMID_DISAPPEAR),t.roa.animation_OneLoop())},isMouseOn:function(){return this.rhApp.cursorCount>0},getRGBAt:function(t,e,i){var r=0;if(-1!=t.roc.rcImage){r=this.rhApp.imageBank.getImageFromHandle(t.roc.rcImage).getPixel(e,i),r=swapRGB(r)}return r},drawLevel:function(){var t,e,i=new h;for(e=0;e<this.rhFrame.nLayers;e++){var r=this.rhFrame.layers[e],s=0!=(r.dwOptions&kl.FLOPT_WRAP_HORZ),n=0!=(r.dwOptions&kl.FLOPT_WRAP_VERT);if(0==e){var o=this.rhFrame.leWidth;s&&(o*=2);var a=this.rhFrame.leHeight;n&&(a*=2)}var l,u=r.nBkdLOs;for(l=0;l<u;l++){t=this.rhFrame.LOList.getLOFromIndex(r.nFirstLOIndex+l);t.loType<Dl.OBJ_SPR&&(i.left=t.loX,i.top=t.loY);var c;c=new Nl(this.rhApp,i.left,i.top,t,null,0),c.addInstance(0,r),s?(c=new Nl(this.rhApp,this.rhFrame.leWidth+i.left,i.top,t,null,0),c.addInstance(1,r),i.left+c.width>this.rhFrame.leWidth&&(c=new Nl(this.rhApp,i.left-this.rhFrame.leWidth,i.top,t,null,0),c.addInstance(4,r)),n&&(c=new Nl(this.rhApp,i.left,this.rhFrame.leHeight+i.top,t,null,0),c.addInstance(2,r),c=new Nl(this.rhApp,this.rhFrame.leWidth+i.left,this.rhFrame.leHeight+i.top,t,null,0),c.addInstance(3,r),i.top+c.height>this.rhFrame.leHeight&&(c=new Nl(this.rhApp,i.left,i.top-this.rhFrame.leHeight,t,null,0),c.addInstance(5,r)))):n&&(c=new Nl(this.rhApp,i.left,this.rhFrame.leHeight+i.top,t,null,0),c.addInstance(2,r),i.top+c.height>this.rhFrame.leHeight&&(c=new Nl(this.rhApp,i.left,i.top-this.rhFrame.leHeight,t,null,0),c.addInstance(5,r)))}}},scrollLayers:function(){for(var t,e,i,r=this.rh3DisplayX,s=this.rh3DisplayY,n=0;n<this.rhFrame.nLayers;n++){t=this.rhFrame.layers[n],e=r,i=s,0!=(t.dwOptions&(kl.FLOPT_XCOEF|kl.FLOPT_YCOEF))&&(0!=(t.dwOptions&kl.FLOPT_XCOEF)&&(e*=t.xCoef),0!=(t.dwOptions&kl.FLOPT_YCOEF)&&(i*=t.yCoef)),e+=t.realX,i+=t.realY,e+=t.dx,i+=t.dy;var o=0!=(t.dwOptions&kl.FLOPT_WRAP_HORZ),h=0!=(t.dwOptions&kl.FLOPT_WRAP_VERT);o&&(e%=this.rhFrame.leWidth),h&&(i%=this.rhFrame.leHeight),t.x=e,t.y=i,t.realX+=t.dx,t.realY+=t.dy,t.planeBack.x=-e+this.rhApp.xOffset,t.planeBack.y=-i+this.rhApp.yOffset,t.planeQuickDisplay.x=-e+this.rhApp.xOffset,t.planeQuickDisplay.y=-i+this.rhApp.yOffset,t.planeSprites.x=-e+this.rhApp.xOffset,t.planeSprites.y=-i+this.rhApp.yOffset}this.rhFrame.leX=r,this.rhFrame.leY=s},hideLayer:function(t){if(t>=0&&t<this.rhFrame.nLayers){this.rhFrame.layers[t].hide()}},showLayer:function(t){if(t>=0&&t<this.rhFrame.nLayers){this.rhFrame.layers[t].show()}},hideShowLayers:function(){var t;for(t=0;t<this.rhFrame.nLayers;t++){var e=this.rhFrame.layers[t];e.dwOptions&kl.FLOPT_TOHIDE&&e.hide()}},setDisplay:function(t,e,i,r){t-=Math.floor(this.rh3WindowSx/2),e-=Math.floor(this.rh3WindowSy/2);var s=t,n=e;if(-1!=i&&i<this.rhFrame.nLayers){var o=this.rhFrame.layers[i];if(o.xCoef>1){var h=s-this.rhWindowX;h/=o.xCoef,s=qc.floatToInt(this.rhWindowX+h)}if(o.yCoef>1){var a=n-this.rhWindowY;a/=o.yCoef,n=qc.floatToInt(this.rhWindowY+a)}}t=s,e=n,t<0&&(t=0),e<0&&(e=0);var l=t+this.rh3WindowSx,u=e+this.rh3WindowSy;l>this.rhLevelSx&&(l=this.rhLevelSx-this.rh3WindowSx,l<0&&(l=0),t=l),u>this.rhLevelSy&&(u=this.rhLevelSy-this.rh3WindowSy,u<0&&(u=0),e=u),0!=(1&r)&&t!=this.rhWindowX&&(this.rh3DisplayX=t,this.rh3Scrolling|=il.RH3SCROLLING_SCROLL),0!=(2&r)&&e!=this.rhWindowY&&(this.rh3DisplayY=e,this.rh3Scrolling|=il.RH3SCROLLING_SCROLL)},updateWindowPos:function(t,e){var i=!1;this.rh4WindowDeltaX=t-this.rhWindowX,this.rh4WindowDeltaY=e-this.rhWindowY,0==this.rh4WindowDeltaX&&0==this.rh4WindowDeltaY||(i=!0);var r;if(!i)for(var s=0;s<this.rhFrame.nLayers;s++)if(r=this.rhFrame.layers[s],0!=r.dx||0!=r.dy){i=!0;break}var n=this.rhWindowX,o=this.rhWindowY,h=t,a=e,l=this.rh4WindowDeltaX,u=this.rh4WindowDeltaY;if(this.rhWindowX=t,this.rh3XMinimum=t-il.COLMASK_XMARGIN,this.rh3XMinimum<0&&(this.rh3XMinimum=this.rh3XMinimumKill),this.rhWindowY=e,this.rh3YMinimum=e-il.COLMASK_YMARGIN,this.rh3YMinimum<0&&(this.rh3YMinimum=this.rh3YMinimumKill),this.rh3XMaximum=t+this.rh3WindowSx+il.COLMASK_XMARGIN,this.rh3XMaximum>this.rhLevelSx&&(this.rh3XMaximum=this.rh3XMaximumKill),this.rh3YMaximum=e+this.rh3WindowSy+il.COLMASK_YMARGIN,this.rh3YMaximum>this.rhLevelSy&&(this.rh3YMaximum=this.rh3YMaximumKill),i)for(var c=0,d=0;d<this.rhNObjects;d++){for(;null==this.rhObjectList[c];)c++;var f=this.rhObjectList[c];if(c++,0!=(f.hoOEFlags&Yl.OEFLAG_SCROLLINGINDEPENDANT))null==f.rom?(f.hoX+=l,f.hoY+=u):(f.rom.rmMovement.setXPosition(f.hoX+l),f.rom.rmMovement.setYPosition(f.hoY+u));else{var p=f.hoLayer;if(p<this.rhFrame.nLayers){var m=n,g=o,v=h,_=a;r=this.rhFrame.layers[p],0!=(r.dwOptions&kl.FLOPT_XCOEF)&&(m=r.xCoef*m,v=r.xCoef*v),0!=(r.dwOptions&kl.FLOPT_YCOEF)&&(g=r.yCoef*g,_=r.yCoef*_);var P=f.hoX+m-v+l-r.dx,E=f.hoY+g-_+u-r.dy;0==(f.hoOEFlags&Yl.OEFLAG_MOVEMENTS)?(f.hoX=P,f.hoY=E):(f.rom.rmMovement.setXPosition(P),f.rom.rmMovement.setYPosition(E)),f.forcePosition()}}}},doScroll:function(){if(0!=(this.rh3Scrolling&il.RH3SCROLLING_SCROLL)){this.rh3Scrolling=0;var t=this.rhFrame.leX!=this.rh3DisplayX||this.rhFrame.leY!=this.rh3DisplayY;if(!t)for(var e=0;e<this.rhFrame.nLayers;e++)if(0!=this.rhFrame.layers[e].dx||0!=this.rhFrame.layers[e].dy){t=!0;break}if(t){this.scrollLayers(),this.updateWindowPos(this.rhFrame.leX,this.rhFrame.leY);for(var e=0;e<this.rhFrame.nLayers;e++)this.rhFrame.layers[e].dx=0,this.rhFrame.layers[e].dy=0}this.rh3DisplayX=this.rhWindowX,this.rh3DisplayY=this.rhWindowY}},activeToBackdrop:function(t,e){var i=this.rhFrame.layers[t.hoLayer],r=this.rhApp.imageBank.getImageFromHandle(t.roc.rcImage),s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x,t.hoY-this.rhWindowY+i.y,null,r,e);s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(0,i),e!=Bl.OBSTACLE_SOLID&&e!=Bl.OBSTACLE_PLATFORM||null!=this.rh4Box2DBase&&(s.body=this.rh4Box2DBase.rAddABackdrop(t.hoX-this.rhWindowX+i.x,t.hoY-this.rhWindowY+i.y,t.roc.rcImage,e));var n=0!=(i.dwOptions&kl.FLOPT_WRAP_HORZ),o=0!=(i.dwOptions&kl.FLOPT_WRAP_VERT);n?(s=new Nl(this.rhApp,this.rhFrame.leWidth+t.hoX-this.rhWindowX+i.x,t.hoY-this.rhWindowY+i.y,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(1,i),t.hoX+s.width>this.rhFrame.leWidth&&(s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x-this.rhFrame.leWidth,t.hoY-this.rhWindowY+i.y,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(4,i)),o&&(s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x,this.rhFrame.leHeight+t.hoY-this.rhWindowY+i.y,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(2,i),s=new Nl(this.rhApp,this.rhFrame.leWidth+t.hoX-this.rhWindowX+i.x,this.rhFrame.leHeight+t.hoY-this.rhWindowY+i.y,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(3,i),t.hoY+s.height>this.rhFrame.leHeight&&(s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x,t.hoY-this.rhWindowY+i.y-this.rhFrame.leHeight,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(5,i)))):o&&(s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x,this.rhFrame.leHeight+t.hoY-this.rhWindowY+i.y,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(2,i),t.hoY+s.height>this.rhFrame.leHeight&&(s=new Nl(this.rhApp,t.hoX-this.rhWindowX+i.x,t.hoY-this.rhWindowY+i.y-this.rhFrame.leHeight,null,r,e),s.setEffect(t.ros.rsEffect,t.ros.rsEffectParam),s.addInstance(5,i)))},addBackdrop:function(t,e,i,r,s,n){var o=this.rhFrame.layers[r],h=new Nl(this.rhApp,e-this.rhWindowX+o.x,i-this.rhWindowX+o.y,null,t,s);h.addInstance(0,o),n&&(s!=Bl.OBSTACLE_SOLID&&s!=Bl.OBSTACLE_PLATFORM||null!=this.rh4Box2DBase&&(h.body=this.rh4Box2DBase.rAddABackdrop(pHo.hoX-this.rhWindowX+o.x,pHo.hoY-this.rhWindowY+o.y,pHo.roc.rcImage,s)));var a=0!=(o.dwOptions&kl.FLOPT_WRAP_HORZ),l=0!=(o.dwOptions&kl.FLOPT_WRAP_VERT);a?(h=new Nl(this.rhApp,this.rhFrame.leWidth+e-this.rhWindowX+o.x,i-this.rhWindowY+o.y,null,t,s),h.addInstance(1,o),e+h.width>this.rhFrame.leWidth&&(h=new Nl(this.rhApp,e-this.rhWindowX+o.x-this.rhFrame.leWidth,i-this.rhWindowY+o.y,null,t,s),h.addInstance(4,o)),l&&(h=new Nl(this.rhApp,e-this.rhWindowX+o.x,this.rhFrame.leHeight+i-this.rhWindowY+o.y,null,t,s),h.addInstance(2,o),h=new Nl(this.rhApp,this.rhFrame.leWidth+e-this.rhWindowX+o.x,this.rhFrame.leHeight+i-this.rhWindowY+o.y,null,t,s),h.addInstance(3,o),i+h.height>this.rhFrame.leHeight&&(h=new Nl(this.rhApp,e-this.rhWindowX+o.x,i-this.rhWindowY+o.y-this.rhFrame.leHeight,null,t,s),h.addInstance(5,o)))):l&&(h=new Nl(this.rhApp,e-this.rhWindowX+o.x,this.rhFrame.leHeight+i-this.rhWindowY+o.y,null,t,s),h.addInstance(2,o),i+h.height>this.rhFrame.leHeight&&(h=new Nl(this.rhApp,e-this.rhWindowX+o.x,i-this.rhWindowY+o.y-this.rhFrame.leHeight,null,t,s),h.addInstance(5,o)))},deleteAllBackdrop2:function(t){if(!(t<0||t>=this.rhFrame.nLayers)){this.rhFrame.layers[t].deleteAddedBackdrops()}},deleteBackdropAt:function(t,e,i,r){if(!(t<0||t>=this.rhFrame.nLayers)){this.rhFrame.layers[t].deleteAddedBackdropsAt(e-this.rhWindowX,i-this.rhWindowY,r)}},getStorage:function(t){if(null!=this.rhApp.extensionStorage){var e;for(e=0;e<this.rhApp.extensionStorage.size();e++){var i=this.rhApp.extensionStorage.get(e);if(i.id==t)return i}}return null},delStorage:function(t){if(null!=this.rhApp.extensionStorage){var e;for(e=0;e<this.rhApp.extensionStorage.size();e++){this.rhApp.extensionStorage.get(e).id==t&&this.rhApp.extensionStorage.removeIndex(e)}}},addStorage:function(t,e){null==this.getStorage(e)&&(null==this.rhApp.extensionStorage&&(this.rhApp.extensionStorage=new n),t.id=e,this.rhApp.extensionStorage.add(t))},getXMouse:function(){return 0!=this.rhMouseUsed?0:this.rh2MouseX},getYMouse:function(){return 0!=this.rhMouseUsed?0:this.rh2MouseY},onMouseWheel:function(t){this.rhWheelCount=this.rh4EventCount,t<0?this.rhEvtProg.handle_GlobalEvents(-720902):this.rhEvtProg.handle_GlobalEvents(-655366)},findFirstObject:function(t){var e,i;if(0!=this.rhNObjects)for(e=0;e<this.rhMaxObjects;e++)if((i=this.rhObjectList[e])&&i.hoOiList.oilName==t)return this.findObjectCount=i.hoOiList.oilNObjects-1,i;return null},findNextObject:function(t){if(t&&this.findObjectCount)for(var e,i=t.hoNumber+1,r=t.hoOiList.oilName;;){if(null!=(e=this.rhObjectList[i])&&e.hoOiList.oilName==r)return this.findObjectCount--,e;i++}return this.findObjectCount=0,null}},rl.COF_HIDDEN=2,sl.OILIMITFLAGS_BORDERS=15,sl.OILIMITFLAGS_BACKDROPS=16,sl.OILIMITFLAGS_ONCOLLIDE=128,sl.OILIMITFLAGS_QUICKCOL=256,sl.OILIMITFLAGS_QUICKBACK=512,sl.OILIMITFLAGS_QUICKBORDER=1024,sl.OILIMITFLAGS_QUICKSPR=2048,sl.OILIMITFLAGS_QUICKEXT=4096,sl.OILIMITFLAGS_ALL=65535,sl.prototype={copyData:function(t){this.oilOi=t.oiHandle,this.oilType=t.oiType,this.oilOIFlags=t.oiFlags;var e=t.oiOC;this.oilOCFlags2=e.ocFlags2,this.oilInkEffect=t.oiInkEffect,this.oilEffectParam=t.oiInkEffectParam,this.oilOEFlags=e.ocOEFlags,this.oilBackColor=e.ocBackColor,this.oilEventCount=0,this.oilObject=-1,this.oilLimitFlags=sl.OILIMITFLAGS_ALL,null!=t.oiName&&(this.oilName=t.oiName);var i;for(this.oilQualifiers=new Array(8),i=0;i<8;i++)this.oilQualifiers[i]=e.ocQualifiers[i]}},ll.MTYPE_OBJECT=0,ll.MTYPE_ELEMENT=1,ll.MTYPE_PARTICULE=2,ll.MTYPE_FAKEOBJECT=3,ll.MTYPE_BORDERLEFT=4,ll.MTYPE_BORDERRIGHT=5,ll.MTYPE_BORDERTOP=6,ll.MTYPE_BORDERBOTTOM=7,ll.MTYPE_OBSTACLE=8,ll.MTYPE_PLATFORM=9,ll.MSUBTYPE_OBJECT=0,ll.MSUBTYPE_BOTTOM=1,ll.MSUBTYPE_TOP=2,ll.MSUBTYPE_LEFT=3,ll.MSUBTYPE_RIGHT=4,ll.ANGLE_MAGIC=123456789,ll.prototype={InitBase:function(t,e){this.m_pHo=t,this.m_type=e,this.m_stopFlag=!1,m_currentAngle=0},AddVelocity:function(t,e){this.m_addVX=t,this.m_addVY=e,this.m_addVFlag=!0},SetVelocity:function(t,e){var i=this.m_body.GetAngle(),r=this.m_body.GetPosition();r.x+=t/2.56,r.y+=e/2.56,this.m_base.rBodySetTransform(this.m_body,r,i)},ResetAddVelocity:function(){this.m_addVFlag&&(this.m_addVFlag=!1,this.m_addVX=0,this.m_addVY=0),this.m_setVFlag&&(this.m_setVFlag=!1,this.m_setVX=0,this.m_setVY=0)},PrepareCondition:function(){this.m_stopFlag=!1,this.m_eventCount=this.m_pHo.hoAdRunHeader.rh4EventCount},IsStop:function(){return this.m_stopFlag},SetStopFlag:function(t){this.m_stopFlag=t},SetCollidingObject:function(t){this.m_collidingObject=t},CreateBody:function(){return!1},CreateJoint:function(){},SetFriction:function(t){},SetRestitution:function(t){},SetGravity:function(t){},SetDensity:function(t){},init:function(t){this.ho=t,this.rh=this.ho.hoAdRunHeader},initialize:function(t){},kill:function(){},move:function(){return!1},setPosition:function(t,e){},setXPosition:function(t){},setYPosition:function(t){},stop:function(t){},bounce:function(t){},reverse:function(){},start:function(){},setSpeed:function(t){},setMaxSpeed:function(t){},setDir:function(t){},setAcc:function(t){},setDec:function(t){},setRotSpeed:function(t){},set8Dirs:function(t){},setGravity:function(t){},extension:function(t,e){return 0},actionEntry:function(t){return 0},getSpeed:function(){return 0},getAcceleration:function(){return 0},getDeceleration:function(){return 0},getGravity:function(){return 0},dirAtStart:function(t){return this.ho.rom.dirAtStart(this.ho,t,32)},animations:function(t){this.ho.roc.rcAnim=t,null!=this.ho.roa&&this.ho.roa.animate()},collisions:function(){this.ho.hoAdRunHeader.rh3CollisionCount++,this.ho.rom.rmMovement.rmCollisionCount=this.ho.hoAdRunHeader.rh3CollisionCount,this.ho.hoAdRunHeader.newHandle_Collisions(this.ho)},approachObject:function(t,e,i,r,s,n,o){t-=this.ho.hoAdRunHeader.rhWindowX,e-=this.ho.hoAdRunHeader.rhWindowY,i-=this.ho.hoAdRunHeader.rhWindowX,r-=this.ho.hoAdRunHeader.rhWindowY;var h=this.ho.rom.rmMovement.mpApproachSprite(t,e,i,r,s,n,o);return o.x+=this.ho.hoAdRunHeader.rhWindowX,o.y+=this.ho.hoAdRunHeader.rhWindowY,h},moveIt:function(){return this.ho.rom.rmMovement.newMake_Move(this.ho.roc.rcSpeed,this.hoPtr.hoAdRunHeader.getDir(this.hoPtr))},testPosition:function(t,e,i,r,s){return this.ho.rom.rmMovement.tst_SpritePosition(t,e,i,r,s)},getJoystick:function(t){return this.ho.hoAdRunHeader.rhPlayer[t]},colMaskTestRect:function(t,e,i,r,s,n){return!this.ho.hoAdRunHeader.colMask_Test_Rect(t,e,i,r,s,n)},colMaskTestPoint:function(t,e,i,r){return!this.ho.hoAdRunHeader.colMask_Test_XY(t,e,i,r)},getParamDouble:function(){return this.ho.rom.rmMovement.callParam},getParam:function(){return this.ho.rom.rmMovement.callParam},getAngle:function(){return 0},setAngle:function(t){}},ul.ANIMID_STOP=0,ul.ANIMID_WALK=1,ul.ANIMID_RUN=2,ul.ANIMID_APPEAR=3,ul.ANIMID_DISAPPEAR=4,ul.ANIMID_BOUNCE=5,ul.ANIMID_SHOOT=6,ul.ANIMID_JUMP=7,ul.ANIMID_FALL=8,ul.ANIMID_CLIMB=9,ul.ANIMID_CROUCH=10,ul.ANIMID_UNCROUCH=11,ul.ANIMID_USER1=12,ul.tableAnimTwoSpeeds=[0,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1],ul.prototype={load:function(t){var e,i=t.getFilePointer(),r=new Array(32);for(e=0;e<32;e++)r[e]=t.readAShort();for(this.anDirs=new Array(32),this.anTrigo=new Array(32),this.anAntiTrigo=new Array(32),e=0;e<32;e++)this.anDirs[e]=null,this.anTrigo[e]=0,this.anAntiTrigo[e]=0,0!=r[e]&&(this.anDirs[e]=new fl,t.seek(i+r[e]),this.anDirs[e].load(t))},enumElements:function(t){var e;for(e=0;e<32;e++)null!=this.anDirs[e]&&this.anDirs[e].enumElements(t)},approximate:function(t){var e,i,r,s,n;for(e=0;e<32;e++)if(null==this.anDirs[e]){for(i=0,s=e+1;i<32;i++,s++)if(s&=31,null!=this.anDirs[s]){this.anTrigo[e]=s;break}for(r=0,n=e-1;r<32;r++,n--)if(n&=31,null!=this.anDirs[n]){this.anAntiTrigo[e]=n;break}s==n||i<r?this.anTrigo[e]|=64:r<i&&(this.anAntiTrigo[e]|=64)}else t<16&&0==ul.tableAnimTwoSpeeds[t]&&(this.anDirs[e].adMinSpeed=this.anDirs[e].adMaxSpeed)}},cl.tableApprox=[ul.ANIMID_APPEAR,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_RUN,ul.ANIMID_STOP,0,0,ul.ANIMID_WALK,ul.ANIMID_STOP,0,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_STOP,0,0,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_WALK,ul.ANIMID_RUN,ul.ANIMID_STOP,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_WALK,ul.ANIMID_RUN,ul.ANIMID_STOP,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],cl.prototype={load:function(t){var e=t.getFilePointer();t.skipBytes(2),this.ahAnimMax=t.readAShort();var i,r=new Array(this.ahAnimMax);for(i=0;i<this.ahAnimMax;i++)r[i]=t.readAShort();for(this.ahAnims=new Array(this.ahAnimMax),this.ahAnimExists=new Array(this.ahAnimMax),
i=0;i<this.ahAnimMax;i++)this.ahAnims[i]=null,this.ahAnimExists[i]=0,0!=r[i]&&(this.ahAnims[i]=new ul,t.seek(e+r[i]),this.ahAnims[i].load(t),this.ahAnimExists[i]=1);var s;for(s=0;s<this.ahAnimMax;s++)if(0==this.ahAnimExists[s]){var n=!1;if(s<12)for(i=0;i<4;i++){var o=this.ahAnimExists[cl.tableApprox[4*s+i]];if(0!=o){this.ahAnims[s]=this.ahAnims[cl.tableApprox[4*s+i]],n=!0;break}}if(0==n)for(i=0;i<this.ahAnimMax;i++)if(0!=this.ahAnimExists[i]){this.ahAnims[s]=this.ahAnims[i];break}}else this.ahAnims[s].approximate(s)},enumElements:function(t){var e;for(e=0;e<this.ahAnimMax;e++)0!=this.ahAnimExists[e]&&this.ahAnims[e].enumElements(t)}},fl.prototype={load:function(t){this.adMinSpeed=t.readAByte(),this.adMaxSpeed=t.readAByte(),this.adRepeat=t.readAShort(),this.adRepeatFrame=t.readAShort(),this.adNumberOfFrame=t.readAShort(),this.adFrames=new Array(this.adNumberOfFrame);var e;for(e=0;e<this.adNumberOfFrame;e++)this.adFrames[e]=t.readAShort()},enumElements:function(t){var e;for(e=0;e<this.adNumberOfFrame;e++)if(null!=t){var i=t.enumerate(this.adFrames[e]);-1!=i&&(this.adFrames[e]=i)}}},pl.anim_Defined=[ul.ANIMID_STOP,ul.ANIMID_WALK,ul.ANIMID_RUN,ul.ANIMID_BOUNCE,ul.ANIMID_SHOOT,ul.ANIMID_JUMP,ul.ANIMID_FALL,ul.ANIMID_CLIMB,ul.ANIMID_CROUCH,ul.ANIMID_UNCROUCH,12,13,14,15,-1],pl.prototype={init:function(t){if(this.hoPtr=t,this.raRoutineAnimation=0,this.init_Animation(ul.ANIMID_WALK),this.anim_Exist(ul.ANIMID_APPEAR))this.raRoutineAnimation=1,this.animation_Force(ul.ANIMID_APPEAR),this.animation_OneLoop(),this.animations();else{var e;for(e=0;pl.anim_Defined[e]>=0&&!this.anim_Exist(pl.anim_Defined[e]);e++);pl.anim_Defined[e]<0&&this.anim_Exist(ul.ANIMID_DISAPPEAR)&&(this.raRoutineAnimation=2,this.animation_Force(ul.ANIMID_DISAPPEAR),this.animation_OneLoop(),this.animations())}},init_Animation:function(t){this.hoPtr.roc.rcAnim=t,this.raAnimStopped=!1,this.raAnimForced=0,this.raAnimDirForced=0,this.raAnimSpeedForced=0,this.raAnimFrameForced=0,this.raAnimCounter=0,this.raAnimFrame=0,this.raAnimOffset=null,this.raAnimDirOffset=null,this.raAnimOn=-1,this.raAnimMinSpeed=-1,this.raAnimPreviousDir=-1,this.raAnimOffset=null,this.raAnimDirOffset=null,this.animations()},check_Animate:function(){this.animIn(0)},extAnimations:function(t){this.hoPtr.roc.rcAnim=t,this.animate()},animate:function(){switch(this.raRoutineAnimation){case 0:return this.animations();case 1:return this.anim_Appear(),!1;case 2:return this.anim_Disappear(),!1}return!1},animations:function(){var t=this.hoPtr.hoX;this.hoPtr.roc.rcOldX=t,t-=this.hoPtr.hoImgXSpot,this.hoPtr.roc.rcOldX1=t,t+=this.hoPtr.hoImgWidth,this.hoPtr.roc.rcOldX2=t;var e=this.hoPtr.hoY;return this.hoPtr.roc.rcOldY=e,e-=this.hoPtr.hoImgYSpot,this.hoPtr.roc.rcOldY1=e,e+=this.hoPtr.hoImgHeight,this.hoPtr.roc.rcOldY2=e,this.hoPtr.roc.rcOldImage=this.hoPtr.roc.rcImage,this.hoPtr.roc.rcOldAngle=this.hoPtr.roc.rcAngle,this.animIn(1)},animIn:function(t){var e=this.hoPtr.hoCommon,i=this.hoPtr.roc.rcSpeed,r=this.hoPtr.roc.rcAnim;if(0!=this.raAnimSpeedForced&&(i=this.raAnimSpeedForced-1),r==ul.ANIMID_WALK&&(0==i&&(r=ul.ANIMID_STOP),i>=75&&(r=ul.ANIMID_RUN)),0!=this.raAnimForced&&(r=this.raAnimForced-1),r!=this.raAnimOn){this.raAnimOn=r,r>=e.ocAnimations.ahAnimMax&&(r=e.ocAnimations.ahAnimMax-1);var s=e.ocAnimations.ahAnims[r];s!=this.raAnimOffset&&(this.raAnimOffset=s,this.raAnimDir=-1,this.raAnimFrame=0,0==(this.hoPtr.hoOEFlags&Yl.OEFLAG_DONTRESETANIMCOUNTER)&&(this.raAnimCounter=0))}var n,o=0,h=0,a=(this.hoPtr.hoAdRunHeader,this.hoPtr.roc.rcDir%32),l=!1;0!=this.raAnimDirForced&&(a=this.raAnimDirForced-1);var u;if(this.raAnimDir!=a){if(this.raAnimDir=a,null==(u=this.raAnimOffset.anDirs[a])){if(0!=(64&this.raAnimOffset.anAntiTrigo[a]))a=63&this.raAnimOffset.anAntiTrigo[a];else if(0!=(64&this.raAnimOffset.anTrigo[a]))a=63&this.raAnimOffset.anTrigo[a];else{var c=a;this.raAnimPreviousDir<0?a=63&this.raAnimOffset.anTrigo[a]:(a-=this.raAnimPreviousDir,a&=31,a=a>15?63&this.raAnimOffset.anTrigo[c]:63&this.raAnimOffset.anAntiTrigo[c])}u=this.raAnimOffset.anDirs[a]}else this.raAnimPreviousDir=a,u=this.raAnimOffset.anDirs[a];if(null!=this.raAnimOffset.anDirs[0]&&0!=(this.hoPtr.hoCommon.ocFlags2&Yl.OCFLAGS2_AUTOMATICROTATION)&&(this.hoPtr.roc.rcAngle=360*this.raAnimDir/32,u=this.raAnimOffset.anDirs[0],this.raAnimDirOffset=null,l=!0),this.raAnimDirOffset!=u){this.raAnimDirOffset=u,this.raAnimRepeat=u.adRepeat,this.raAnimRepeatLoop=u.adRepeatFrame;var d=u.adMinSpeed,f=u.adMaxSpeed;if(d==this.raAnimMinSpeed&&f==this.raAnimMaxSpeed||(this.raAnimMinSpeed=d,this.raAnimMaxSpeed=f,f-=d,this.raAnimDeltaSpeed=f,this.raAnimDelta=d,this.raAnimSpeed=-1),this.raAnimNumberOfFrame=u.adNumberOfFrame,0!=this.raAnimFrameForced&&this.raAnimFrameForced-1>=this.raAnimNumberOfFrame&&(this.raAnimFrameForced=0),this.raAnimFrame>=this.raAnimNumberOfFrame&&(this.raAnimFrame=0),o=u.adFrames[this.raAnimFrame],0==this.raAnimStopped&&(this.hoPtr.roc.rcImage=o,n=this.hoPtr.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(o,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY),null!=n&&(this.hoPtr.hoImgWidth=n.width,this.hoPtr.hoImgHeight=n.height,this.hoPtr.hoImgXSpot=n.xSpot,this.hoPtr.hoImgYSpot=n.ySpot,this.hoPtr.hoImgXAP=n.xAP,this.hoPtr.hoImgYAP=n.yAP),this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0),1==this.raAnimNumberOfFrame)return 0==this.raAnimMinSpeed&&(this.raAnimNumberOfFrame=0),0!=(o=this.hoPtr.roc.rcImage)&&(n=this.hoPtr.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(o,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY),null!=n&&(this.hoPtr.hoImgWidth=n.width,this.hoPtr.hoImgHeight=n.height,this.hoPtr.hoImgXSpot=n.xSpot,this.hoPtr.hoImgYSpot=n.ySpot,this.hoPtr.hoImgXAP=n.xAP,this.hoPtr.hoImgYAP=n.yAP),!1)}}if(0==t&&0==this.raAnimFrameForced)return!1;if(0==l&&0==this.raAnimNumberOfFrame)return!1;var p=this.raAnimDeltaSpeed;if(i!=this.raAnimSpeed)if(this.raAnimSpeed=i,0==p)this.raAnimDelta=this.raAnimMinSpeed,0!=this.raAnimSpeedForced&&(this.raAnimDelta=this.raAnimSpeedForced-1);else{var m=this.hoPtr.roc.rcMaxSpeed-this.hoPtr.roc.rcMinSpeed;0==m?0!=this.raAnimSpeedForced?(p*=i,p/=100,p+=this.raAnimMinSpeed,p>this.raAnimMaxSpeed&&(p=this.raAnimMaxSpeed),this.raAnimDelta=p):(p/=2,p+=this.raAnimMinSpeed,this.raAnimDelta=p):(p*=i,p/=m,p+=this.raAnimMinSpeed,p>this.raAnimMaxSpeed&&(p=this.raAnimMaxSpeed),this.raAnimDelta=p)}u=this.raAnimDirOffset,h=this.raAnimFrameForced;var g;if(0==h){if(0==this.raAnimDelta||this.raAnimStopped)return!1;g=this.raAnimCounter,h=this.raAnimFrame;var v=this.raAnimDelta;for(0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(v=Math.round(v*this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef)),g+=v;g>100;)if(g-=100,++h>=this.raAnimNumberOfFrame&&(h=this.raAnimRepeatLoop,0!=this.raAnimRepeat&&0==--this.raAnimRepeat)){if(this.raAnimFrame=this.raAnimNumberOfFrame-1,this.raAnimNumberOfFrame=0,0!=this.raAnimForced&&(this.raAnimForced=0,this.raAnimDirForced=0,this.raAnimSpeedForced=0),this.raAnimFrame<u.adNumberOfFrame&&(o=u.adFrames[this.raAnimFrame])!=this.hoPtr.roc.rcImage&&(this.hoPtr.roc.rcImage=o,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0),this.raAnimCounter=g,0!=(this.hoPtr.hoAdRunHeader.rhGameFlags&il.GAMEFLAGS_INITIALISING))return!1;l&&(this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0,null!=(n=this.hoPtr.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY))&&(this.hoPtr.hoImgWidth=n.width,this.hoPtr.hoImgHeight=n.height,this.hoPtr.hoImgXSpot=n.xSpot,this.hoPtr.hoImgYSpot=n.ySpot,this.hoPtr.hoImgXAP=n.xAP,this.hoPtr.hoImgYAP=n.yAP));var _=-2<<16;return _|=65535&this.hoPtr.hoType,this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurParam0=this.hoPtr.roa.raAnimOn,this.hoPtr.hoAdRunHeader.rhEvtProg.handle_Event(this.hoPtr,_)}this.raAnimCounter=g}else h--;return this.raAnimFrame=h,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0,o=u.adFrames[h],this.hoPtr.roc.rcImage==o&&this.raOldAngle==this.hoPtr.roc.rcAngle||(this.hoPtr.roc.rcImage=o,this.raOldAngle=this.hoPtr.roc.rcAngle,o>=0&&null!=(n=this.hoPtr.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(o,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY))&&(this.hoPtr.hoImgWidth=n.width,this.hoPtr.hoImgHeight=n.height,this.hoPtr.hoImgXSpot=n.xSpot,this.hoPtr.hoImgYSpot=n.ySpot,this.hoPtr.hoImgXAP=n.xAP,this.hoPtr.hoImgYAP=n.yAP)),!1},anim_Exist:function(t){return 0!=this.hoPtr.hoCommon.ocAnimations.ahAnimExists[t]},animation_OneLoop:function(){0==this.raAnimRepeat&&(this.raAnimRepeat=1)},animation_Force:function(t){this.raAnimForced=t+1,this.animIn(0)},animation_Restore:function(){this.raAnimForced=0,this.animIn(0)},animDir_Force:function(t){t&=31,this.raAnimDirForced=t+1,this.animIn(0)},animDir_Restore:function(){this.raAnimDirForced=0,this.animIn(0)},animSpeed_Force:function(t){t<0&&(t=0),t>100&&(t=100),this.raAnimSpeedForced=t+1,this.animIn(0)},animSpeed_Restore:function(){this.raAnimSpeedForced=0,this.animIn(0)},anim_Restart:function(){this.raAnimOn=-1,this.animIn(0)},animFrame_Force:function(t){t>=this.raAnimNumberOfFrame&&(t=this.raAnimNumberOfFrame-1),t<0&&(t=0),this.raAnimFrameForced=t+1,this.animIn(0)},animFrame_Restore:function(){this.raAnimFrameForced=0,this.animIn(0)},anim_Appear:function(){this.animIn(1),this.raAnimForced!=ul.ANIMID_APPEAR+1&&(this.anim_Exist(ul.ANIMID_STOP)||this.anim_Exist(ul.ANIMID_WALK)||this.anim_Exist(ul.ANIMID_RUN)?(this.raRoutineAnimation=0,this.animation_Restore()):(this.raRoutineAnimation=2,this.hoPtr.hoAdRunHeader.init_Disappear(this.hoPtr)))},anim_Disappear:function(){0==(this.hoPtr.hoFlags&zl.HOF_FADEOUT)&&(this.animIn(1),this.raAnimForced!=ul.ANIMID_DISAPPEAR+1&&this.hoPtr.hoAdRunHeader.destroy_Add(this.hoPtr.hoNumber))}},ml.prototype={doLoad:function(){var t=this.app.resources+"M"+qc.formatDiscName(this.handle,"png"),e=new Image;this.imageBank.mosaics[this.handle]=e;var i=this;e.onload=function(){i.app.dataHasLoaded(i)},e.onerror=function(){i.app.dataHasLoaded(i)},e.src=t}},gl.prototype={preLoad:function(t){this.file=t,this.nHandlesReel=this.file.readAShort(),this.offsetsToImage=new Array(this.nHandlesReel);var e,i,r=this.file.readAShort(),s=new vl;for(e=0;e<r;e++)i=this.file.getFilePointer(),s.loadHandle(this.file),this.offsetsToImage[s.handle]=i;this.useCount=new Array(this.nHandlesReel);var e;for(e=0;e<this.nHandlesReel;e++)this.useCount[e]=0;this.handleToIndex=null,this.nHandlesTotal=this.nHandlesReel,this.nImages=0,this.images=null},getImageFromHandle:function(t){return t>=0&&t<this.nHandlesTotal&&-1!=this.handleToIndex[t]?this.images[this.handleToIndex[t]]:null},getImageFromIndex:function(t){return t>=0&&t<this.nImages?this.images[t]:null},setAllToLoad:function(){var t;for(t=0;t<this.nHandlesReel;t++)this.offsetsToImage[t]&&(this.useCount[t]=1)},resetToLoad:function(){if(0==(this.app.dwOptions&Ka.AH2OPT_LOADDATAATSTART)&&0==(this.app.dwOptions&Ka.AH2OPT_KEEPRESOURCESBETWEENFRAMES)){var t;for(t=0;t<this.nHandlesReel;t++)this.useCount[t]=0}this.oldMosaics=null},setToLoad:function(t){this.useCount[t]++},enumerate:function(t){return this.setToLoad(t),-1},loadMosaic:function(t){null==this.mosaics[t]&&(null!=this.oldMosaics&&t<this.oldMosaics.length&&null!=this.oldMosaics[t]?this.mosaics[t]=this.oldMosaics[t]:(this.mosaics[t]=new ml(this,t),this.app.addDataToLoad(this.mosaics[t])))},load:function(t){var e;if(this.app.mosaicMaxHandle>0)if(null==this.mosaics){if(this.mosaics=new Array(this.app.mosaicMaxHandle),this.app.dwOptions&Ka.AH2OPT_LOADDATAATSTART)for(e=0;e<this.app.mosaicMaxHandle;e++)this.app.mosaics[e]&&this.loadMosaic(e)}else if(0==(this.app.dwOptions&Ka.AH2OPT_LOADDATAATSTART)){for(this.oldMosaics=new Array(this.app.mosaicMaxHandle),e=0;e<this.app.mosaicMaxHandle;e++)this.oldMosaics[e]=this.mosaics[e];for(this.mosaics=new Array(this.app.mosaicMaxHandle),e=0;e<this.app.mosaicMaxHandle;e++)this.mosaics[e]=null}for(this.nImages=0,e=0;e<this.nHandlesReel;e++)0!=this.useCount[e]&&this.nImages++;var i,r=new Array(this.nImages),s=0;for(i=0;i<this.nHandlesReel;i++)if(0!=this.useCount[i]){if(null!=this.images&&-1!=this.handleToIndex[i]&&null!=this.images[this.handleToIndex[i]]){if(r[s]=this.images[this.handleToIndex[i]],r[s].useCount=this.useCount[i],null!=this.mosaics&&null!=this.oldMosaics){var n=r[s].mosaic;n>0&&(this.mosaics[n]=this.oldMosaics[n])}}else 0!=this.offsetsToImage[i]&&(r[s]=new vl,t.seek(this.offsetsToImage[i]),r[s].load(this.app),r[s].useCount=this.useCount[i]);s++}for(this.images=r,this.handleToIndex=new Array(this.nHandlesReel),e=0;e<this.nHandlesReel;e++)this.handleToIndex[e]=-1;for(e=0;e<this.nImages;e++)this.images[e]&&(this.handleToIndex[this.images[e].handle]=e);this.nHandlesTotal=this.nHandlesReel},delImage:function(t){var e=this.getImageFromHandle(t);if(null!=e&&--e.useCount<=0){var i;for(i=0;i<this.nImages;i++)if(this.images[i]==e){this.images[i]=null,this.handleToIndex[t]=-1;break}}},addImage:function(t){var e,i=-1;for(e=this.nHandlesReel;e<this.nHandlesTotal;e++)if(-1==this.handleToIndex[e]){i=e;break}-1==i&&(this.handleToIndex.push(0),i=this.nHandlesTotal++);var r,s=-1;for(r=0;r<this.nImages;r++)if(null==this.images[r]){s=r;break}return-1==s&&(this.images.push(0),s=this.nImages++),this.handleToIndex[i]=s,this.images[s]=t,this.useCount[i]=1,i},loadImageList:function(t){var e;for(e=0;e<t.length;e++)if(t[e]>=0&&t[e]<this.nHandlesTotal&&0!=this.offsetsToImage[t[e]]&&null==this.getImageFromHandle(t[e])){var i,r=-1;for(i=0;i<this.nImages;i++)if(null==this.images[i]){r=i;break}if(-1==r){var s=new Array(this.nImages+10);for(i=0;i<this.nImages;i++)s[i]=this.images[i];for(;i<this.nImages+10;i++)s[i]=null;r=this.nImages,this.nImages+=10,this.images=s}this.handleToIndex[t[e]]=r,this.images[r]=new vl,this.images[r].useCount=1,this.file.seek(this.offsetsToImage[t[e]]),this.images[r].load(this.app)}},getImageInfoEx:function(t,e,i,r){var s;if(null==this.pIfo&&(this.pIfo=new vl),null!=(s=this.getImageFromHandle(t))){var n=s.width,o=s.height,l=s.xSpot,u=s.ySpot,c=s.xAP,d=s.yAP;return 0==e?(1!=i&&(l*=i,c*=i,n*=i),1!=r&&(u*=r,d*=r,o*=r)):(1!=i&&(l*=i,c*=i,n*=i),1!=r&&(u*=r,d*=r,o*=r),null==this.rcInfo&&(this.rcInfo=new h),null==this.hsInfo&&(this.hsInfo=new a),null==this.apInfo&&(this.apInfo=new a),this.hsInfo.x=l,this.hsInfo.y=u,this.apInfo.x=c,this.apInfo.y=d,this.rcInfo.left=this.rcInfo.top=0,this.rcInfo.right=n,this.rcInfo.bottom=o,this.doRotateRect(this.rcInfo,this.hsInfo,this.apInfo,e),n=this.rcInfo.right,o=this.rcInfo.bottom,l=this.hsInfo.x,u=this.hsInfo.y,c=this.apInfo.x,d=this.apInfo.y),this.pIfo.width=n,this.pIfo.height=o,this.pIfo.xSpot=l,this.pIfo.ySpot=u,this.pIfo.xAP=c,this.pIfo.yAP=d,this.pIfo}return s},doRotateRect:function(t,e,i,r){var s,n,o,h;if(90==r)o=0,h=1;else if(180==r)o=-1,h=0;else if(270==r)o=0,h=-1;else{var a=r*Math.PI/180;o=Math.cos(a),h=Math.sin(a)}var l,u,c,d,f,p;null==e?(c=d=f=p=0,l=u=0):(c=-e.x*o,d=-e.x*h,f=-e.y*o,p=-e.y*h,l=c+p,u=f-d);var m,g;s=null==e?t.right:t.right-e.x,c=s*o,d=s*h,m=c+p,g=f-d;var v,_;n=null==e?t.bottom:t.bottom-e.y,f=n*o,p=n*h,v=c+p,_=f-d;var P,E;P=l+v-m,E=u+_-g;var A=Math.min(l,Math.min(m,Math.min(v,P))),O=Math.min(u,Math.min(g,Math.min(_,E))),b=Math.max(l,Math.max(m,Math.max(v,P))),S=Math.max(u,Math.max(g,Math.max(_,E)));null!=i&&(null==e?(s=i.x,n=i.y):(s=i.x-e.x,n=i.y-e.y),i.x=s*o+n*h-A,i.y=n*o-s*h-O),null!=e&&(e.x=-A,e.y=-O),t.right=b-A,t.bottom=S-O}},vl.maxRotatedMasks=10,vl.createFromFile=function(t,e){var i=new vl;return i.app=t,i.img=new Image,i.img.onload=function(){i.app.imagesLoaded++,i.width=i.img.width,i.height=i.img.height},t.imagesToLoad++,t.loading=!0,i.img.src=t.resources+e,i},vl.prototype={loadHandle:function(t){this.filePointer=t.getFilePointer(),this.handle=t.readAShort(),t.skipBytes(12)},doLoad:function(){this.img=new Image;var t=this;this.img.onload=function(){t.app.dataHasLoaded(t)},this.img.onerror=function(){t.app.dataHasLoaded(t)};var e=this.app.resources+qc.formatDiscName(this.handle,"png");this.img.src=e},load:function(t){this.app=t,this.filePointer=t.file.getFilePointer(),this.handle=t.file.readAShort(),this.width=t.file.readAShort(),this.height=t.file.readAShort(),this.xSpot=t.file.readShort(),this.ySpot=t.file.readShort(),this.xAP=t.file.readShort(),this.yAP=t.file.readShort(),this.mosaic=0,this.img=null,null!=this.app.frame.mosaicHandles?(this.mosaic=this.app.frame.mosaicHandles[this.handle],0!=this.mosaic?(this.app.imageBank.loadMosaic(this.mosaic),this.mosaicX=this.app.frame.mosaicX[this.handle],this.mosaicY=this.app.frame.mosaicY[this.handle]):this.app.addDataToLoad(this)):this.app.addDataToLoad(this)},createElement:function(){var t=document.createElement("div");return t.style.width=this.width+"px",t.style.height=this.height+"px",t.style.backgroundRepeat="no-repeat",0==this.mosaic?t.style.backgroundImage="url('"+this.img.src+"')":(t.style.backgroundPosition="-"+this.mosaicX+"px -"+this.mosaicY+"px",t.style.backgroundImage="url('"+this.app.resources+"M"+qc.formatDiscName(this.mosaic,"png")+"')"),t},getPixel:function(t,e){var i=document.createElement("canvas");i.width=this.width,i.height=this.height;var r=i.getContext("2d");0==this.mosaic?r.drawImage(this.img,0,0):r.drawImage(this.app.imageBank.mosaics[this.mosaic],this.mosaicX,this.mosaicY,this.width,this.height,0,0,this.width,this.height);var s=r.getImageData(t,e,1,1);return s.data[0]<<16|s.data[1]<<8|s.data[2]},getMask:function(t,e,i,r){if(0==(t&lc.GCMF_PLATFORM)){if(null==this.maskNormal&&(this.maskNormal=new lc,this.maskNormal.createMask(this.app,this,t)),0==e&&1==i&&1==r)return this.maskNormal;var s;null==this.maskRotation&&(this.maskRotation=new n);var o,h=2147483647,a=-1;for(o=0;o<this.maskRotation.size();o++){if(s=this.maskRotation.get(o),e==s.angle&&i==s.scaleX&&r==s.scaleY)return s.mask;s.tick<h&&(h=s.tick,a=o)}return this.maskRotation.size()<this.maxRotatedMasks&&(a=-1),s=new uc,s.mask=new lc,s.mask.createRotatedMask(this.maskNormal,e,i,r),s.angle=e,s.scaleX=i,s.scaleY=r,s.tick=this.app.timer,a<0?this.maskRotation.add(s):this.maskRotation.set(a,s),s.mask}return null==this.maskPlatform&&(null==this.maskNormal&&(this.maskNormal=new lc,this.maskNormal.createMask(this.app,this,0)),this.maskPlatform=new lc,this.maskPlatform.createMask(this.app,this,t)),this.maskPlatform}},_l.prototype={preLoad:function(t){var e,i=t.readAInt();this.maxHandlesReel=0;var r=t.getFilePointer(),s=new Pl;for(e=0;e<i;e++)s.loadHandle(t),this.maxHandlesReel=Math.max(this.maxHandlesReel,s.handle+1);for(t.seek(r),this.offsetsToFonts=new Array(this.maxHandlesReel),e=0;e<i;e++)r=t.getFilePointer(),s.loadHandle(t),this.offsetsToFonts[s.handle]=r;this.useCount=new Array(this.maxHandlesReel);var e;for(e=0;e<this.maxHandlesReel;e++)this.useCount[e]=0;this.handleToIndex=null,this.maxHandlesTotal=this.maxHandlesReel,this.nFonts=0,this.fonts=null},load:function(t){var e;for(this.nFonts=0,e=0;e<this.maxHandlesReel;e++)0!=this.useCount[e]&&this.nFonts++;var i,r=new Array(this.nFonts),s=0;for(i=0;i<this.maxHandlesReel;i++)0!=this.useCount[i]&&(null!=this.fonts&&-1!=this.handleToIndex[i]&&null!=this.fonts[this.handleToIndex[i]]?(r[s]=this.fonts[this.handleToIndex[i]],r[s].useCount=this.useCount[i]):(r[s]=new Pl,t.seek(this.offsetsToFonts[i]),r[s].load(t),r[s].useCount=this.useCount[i]),s++);for(this.fonts=r,this.handleToIndex=new Array(this.maxHandlesReel),e=0;e<this.maxHandlesReel;e++)this.handleToIndex[e]=-1;for(e=0;e<this.nFonts;e++)this.handleToIndex[this.fonts[e].handle]=e;this.maxHandlesTotal=this.maxHandlesReel},getFontFromHandle:function(t){return-1==t?this.nullFont:t>=0&&t<this.maxHandlesTotal&&-1!=this.handleToIndex[t]?this.fonts[this.handleToIndex[t]]:null},getFontFromIndex:function(t){return t>=0&&t<this.nFonts?this.fonts[t]:null},getFontInfoFromHandle:function(t){return this.getFontFromHandle(t).getFontInfo()},resetToLoad:function(){if(0==(this.app.dwOption&Ka.AH2OPT_LOADDATAATSTART)&&0==(this.app.dwOptions&Ka.AH2OPT_KEEPRESOURCESBETWEENFRAMES)){var t;for(t=0;t<this.maxHandlesReel;t++)this.useCount[t]=0}},setAllToLoad:function(){var t;for(t=0;t<this.maxHandlesReel;t++)this.offsetsToFonts[t]&&(this.useCount[t]=1)},setToLoad:function(t){if(-1==t)return void(null==this.nullFont&&(this.nullFont=new Pl,this.nullFont.createDefaultFont()));this.useCount[t]++},enumerate:function(t){return this.setToLoad(t),-1},addFont:function(t){var e,i;for(i=0;i<this.nFonts&&(null==this.fonts[i]||this.fonts[i].lfHeight!=t.lfHeight||this.fonts[i].lfWeight!=t.lfWeight||this.fonts[i].lfItalic!=t.lfItalic||this.fonts[i].lfFaceName!=t.lfFaceName);i++);if(i<this.nFonts)return this.fonts[i].handle;var r=-1;for(e=this.maxHandlesReel;e<this.maxHandlesTotal;e++)if(-1==this.handleToIndex[e]){this.hFound=e;break}if(-1==r){var s=new Array(this.maxHandlesTotal+10);for(e=0;e<this.maxHandlesTotal;e++)s[e]=this.handleToIndex[e];for(;e<this.maxHandlesTotal+10;e++)s[e]=-1;r=this.maxHandlesTotal,this.maxHandlesTotal+=10,this.handleToIndex=s}var n,o=-1;for(n=0;n<this.nFonts;n++)if(null==this.fonts[n]){o=n;break}return-1==o&&(o=this.nFonts,this.fonts.push(null)),this.handleToIndex[r]=o,this.fonts[o]=new Pl,this.fonts[o].handle=r,this.fonts[o].lfHeight=t.lfHeight,this.fonts[o].lfWeight=t.lfWeight,this.fonts[o].lfItalic=t.lfItalic,this.fonts[o].lfFaceName=t.lfFaceName,r}},Pl.prototype={loadHandle:function(t){this.handle=t.readAInt(),0==t.bUnicode?t.skipBytes(72):t.skipBytes(104)},load:function(t){this.handle=t.readAInt();var e=t.getFilePointer();t.skipBytes(12),this.lfHeight=t.readAInt(),this.lfHeight<0&&(this.lfHeight=-this.lfHeight),t.readAInt(),t.readAInt(),t.readAInt(),this.lfWeight=t.readAInt(),this.lfItalic=t.readAByte(),t.readAByte(),t.readAByte(),t.readAByte(),t.readAByte(),t.readAByte(),t.readAByte(),t.readAByte(),this.lfFaceName=t.readAString(),0==t.bUnicode?t.seek(e+72):t.seek(e+104)},getFontInfo:function(){var t=new l;return t.lfHeight=this.lfHeight,t.lfWeight=this.lfWeight,t.lfItalic=this.lfItalic,t.lfFaceName=this.lfFaceName,t},createDefaultFont:function(){this.lfFaceName="Arial",this.lfHeight=13,this.lfWeight=400,this.lfItalic=0},getHeight:function(){return this.lfHeight+Math.ceil(this.lfHeight/8)},getFont:function(){if(null==this.font){this.lfItalic?this.font="italic ":this.font="normal ";var t=100*Math.floor(this.lfWeight/100);t=Math.max(t,100),t=Math.min(t,900),this.font+=t+" ";var e=this.lfHeight;this.font+=e+"px ",this.font+=this.lfFaceName}return this.font}},El.prototype={preLoad:function(t){this.file=t,this.nHandlesReel=this.file.readAShort(),this.offsetsToSounds=new Array(this.nHandlesReel),this.useCount=new Array(this.nHandlesReel),this.handleToIndex=new Array(this.nHandlesReel);var e;for(e=0;e<this.nHandlesReel;e++)this.useCount[e]=0,this.handleToIndex[e]=-1;var e,i,r=this.file.readAShort(),s=new Al(this.app);for(e=0;e<r;e++)i=this.file.getFilePointer(),s.loadHandle(),this.offsetsToSounds[s.handle]=i;this.nHandlesTotal=this.nHandlesReel,this.nSounds=0,this.sounds=null},getSoundFromHandle:function(t){return t>=0&&t<this.nHandlesTotal&&-1!=this.handleToIndex[t]?this.sounds[this.handleToIndex[t]]:null},getSoundHandleFromName:function(t){for(var e=0;e<this.nHandlesTotal;e++)if(-1!=this.handleToIndex[e]){var i=this.sounds[this.handleToIndex[e]];if(i.name==t)return e}return-1},checkLoad:function(){var t;for(t=0;t<this.nSounds;t++)null!=this.sounds[t]&&this.sounds[t].checkLoad()},getSoundFromIndex:function(t){return t>=0&&t<this.nSounds?this.sounds[t]:null},resetToLoad:function(){if(0==(this.app.dwOptions&Ka.AH2OPT_LOADDATAATSTART)&&0==(this.app.dwOptions&Ka.AH2OPT_KEEPRESOURCESBETWEENFRAMES)){var t;for(t=0;t<this.nHandlesReel;t++)this.useCount[t]=0}},setAllToLoad:function(){var t;for(t=0;t<this.nHandlesReel;t++)this.offsetsToSounds[t]&&(this.useCount[t]=1)},addAllToLoad:function(){var t;for(t=0;t<this.nHandlesReel;t++)this.offsetsToSounds[t]&&this.app.imagesToLoad++},setToLoad:function(t){this.useCount[t]++},enumerate:function(t){return this.setToLoad(t),-1},load:function(){var t;for(this.nSounds=0,t=0;t<this.nHandlesReel;t++)0!=this.useCount[t]&&this.nSounds++;var e,i=new Array(this.nSounds),r=0;for(e=0;e<this.nHandlesReel;e++)0!=this.useCount[e]&&(null!=this.sounds&&-1!=this.handleToIndex[e]&&null!=this.sounds[this.handleToIndex[e]]?(i[r]=this.sounds[this.handleToIndex[e]],i[r].useCount=this.useCount[e]):(i[r]=new Al(this.app),this.file.seek(this.offsetsToSounds[e]),i[r].load(),i[r].useCount=this.useCount[e]),r++);for(this.sounds=i,this.handleToIndex=new Array(this.nHandlesReel),t=0;t<this.nHandlesReel;t++)this.handleToIndex[t]=-1;for(t=0;t<this.nSounds;t++)this.handleToIndex[this.sounds[t].handle]=t;this.nHandlesTotal=this.nHandlesReel,this.resetToLoad()}},Al.prototype={loadHandle:function(){this.handle=this.file.readAShort(),this.file.skipBytes(5);var t=this.file.readAShort();0==this.file.bUnicode?this.file.skipBytes(t):this.file.skipBytes(2*t)},createFromSound:function(){if(HTMLMediaElement.mozLoadFrom){var t=new Al(this.application);return t.handle=this.handle,t.sound=HTMLMediaElement.mozLoadFrom(this.sound),t.name=this.name,t.type=this.type,t.song=this.song,t.type=this.type,t}return this},doLoad:function(){var t,e=this.application.soundPlayer.probablePlayableFormats&this.type;for(0==e&&(e=this.application.soundPlayer.maybePlayableFormats&this.type),t=0;t<4&&!(e&1<<t);t++);if(t<4){var i="";switch(t){case 0:i="ogg";break;case 1:i="m4a";break;case 2:i="mp3";break;case 3:i="wav"}if(this.context){var r=this,s=new XMLHttpRequest;s.open("GET",this.application.resources+qc.formatDiscName(this.handle,i),!0),s.responseType="arraybuffer",s.addEventListener("load",function(t){r.response=s.response,r.application.soundPlayer.addDataToDecode(r)}),s.send()}else{this.sound=new Audio,this.sound.preload="auto";var r=this;this.sound.addEventListener("loadeddata",function(t){r.application.dataHasLoaded(r),r.sound.removeEventListener("loadeddata",arguments.callee,!1)},!1),this.sound.addEventListener("error",function(t){r.application.dataHasLoaded(r),r.sound=null},!1),this.sound.src=this.application.resources+qc.formatDiscName(this.handle,i),this.sound.load(),this.sound.autoplay=!1}}else this.application.dataHasLoaded(this)},load:function(){this.handle=this.file.readAShort(),this.type=this.file.readAByte(),this.frequency=this.file.readAInt(),this.currentFrequency=this.frequency;var t=this.file.readAShort();this.name=this.file.readAString(t),this.sound=null,this.application.addDataToLoad(this)},loadSilent:function(){this.handle=9999,this.type=4,this.frequency=4e4,this.currentFrequency=this.frequency,this.name="",this.sound=null,this.application.addDataToLoad(this)},playIt:function(t,e){if(t||(t=0),e||(e=this.frequency),this.sound)this.sound.volume=this.volume/100,this.currentFrequency=e,this.sound.playbackRate=e/this.frequency,this.sound.duration&&(this.sound.currentTime=0),this.sound.play();else if(this.buffer){this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,0==this.contextType?(this.source.gain.value=this.volume/100,this.source.connect(this.context.destination)):(this.gain=this.context.createGain(),this.source.connect(this.gain),this.gain.connect(this.context.destination),this.gain.gain.value=this.volume/100),t||(t=0),e||(e=this.frequency),this.currentFrequency=e,this.source.playbackRate.value=e/this.frequency,this.startTime=Date.now()-t,void 0!==this.source.start?this.source.start(0,t/1e3):this.source.noteOn(t);var i=this;this.source.onended=function(t){i.bEnded=!0}}this.bPaused=!1,this.bPlaying=!0,this.bEnded=!1},play:function(t,e,i){this.nLoops=t,0==this.nLoops&&(this.nLoops=1e7),this.volume=i,this.playIt()},stop:function(){this.sound?this.sound.pause():this.source&&this.bPlaying&&(void 0!==this.source.stop?this.source.stop(0):this.source.noteOff(0),this.source.onended=null),this.bUninterruptible=!1,this.bPlaying=!1},setVolume:function(t){this.volume=t,this.sound?this.sound.volume=t/100:this.source&&(this.gain?this.gain.gain.value=t/100:this.source.gain.value=t/100)},pause:function(){this.bPaused||(this.sound?this.sound.pause():this.source&&(this.source.onended=null,void 0!==this.source.stop?this.source.stop(0):this.source.noteOff(0),this.pauseTime=Date.now()-this.startTime),this.bPaused=!0)},globalpause:function(){this.bPaused?this.bAllowGlobalResume=!1:(this.pause(),this.bAllowGlobalResume=!0)},resume:function(){this.bPaused&&(this.sound?this.sound.play():this.source&&this.playIt(this.pauseTime),this.bPaused=!1)},globalresume:function(){this.bAllowGlobalResume&&(this.resume(),this.bAllowGlobalResume=!1)},isPaused:function(){return this.bPaused},isPlaying:function(){return!(!this.sound&&!this.source||!this.bPlaying)},getDuration:function(){return this.sound&&void 0!=this.sound.duration&&0==isNaN(this.sound.duration)&&this.sound.duration!=1/0?Math.floor(1e3*this.sound.duration):this.source?1e3*this.buffer.duration:0},getPosition:function(){if(this.sound)return Math.floor(1e3*this.sound.currentTime);if(this.source){var t;return t=this.bPaused?this.pauseTime:Date.now()-this.startTime,Math.min(1e3*this.buffer.duration,t)}return 0},setPosition:function(t){this.sound?this.sound.currentTime=t/1e3:this.source&&(this.bPlaying&&(this.source.onended=null,void 0!==this.source.stop?this.source.stop(0):this.source.noteOff(0)),this.playIt(t))},setFrequency:function(t){var e=t/this.frequency;this.currentFrequency=t,this.sound?this.sound.playbackRate=e:this.source&&(this.source.playbackRate.value=e)},getFrequency:function(t){return this.currentFrequency},checkSound:function(){if(1==this.bPlaying&&0==this.bPaused)if(this.sound){if(this.sound.ended)return this.nLoops>0&&--this.nLoops>0?(this.playIt(0,this.currentFrequency),!1):(this.bUninterruptible=!1,this.bPlaying=!1,!0)}else if(this.source&&(3==this.source.playbackState||this.bEnded))return this.nLoops>0&&--this.nLoops>0?(this.playIt(0,this.currentFrequency),!1):(this.bUninterruptible=!1,this.bPlaying=!1,!0);return!1}},Ol.prototype={AddOnLoop:function(t){this.pointers[this.position++]=t}},bl.prototype={},Sl.EVENTS_EXTBASE=80,Sl.PARAMCLICK_DOUBLE=256,Sl.EVENTOPTION_BREAKCHILD=1,Sl.bts=function(t,e){var i=e>>5,r=1<<(31&e),s=0!=(t[i]&r);return t[i]|=r,s},Sl.evg_FindAction=function(t,e){return t.evgNCond+e},Sl.EVTTYPE=function(t){var e=65535&t;return 0!=(32768&e)?e-65536:e},Sl.EVTNUM=function(t){return t>>16},Sl.getEventCode=function(t){return 4294901760&t},Sl.prototype={evt_FirstObjectFromType:function(t){if(this.rh2EventType=t,-1==t){var e,i,r,s=null,n=!0;for(i=0;i<this.rhPtr.rhOiList.length;i++)r=this.rhPtr.rhOiList[i],0==Sl.bts(this.rh4PickFlags,r.oilType)&&null!=(e=this.evt_SelectAllFromType(r.oilType,n))&&(s=e,n=!1);if(null!=s)return s}else if(0==Sl.bts(this.rh4PickFlags,t))return this.evt_SelectAllFromType(t,!0);var o,h=0;do{if(o=this.rhPtr.rhOiList[h],(-1!=t&&o.oilType==t||-1==t)&&0==(2147483648&o.oilListSelected)){var e=this.rhPtr.rhObjectList[o.oilListSelected];return this.rh2EventPrev=null,this.rh2EventPrevOiList=o,this.rh2EventPos=e,this.rh2EventPosOiList=h,e}h++}while(h<this.rhPtr.rhMaxOI);return null},evt_NextObjectFromType:function(){var t,e=this.rh2EventPos;if(null==e&&(t=this.rhPtr.rhOiList[this.rh2EventPosOiList],0==(2147483648&t.oilListSelected)))return e=this.rhPtr.rhObjectList[t.oilListSelected],this.rh2EventPrev=null,this.rh2EventPrevOiList=t,this.rh2EventPos=e,e;if(null!=e&&0==(2147483648&e.hoNextSelected))return this.rh2EventPrev=e,this.rh2EventPrevOiList=null,e=this.rhPtr.rhObjectList[e.hoNextSelected],this.rh2EventPos=e,e;var i=this.rh2EventPosOiList;for(i++;i<this.rhPtr.rhMaxOI;){var r=this.rhPtr.rhOiList[i];if((-1!=this.rh2EventType&&r.oilType==this.rh2EventType||-1==this.rh2EventType)&&0==(2147483648&r.oilListSelected))return e=this.rhPtr.rhObjectList[r.oilListSelected],this.rh2EventPrev=null,this.rh2EventPrevOiList=r,this.rh2EventPos=e,this.rh2EventPosOiList=i,e;i++}return null},evt_SelectAllFromType:function(t,e){var i,r,s=-1,n=this.rh2EventCount,o=0;do{if(i=this.rhPtr.rhOiList[o],i.oilType==t&&i.oilEventCount!=n)if(i.oilEventCount=n,this.rh4ConditionsFalse)i.oilListSelected=-1,i.oilNumOfSelected=0;else{
i.oilNumOfSelected=i.oilNObjects;var h=i.oilObject;if(0==(2147483648&h)){-1==s&&1==e&&(s=h,this.rh2EventPrev=null,this.rh2EventPrevOiList=i,this.rh2EventPosOiList=o);do{if(null==(r=this.rhPtr.rhObjectList[h]))return null;r.hoNextSelected=r.hoNumNext,h=r.hoNumNext}while(0==(2147483648&h));h=i.oilObject}i.oilListSelected=h}o++}while(o<this.rhPtr.rhMaxOI);return 0==e?null:s<0?null:null==(r=this.rhPtr.rhObjectList[s])?null:(this.rh2EventPos=r,r)},evt_FirstObject:function(t){var e;if(this.evtNSelectedObjects=0,this.rh2EventQualPos=null,this.rh2EventQualPosNum=-1,0!=(32768&t))return 32767==(32767&t)?null:this.qualProc(t);var i=this.rhPtr.rhOiList[t];if(i.oilEventCount==this.rh2EventCount)return 0!=(2147483648&i.oilListSelected)?null:(e=this.rhPtr.rhObjectList[i.oilListSelected],this.rh2EventPrev=null,this.rh2EventPrevOiList=i,this.rh2EventPos=e,this.rh2EventPosOiList=t,this.evtNSelectedObjects=i.oilNumOfSelected,e);if(i.oilEventCount=this.rh2EventCount,this.rh4ConditionsFalse)return i.oilListSelected=-1,i.oilNumOfSelected=0,null;if(i.oilListSelected=i.oilObject,0!=(2147483648&i.oilObject))return i.oilNumOfSelected=0,null;var r=i.oilObject;do{e=this.rhPtr.rhObjectList[r],r=e.hoNumNext,e.hoNextSelected=r}while(0==(2147483648&r));return e=this.rhPtr.rhObjectList[i.oilObject],this.rh2EventPrev=null,this.rh2EventPrevOiList=i,this.rh2EventPos=e,this.rh2EventPosOiList=t,i.oilNumOfSelected=i.oilNObjects,this.evtNSelectedObjects=i.oilNumOfSelected,e},qualProc:function(t){for(var e,i,r,s,n=0,o=0,h=this.qualToOiList[32767&t];o<h.qoiList.length;){if(r=h.qoiList[o+1],i=this.rhPtr.rhOiList[r],i.oilEventCount==this.rh2EventCount)s=0,0==(2147483648&i.oilListSelected)&&(s=i.oilNumOfSelected,null==this.rh2EventQualPos&&(this.rh2EventQualPos=h,this.rh2EventQualPosNum=o));else if(s=0,i.oilEventCount=this.rh2EventCount,this.rh4ConditionsFalse)i.oilListSelected=-1,i.oilNumOfSelected=0;else if(i.oilListSelected=i.oilObject,0!=(2147483648&i.oilObject))i.oilNumOfSelected=0;else{null==this.rh2EventQualPos&&(this.rh2EventQualPos=h,this.rh2EventQualPosNum=o);var a=i.oilObject;do{e=this.rhPtr.rhObjectList[a],e.hoNextSelected=e.hoNumNext,a=e.hoNumNext}while(0==(2147483648&a));i.oilNumOfSelected=i.oilNObjects,s=i.oilNObjects}n+=s,o+=2}return h=this.rh2EventQualPos,null!=h?(i=this.rhPtr.rhOiList[h.qoiList[this.rh2EventQualPosNum+1]],this.rh2EventPrev=null,this.rh2EventPrevOiList=i,e=this.rhPtr.rhObjectList[i.oilListSelected],this.rh2EventPos=e,this.rh2EventPosOiList=h.qoiList[this.rh2EventQualPosNum+1],this.evtNSelectedObjects=n,e):null},evt_NextObject:function(){var t,e=this.rh2EventPos;if(null==e&&(t=this.rhPtr.rhOiList[this.rh2EventPosOiList],0==(2147483648&t.oilListSelected)))return e=this.rhPtr.rhObjectList[t.oilListSelected],this.rh2EventPrev=null,this.rh2EventPrevOiList=t,this.rh2EventPos=e,e;if(null!=e&&0==(2147483648&e.hoNextSelected))return this.rh2EventPrev=e,this.rh2EventPrevOiList=null,e=this.rhPtr.rhObjectList[e.hoNextSelected],this.rh2EventPos=e,e;if(null==this.rh2EventQualPos)return null;do{if(this.rh2EventQualPosNum+=2,this.rh2EventQualPosNum>=this.rh2EventQualPos.qoiList.length)return null;t=this.rhPtr.rhOiList[this.rh2EventQualPos.qoiList[this.rh2EventQualPosNum+1]]}while(0!=(2147483648&t.oilListSelected));return this.rh2EventPrev=null,this.rh2EventPrevOiList=t,e=this.rhPtr.rhObjectList[t.oilListSelected],this.rh2EventPos=e,this.rh2EventPosOiList=this.rh2EventQualPos.qoiList[this.rh2EventQualPosNum+1],e},evt_AddCurrentQualifier:function(t){for(var e,i=this.qualToOiList[32767&t],r=0;r<i.qoiList.length;)e=this.rhPtr.rhOiList[i.qoiList[r+1]],e.oilEventCount!=this.rh2EventCount&&(e.oilEventCount=this.rh2EventCount,e.oilNumOfSelected=0,e.oilListSelected=-1),r+=2},evt_DeleteCurrentQualifier:function(t){for(var e,i=this.qualToOiList[32767&t],r=0;r<i.qoiList.length;)e=this.rhPtr.rhOiList[i.qoiList[r+1]],e.oilEventCount=this.rh2EventCount,e.oilNumOfSelected=0,e.oilListSelected=-1,r+=2},evt_DeleteCurrentObject:function(){this.rh2EventPos.hoOiList.oilNumOfSelected-=1,null!=this.rh2EventPrev?(this.rh2EventPrev.hoNextSelected=this.rh2EventPos.hoNextSelected,this.rh2EventPos=this.rh2EventPrev):(this.rh2EventPrevOiList.oilListSelected=this.rh2EventPos.hoNextSelected,this.rh2EventPos=null)},evt_AddCurrentObject:function(t){var e=t.hoOiList;if(e.oilEventCount!=this.rh2EventCount)e.oilEventCount=this.rh2EventCount,e.oilListSelected=t.hoNumber,e.oilNumOfSelected=1,t.hoNextSelected=-1;else{var i=e.oilListSelected;if(0!=(2147483648&i))e.oilListSelected=t.hoNumber,e.oilNumOfSelected+=1,t.hoNextSelected=-1;else{var r;do{if(t.hoNumber==i)return;r=this.rhPtr.rhObjectList[i],i=r.hoNextSelected}while(0==(2147483648&i));r.hoNextSelected=t.hoNumber,t.hoNextSelected=-1,t.hoOiList.oilNumOfSelected+=1}}},deselectThem:function(t){var e=this.rhPtr.rhOiList[t];e.oilEventCount=this.rh2EventCount,e.oilListSelected=-1,e.oilNumOfSelected=0},evt_ForceOneObject:function(t,e){if(0==(32768&t))this.deselectThem(t);else{if(32767==(32767&t))return;var i,r=this.qualToOiList[32767&t];for(i=0;i<r.qoiList.length;i+=2)this.deselectThem(r.qoiList[i+1])}e.hoNextSelected=-1,e.hoOiList.oilListSelected=e.hoNumber,e.hoOiList.oilNumOfSelected=1,e.hoOiList.oilEventCount=this.rh2EventCount},evt_DeleteCurrentType:function(t){Sl.bts(this.rh4PickFlags,t);var e,i;for(e=0;e<this.rhPtr.rhMaxOI;e++)i=this.rhPtr.rhOiList[e],i.oilType==t&&(i.oilEventCount=this.rh2EventCount,i.oilListSelected=-1,i.oilNumOfSelected=0)},evt_DeleteCurrent:function(){this.rh4PickFlags[0]=-1,this.rh4PickFlags[1]=-1,this.rh4PickFlags[2]=-1,this.rh4PickFlags[3]=-1;var t,e;for(t=0;t<this.rhPtr.rhMaxOI;t++)e=this.rhPtr.rhOiList[t],e.oilEventCount=this.rh2EventCount,e.oilListSelected=-1,e.oilNumOfSelected=0},evt_MarkSelectedObjects:function(){var t,e,i,r;for(i=0;i<this.rhPtr.rhMaxOI;i++)if(r=this.rhPtr.rhOiList[i],r.oilEventCount==this.rh2EventCount){if(r.oilEventCountOR!=this.rh4EventCountOR)for(r.oilEventCountOR=this.rh4EventCountOR,t=r.oilObject;0==(2147483648&t);)e=this.rhPtr.rhObjectList[t],e.hoSelectedInOR=0,t=e.hoNumNext;for(t=r.oilListSelected;0==(2147483648&t);)e=this.rhPtr.rhObjectList[t],e.hoSelectedInOR=1,t=e.hoNextSelected}},evt_BranchSelectedObjects:function(){var t,e,i,r,s;for(r=0;r<this.rhPtr.rhMaxOI;r++)if(s=this.rhPtr.rhOiList[r],s.oilEventCountOR==this.rh4EventCountOR)for(s.oilEventCount=this.rh2EventCount,t=s.oilObject,i=null;0==(2147483648&t);)e=this.rhPtr.rhObjectList[t],0!=e.hoSelectedInOR&&(null!=i?i.hoNextSelected=t:s.oilListSelected=t,e.hoNextSelected=-1,i=e),t=e.hoNumNext},get_ExpressionObjects:function(t){if(this.rh2ActionOn){this.rh2EnablePick=!1;return this.get_CurrentObjects(t)}var e;if(0==(32768&t))return e=this.rhPtr.rhOiList[t],e.oilEventCount==this.rh2EventCount&&0==(2147483648&e.oilListSelected)?this.rhPtr.rhObjectList[e.oilListSelected]:0==(2147483648&e.oilObject)?this.rhPtr.rhObjectList[e.oilObject]:null;var i=this.qualToOiList[32767&t],r=0;if(r>=i.qoiList.length)return null;do{if(e=this.rhPtr.rhOiList[i.qoiList[r+1]],e.oilEventCount==this.rh2EventCount&&0==(2147483648&e.oilListSelected))return this.rhPtr.rhObjectList[e.oilListSelected];r+=2}while(r<i.qoiList.length);r=0;do{if(e=this.rhPtr.rhOiList[i.qoiList[r+1]],0==(2147483648&e.oilObject))return this.rhPtr.rhObjectList[e.oilObject];r+=2}while(r<i.qoiList.length);return null},get_ParamActionObjects:function(t,e){this.rh2EnablePick=!0;var i=this.get_CurrentObjects(t);return null!=i?0==this.repeatFlag?i:(e.evtFlags|=_.ACTFLAGS_REPEAT,this.rh2ActionLoop=!0,i):(e.evtFlags|=yl.EVFLAGS_NOTDONEINSTART,i)},get_ActionObjects:function(t){t.evtFlags&=~yl.EVFLAGS_NOTDONEINSTART,this.rh2EnablePick=!0;var e=t.evtOiList,i=this.get_CurrentObjects(e);return null!=i?0==this.repeatFlag?i:(t.evtFlags|=_.ACTFLAGS_REPEAT,this.rh2ActionLoop=!0,i):(t.evtFlags|=yl.EVFLAGS_NOTDONEINSTART,i)},get_CurrentObjects:function(t){return 0==(32768&t)?this.get_CurrentObject(t):this.get_CurrentObjectQualifier(t)},get_CurrentObject:function(t){var e,i=this.rhPtr.rhOiList[t];if(i.oilActionCount!=this.rh2ActionCount)return i.oilActionCount=this.rh2ActionCount,i.oilActionLoopCount=this.rh2ActionLoopCount,i.oilEventCount==this.rh2EventCount&&0==(2147483648&i.oilListSelected)?(i.oilCurrentOi=i.oilListSelected,e=this.rhPtr.rhObjectList[i.oilListSelected],i.oilNext=e.hoNextSelected,0!=(2147483648&e.hoNextSelected)?(i.oilNextFlag=!1,i.oilCurrentRoutine=1,this.repeatFlag=!1,e):(i.oilNextFlag=!0,i.oilCurrentRoutine=2,this.repeatFlag=!0,e)):this.rh2EnablePick&&i.oilEventCount==this.rh2EventCount?(i.oilCurrentRoutine=0,i.oilCurrentOi=-1,null):0==(2147483648&i.oilObject)?(i.oilCurrentOi=i.oilObject,null==(e=this.rhPtr.rhObjectList[i.oilObject])?(i.oilCurrentRoutine=0,i.oilCurrentOi=-1,null):0==(2147483648&e.hoNumNext)?(i.oilNext=e.hoNumNext,i.oilNextFlag=!0,i.oilCurrentRoutine=3,this.repeatFlag=!0,e):(i.oilNextFlag=!1,i.oilCurrentRoutine=1,this.repeatFlag=!1,e)):(i.oilCurrentRoutine=0,i.oilCurrentOi=-1,null);if(i.oilActionLoopCount!=this.rh2ActionLoopCount){var r;switch(i.oilActionLoopCount=this.rh2ActionLoopCount,i.oilCurrentRoutine){case 0:return this.repeatFlag=i.oilNextFlag,null;case 1:return e=this.rhPtr.rhObjectList[i.oilCurrentOi],this.repeatFlag=i.oilNextFlag,e;case 2:return i.oilCurrentOi=i.oilNext,null==(e=this.rhPtr.rhObjectList[i.oilNext])?null:(r=e.hoNextSelected,0!=(2147483648&r)&&(i.oilNextFlag=!1,r=i.oilListSelected),i.oilNext=r,this.repeatFlag=i.oilNextFlag,e);case 3:return i.oilCurrentOi=i.oilNext,null==(e=this.rhPtr.rhObjectList[i.oilNext])?null:(r=e.hoNumNext,0!=(2147483648&r)&&(i.oilNextFlag=!1,r=i.oilObject),i.oilNext=r,this.repeatFlag=i.oilNextFlag,e)}}return i.oilCurrentOi<0?null:(e=this.rhPtr.rhObjectList[i.oilCurrentOi],this.repeatFlag=i.oilNextFlag,e)},get_CurrentObjectQualifier:function(t){var e,i,r,s=this.qualToOiList[32767&t];if(s.qoiActionCount!=this.rh2ActionCount)return s.qoiActionCount=this.rh2ActionCount,s.qoiActionLoopCount=this.rh2ActionLoopCount,(r=this.qoi_GetFirstListSelected(s))>=0?(s.qoiCurrentOi=r,null==(e=this.rhPtr.rhObjectList[r])?(s.qoiCurrentRoutine=0,s.qoiCurrentOi=-1,null):0!=(2147483648&(i=e.hoNextSelected))&&(i=this.qoi_GetNextListSelected(s))<0?(s.qoiCurrentRoutine=1,s.qoiNextFlag=!1,this.repeatFlag=!1,e):(s.qoiNext=i,s.qoiCurrentRoutine=2,s.qoiNextFlag=!0,this.repeatFlag=!0,e)):this.rh2EnablePick&&s.qoiSelectedFlag?(s.qoiCurrentRoutine=0,s.qoiCurrentOi=-1,null):(r=this.qoi_GetFirstList(s))>=0&&(s.qoiCurrentOi=r,null!=(e=this.rhPtr.rhObjectList[r]))?0!=(2147483648&(r=e.hoNumNext))&&0!=(2147483648&(r=this.qoi_GetNextList(s)))?(s.qoiCurrentRoutine=1,s.qoiNextFlag=!1,this.repeatFlag=!1,e):(s.qoiNext=r,s.qoiCurrentRoutine=3,s.qoiNextFlag=!0,this.repeatFlag=!0,e):(s.qoiCurrentRoutine=0,s.qoiCurrentOi=-1,null);if(s.qoiActionLoopCount!=this.rh2ActionLoopCount)switch(s.qoiActionLoopCount=this.rh2ActionLoopCount,s.qoiCurrentRoutine){case 0:return this.repeatFlag=s.qoiNextFlag,null;case 1:return e=this.rhPtr.rhObjectList[s.qoiCurrentOi],this.repeatFlag=s.qoiNextFlag,e;case 2:return s.qoiCurrentOi=s.qoiNext,e=this.rhPtr.rhObjectList[s.qoiNext],null!=e&&(i=e.hoNextSelected,0!=(2147483648&i)&&(i=this.qoi_GetNextListSelected(s))<0&&(s.qoiNextFlag=!1,i=this.qoi_GetFirstListSelected(s)),s.qoiNext=i),this.repeatFlag=s.qoiNextFlag,e;case 3:return s.qoiCurrentOi=s.qoiNext,e=this.rhPtr.rhObjectList[s.qoiNext],null!=e&&(i=e.hoNumNext,0!=(2147483648&i)&&0!=(2147483648&(i=this.qoi_GetNextList(s)))&&(s.qoiNextFlag=!1,i=this.qoi_GetFirstList(s)),s.qoiNext=i),this.repeatFlag=s.qoiNextFlag,e}return s.qoiCurrentOi<0?null:(e=this.rhPtr.rhObjectList[s.qoiCurrentOi],this.repeatFlag=s.qoiNextFlag,e)},qoi_GetNextListSelected:function(t){for(var e,i,r=t.qoiActionPos;r<t.qoiList.length;){if(e=t.qoiList[r+1],i=this.rhPtr.rhOiList[e],i.oilEventCount==this.rh2EventCount&&(t.qoiSelectedFlag=!0,0==(2147483648&i.oilListSelected)))return t.qoiActionPos=r+2,i.oilListSelected;r+=2}return-1},qoi_GetFirstListSelected:function(t){return t.qoiActionPos=0,t.qoiSelectedFlag=!1,this.qoi_GetNextListSelected(t)},qoi_GetNextList:function(t){for(var e,i,r=t.qoiActionPos;r<t.qoiList.length;){if(e=t.qoiList[r+1],i=this.rhPtr.rhOiList[e],0==(2147483648&i.oilObject))return t.qoiActionPos=r+2,i.oilObject;r+=2}return-1},qoi_GetFirstList:function(t){return t.qoiActionPos=0,this.qoi_GetNextList(t)},endForEach:function(){this.callEndForEach=!1;for(var t=this.rhPtr.rh4CurrentForEach,e=this.rhPtr.rh4CurrentForEach2;;){for(var i=null,r=null,s=this.rhPtr.rh4ForEachs;null!=s;){if(s.index<0){i=s.next,i&&(qc.compareStringsIgnoreCase(s.name,i.name)||(i=null));break}r=s,s=s.next}if(null==s)break;for(s.stop=!1,s.index=0;s.index<s.number&&(this.rhPtr.rh4CurrentForEach=s,this.rhPtr.rh4CurrentForEach2=i,i&&(i.index=s.index),this.rh2ActionOn=0,this.handle_Event(s.objects[s.index],-41<<16),!s.stop);s.index++);if(i)for(i.index=0;i.index<i.number&&(this.rhPtr.rh4CurrentForEach=i,this.rhPtr.rh4CurrentForEach2=s,s&&(s.index=i.index),this.rh2ActionOn=0,this.handle_Event(i.objects[i.index],-41<<16),!i.stop);i.index++);i&&(s.next=i.next),null==r?this.rhPtr.rh4ForEachs=s.next:r.next=s.next}this.rhPtr.rh4CurrentForEach=t,this.rhPtr.rh4CurrentForEach2=e},addForEach:function(t,e,i){for(var r=this.rhPtr.rh4ForEachs,s=null;null!=r;){if(r.oi==i&&qc.compareStringsIgnoreCase(t,r.name))return void(r.objects[r.number++]=e);s=r,r=r.next}var r=new xl;s?s.next=r:this.rhPtr.rh4ForEachs=r,r.next=null,r.number=1,r.oi=i,r.objects[0]=e,r.index=-1,r.name=t},evt_SaveSelectedObjects:function(t,e){for(var i=0;i<t.length;i+=2){var r=t[i+1],s=this.rhPtr.rhOiList[r];if(s.oilEventCount==this.rh2EventCount){var n;for(n=0;n<e.length&&e[n].poil!=s;n++);var o;n<e.length?(o=e[n],o.selectedInstances.length=0):(o=new bl(s),e.push(o));for(var h=s.oilListSelected;h>=0;){var a=this.rhPtr.rhObjectList[h];if(null==a)break;0==(a.hoFlags&zl.HOF_DESTROYED)&&o.selectedInstances.push(h),h=a.hoNextSelected}}}},evt_RestoreSelectedObjects:function(t,e){for(var i=0;i<t.length;i+=2)for(var r=t[i+1],s=this.rhPtr.rhOiList[r],n=0;n<e.length;n++){var o=e[n];if(o.poil==s&&(s.oilEventCount=this.rh2EventCount,s.oilListSelected=-1,s.oilNumOfSelected=0,o.selectedInstances.length>0)){var h=this.rhPtr.rhObjectList[o.selectedInstances[0]];if(null!=h){s.oilListSelected=o.selectedInstances[0],s.oilNumOfSelected++;for(var a=1;a<o.selectedInstances.length;a++){var l=o.selectedInstances[a],u=this.rhPtr.rhObjectList[l];if(null==u)break;0==(u.hoFlags&zl.HOF_DESTROYED)&&(h.hoNextSelected=l,s.oilNumOfSelected++),h=u}h.hoNextSelected=-1}}}},executeChildEvents:function(t){var e=this.childEventSelectionStack.length,i=new Array;if(e>0)for(var r=this.childEventSelectionStack[e-1],s=0;s<r.length;s++){for(var n=r[s],o=new bl(n.poil),h=0;h<n.selectedInstances.length;h++)o.selectedInstances.push(n.selectedInstances[h]);i.push(o)}this.evt_SaveSelectedObjects(t.ois,i),this.childEventSelectionStack.push(i),this.computeEventList(t.evgOffsetList,null),this.childEventSelectionStack.pop()},handle_GlobalEvents:function(t){var e=65535&t;0!=(32768&e)&&(e=65536-e);var i=-(t>>16),r=this.listPointers[this.rhEvents[e]+i];0!=r&&this.computeEventList(r,null)},handle_Event:function(t,e){this.rhCurCode=e;var i=-(e>>16),r=this.listPointers[t.hoEvents+i];return 0!=r&&(this.computeEventList(r,t),!0)},handle_TimerEvents:function(){for(var t=!1,e=this.rhPtr.rh4TimerEvents;e;){if(this.rhPtr.rhTimer>=e.timer)if(e.type==wl.TIMEREVENTTYPE_ONESHOT){this.rhPtr.rhEvtProg.rhCurParam0=e.name;var i=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+fr.NUM_ONEVENT];0!=i&&this.computeEventList(i,null),e.bDelete=!0,t=!0}else for(0==e.timerPosition&&(e.timerPosition=this.rhPtr.rhTimer);this.rhPtr.rhTimer>=e.timerPosition;){this.rhPtr.rhEvtProg.rhCurParam0=e.name,this.rhPtr.rhEvtProg.rhCurParam1=e.index;var i=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+fr.NUM_ONEVENT];if(0!=i&&this.computeEventList(i,null),e.index++,0==--e.loops){e.bDelete=!0,t=!0;break}e.timerPosition+=e.timerNext}e=e.next}if(t){e=this.rhPtr.rh4TimerEvents;for(var r,s=null;e;)r=e.next,e.bDelete?null==s?this.rhPtr.rh4TimerEvents=r:s.next=r:s=e,e=r}},compute_TimerEvents:function(){var t;if(0!=(this.rhPtr.rhGameFlags&il.GAMEFLAGS_FIRSTLOOPFADEIN))return void(0!=(t=this.listPointers[this.rhEvents[-Dl.OBJ_GAME]+1])&&(this.listPointers[this.rhEvents[-Dl.OBJ_GAME]+1]=-1,this.computeEventList(t,null),this.rh4CheckDoneInstart=!0));t=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+3],0!=t&&this.computeEventList(t,null),t=this.listPointers[this.rhEvents[-Dl.OBJ_GAME]+1];var e,i,r,s,n;if(0!=t){if(this.rh4CheckDoneInstart){s=null,e=t;do{if((r=this.eventPointersGroup[e])!=s)for(s=r,i=r.evgNCond;i<r.evgNCond+r.evgNAct;i++)n=r.evgEvents[i],0==(n.evtFlags&yl.EVFLAGS_NOTDONEINSTART)&&(n.evtFlags|=yl.EVFLAGS_DONEBEFOREFADEIN);e++}while(null!=this.eventPointersGroup[e])}if(this.computeEventList(t,null),this.listPointers[this.rhEvents[-Dl.OBJ_GAME]+1]=0,this.rh4CheckDoneInstart){s=null,e=t;do{if((r=this.eventPointersGroup[e])!=s)for(s=r,i=r.evgNCond;i<r.evgNCond+r.evgNAct;i++)n=r.evgEvents[i],n.evtFlags&=~yl.EVFLAGS_DONEBEFOREFADEIN;e++}while(null!=this.eventPointersGroup[e]);this.rh4CheckDoneInstart=!1}}t=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+2],0!=t&&this.computeEventList(t,null),0!=(t=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+1])&&this.computeEventList(t,null)},restartTimerEvents:function(){var t,e,i=this.rhPtr.rhTimer,r=this.listPointers[this.rhEvents[-Dl.OBJ_TIMER]+3];if(0!=r)do{e=this.eventPointersGroup[r],t=e.evgEvents[this.eventPointersCnd[r]],t.evtFlags|=yl.EVFLAGS_DONE;var s=t.evtParams[0];s.timer>i&&(t.evtFlags&=~yl.EVFLAGS_DONE),r++}while(null!=this.eventPointersGroup[r])},computeEventFastLoopList:function(t){var e,i,r=0;do{if(e=t[r],0==(e.evgFlags&Tl.EVGFLAGS_INACTIVE)){for(this.rhEventGroup=e,this.rh4PickFlags[0]=0,this.rh4PickFlags[1]=0,this.rh4PickFlags[2]=0,this.rh4PickFlags[3]=0,this.rh2EventCount+=1,this.rh4ConditionsFalse=!1,i=1;i<e.evgNCond&&0!=e.evgEvents[i].eva2(this.rhPtr);i++);i==e.evgNCond&&this.call_Actions(e)}r++}while(r<t.length)},computeEventList:function(t,e){var i,r,s,n;this.rh3DoStop=!1;do{if(r=this.eventPointersGroup[t],0==(r.evgFlags&Tl.EVGFLAGS_INACTIVE))if(this.rhEventGroup=r,this.rh4PickFlags[0]=0,this.rh4PickFlags[1]=0,this.rh4PickFlags[2]=0,this.rh4PickFlags[3]=0,0==(r.evgFlags&Tl.EVGFLAGS_ORINGROUP)){if(this.rh2EventCount+=1,this.rh4ConditionsFalse=!1,n=0,r.evgEvents[n].eva1(this.rhPtr,e))for(n++;n<r.evgNCond&&0!=r.evgEvents[n].eva2(this.rhPtr);n++);if(n==r.evgNCond)if(this.rh3DoStop)null!=e&&this.call_Stops(e);else if(this.call_Actions(r),0!=(r.evgFlags&Tl.EVGFLAGS_BREAK))break;t++}else if(this.rh4EventCountOR++,0==(r.evgFlags&Tl.EVGFLAGS_ORLOGICAL)){i=!1;do{for(this.rh2EventCount++,this.rh4ConditionsFalse=!1,n=this.eventPointersCnd[t],0==r.evgEvents[n].eva1(this.rhPtr,e)&&(this.rh4ConditionsFalse=!0),n++;n<r.evgNCond&&-1507329!=r.evgEvents[n].evtCode;)0==r.evgEvents[n].eva2(this.rhPtr)&&(this.rh4ConditionsFalse=!0),n++;if(this.evt_MarkSelectedObjects(),0==this.rh4ConditionsFalse&&(i=!0),t++,null==(r=this.eventPointersGroup[t]))break}while(r==this.rhEventGroup);if(i){this.rh2EventCount++,this.evt_BranchSelectedObjects();var o=0!=(this.rhEventGroup.evgFlags&Tl.EVGFLAGS_BREAK);if(this.call_Actions(this.rhEventGroup),o)break}}else{var h;this.rh4ConditionsFalse=!1,i=!1;do{if(this.rh2EventCount++,h=!1,n=this.eventPointersCnd[t],r.evgEvents[n].eva1(this.rhPtr,e))for(n++;n<r.evgNCond&&-1572865!=r.evgEvents[n].evtCode;){if(0==r.evgEvents[n].eva2(this.rhPtr)){h=!0;break}n++}else h=!0;if(0==h&&(this.evt_MarkSelectedObjects(),i=!0),t++,null==(r=this.eventPointersGroup[t]))break}while(r==this.rhEventGroup);if(i){this.rh2EventCount++,this.evt_BranchSelectedObjects();var o=0!=(this.rhEventGroup.evgFlags&Tl.EVGFLAGS_BREAK);if(this.call_Actions(this.rhEventGroup),o)break}}else if(t++,null!=this.eventPointersGroup[t])for(s=this.eventPointersGroup[t];s==r&&(t++,null!=this.eventPointersGroup[t]);)s=this.eventPointersGroup[t]}while(null!=this.eventPointersGroup[t])},call_Actions:function(t){if(this.childEventParam=null,0!=(t.evgFlags&Tl.EVGFLAGS_LIMITED)){if(0!=(t.evgFlags&Tl.EVGFLAGS_SHUFFLE)&&(this.rh2ShuffleBuffer=new n),0!=(t.evgFlags&Tl.EVGFLAGS_NOTALWAYS)){var e=this.rhPtr.rhLoopCount,i=t.evgInhibit;if(t.evgInhibit=e,e==i)return;if((e-=1)==i)return}if(0!=(t.evgFlags&Tl.EVGFLAGS_REPEAT)){if(0==t.evgInhibitCpt)return;t.evgInhibitCpt--}if(0!=(t.evgFlags&Tl.EVGFLAGS_NOMORE)){var r=this.rhPtr.rhTimer/10,s=t.evgInhibitCpt;if(0!=s&&r<s)return;t.evgInhibitCpt=r+t.evgInhibit}}this.rh2ActionCount++,this.rh2ActionLoop=!1,this.rh2ActionLoopCount=0,this.rh2ActionOn=!0;var o,h=0;do{o=t.evgEvents[h+t.evgNCond],0==(o.evtFlags&(yl.EVFLAGS_BADOBJECT|yl.EVFLAGS_DONEBEFOREFADEIN))&&(o.evtFlags&=~_.ACTFLAGS_REPEAT,o.execute(this.rhPtr)),h++}while(h<t.evgNAct);if(this.rh2ActionLoop)do{for(this.rh2ActionLoop=!1,this.rh2ActionLoopCount++,h=0;h<t.evgNAct;h++)o=t.evgEvents[h+t.evgNCond],0!=(o.evtFlags&_.ACTFLAGS_REPEAT)&&(o.evtFlags&=~_.ACTFLAGS_REPEAT,o.execute(this.rhPtr))}while(this.rh2ActionLoop);var a=this.childEventParam;0!=(t.evgFlags&Tl.EVGFLAGS_BREAK)&&0!=(t.evgFlags&Tl.EVGFLAGS_HASPARENT)&&(a=null),this.childEventParam=null,this.rh2ActionOn=!1,null!=this.rh2ShuffleBuffer&&this.endShuffle(),this.callEndForEach&&this.endForEach(),a&&this.executeChildEvents(a)},call_Stops:function(t){var e;e=t.hoOi,this.rh2EventCount+=1,this.evt_AddCurrentObject(t),this.rh2ActionCount++,this.rh2ActionLoop=!1,this.rh2ActionLoopCount=0,this.rh2ActionOn=!0;var i,r,s,n=0;do{if(i=this.rhEventGroup.evgEvents[this.rhEventGroup.evgNCond+n],(r=4294901760&i.evtCode)==4<<16||r==9<<16)if(e==i.evtOi)i.execute(this.rhPtr);else{var o=i.evtOiList;if(0!=(32768&o)){var h=this.qualToOiList[32767&o];for(s=0;s<h.qoiList.length;){if(h.qoiList[s]==e){i.execute(this.rhPtr);break}s+=2}}}n++}while(n<this.rhEventGroup.evgNAct);this.rh2ActionOn=!1},endShuffle:function(){if(!(this.rh2ShuffleBuffer.size()<=1)){var t,e=this.rhPtr.random(this.rh2ShuffleBuffer.size());do{t=this.rhPtr.random(this.rh2ShuffleBuffer.size())}while(e==t);var i=this.rh2ShuffleBuffer.get(e),r=this.rh2ShuffleBuffer.get(t),s=i.hoX,n=i.hoY,o=r.hoX,h=r.hoY;il.setXPosition(i,o),il.setYPosition(i,h),il.setXPosition(r,s),il.setYPosition(r,n),this.rh2ShuffleBuffer=null}},onMouseButton:function(t,e){var i;if(this.rhPtr.getMouseCoords(),null!=this.rhPtr&&0==this.rhPtr.rh2PauseCompteur&&0!=this.bReady&&(i=t,2==e&&(i+=Sl.PARAMCLICK_DOUBLE),this.rhPtr.rh4TimeOut=0,0==this.rhPtr.rhMouseUsed)){this.rhCurParam0=i,this.rh2CurrentClick=i,this.handle_GlobalEvents(-262150),this.handle_GlobalEvents(-327686);var r,s,o,h,a,l,u=0,c=new n;for(r=0;r<this.rhPtr.rhNObjects;r++){for(;null==this.rhPtr.rhObjectList[u];)u++;if(s=this.rhPtr.rhObjectList[u],u++,o=s.hoX-s.hoImgXSpot,h=s.hoY-s.hoImgYSpot,a=o+s.hoImgWidth,l=h+s.hoImgHeight,this.rhPtr.rh2MouseX>=o&&this.rhPtr.rh2MouseX<a&&this.rhPtr.rh2MouseY>=h&&this.rhPtr.rh2MouseY<l&&0!=(s.hoLimitFlags&sl.OILIMITFLAGS_QUICKCOL)&&0==(s.hoFlags&zl.HOF_DESTROYED))if(s.hoType==Dl.OBJ_SPR)if(0==(s.ros.rsFlags&cc.RSFLAG_COLBOX)){var d=this.application.imageBank.getImageFromHandle(s.roc.rcImage),f=d.getMask(lc.GCMF_OBSTACLE,0,1,1);f.testPointEx(this.rhPtr.rh2MouseX-s.hoX,this.rhPtr.rh2MouseY-s.hoY,s.roc.rcAngle,s.roc.rcScaleX,s.roc.rcScaleY)&&c.add(s)}else c.add(s);else c.add(s)}for(u=0;u<c.size();u++)s=c.get(u),this.rhCurParam1=s.hoOi,this.rh4_2ndObject=s,this.handle_GlobalEvents(-393222)}},onKeyDown:function(t){if(null!=this.rhPtr){if(0==this.bReady)return;this.rhPtr.rh4TimeOut=0,this.handle_GlobalEvents(-524294)}},onMouseMove:function(){0!=this.bReady&&0==this.rhPtr.rh2PauseCompteur&&(this.rhPtr.rh4TimeOut=0)},ctoCompare:function(t,e){return 0!=e.hoImgWidth&&0!=e.hoImgHeight&&(!(e.hoX<t.x1||e.hoX>=t.x2)&&!(e.hoY<t.y1||e.hoY>=t.y2))},count_ZoneTypeObjects:function(t,e,i){e++,this.evtNSelectedObjects=0;for(var r,s,n=0,o=null;;){for(;n<this.rhPtr.rhOiList.length&&(o=this.rhPtr.rhOiList[n],0!=i&&(0==i||i!=o.oilType));n++);if(n==this.rhPtr.rhOiList.length)return null;var h=o;if(n++,h.oilEventCount!=this.rh2EventCount){if(0==this.rh4ConditionsFalse)for(s=h.oilObject;0==(2147483648&s);){if(null==(r=this.rhPtr.rhObjectList[s]))return null;if(0==(r.hoFlags&zl.HOF_DESTROYED)&&this.ctoCompare(t,r)&&++this.evtNSelectedObjects==e)return r;s=r.hoNumNext}}else for(s=h.oilListSelected;0==(2147483648&s);){if(null==(r=this.rhPtr.rhObjectList[s]))return null;if(0==(r.hoFlags&zl.HOF_DESTROYED)&&this.ctoCompare(t,r)&&++this.evtNSelectedObjects==e)return r;s=r.hoNextSelected}}},count_ObjectsFromType:function(t,e){e++,this.evtNSelectedObjects=0;for(var i,r,s=0,n=null;;){for(;s<this.rhPtr.rhOiList.length&&(n=this.rhPtr.rhOiList[s],0!=t&&(0==t||t!=n.oilType));s++);if(s==this.rhPtr.rhOiList.length)return null;var o=n;if(s++,o.oilEventCount!=this.rh2EventCount){if(0==this.rh4ConditionsFalse)for(r=o.oilObject;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return null;if(0==(i.hoFlags&zl.HOF_DESTROYED)&&++this.evtNSelectedObjects==e)return i;r=i.hoNumNext}}else for(r=o.oilListSelected;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return null;if(0==(i.hoFlags&zl.HOF_DESTROYED)&&++this.evtNSelectedObjects==e)return i;r=i.hoNextSelected}}},czaCompare:function(t,e){return!(e.hoX<t.x1||e.hoX>=t.x2)&&!(e.hoY<t.y1||e.hoY>=t.y2)},select_ZoneTypeObjects:function(t,e){for(var i,r,s,n=0,o=0,h=null;;){for(;o<this.rhPtr.rhOiList.length&&(h=this.rhPtr.rhOiList[o],0!=e&&(0==e||e!=h.oilType));o++);if(o==this.rhPtr.rhOiList.length)return n;var a=h;if(o++,a.oilEventCount==this.rh2EventCount)for(i=null,s=a.oilListSelected;0==(2147483648&s)&&null!=(r=rhPtr.rhObjectList[s]);)0==(r.hoFlags&zl.HOF_DESTROYED)&&(0==this.czaCompare(t,r)?(a.oilNumOfSelected--,null==i?a.oilListSelected=r.hoNextSelected:i.hoNextSelected=r.hoNextSelected):(n++,i=r)),s=r.hoNextSelected;else if(i=null,a.oilNumOfSelected=0,a.oilEventCount=this.rh2EventCount,a.oilListSelected=-1,0==this.rh4ConditionsFalse)for(s=a.oilObject;0==(2147483648&s)&&null!=(r=this.rhPtr.rhObjectList[s]);)0==(r.hoFlags&zl.HOF_DESTROYED)&&this.czaCompare(t,r)&&(n++,a.oilNumOfSelected++,r.hoNextSelected=-1,null==i?a.oilListSelected=r.hoNumber:i.hoNextSelected=r.hoNumber,i=r),s=r.hoNumNext}},losCompare:function(t,e,i,r,s){var n,o,h,a=s.hoX-s.hoImgXSpot,l=a+s.hoImgWidth,u=s.hoY-s.hoImgYSpot,c=u+s.hoImgHeight;if(i-t>r-e){if(n=(r-e)/(i-t),i>t){if(l<t||a>=i)return!1}else if(l<i||a>=t)return!1;return(h=n*(a-t)+e)>=u&&h<c||(h=n*(l-t)+e)>=u&&h<c}if(n=(i-t)/(r-e),r>e){if(c<e||u>=r)return!1}else if(c<r||u>=e)return!1;return(o=n*(u-e)+t)>=a&&o<l||(o=n*(u-e)+t)>=a&&o<l},select_LineOfSight:function(t,e,i,r){var s,n,o,h,a,l=0;for(n=0;n<this.rhPtr.rhOiList.length;n++)if(s=this.rhPtr.rhOiList[n],s.oilEventCount==this.rh2EventCount)for(o=null,a=s.oilListSelected;0==(2147483648&a)&&null!=(h=this.rhPtr.rhObjectList[a]);)0==(h.hoFlags&zl.HOF_DESTROYED)&&(0==this.losCompare(t,e,i,r,h)?(s.oilNumOfSelected--,null==o?s.oilListSelected=h.hoNextSelected:o.hoNextSelected=h.hoNextSelected):(l++,o=h)),a=h.hoNextSelected;else if(o=null,s.oilNumOfSelected=0,s.oilEventCount=this.rh2EventCount,s.oilListSelected=-1,0==this.rh4ConditionsFalse)for(a=s.oilObject;0==(2147483648&a)&&null!=(h=this.rhPtr.rhObjectList[a]);)0==(h.hoFlags&zl.HOF_DESTROYED)&&this.losCompare(t,e,i,r,h)&&(l++,s.oilNumOfSelected++,h.hoNextSelected=-1,null==o?s.oilListSelected=h.hoNumber:o.hoNextSelected=h.hoNumber,o=h),a=h.hoNumNext;return l},czoCountThem:function(t,e){var i,r,s=0,n=this.rhPtr.rhOiList[t];if(n.oilEventCount!=this.rh2EventCount){if(0==this.rh4ConditionsFalse)for(r=n.oilObject;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return 0;0==(i.hoFlags&zl.HOF_DESTROYED)&&this.czaCompare(e,i)&&s++,r=i.hoNumNext}return s}for(r=n.oilListSelected;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return 0;0==(i.hoFlags&zl.HOF_DESTROYED)&&this.czaCompare(e,i)&&s++,r=i.hoNextSelected}return s},count_ZoneOneObject:function(t,e){if(0==(32768&t))return this.czoCountThem(t,e);if(32767==(32767&t))return 0;var i,r=this.qualToOiList[32767&t],s=0;for(i=0;i<r.qoiList.length;i+=2)s+=this.czoCountThem(r.qoiList[i+1],e);return s},countThem:function(t,e){var i,r,s=this.rhPtr.rhOiList[t];if(s.oilEventCount!=this.rh2EventCount){if(this.rh4ConditionsFalse)return this.evtNSelectedObjects=0,null;for(r=s.oilObject;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return null;if(0==(i.hoFlags&zl.HOF_DESTROYED)&&++this.evtNSelectedObjects==e)return i;r=i.hoNumNext}return null}for(r=s.oilListSelected;0==(2147483648&r);){if(null==(i=this.rhPtr.rhObjectList[r]))return null;if(0==(i.hoFlags&zl.HOF_DESTROYED)&&++this.evtNSelectedObjects==e)return i;r=i.hoNextSelected}return null},count_ObjectsFromOiList:function(t,e){if(e++,this.evtNSelectedObjects=0,0==(32768&t))return this.countThem(t,e);if(32767==(32767&t))return null;var i,r=this.qualToOiList[32767&t];for(i=0;i<r.qoiList.length;i+=2){var s=this.countThem(r.qoiList[i+1],e);if(null!=s)return s}return null},pickFromId:function(t){var e=65535&t;if(e>=this.rhPtr.rhMaxObjects)return!1;var i=this.rhPtr.rhObjectList[e];if(null==i)return!1;if(t>>>16!=i.hoCreationId)return!1;var r=i.hoOiList;if(r.oilEventCount==this.rh2EventCount){for(var s=r.oilListSelected,n=null;0==(2147483648&s)&&(n=this.rhPtr.rhObjectList[s],i!=n);)s=n.hoNextSelected;if(i!=n)return!1}return r.oilEventCount=this.rh2EventCount,r.oilListSelected=-1,r.oilNumOfSelected=0,i.hoNextSelected=-1,this.evt_AddCurrentObject(i),!0},push_Event:function(t,e,i,r,s){var o=new Il(t,e,i,r,s);null==this.rh2PushedEvents&&(this.rh2PushedEvents=new n),this.rh2PushedEvents.add(o)},handle_PushedEvents:function(){if(null!=this.rh2PushedEvents){var t;for(t=0;t<this.rh2PushedEvents.size();t++){var e=this.rh2PushedEvents.get(t);if(null!=e&&0!=e.code)switch(this.rhCurParam0=e.param,this.rhCurOi=e.oi,e.routine){case 0:this.handle_GlobalEvents(e.code);break;case 1:this.handle_Event(e.pHo,e.code)}}this.rh2PushedEvents.clear()}},load:function(t){for(var e,i,r=new Array(4),s=0;;){var r=t.file.readBuffer(4);if(69==r[0]&&82==r[1]&&62==r[2]&&62==r[3]){for(this.maxObjects=t.file.readAShort(),this.maxObjects<300&&(this.maxObjects=300),this.maxOi=t.file.readAShort(),this.nPlayers=t.file.readAShort(),i=0;i<7+Dl.OBJ_LAST;i++)this.nConditions[i]=t.file.readAShort();if(this.nQualifiers=t.file.readAShort(),this.nQualifiers>0)for(this.qualifiers=new Array(this.nQualifiers),i=0;i<this.nQualifiers;i++)this.qualifiers[i]=new Ll,this.qualifiers[i].qOi=t.file.readShort(),this.qualifiers[i].qType=t.file.readShort()}else if(69==r[0]&&82==r[1]&&101==r[2]&&115==r[3])t.file.readAInt(),this.nEvents=t.file.readAInt(),this.events=new Array(this.nEvents),this.eventPos=0;else if(69==r[0]&&82==r[1]&&101==r[2]&&118==r[3])for(t.file.readAInt(),e=t.file.readAInt(),i=0;i<e;i++)this.events[s]=Tl.create(t),s++;else if(69==r[0]&&82==r[1]&&111==r[2]&&112==r[3]){var n=t.file.readAInt();0!=(n&Sl.EVENTOPTION_BREAKCHILD)&&(this.defaultEvgFlagsMask|=Tl.EVGFLAGS_BREAK)}else if(60==r[0]&&60==r[1]&&69==r[2]&&82==r[3])break}this.maxEvents=Math.max(this.maxEvents,s)},inactiveGroup:function(t){var e,i,r,s;for(i=this.events[t],i.evgFlags&=this.defaultEvgFlagsMask,i.evgFlags|=Tl.EVGFLAGS_INACTIVE,t++,e=!1;;){switch(i=this.events[t],i.evgFlags&=this.defaultEvgFlagsMask,i.evgFlags|=Tl.EVGFLAGS_INACTIVE,r=i.evgEvents[0],r.evtCode){case-589825:s=r.evtParams[0],s.grpFlags|=fu.GRPFLAGS_PARENTINACTIVE,t=this.inactiveGroup(t);continue;case-655361:e=!0,t++}if(e)break;t++}return t},prepareProgram:function(){var t,e,i,r,s,o,h,a,l=new n;for(s=0;s<this.events.length;)t=this.events[s],t.evgFlags&=this.defaultEvgFlagsMask,e=t.evgEvents[0],-589825==e.evtCode&&(i=e.evtParams[0],a=new Cl,a.id=i.grpId,a.evg=s,l.add(a),i.grpFlags&=~(fu.GRPFLAGS_PARENTINACTIVE|fu.GRPFLAGS_GROUPINACTIVE),0!=(i.grpFlags&fu.GRPFLAGS_INACTIVE)&&(i.grpFlags|=fu.GRPFLAGS_GROUPINACTIVE)),s++;for(s=0;s<this.events.length;)t=this.events[s],t.evgFlags&=this.defaultEvgFlagsMask,e=t.evgEvents[0],-589825!=e.evtCode||(i=e.evtParams[0],i.grpFlags&=~fu.GRPFLAGS_PARENTINACTIVE,0==(i.grpFlags&fu.GRPFLAGS_GROUPINACTIVE))?s++:s=this.inactiveGroup(s)
;for(s=0;s<this.events.length;s++)switch(t=this.events[s],e=t.evgEvents[0],e.evtCode){case-589825:case-655361:break;default:for(t.evgInhibit=0,t.evgInhibitCpt=0,o=0;o<t.evgNCond+t.evgNAct;o++)if(e=t.evgEvents[o],e.evtCode<0?e.evtFlags&=yl.EVFLAGS_DEFAULTMASK:e.evtFlags&=~(_.ACTFLAGS_REPEAT|yl.EVFLAGS_NOTDONEINSTART),0!=e.evtNParams)for(h=0;h<e.evtNParams;h++)switch(r=e.evtParams[h],r.code){case 25:r.value2=0;break;case 13:r.compteur=r.delay;break;case 39:var u;for(u=0;u<l.size();u++)if(a=l.get(u),a.id==r.id){r.pointer=a.evg;break}}}},assemblePrograms:function(t){var e,i,r,s,n,o,h,a,l,u,c,d,f,p,m,g,v,P,E,A,O,b,S,T,y,C,L,I,F,x,w,M;this.rhPtr=t,this.rh2ActionCount=0;var R=0;for(u=0,d=0;d<this.rhPtr.rhMaxOI;d++)-1!=this.rhPtr.rhOiList[d].oilOi&&(this.rhPtr.rhOiList[d].oilActionCount=-1,this.rhPtr.rhOiList[d].oilLimitFlags=0,this.rhPtr.rhOiList[d].oilLimitList=-1,u++,this.rhPtr.rhOiList[d].oilOi+1>R&&(R=this.rhPtr.rhOiList[d].oilOi+1));this.qualToOiList=null;var k;if(this.nQualifiers>0){var N=new Array(this.nQualifiers);for(E=0;E<this.nQualifiers;E++)for(o=32767&this.qualifiers[E].qOi,N[E]=0,k=0;k<this.rhPtr.rhMaxOI;k++)if(this.rhPtr.rhOiList[k].oilType==this.qualifiers[E].qType)for(d=0;d<8&&-1!=this.rhPtr.rhOiList[k].oilQualifiers[d];d++)o==this.rhPtr.rhOiList[k].oilQualifiers[d]&&N[E]++;for(this.qualToOiList=new Array(this.nQualifiers),E=0;E<this.nQualifiers;E++){for(this.qualToOiList[E]=new Fl,0!=N[E]&&(this.qualToOiList[E].qoiList=new Array(2*N[E])),c=0,o=32767&this.qualifiers[E].qOi,k=0;k<this.rhPtr.rhMaxOI;k++)if(this.rhPtr.rhOiList[k].oilType==this.qualifiers[E].qType)for(d=0;d<8&&-1!=this.rhPtr.rhOiList[k].oilQualifiers[d];d++)o==this.rhPtr.rhOiList[k].oilQualifiers[d]&&(this.qualToOiList[E].qoiList[2*c]=this.rhPtr.rhOiList[k].oilOi,this.qualToOiList[E].qoiList[2*c+1]=k,c++);this.qualToOiList[E].qoiActionCount=-1}}this.colBuffer=new Array(100*R*2+1);var D,H,B,G=0,j=new Array;for(D=0;D<this.events.length;D++){for(e=this.events[D],H=0;H<e.evgNAct+e.evgNCond;H++){if(i=e.evgEvents[H],i.evtFlags&=~yl.EVFLAGS_BADOBJECT,Sl.EVTTYPE(i.evtCode)>=0&&(i.evtOiList=this.get_OiListOffset(i.evtOi,Sl.EVTTYPE(i.evtCode))),i.evtCode==_.ACT_STARTLOOP){var Y=i.evtParams[0];if(Y.fastFastLoop=0,Y.tokens[0].code==Nn.EXP_STRING&&0==Y.tokens[1].code){var X={};X.address=i.evtParams[0],X.name=Y.tokens[0].string,j.push(X),this.rhPtr.addFastLoop(Y.tokens[0].string)}}else if(i.evtCode==_.ACT_STOPLOOP||i.evtCode==_.ACT_SETLOOPINDEX){var Y=i.evtParams[0];Y.tokens[0].code==Nn.EXP_STRING&&0==Y.tokens[1].code&&(Y.tokens[0]=new Bn,Y.tokens[0].code=Nn.EXP_LONG,Y.tokens[0].value=this.rhPtr.addFastLoop(Y.tokens[0].string))}if(i.evtNParams>0)for(B=0;B<i.evtNParams;B++)switch(r=i.evtParams[B],r.code){case 25:r.value=0;break;case 21:if(0==(i.evtOi&Dl.OIFLAG_QUALIFIER)){var W;for(W=this.rhPtr.rhFrame.LOList.first_LevObj();null!=W;W=this.rhPtr.rhFrame.LOList.next_LevObj())if(i.evtOi==W.loOiHandle){r.cdpHFII=W.loHandle;break}}else r.cdpHFII=-1;o=r.posOINUMParent,-1!=o&&(r.posOiList=this.get_OiListOffset(o,r.posTypeParent));break;case 9:case 18:case 16:o=r.posOINUMParent,-1!=o&&(r.posOiList=this.get_OiListOffset(o,r.posTypeParent));break;case 1:r.oiList=this.get_OiListOffset(r.oi,r.type);break;case 69:for(var d=0;d<r.ois.length;d+=2)r.ois[d+1]=this.get_OiListOffset(r.ois[d],0);break;case 15:case 27:case 28:case 45:case 46:case 22:case 23:case 52:case 59:case 53:case 62:case 54:var V=r;for(d=0;d<V.tokens.length;d++)if(Sl.EVTTYPE(V.tokens[d].code)>0){var U=V.tokens[d];U.oiList=this.get_OiListOffset(U.oi,Sl.EVTTYPE(U.code))}}}for(v=0,P=Tl.EVGFLAGS_ONCE|Tl.EVGFLAGS_LIMITED|Tl.EVGFLAGS_STOPINGROUP,H=0;H<e.evgNCond+e.evgNAct;H++){if(i=e.evgEvents[H],l=Sl.EVTTYPE(i.evtCode),b=i.evtCode,d=0,A=0,O=0,r=null,l>=Dl.OBJ_SPR)switch(Sl.getEventCode(b)){case 4<<16:case 9<<16:if(v|=Tl.EVGFLAGS_STOPINGROUP,0!=((o=i.evtOi)&Dl.OIFLAG_QUALIFIER))for(s=this.qual_GetFirstOiList2(i.evtOiList);-1!=s;s=this.qual_GetNextOiList2())G=this.make_ColList1(e,G,this.rhPtr.rhOiList[s].oilOi);else G=this.make_ColList1(e,G,o);break;case 25<<16:v|=Tl.EVGFLAGS_SHUFFLE;break;case-917504:r=i.evtParams[0];var K=i.evtParams[0];this.addColList(i.evtOiList,i.evtOi,K.oiList,K.oi),this.addColList(K.oiList,K.oi,i.evtOiList,i.evtOi),p=Sl.EVTTYPE(i.evtCode),O=this.isTypeRealSprite(p)?sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_ONCOLLIDE:sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKEXT|sl.OILIMITFLAGS_ONCOLLIDE,m=K.type,A=this.isTypeRealSprite(m)?sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_ONCOLLIDE:sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKEXT|sl.OILIMITFLAGS_ONCOLLIDE,d=3;break;case-4<<16:p=Sl.EVTTYPE(i.evtCode),O=this.isTypeRealSprite(p)?sl.OILIMITFLAGS_QUICKCOL:sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKEXT,r=i.evtParams[0],m=i.evtParams[0].type,A=this.isTypeRealSprite(m)?sl.OILIMITFLAGS_QUICKCOL:sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKEXT,d=3;break;case-720896:case-786432:A=sl.OILIMITFLAGS_QUICKBORDER,d=1;break;case-851968:A=sl.OILIMITFLAGS_QUICKBACK,d=1}else switch(b){case-327681:P&=~Tl.EVGFLAGS_ONCE;break;case-393217:case-262145:P|=Tl.EVGFLAGS_NOMORE;break;case-196609:P|=Tl.EVGFLAGS_NOTALWAYS+Tl.EVGFLAGS_REPEAT;break;case-196614:O=sl.OILIMITFLAGS_QUICKCOL,r=i.evtParams[0],d=2;break;case-393222:O=sl.OILIMITFLAGS_QUICKCOL,r=i.evtParams[1],d=2}if(0!=(1&d))for(s=this.qual_GetFirstOiList(i.evtOiList);-1!=s;s=this.qual_GetNextOiList())this.rhPtr.rhOiList[s].oilLimitFlags|=A;if(0!=(2&d))for(s=this.qual_GetFirstOiList(r.oiList);-1!=s;s=this.qual_GetNextOiList())this.rhPtr.rhOiList[s].oilLimitFlags|=O}e.evgFlags&=~P,e.evgFlags|=v}this.colBuffer[G]=-1;var q=new Array(Dl.NUMBEROF_SYSTEMTYPES+R+1);I=0;var z;for(z=0,l=-Dl.NUMBEROF_SYSTEMTYPES;l<0;l++,z++)q[z]=I,I+=this.nConditions[Dl.NUMBEROF_SYSTEMTYPES+l];for(k=0;k<this.rhPtr.rhMaxOI;k++,z++)q[z]=I,this.rhPtr.rhOiList[k].oilType<Dl.KPX_BASE?I+=this.nConditions[Dl.NUMBEROF_SYSTEMTYPES+this.rhPtr.rhOiList[k].oilType]+Sl.EVENTS_EXTBASE+1:I+=this.application.extLoader.getNumberOfConditions(this.rhPtr.rhOiList[k].oilType)+Sl.EVENTS_EXTBASE+1;var J=I;for(this.listPointers=new Array(J),d=0;d<J;d++)this.listPointers[d]=0;T=0,C=0;var Q,Z=new Array(this.rhPtr.rhFrame.maxObjects);for(D=0;D<this.nEvents;D++)for(e=this.events[D],e.evgFlags&=~Tl.EVGFLAGS_ORINGROUP,F=!0,x=0,H=0;H<e.evgNCond;H++){if(i=e.evgEvents[H],l=Sl.EVTTYPE(i.evtCode),b=i.evtCode,f=-Sl.EVTNUM(b),F&&-2686977!=i.evtCode)if(0!=(i.evtFlags&yl.EVFLAGS_ALWAYS)&&(T++,0==(e.evgFlags&Tl.EVGFLAGS_HASPARENT)&&C++),l<0)this.listPointers[q[7+l]+f]++;else{for(Q=0,s=this.qual_GetFirstOiList(i.evtOiList);-1!=s;s=this.qual_GetNextOiList())this.listPointers[q[Dl.NUMBEROF_SYSTEMTYPES+s]+f]++,Z[Q++]=s;if(Z[Q]=-1,-917504==Sl.getEventCode(b))for(r=i.evtParams[0],n=this.qual_GetFirstOiList(r.oiList);-1!=n;n=this.qual_GetNextOiList()){for(Q=0;Z[Q]!=n&&-1!=Z[Q];)Q++;-1==Z[Q]&&this.listPointers[q[Dl.NUMBEROF_SYSTEMTYPES+n]+f]++}}F=!1,-1507329!=i.evtCode&&-1572865!=i.evtCode||(F=!0,e.evgFlags|=Tl.EVGFLAGS_ORINGROUP,0==x?x=i.evtCode:i.evtCode=x,-1572865==x&&(e.evgFlags|=Tl.EVGFLAGS_ORLOGICAL)),-2686977==i.evtCode&&(T++,e.evgFlags|=Tl.EVGFLAGS_INACTIVE)}var $,tt=T+1;for($=0;$<J;$++)0!=this.listPointers[$]&&(I=this.listPointers[$],this.listPointers[$]=tt,tt+=I+1);for(this.eventPointersGroup=new Array(tt),this.eventPointersCnd=new Array(tt),d=0;d<tt;d++)this.eventPointersGroup[d]=null,this.eventPointersCnd[d]=0;var et=new Array(J);for(d=0;d<J;d++)et[d]=this.listPointers[d];this.rhPtr.rh4PosOnLoop=null,y=0,T=0;var it,rt=new Array,st=new Array,nt=C+1;for(this.complexOnLoop=!1,D=0;D<this.nEvents;D++){for(e=this.events[D],F=!0,H=0;H<e.evgNCond;H++){if(i=e.evgEvents[H],l=Sl.EVTTYPE(i.evtCode),b=i.evtCode,f=-Sl.EVTNUM(b),F&&-2686977!=i.evtCode){if(0!=(i.evtFlags&yl.EVFLAGS_ALWAYS))if(0!=(e.evgFlags&Tl.EVGFLAGS_HASPARENT)){if(rt.length>0){var ot=rt[rt.length-1];ot.push(e),ot.push(H)}}else this.eventPointersGroup[y]=e,this.eventPointersCnd[y]=H,y++;if(l<0){if(it=q[Dl.NUMBEROF_SYSTEMTYPES+l]+f,this.eventPointersGroup[et[it]]=e,this.eventPointersCnd[et[it]]=H,et[it]++,i.evtCode==fr.CND_ONLOOP){var d,ht=!1;for(d=0;d<e.evgNCond&&(e.evgEvents[d].evtCode!=fr.CND_OR&&e.evgEvents[d].evtCode!=fr.CND_ORLOGICAL);d++);d<e.evgNCond&&(ht=!0);var Y=i.evtParams[0];if(Y.tokens[0].code==Nn.EXP_STRING&&0==Y.tokens[1].code){var at,lt,ut=null,ct=Y.tokens[0].string,dt=this.rhPtr.addFastLoop(ct);for(lt=0;lt<j.length;lt++){var ft=j[lt];if(qc.compareStringsIgnoreCase(ft.name,ct)){if(this.rhPtr.rh4PosOnLoop||(this.rhPtr.rh4PosOnLoop=new Array),null==ut){for(at=0;at<this.rhPtr.rh4PosOnLoop.length&&(ut=this.rhPtr.rh4PosOnLoop[at],!qc.compareStringsIgnoreCase(ct,ut.name));at++);at==this.rhPtr.rh4PosOnLoop.length&&(ut=new Ol(ct,dt),this.rhPtr.rh4PosOnLoop.push(ut)),ut.AddOnLoop(e),ut.m_bOR|=ht}ft.address.fastFastLoop=at+1}}if(null==ut){for(this.rhPtr.rh4PosOnLoop||(this.rhPtr.rh4PosOnLoop=new Array),at=0;at<this.rhPtr.rh4PosOnLoop.length&&(ut=this.rhPtr.rh4PosOnLoop[at],!qc.compareStringsIgnoreCase(ct,ut.name));at++);at==this.rhPtr.rh4PosOnLoop.length&&(ut=new Ol(ct,dt),this.rhPtr.rh4PosOnLoop.push(ut)),ut.AddOnLoop(e),ut.m_bOR|=ht}}else this.complexOnLoop=!0}}else{for(Q=0,s=this.qual_GetFirstOiList(i.evtOiList);-1!=s;s=this.qual_GetNextOiList())it=q[Dl.NUMBEROF_SYSTEMTYPES+s]+f,this.eventPointersGroup[et[it]]=e,this.eventPointersCnd[et[it]]=H,et[it]++,Z[Q++]=s;if(Z[Q]=-1,-917504==Sl.getEventCode(b))for(r=i.evtParams[0],n=this.qual_GetFirstOiList(r.oiList);-1!=n;n=this.qual_GetNextOiList()){for(Q=0;Z[Q]!=n&&-1!=Z[Q];)Q++;-1==Z[Q]&&(it=q[Dl.NUMBEROF_SYSTEMTYPES+n]+f,this.eventPointersGroup[et[it]]=e,this.eventPointersCnd[et[it]]=H,et[it]++)}}}if(F=!1,-1507329!=i.evtCode&&-1572865!=i.evtCode||(F=!0),-2686977==i.evtCode&&rt.length>0){st.pop().evgOffsetList=nt;for(var ot=rt.pop(),pt=0;pt<ot.length;pt+=2)this.eventPointersGroup[nt]=ot[pt],this.eventPointersCnd[nt]=ot[pt+1],nt++;this.eventPointersGroup[nt]=null,this.eventPointersCnd[nt]=null,nt++}}if(0!=(e.evgFlags&Tl.EVGFLAGS_HASCHILDREN)){var ot=new Array;rt.push(ot);for(var d=0;d<e.evgNAct;d++){var i=e.evgEvents[e.evgNCond+d];if(2883583==i.evtCode){if(i.evtNParams>0){var r=i.evtParams[0];st.push(r)}break}}}}$=q[Dl.NUMBEROF_SYSTEMTYPES+Dl.OBJ_TIMER],L=this.listPointers[$-Sl.EVTNUM(-131076)],this.limitBuffer=new Array(R+1+G/2);var mt,gt,vt=0;for(k=0;k<this.rhPtr.rhMaxOI;k++){w=this.rhPtr.rhOiList[k],$=q[Dl.NUMBEROF_SYSTEMTYPES+k],w.oilEvents=$;var _t;if(0!=(w.oilOEFlags&Yl.OEFLAG_MOVEMENTS)){if(S=0,0!=(I=this.listPointers[$-Sl.EVTNUM(-786432)]))for(;null!=this.eventPointersGroup[I];){for(e=this.eventPointersGroup[I],i=e.evgEvents[this.eventPointersCnd[I]],g=i.evtParams[0].value,_t=Sl.evg_FindAction(e,0),d=e.evgNAct;d>0;d--,_t++)i=e.evgEvents[_t],i.evtCode==(8<<16|65535&w.oilType)&&(S|=g);I++}for(w.oilWrap=S,h=w.oilOi,G=0,mt=0;-1!=this.colBuffer[G];G+=2)if(this.colBuffer[G]==h){if(0!=(32768&(a=this.colBuffer[G+1]))){w.oilLimitFlags|=a;continue}for(gt=0;gt<mt&&this.limitBuffer[vt+gt]!=a;)gt++;gt==mt&&(this.limitBuffer[vt+mt++]=a)}mt>0&&(w.oilLimitList=vt,this.limitBuffer[vt+mt++]=-1,vt+=mt)}}for(this.rhEvents[0]=0,d=1;d<=Dl.NUMBEROF_SYSTEMTYPES;d++)this.rhEvents[d]=q[Dl.NUMBEROF_SYSTEMTYPES-d];for(k=0;k<this.rhPtr.rhMaxOI;k++)if(w=this.rhPtr.rhOiList[k],0==(2147483648&(s=w.oilObject)))do{M=this.rhPtr.rhObjectList[s],M.hoEvents=w.oilEvents,M.hoOiList=w,M.hoLimitFlags=w.oilLimitFlags,0!=(M.hoOEFlags&Yl.OEFLAG_MOVEMENTS)&&(M.rom.rmWrapping=w.oilWrap),0!=(M.hoOEFlags&Yl.OEFLAG_SPRITES)&&0==(M.hoLimitFlags&sl.OILIMITFLAGS_QUICKCOL)&&M.ros.setColFlag(!1),0==(M.hoOEFlags&Yl.OEFLAG_MANUALSLEEP)&&(M.hoOEFlags&=~Yl.OEFLAG_NEVERSLEEP,0!=(M.hoLimitFlags&sl.OILIMITFLAGS_QUICKBACK)&&0!=(this.rhPtr.rhFrame.leFlags&za.LEF_TOTALCOLMASK)&&(M.hoOEFlags|=Yl.OEFLAG_NEVERSLEEP),0!=(M.hoLimitFlags&(sl.OILIMITFLAGS_QUICKCOL|sl.OILIMITFLAGS_QUICKBORDER))&&(M.hoOEFlags|=Yl.OEFLAG_NEVERSLEEP)),s=M.hoNumNext}while(0==(2147483648&s));this.rhEventAlways=0!=C,this.rh4TimerEventsBase=0!=L?L:0,this.colBuffer=null,this.bReady=!0},unBranchPrograms:function(){this.bReady=!1,this.qualToOiList=null,this.limitBuffer=null,this.listPointers=null,this.eventPointersGroup=null,this.eventPointersCnd=null},get_OiListOffset:function(t,e){if(0!=(t&Dl.OIFLAG_QUALIFIER)){var i;for(i=0;t!=this.qualifiers[i].qOi||e!=this.qualifiers[i].qType;)i++;return 32768|i}var r;for(r=0;r<this.rhPtr.rhMaxOI&&this.rhPtr.rhOiList[r].oilOi!=t;)r++;return r},isTypeRealSprite:function(t){var e;for(e=0;e<this.rhPtr.rhMaxOI;e++)if(-1!=this.rhPtr.rhOiList[e].oilOi&&this.rhPtr.rhOiList[e].oilType==t)return 0!=(this.rhPtr.rhOiList[e].oilOEFlags&Yl.OEFLAG_SPRITES)&&0==(this.rhPtr.rhOiList[e].oilOEFlags&Yl.OEFLAG_QUICKDISPLAY);return!0},qual_GetFirstOiList:function(t){return 0==(32768&t)?(this.qualOilPtr=-1,t):-1==t?-1:(t&=32767,this.qualOilPtr=t,this.qualOilPos=0,this.qual_GetNextOiList())},qual_GetNextOiList:function(){var t;return-1==this.qualOilPtr?-1:this.qualOilPos>=this.qualToOiList[this.qualOilPtr].qoiList.length?-1:(t=this.qualToOiList[this.qualOilPtr].qoiList[this.qualOilPos+1],this.qualOilPos+=2,t)},qual_GetFirstOiList2:function(t){return 0==(32768&t)?(this.qualOilPtr2=-1,t):-1==t?-1:(t&=32767,this.qualOilPtr2=t,this.qualOilPos2=0,this.qual_GetNextOiList2())},qual_GetNextOiList2:function(){var t;return-1==this.qualOilPtr2?-1:this.qualOilPos2>=this.qualToOiList[this.qualOilPtr2].qoiList.length?-1:(t=this.qualToOiList[this.qualOilPtr2].qoiList[this.qualOilPos2+1],this.qualOilPos2+=2,t)},addColList:function(t,e,i,r){var s,n;if(e<0){if(null!=this.qualToOiList)for(s=this.qualToOiList[32767&t],n=0;n<s.qoiList.length;)this.addColList(s.qoiList[n+1],s.qoiList[n],i,r),n+=2}else if(r<0){if(null!=this.qualToOiList)for(s=this.qualToOiList[32767&i],n=0;n<s.qoiList.length;)this.addColList(t,e,s.qoiList[n+1],s.qoiList[n]),n+=2}else{var o,h=this.rhPtr.rhOiList[t];if(null==h.oilColList)h.oilColList=new Array,o=h.oilColList;else{o=h.oilColList;var a;for(a=0;a<o.length;a+=2)if(r==o[a])return}o.push(r),o.push(i)}},make_ColList1:function(t,e,i){var r,s,n,o,h,a;for(a=0;a<t.evgNCond;a++)if(o=t.evgEvents[a],Sl.EVTTYPE(o.evtCode)>=2)switch(s=32768+sl.OILIMITFLAGS_BACKDROPS,Sl.getEventCode(o.evtCode)){case-917504:for(h=o.evtParams[0],n=this.qual_GetFirstOiList(o.evtOiList);-1!=n;n=this.qual_GetNextOiList())r=this.rhPtr.rhOiList[n].oilOi,i==r&&(s=0,e=this.make_ColList2(e,i,h.oiList));if(0==s)break;for(n=this.qual_GetFirstOiList(h.oiList);-1!=n;n=this.qual_GetNextOiList())r=this.rhPtr.rhOiList[n].oilOi,i==r&&(e=this.make_ColList2(e,i,o.evtOiList));break;case-786432:h=o.evtParams[0],s=32768+h.value;case-851968:for(n=this.qual_GetFirstOiList(o.evtOiList);-1!=n;n=this.qual_GetNextOiList())r=this.rhPtr.rhOiList[n].oilOi,i==r&&(this.colBuffer[e++]=i,this.colBuffer[e++]=s)}return e},make_ColList2:function(t,e,i){var r,s;for(s=this.qual_GetFirstOiList(i);-1!=s;s=this.qual_GetNextOiList()){r=this.rhPtr.rhOiList[s].oilOi;var n;for(n=0;n<t&&(this.colBuffer[n]!=e||this.colBuffer[n+1]!=r);n+=2);n==t&&(this.colBuffer[t++]=e,this.colBuffer[t++]=r)}return t},getCollisionFlags:function(){var t,e,i,r,s,n,o;for(r=0;r<this.events.length;r++)for(t=this.events[r],s=0;s<t.evgNAct+t.evgNCond;s++)if(e=t.evgEvents[s],e.evtNParams>0)for(n=0;n<e.evtNParams;n++)if(i=e.evtParams[n],43==i.code){var h=i;switch(h.value){case 1:o|=ac.CM_OBSTACLE;break;case 2:o|=ac.CM_PLATFORM}}return o},enumSounds:function(t){var e,i,r,s,n,o;for(r=0;r<this.nEvents;r++)for(e=this.events[r],s=0;s<e.evgNCond+e.evgNAct;s++)for(i=e.evgEvents[s],n=0;n<i.evtNParams;n++)switch(i.evtParams[n].code){case 6:case 35:o=i.evtParams[n],t.enumerate(o.sndHandle)}},HandleKeyRepeat:function(){var t,e,i,r;for(i=0;i<this.nEvents;i++)for(t=this.events[i],r=0;r<t.evgNCond;r++)if(e=t.evgEvents[r],-6==e.evtCode){t.evgInhibit=this.rhPtr.rhLoopCount;break}}},Tl.EVGFLAGS_ONCE=1,Tl.EVGFLAGS_NOTALWAYS=2,Tl.EVGFLAGS_REPEAT=4,Tl.EVGFLAGS_NOMORE=8,Tl.EVGFLAGS_SHUFFLE=16,Tl.EVGFLAGS_HASCHILDREN=64,Tl.EVGFLAGS_BREAK=128,Tl.EVGFLAGS_BREAKPOINT=256,Tl.EVGFLAGS_ALWAYSCLEAN=512,Tl.EVGFLAGS_ORINGROUP=1024,Tl.EVGFLAGS_STOPINGROUP=2048,Tl.EVGFLAGS_ORLOGICAL=4096,Tl.EVGFLAGS_GROUPED=8192,Tl.EVGFLAGS_INACTIVE=16384,Tl.EVGFLAGS_HASPARENT=32768,Tl.EVGFLAGS_LIMITED=Tl.EVGFLAGS_SHUFFLE+Tl.EVGFLAGS_NOTALWAYS+Tl.EVGFLAGS_REPEAT+Tl.EVGFLAGS_NOMORE,Tl.EVGFLAGS_DEFAULTMASK=Tl.EVGFLAGS_BREAKPOINT+Tl.EVGFLAGS_GROUPED+Tl.EVGFLAGS_HASCHILDREN+Tl.EVGFLAGS_HASPARENT,Tl.create=function(t){var e=t.file.getFilePointer(),i=t.file.readShort(),r=new Tl;r.evgNCond=t.file.readAByte(),r.evgNAct=t.file.readAByte(),r.evgFlags=t.file.readAShort(),r.evgLine=t.file.readAShort(),r.evgInhibit=t.file.readAInt(),r.evgInhibitCpt=t.file.readAInt(),r.evgEvents=new Array(r.evgNCond+r.evgNAct);var s,n=0;for(s=0;s<r.evgNCond;s++)r.evgEvents[n++]=fr.create(t);for(s=0;s<r.evgNAct;s++)r.evgEvents[n++]=_.create(t);return t.file.seek(e-i),r},yl.EVFLAGS_REPEAT=1,yl.EVFLAGS_DONE=2,yl.EVFLAGS_DEFAULT=4,yl.EVFLAGS_DONEBEFOREFADEIN=8,yl.EVFLAGS_NOTDONEINSTART=16,yl.EVFLAGS_ALWAYS=32,yl.EVFLAGS_BAD=64,yl.EVFLAGS_BADOBJECT=128,yl.EVFLAGS_DEFAULTMASK=yl.EVFLAGS_ALWAYS+yl.EVFLAGS_REPEAT+yl.EVFLAGS_DEFAULT+yl.EVFLAGS_DONEBEFOREFADEIN+yl.EVFLAGS_NOTDONEINSTART,yl.EVFLAG2_NOT=1,wl.TIMEREVENTTYPE_ONESHOT=0,wl.TIMEREVENTTYPE_REPEAT=1,Ml.PARENT_NONE=0,Ml.PARENT_FRAME=1,Ml.PARENT_FRAMEITEM=2,Ml.PARENT_QUALIFIER=3,Ml.prototype={load:function(t){this.loHandle=t.readAShort(),this.loOiHandle=t.readAShort(),this.loX=t.readAInt(),this.loY=t.readAInt(),this.loParentType=t.readAShort(),this.loOiParentHandle=t.readAShort(),this.loLayer=t.readAShort(),t.skipBytes(2)},addInstance:function(t,e){this.loInstances[t]=e}},Rl.prototype={load:function(t){this.nIndex=t.file.readAInt(),this.list=new Array(this.nIndex);var e,i=0;for(e=0;e<this.nIndex;e++){this.list[e]=new Ml,this.list[e].load(t.file),this.list[e].loHandle+1>i&&(i=this.list[e].loHandle+1);var r=t.OIList.getOIFromHandle(this.list[e].loOiHandle);this.list[e].loType=r.oiType}for(this.handleToIndex=new Array(i),e=0;e<this.nIndex;e++)this.handleToIndex[this.list[e].loHandle]=e},getLOFromIndex:function(t){return this.list[t]},getLOFromHandle:function(t){return t<this.handleToIndex.length?this.list[this.handleToIndex[t]]:null},next_LevObj:function(){var t;if(this.loFranIndex<this.nIndex)do{if(t=this.list[this.loFranIndex++],t.loType>=2)return t}while(this.loFranIndex<this.nIndex);return null},first_LevObj:function(){return this.loFranIndex=0,this.next_LevObj()}},kl.FLOPT_XCOEF=1,kl.FLOPT_YCOEF=2,kl.FLOPT_NOSAVEBKD=4,kl.FLOPT_VISIBLE=16,kl.FLOPT_WRAP_HORZ=32,kl.FLOPT_WRAP_VERT=64,kl.FLOPT_REDRAW=65536,kl.FLOPT_TOHIDE=131072,kl.FLOPT_TOSHOW=262144,kl.prototype={load:function(t){this.dwOptions=t.readAInt(),this.xCoef=t.readAFloat(),this.yCoef=t.readAFloat(),this.nBkdLOs=t.readAInt(),this.nFirstLOIndex=t.readAInt(),this.pName=t.readAString(),this.backUp_dwOptions=this.dwOptions,this.backUp_xCoef=this.xCoef,this.backUp_yCoef=this.yCoef,this.backUp_nBkdLOs=this.nBkdLOs,this.backUp_nFirstLOIndex=this.nFirstLOIndex},reset:function(){this.dwOptions=this.backUp_dwOptions,this.xCoef=this.backUp_xCoef,this.yCoef=this.backUp_yCoef,this.nBkdLOs=this.backUp_nBkdLOs,this.nFirstLOIndex=this.backUp_nFirstLOIndex,this.x=this.y=this.dx=this.dy=this.realX=this.realY=0,this.pObstacles=null,this.pPlatforms=null,this.pLadders=null,this.addedBackdrops=null,this.setAngle(0),this.scale=1,this.setScaleX(1),this.setScaleY(1),this.setXSpot(this.app.gaCxWin/2),this.setYSpot(this.app.gaCyWin/2),this.setXDest(this.app.gaCxWin/2),this.setYDest(this.app.gaCyWin/2),this.setZoom(!1),this.dwOptions&kl.FLOPT_TOHIDE?(this.bVisible=!0,this.hide()):(this.bVisible=!1,this.show())},deleteBackObjects:function(){this.planeBack.removeAll()},addObstacle:function(t){null==this.pObstacles&&(this.pObstacles=new n),this.pObstacles.add(t)},delObstacle:function(t){null!=this.pObstacles&&this.pObstacles.removeObject(t)},addPlatform:function(t){null==this.pPlatforms&&(this.pPlatforms=new n),this.pPlatforms.add(t)},delPlatform:function(t){null!=this.pPlatforms&&this.pPlatforms.removeObject(t)},addBackdrop:function(t){null==this.addedBackdrops&&(this.addedBackdrops=new n),this.addedBackdrops.add(t)},resetLevelBackground:function(){this.pPlatforms=null,this.pObstacles=null,this.pLadders=null,this.addedBackdrops=null,this.planeBack.removeAll()},createPlanes:function(t,e){this.planeBack=new hc,this.planeBack.x=t,this.planeBack.y=e,this.planeQuickDisplay=new hc,this.planeQuickDisplay.x=t,this.planeQuickDisplay.y=e,this.planeSprites=new hc,this.planeSprites.x=t,this.planeSprites.y=e,this.setAngle(0),this.scale=1,this.setScaleX(1),this.setScaleY(1),this.setXSpot(this.app.gaCxWin/2),this.setYSpot(this.app.gaCyWin/2),this.setXDest(this.app.gaCxWin/2),this.setYDest(this.app.gaCyWin/2),this.setZoom(!1),this.app.mainSprite.addChild(this.planeBack),this.app.mainSprite.addChild(this.planeQuickDisplay),this.app.mainSprite.addChild(this.planeSprites),this.showHide()},setAngle:function(t){this.angle=t,this.planeBack.angle=t,this.planeQuickDisplay.angle=t,this.planeSprites.angle=t},setScaleX:function(t){this.scaleX=t,this.planeBack.scaleX=t,this.planeQuickDisplay.scaleX=t,this.planeSprites.scaleX=t},setScaleY:function(t){this.scaleY=t,this.planeBack.scaleY=t,this.planeQuickDisplay.scaleY=t,this.planeSprites.scaleY=t},setXSpot:function(t){this.xSpot=t,this.planeBack.xSpot=t,this.planeQuickDisplay.xSpot=t,this.planeSprites.xSpot=t},setYSpot:function(t){this.ySpot=t,this.planeBack.ySpot=t,this.planeQuickDisplay.ySpot=t,this.planeSprites.ySpot=t},setXDest:function(t){t=this.app.gaCxWin-t,this.xDest=t,this.planeBack.xDest=t,this.planeQuickDisplay.xDest=t,this.planeSprites.xDest=t},setYDest:function(t){t=this.app.gaCyWin-t,this.yDest=t,this.planeBack.yDest=t,this.planeQuickDisplay.yDest=t,this.planeSprites.yDest=t},setZoom:function(t){this.bZoom=t,this.planeBack.bZoom=t,this.planeQuickDisplay.bZoom=t,this.planeSprites.bZoom=t},resetPlanes:function(t,e){this.planeBack.x=t,this.planeBack.y=e,this.planeQuickDisplay.x=t,this.planeQuickDisplay.y=e,this.planeSprites.x=t,this.planeSprites.y=e,this.show()},fillBack:function(t,e,i){},showHide:function(){this.dwOptions&kl.FLOPT_VISIBLE?this.show():this.hide()},hide:function(){this.dwOptions&=~kl.FLOPT_TOHIDE,this.bVisible&&(this.planeBack.visible=!1,this.planeQuickDisplay.visible=!1,this.planeSprites.visible=!1,this.bVisible=!1)},show:function(){0==this.bVisible&&(this.planeBack.visible=!0,this.planeQuickDisplay.visible=!0,this.planeSprites.visible=!0,this.bVisible=!0)},deletePlanes:function(){null!=this.planeBack&&(this.app.mainSprite.removeChild(this.planeBack),this.planeBack=null),null!=this.planeQuickDisplay&&(this.app.mainSprite.removeChild(this.planeQuickDisplay),this.planeQuickDisplay=null),null!=this.planeSprites&&(this.app.mainSprite.removeChild(this.planeSprites),this.planeSprites=null)},deleteAddedBackdrops:function(){var t;if(null!=this.addedBackdrops)for(t=0;t<this.addedBackdrops.size();t++){var e=this.addedBackdrops.get(t);e.delInstance(this),null!=e.body&&this.app.run.rh4Box2DBase.rSubABackdrop(e.body)}this.addedBackdrops=null},deleteAddedBackdropsAt:function(t,e,i){t+=this.x,e+=this.y;var r;if(null!=this.addedBackdrops)for(r=0;r<this.addedBackdrops.size();r++){var s=this.addedBackdrops.get(r);if(t>=s.x&&t<s.x+s.width&&e>=s.y&&e<s.y+s.height){var n=!0;if(i&&(n=s.testPoint(t,e)),n)return s.delInstance(this),this.addedBackdrops.removeObject(s),void(null!=s.body&&this.app.run.rh4Box2DBase.rSubABackdrop(s.body))}}},addLadder:function(t,e,i,r){var s=new h;s.left=t,s.top=e,s.right=i,s.bottom=r,null==this.pLadders&&(this.pLadders=new n),this.pLadders.add(s)},ladderSub:function(t,e,i,r){if(null!=pLadders){var s=new h;s.left=Math.min(t,i),s.top=Math.min(e,r),s.right=Math.max(t,i),s.bottom=Math.max(e,r);var n,o;for(n=0;n<pLadders.size();n++)o=this.pLadders.get(n),1==o.intersectRect(s)&&(this.pLadders.removeIndex(n),n--)}},getLadderAt:function(t,e){if(t+=this.x,e+=this.y,null!=this.pLadders){var i,r;for(i=0;i<this.pLadders.size();i++)if(r=this.pLadders.get(i),t>=r.left&&e>=r.top&&t<r.right&&e<r.bottom)return r}return null},testMask:function(t,e,i,r,s){var n=e+this.x-t.xSpot,o=i+this.y-t.ySpot,h=n+t.width,a=o+t.height,l=o;0!=r&&(l=a-r);var u,c,d;if(null==(d=s==ac.CM_TEST_OBSTACLE?this.pObstacles:this.pPlatforms))return null;for(u=0;u<d.size();u++)if(c=d.get(u),c.x<h&&c.x+c.width>n&&c.y<a&&c.y+c.height>l&&c.testMask(t,n,o,r))return c;return null},testRect:function(t,e,i,r,s,n){var o;if(null==(o=n==ac.CM_TEST_OBSTACLE?this.pObstacles:this.pPlatforms))return null;t+=this.x,e+=this.y,i+=this.x,r+=this.y,0!=s&&(e=r-s);var h;for(h=0;h<o.size();h++){var a=o.get(h);if(a.x<i&&a.x+a.width>t&&a.y<r&&a.y+a.height>e&&a.testRect(t,e,i,r))return a}return null},testPoint:function(t,e,i){var r;if(null==(r=i==ac.CM_TEST_OBSTACLE?this.pObstacles:this.pPlatforms))return null;t+=this.x,e+=this.y;var s;for(s=0;s<r.size();s++){var n=r.get(s);if(t>=n.x&&t<n.x+n.width&&e>=n.y&&e<n.y+n.height&&n.testPoint(t,e))return n}return null}},Nl.prototype={draw:function(t,e,i){if(null!=this.levelObject)if(this.type==Dl.OBJ_BOX){var r,s=this.poi.oiOC;switch(s.ocFillType){case 0:break;case 1:switch(s.ocShape){case 1:t.renderLine(e+this.x,i+this.y,this.width,this.height,this.color1,this.effect,this.effectParam);break;case 2:t.renderSolidColor(e+this.x,i+this.y,this.width,this.height,this.color1,this.effect,this.effectParam);break;case 3:t.renderSolidColorEllipse(e+this.x,i+this.y,this.width,this.height,this.color1,this.effect,this.effectParam)}break;case 2:switch(s.ocShape){case 1:t.renderLine(e+this.x,i+this.y,this.width,this.height,this.color1,this.effect,this.effectParam);break;case 2:t.renderGradient(e+this.x,i+this.y,this.width,this.height,this.color1,this.color2,0!=this.gradientFlags,this.effect,this.effectParam);break;case 3:t.renderGradientEllipse(e+this.x,i+this.y,this.width,this.height,this.color1,this.color2,0!=this.gradientFlags,this.effect,this.effectParam)}break;case 3:switch(s.ocShape){case 1:break;case 2:r=this.app.imageBank.getImageFromHandle(s.ocImage),t.renderPattern(r,e+this.x,i+this.y,this.width,this.height,this.effect,this.effectParam);break;case 3:r=this.app.imageBank.getImageFromHandle(s.ocImage),t.renderPatternEllipse(r,e+this.x,i+this.y,this.width,this.height,this.effect,this.effectParam)}}if(this.borderWidth>0)switch(s.ocShape){case 1:var n=0,o=0,h=this.width,a=this.height;0!=(s.ocLineFlags&jl.LINEF_INVX)&&(n+=h,h=-h),0!=(s.ocLineFlags&jl.LINEF_INVY)&&(o+=a,a=-a),t.renderLine(e+this.x+n,i+this.y+o,e+this.x+n+h,i+this.y+o+a,this.borderColor,this.borderWidth);break;case 2:t.renderRect(e+this.x,i+this.y,this.width,this.height,this.borderColor,this.borderWidth);break;case 3:t.renderEllipse(e+this.x,i+this.y,this.width,this.height,1,this.borderColor,this.borderWidth)}}else this.type==Dl.OBJ_BKD?t.renderImage(this.imageUsed,e+this.x+this.imageUsed.xSpot,i+this.y+this.imageUsed.ySpot,0,1,1,this.effect,this.effectParam):null!=this.ho&&this.ho.draw(t,e,i);else t.renderImage(this.imageUsed,e+this.x+this.imageUsed.xSpot,i+this.y+this.imageUsed.ySpot,0,1,1,this.effect,this.effectParam)},setEffect:function(t,e){this.effect=t,this.effectParam=e},addInstance:function(t,e){switch(e.planeBack.addChild(this),this.type==Dl.OBJ_PASTED&&e.addBackdrop(this),this.obstacleType){case Bl.OBSTACLE_SOLID:e.addObstacle(this),e.addPlatform(this);break;case Bl.OBSTACLE_PLATFORM:e.addPlatform(this);break;case Bl.OBSTACLE_LADDER:e.addLadder(this.x,this.y,this.x+this.width,this.y+this.height)}},delInstance:function(t){switch(t.planeBack.removeChild(this),this.obstacleType){case Bl.OBSTACLE_SOLID:t.delObstacle(this),t.delPlatform(this);break;case Bl.OBSTACLE_PLATFORM:t.delPlatform(this);break;case Bl.OBSTACLE_LADDER:t.ladderSub(x,y,x+width,y+height)}},testMask:function(t,e,i,r){var s,n;switch(this.type){case 0:var o=this.height;return this.obstacleType==Bl.OBSTACLE_PLATFORM&&(o=za.HEIGHT_PLATFORM),t.testRect2(e,i,r,this.x,this.y,this.width,o,0);case 1:case 11:return 0!=this.colBox||(s=lc.GCMF_OBSTACLE,this.obstacleType==Bl.OBSTACLE_PLATFORM&&(s=lc.GCMF_PLATFORM),n=this.imageUsed.getMask(s,0,1,1),t.testMask(e,i,r,n,this.x,this.y,0))}return!1},testRect:function(t,e,i,r){var s,n;switch(this.type){case 0:if(this.obstacleType==Bl.OBSTACLE_PLATFORM){var o=this.y,h=this.y+Math.min(this.height,za.HEIGHT_PLATFORM);return o<r&&h>e}return!0;case 1:case 11:return 0!=this.colBox||(s=lc.GCMF_OBSTACLE,this.obstacleType==Bl.OBSTACLE_PLATFORM&&(s=lc.GCMF_PLATFORM),n=this.imageUsed.getMask(s,0,1,1),n.testRect2(this.x,this.y,0,t,e,i,r,0))}return!1},testPoint:function(t,e){var i,r;switch(this.type){case 0:if(this.obstacleType==Bl.OBSTACLE_PLATFORM){var s=y+this.height-za.HEIGHT_PLATFORM,n=this.y+this.height;return e>=s&&e<n}return!0;case 1:case 11:return 0!=this.colBox||(i=lc.GCMF_OBSTACLE,this.obstacleType==Bl.OBSTACLE_PLATFORM&&(i=lc.GCMF_PLATFORM),r=this.imageUsed.getMask(i,0,1,1),r.testPoint(this.x,this.y,t,e))}return!1}},Dl.OILF_OCLOADED=1,Dl.OILF_ELTLOADED=2,Dl.OILF_TOLOAD=4,Dl.OILF_TODELETE=8,Dl.OILF_CURFRAME=16,Dl.OILF_TORELOAD=32,Dl.OILF_IGNORELOADONCALL=64,Dl.OIF_LOADONCALL=1,Dl.OIF_DISCARDABLE=2,Dl.OIF_GLOBAL=4,Dl.NUMBEROF_SYSTEMTYPES=7,Dl.OBJ_PLAYER=-7,Dl.OBJ_KEYBOARD=-6,Dl.OBJ_CREATE=-5,Dl.OBJ_TIMER=-4,Dl.OBJ_GAME=-3,Dl.OBJ_SPEAKER=-2,Dl.OBJ_SYSTEM=-1,Dl.OBJ_BOX=0,Dl.OBJ_BKD=1,Dl.OBJ_SPR=2,Dl.OBJ_TEXT=3,Dl.OBJ_QUEST=4,Dl.OBJ_SCORE=5,Dl.OBJ_LIVES=6,Dl.OBJ_COUNTER=7,Dl.OBJ_RTF=8,Dl.OBJ_CCA=9,Dl.NB_SYSOBJ=10,Dl.OBJ_PASTED=11,Dl.OBJ_LAST=10,Dl.KPX_BASE=32,Dl.OIFLAG_QUALIFIER=32768,Dl.prototype={loadHeader:function(t){this.oiHandle=t.readAShort(),this.oiType=t.readAShort(),this.oiFlags=t.readAShort(),t.skipBytes(2),this.oiInkEffect=t.readAInt(),this.oiInkEffectParam=t.readAInt()},load:function(t){switch(t.seek(this.oiFileOffset),this.oiType){case 0:this.oiOC=new jl;break;case 1:this.oiOC=new Gl;break;default:this.oiOC=new Yl}this.oiOC.load(t,this.oiType),this.oiLoadFlags=0},unLoad:function(){this.oiOC=null},enumElements:function(t,e){this.oiOC.enumElements(t,e)}},Hl.prototype={preLoad:function(t){this.oiMaxIndex=t.readAInt(),this.ois=new Array(this.oiMaxIndex);var e;for(this.oiMaxHandle=0,e=0;e<this.oiMaxIndex;e++)for(var i,r,s=0;32639!=s;)if(s=t.readAShort(),t.readAShort(),0!=(i=t.readAInt())){switch(r=t.getFilePointer()+i,s){case 17476:this.ois[e]=new Dl,this.ois[e].loadHeader(t),this.ois[e].oiHandle>=this.oiMaxHandle&&(this.oiMaxHandle=this.ois[e].oiHandle+1);break;case 17477:this.ois[e].oiName=t.readAString();break;case 17478:this.ois[e].oiFileOffset=t.getFilePointer()}t.seek(r)}for(this.oiHandleToIndex=new Array(this.oiMaxHandle),e=0;e<this.oiMaxIndex;e++)this.oiHandleToIndex[this.ois[e].oiHandle]=e;this.oiToLoad=new Array(this.oiMaxHandle),this.oiLoaded=new Array(this.oiMaxHandle);var n;for(n=0;n<this.oiMaxHandle;n++)this.oiToLoad[n]=0,this.oiLoaded[n]=0},getOIFromHandle:function(t){return this.ois[this.oiHandleToIndex[t]]},getOIFromIndex:function(t){return this.ois[t]},resetOICurrent:function(){var t;for(t=0;t<this.oiMaxIndex;t++)this.ois[t].oiFlags&=~Dl.OILF_CURFRAME},setOICurrent:function(t){this.ois[this.oiHandleToIndex[t]].oiFlags|=Dl.OILF_CURFRAME},getFirstOI:function(){var t;for(t=0;t<this.oiMaxIndex;t++)if(0!=(this.ois[t].oiFlags&Dl.OILF_CURFRAME))return this.currentOI=t,this.ois[t];return null},getNextOI:function(){if(this.currentOI<this.oiMaxIndex){var t;for(t=this.currentOI+1;t<this.oiMaxIndex;t++)if(0!=(this.ois[t].oiFlags&Dl.OILF_CURFRAME))return this.currentOI=t,this.ois[t]}return null},resetToLoad:function(){var t;for(t=0;t<this.oiMaxHandle;t++)this.oiToLoad[t]=0},setToLoad:function(t){this.oiToLoad[t]=1},load:function(t){var e;for(e=0;e<this.oiMaxHandle;e++)0!=this.oiToLoad[e]?(0==this.oiLoaded[e]||0!=this.oiLoaded[e]&&0!=(this.ois[this.oiHandleToIndex[e]].oiLoadFlags&Dl.OILF_TORELOAD))&&(this.ois[this.oiHandleToIndex[e]].load(t),this.oiLoaded[e]=1):0!=this.oiLoaded[e]&&(this.ois[this.oiHandleToIndex[e]].unLoad(),this.oiLoaded[e]=0);this.resetToLoad()},enumElements:function(t,e){var i;for(i=0;i<this.oiMaxHandle;i++)0!=this.oiLoaded[i]&&this.ois[this.oiHandleToIndex[i]].enumElements(t,e)}},Bl.OBSTACLE_NONE=0,Bl.OBSTACLE_SOLID=1,Bl.OBSTACLE_PLATFORM=2,
Bl.OBSTACLE_LADDER=3,Bl.OBSTACLE_TRANSPARENT=4,Gl.prototype={load:function(t,e){t.skipBytes(4),this.ocObstacleType=t.readAShort(),this.ocColMode=t.readAShort(),this.ocCx=t.readAInt(),this.ocCy=t.readAInt(),this.ocImage=t.readAShort()},enumElements:function(t,e){if(null!=t){var i=t.enumerate(this.ocImage);-1!=i&&(this.ocImage=i)}}},jl.LINEF_INVX=1,jl.LINEF_INVY=2,jl.prototype={load:function(t,e){if(t.skipBytes(4),this.ocObstacleType=t.readAShort(),this.ocColMode=t.readAShort(),this.ocCx=t.readAInt(),this.ocCy=t.readAInt(),this.ocBorderSize=t.readAShort(),this.ocBorderColor=t.readAColor(),this.ocShape=t.readAShort(),this.ocFillType=t.readAShort(),1==this.ocShape)this.ocLineFlags=t.readAShort();else switch(this.ocFillType){case 1:this.ocColor1=this.ocColor2=t.readAColor();break;case 2:this.ocColor1=t.readAColor(),this.ocColor2=t.readAColor(),this.ocGradientFlags=t.readAInt();break;case 3:this.ocImage=t.readAShort()}},enumElements:function(t,e){if(3==this.ocFillType&&null!=t){var i=t.enumerate(this.ocImage);-1!=i&&(ocImage=i)}}},Yl.OEFLAG_DISPLAYINFRONT=1,Yl.OEFLAG_BACKGROUND=2,Yl.OEFLAG_BACKSAVE=4,Yl.OEFLAG_RUNBEFOREFADEIN=8,Yl.OEFLAG_MOVEMENTS=16,Yl.OEFLAG_ANIMATIONS=32,Yl.OEFLAG_TABSTOP=64,Yl.OEFLAG_WINDOWPROC=128,Yl.OEFLAG_VALUES=256,Yl.OEFLAG_SPRITES=512,Yl.OEFLAG_INTERNALBACKSAVE=1024,Yl.OEFLAG_SCROLLINGINDEPENDANT=2048,Yl.OEFLAG_QUICKDISPLAY=4096,Yl.OEFLAG_NEVERKILL=8192,Yl.OEFLAG_NEVERSLEEP=16384,Yl.OEFLAG_MANUALSLEEP=32768,Yl.OEFLAG_TEXT=65536,Yl.OEFLAG_DONTCREATEATSTART=131072,Yl.OEFLAG_DONTRESETANIMCOUNTER=1048576,Yl.OCFLAGS2_DONTSAVEBKD=1,Yl.OCFLAGS2_SOLIDBKD=2,Yl.OCFLAGS2_COLBOX=4,Yl.OCFLAGS2_VISIBLEATSTART=8,Yl.OCFLAGS2_OBSTACLESHIFT=4,Yl.OCFLAGS2_OBSTACLEMASK=48,Yl.OCFLAGS2_OBSTACLE_SOLID=16;Yl.OCFLAGS2_OBSTACLE_PLATFORM=32,Yl.OCFLAGS2_OBSTACLE_LADDER=48,Yl.OCFLAGS2_AUTOMATICROTATION=64,Yl.OCFLAGS2_INITFLAGS=128,Yl.OEPREFS_BACKSAVE=1,Yl.OEPREFS_SCROLLINGINDEPENDANT=2,Yl.OEPREFS_QUICKDISPLAY=4,Yl.OEPREFS_SLEEP=8,Yl.OEPREFS_LOADONCALL=16,Yl.OEPREFS_GLOBAL=32,Yl.OEPREFS_BACKEFFECTS=64,Yl.OEPREFS_KILL=128,Yl.OEPREFS_INKEFFECTS=256,Yl.OEPREFS_TRANSITIONS=512,Yl.OEPREFS_FINECOLLISIONS=1024,Yl.prototype=Bl,Yl.prototype={load:function(t,e){var i=t.getFilePointer();this.ocQualifiers=new Array(8);var r;t.skipBytes(4),t.skipBytes(2);var s=t.readAShort();t.skipBytes(2);var n=t.readAShort(),o=t.readAShort(),h=t.readAShort();for(this.ocOEFlags=t.readAInt(),r=0;r<8;r++)this.ocQualifiers[r]=t.readShort();this.ocOEPrefs=t.readAShort();var a=t.readAShort(),l=t.readAShort();this.ocFlags2=t.readAShort();var u=t.readAShort();this.ocIdentifier=t.readAInt(),this.ocBackColor=t.readAColor();var c=t.readAInt(),d=t.readAInt();if(this.ocFadeIn=null,this.ocFadeOut=null,0!=h&&(t.seek(i+h),this.ocMovements=new bc,this.ocMovements.load(t)),0!=a&&(t.seek(i+a),this.ocValues=new fc,this.ocValues.load(t,0!=(this.ocFlags2&Yl.OCFLAGS2_INITFLAGS))),0!=l&&(t.seek(i+l),this.ocStrings=new dc,this.ocStrings.load(t)),0!=o&&(t.seek(i+o),this.ocAnimations=new cl,this.ocAnimations.load(t)),0!=n&&(t.seek(i+n),this.ocObject=new Wl,this.ocObject.load(t)),0!=u){t.seek(i+u);var f=t.readAInt();t.skipBytes(4),this.ocVersion=t.readAInt(),this.ocID=t.readAInt(),this.ocPrivate=t.readAInt(),f-=20,0!=f&&(this.ocExtension=t.getFilePointer())}if(0!=c&&(t.seek(i+c),this.ocFadeIn=new wu,this.ocFadeIn.load(t)),0!=d&&(t.seek(i+d),this.ocFadeOut=new wu,this.ocFadeOut.load(t)),0!=s)switch(t.seek(i+s),e){case 3:case 4:this.ocObject=new ql,this.ocObject.load(t);break;case 5:case 6:case 7:this.ocCounters=new Vl,this.ocCounters.load(t);break;case 8:this.ocObject=new Ul,this.ocObject.load(t),this.ocOEFlags&=~(Yl.OEFLAG_SPRITES|Yl.OEFLAG_QUICKDISPLAY|Yl.OEFLAG_BACKSAVE);break;case 9:this.ocObject=new Xl,this.ocObject.load(t)}},enumElements:function(t,e){null!=this.ocAnimations&&this.ocAnimations.enumElements(t),null!=this.ocObject&&this.ocObject.enumElements(t,e),null!=this.ocCounters&&this.ocCounters.enumElements(t,e)}},Xl.prototype={load:function(t){t.skipBytes(4),this.odCx=t.readAInt(),this.odCy=t.readAInt(),this.odVersion=t.readAShort(),this.odNStartFrame=t.readAShort(),this.odOptions=t.readAInt(),t.skipBytes(8),this.odName=t.readAString()},enumElements:function(t,e){}},Wl.prototype={load:function(t){t.skipBytes(2),this.ctInit=t.readAInt(),this.ctMini=t.readAInt(),this.ctMaxi=t.readAInt()},enumElements:function(t,e){}},Vl.CTA_HIDDEN=0,Vl.CTA_DIGITS=1,Vl.CTA_VBAR=2,Vl.CTA_HBAR=3,Vl.CTA_ANIM=4,Vl.CTA_TEXT=5,Vl.BARFLAG_INVERSE=256,Vl.prototype={load:function(t){switch(t.skipBytes(4),this.odCx=t.readAInt(),this.odCy=t.readAInt(),this.odPlayer=t.readAShort(),this.odDisplayType=t.readAShort(),this.odDisplayFlags=t.readAShort(),this.odFont=t.readAShort(),this.odDisplayType){case 0:break;case 1:case 4:this.nFrames=t.readAShort(),this.frames=new Array(this.nFrames);var e;for(e=0;e<this.nFrames;e++)this.frames[e]=t.readAShort();break;case 2:case 3:case 5:if(this.ocBorderSize=t.readAShort(),this.ocBorderColor=t.readAColor(),this.ocShape=t.readAShort(),this.ocFillType=t.readAShort(),1==this.ocShape)this.ocLineFlags=t.readAShort();else switch(this.ocFillType){case 1:this.ocColor1=t.readAColor();break;case 2:this.ocColor1=t.readAColor(),this.ocColor2=t.readAColor(),this.ocGradientFlags=t.readAInt()}}},enumElements:function(t,e){switch(this.odDisplayType){case 1:case 4:var i;for(i=0;i<this.nFrames;i++)null!=t&&t.enumerate(this.frames[i]);break;case 5:null!=e&&e.enumerate(this.odFont)}}},Ul.prototype={load:function(t){this.odDWSize=t.readAInt(),this.odVersion=t.readAInt(),this.odOptions=t.readAInt(),this.odBackColor=t.readAColor(),this.odCx=t.readAInt(),this.odCy=t.readAInt(),t.skipBytes(4);var e=t.readAInt();this.text=t.readAString(e)},enumElements:function(t,e){}},Kl.TSF_LEFT=0,Kl.TSF_HCENTER=1,Kl.TSF_RIGHT=2,Kl.TSF_VCENTER=4,Kl.TSF_HALIGN=15,Kl.TSF_CORRECT=256,Kl.TSF_RELIEF=512,Kl.prototype={load:function(t){this.tsFont=t.readShort(),this.tsFlags=t.readAShort(),this.tsColor=t.readAColor(),this.tsText=t.readAString()},enumElements:function(t,e){if(null!=e){e.enumerate(this.tsFont)}}},ql.prototype={load:function(t){var e=t.getFilePointer();t.skipBytes(4),this.otCx=t.readAInt(),this.otCy=t.readAInt(),this.otNumberOfText=t.readAInt(),this.otTexts=new Array(this.otNumberOfText);var i,r=new Array(this.otNumberOfText);for(i=0;i<this.otNumberOfText;i++)r[i]=t.readAInt();for(i=0;i<this.otNumberOfText;i++)this.otTexts[i]=new Kl,t.seek(e+r[i]),this.otTexts[i].load(t)},enumElements:function(t,e){var i;for(i=0;i<this.otNumberOfText;i++)this.otTexts[i].enumElements(t,e)}},zl.HOF_DESTROYED=1,zl.HOF_TRUEEVENT=2,zl.HOF_REALSPRITE=4,zl.HOF_FADEIN=8,zl.HOF_FADEOUT=16,zl.HOF_OWNERDRAW=32,zl.HOF_SHOOTER=64,zl.HOF_NOCOLLISION=8192,zl.HOF_FLOAT=16384,zl.HOF_STRING=32768,zl.prototype={setScale:function(t,e){if(this.roc.rcScaleX!=t||this.roc.rcScaleY!=e){t>=0&&(this.roc.rcScaleX=t),e>=0&&(this.roc.rcScaleY=e),this.roc.rcChanged=!0;var i=this.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(this.roc.rcImage,this.roc.rcAngle,this.roc.rcScaleX,this.roc.rcScaleY);null!=i&&(this.hoImgWidth=i.width,this.hoImgHeight=i.height,this.hoImgXSpot=i.xSpot,this.hoImgYSpot=i.ySpot)}},shtCreate:function(t,e,i,r){var s=this.hoLayer,n=this.hoAdRunHeader.f_CreateObject(t.cdpHFII,t.cdpOi,e,i,r,il.COF_NOMOVEMENT|il.COF_HIDDEN,s,-1);if(n>=0){var o=this.hoAdRunHeader.rhObjectList[n];if(null!=o.rom){if(o.roc.rcDir=r,o.rom.initSimple(o,Oc.MVTYPE_BULLET,!1),o.roc.rcSpeed=t.shtSpeed,o.rom.rmMovement.init2(this),-1!=s&&0!=(o.hoOEFlags&Yl.OEFLAG_SPRITES)){(this.hoAdRunHeader.rhFrame.layers[s].dwOptions&(kl.FLOPT_TOHIDE|kl.FLOPT_VISIBLE))!=kl.FLOPT_VISIBLE&&o.ros.obHide()}this.hoAdRunHeader.rhEvtProg.evt_AddCurrentObject(o),0!=(this.hoOEFlags&Yl.OEFLAG_ANIMATIONS)&&this.roa.anim_Exist(ul.ANIMID_SHOOT)&&(this.roa.animation_Force(ul.ANIMID_SHOOT),this.roa.animation_OneLoop())}else this.hoAdRunHeader.destroy_Add(o.hoNumber)}},fixedValue:function(){return this.hoCreationId<<16|65535&this.hoNumber},init:function(t,e){},handle:function(){},callComputeNewDisplay:function(){},createFont:function(){},display:function(){},kill:function(t){},getSurface:function(t){return!1},getCollisionMask:function(t){return null},setEffect:function(t,e){},addSprite:function(t,e,i,r,s){},addOwnerDrawSprite:function(t,e,i,r,s,n){},delSprite:function(){return 0},showSprite:function(){},hideSprite:function(){},setTransparency:function(t){},getChildIndex:function(){return-1},getChildMaxIndex:function(){return 0},setChildIndex:function(t){},autoResize:function(){},forcePosition:function(){}},Jl.prototype=qc.extend(new zl,{handle:function(){this.ros.handle(),this.roc.rcChanged&&(this.roc.rcChanged=!1)},addSprite:function(t,e,i,r,s){this.nLayer=r,this.pLayer=this.hoAdRunHeader.rhFrame.layers[r],this.bShown=s,this.pLayer.planeSprites.addChild(this)},draw:function(t,e,i){if(this.bShown){if(0!=(this.hoFlags&zl.HOF_FADEIN)&&!this.ros.rsTrans)return;var r=this.ros.rsEffect;this.ros.rsFlags&cc.RSFLAG_ROTATE_ANTIA&&(r|=cc.BOP_SMOOTHING);var s=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(this.roc.rcImage);s&&(this.transitionImage?t.renderSimpleImage(this.transitionImage,e+this.hoX-this.hoAdRunHeader.rhWindowX+this.pLayer.x-s.xSpot,i+this.hoY-this.hoAdRunHeader.rhWindowY+this.pLayer.y-s.ySpot,this.transitionImage.width*this.roc.rcScaleX,this.transitionImage.height*this.roc.rcScaleY,r,this.ros.rsEffectParam):t.renderImage(s,e+this.hoX-this.hoAdRunHeader.rhWindowX+this.pLayer.x,i+this.hoY-this.hoAdRunHeader.rhWindowY+this.pLayer.y,this.roc.rcAngle,this.roc.rcScaleX,this.roc.rcScaleY,r,this.ros.rsEffectParam))}},delSprite:function(){return this.pLayer.planeSprites.removeChild(this)},showSprite:function(){this.bShown=!0},hideSprite:function(){this.bShown=!1},getChildIndex:function(){return this.pLayer.planeSprites.getChildIndex(this)},getChildMaxIndex:function(){return this.pLayer.planeSprites.children.length},setChildIndex:function(t){t>=this.pLayer.planeSprites.children.length&&(t=this.pLayer.planeSprites.children.length),t<0&&(t=0),this.pLayer.planeSprites.setChildIndex(this,t)},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t}}),Ql.CCAF_SHARE_GLOBALVALUES=1,Ql.CCAF_SHARE_LIVES=2,Ql.CCAF_SHARE_SCORES=4,Ql.CCAF_SHARE_WINATTRIB=8,Ql.CCAF_STRETCH=16,Ql.CCAF_POPUP=32,Ql.CCAF_CAPTION=64,Ql.CCAF_TOOLCAPTION=128,Ql.CCAF_BORDER=256,Ql.CCAF_WINRESIZE=512,Ql.CCAF_SYSMENU=1024,Ql.CCAF_DISABLECLOSE=2048,Ql.CCAF_MODAL=4096,Ql.CCAF_DIALOGFRAME=8192,Ql.CCAF_INTERNAL=16384,Ql.CCAF_HIDEONCLOSE=32768,Ql.CCAF_CUSTOMSIZE=65536,Ql.CCAF_INTERNALABOUTBOX=131072,Ql.CCAF_CLIPSIBLINGS=262144,Ql.CCAF_SHARE_PLAYERCTRLS=524288,Ql.CCAF_MDICHILD=1048576,Ql.CCAF_DOCKED=2097152,Ql.CCAF_DOCKING_AREA=12582912,Ql.CCAF_DOCKED_LEFT=0,Ql.CCAF_DOCKED_TOP=4194304,Ql.CCAF_DOCKED_RIGHT=8388608,Ql.CCAF_DOCKED_BOTTOM=12582912,Ql.CCAF_REOPEN=16777216,Ql.CCAF_MDIRUNEVENIFNOTACTIVE=33554432,Ql.prototype=qc.extend(new zl,{startCCA:function(t,e,i){var r=t.ocObject;this.hoImgWidth=r.odCx,this.hoImgHeight=r.odCy,this.odOptions=r.odOptions,0!=(this.odOptions&Ql.CCAF_STRETCH)&&(this.odOptions|=Ql.CCAF_CUSTOMSIZE),-1==i&&(i=0,0!=(this.odOptions&Ql.CCAF_INTERNAL)&&(i=r.odNStartFrame)),null!=r.odName&&0==r.odName.length&&0!=(this.odOptions&Ql.CCAF_INTERNAL)&&(i>=this.hoAdRunHeader.rhApp.gaNbFrames||i!=this.hoAdRunHeader.rhApp.currentFrame&&(0!=(t.ocFlags2&Yl.OCFLAGS2_VISIBLEATSTART)?this.bVisible=!0:this.bVisible=!1,this.appSprite=new hc,this.appSprite.x=this.hoX-this.hoAdRunHeader.rhWindowX,this.appSprite.y=this.hoY-this.hoAdRunHeader.rhWindowY,this.hoAdRunHeader.rhApp.mainSprite.addChild(this),this.oldX=this.hoX,this.oldY=this.hoY,this.subApp=new Ka(this.hoAdRunHeader.rhApp,this.hoAdRunHeader.rhApp.file,this.hoAdRunHeader.rhApp.path,!0),this.subApp.setParentApp(this.hoAdRunHeader.rhApp,i,this.odOptions,this.appSprite,this.hoImgWidth,this.hoImgHeight),this.subApp.digest(),0!=(this.odOptions&Ql.CCAF_MODAL)&&null==this.hoAdRunHeader.rhApp.modalSubappObject&&(this.hoAdRunHeader.rhApp.modalSubappObject=this,this.hoAdRunHeader.rhApp.run.pause()),this.subApp.startApplication(),this.subApp.setMouseOffsets((this.hoAdRunHeader.rhApp.xMouseOffset+this.appSprite.x)*this.hoAdRunHeader.rhApp.scaleX,(this.hoAdRunHeader.rhApp.yMouseOffset+this.appSprite.y)*this.hoAdRunHeader.rhApp.scaleY),this.subApp.stepApplication(),this.hoAdRunHeader.rhApp.subApps.push(this.subApp)))},init:function(t,e){this.startCCA(t,!0,-1)},handle:function(){if(this.rom.move(),null!=this.subApp){if(this.oldX==this.hoX&&this.oldY==this.hoY||(this.appSprite.x=this.hoX-this.hoAdRunHeader.rhWindowX,this.appSprite.y=this.hoY-this.hoAdRunHeader.rhWindowY,this.oldX=this.hoX,this.oldY=this.hoY,this.subApp.setMouseOffsets(this.appSprite.x*this.hoAdRunHeader.rhApp.scaleX,this.appSprite.y*this.hoAdRunHeader.rhApp.scaleY),this.updateChildControlPos()),0==this.subApp.stepApplication())return this.destroyObject(),0!=(this.odOptions&Ql.CCAF_MODAL)&&null!=this.subApp.parentApp&&this.subApp.parentApp.modalSubappObject==this&&(this.subApp.parentApp.modalSubappObject=null,this.subApp.parentApp.run.resume()),void(this.subApp=null);this.oldLevel=this.level,this.level=this.subApp.currentFrame}},draw:function(t,e,i){this.bVisible&&null!=this.subApp&&this.subApp.drawSubApplication(t,this.appSprite.x,this.appSprite.y)},kill:function(t){if(null!=this.subApp){switch(this.subApp.appRunningState){case 3:this.subApp.endFrame()}this.destroyObject(),this.subApp.endApplication(),0!=(this.odOptions&Ql.CCAF_MODAL)&&null!=this.subApp.parentApp&&this.subApp.parentApp.modalSubappObject==this&&(this.subApp.parentApp.modalSubappObject=null,this.subApp.parentApp.run.resume()),this.subApp=null}},destroyObject:function(){var t;for(t=0;t<this.hoAdRunHeader.rhApp.subApps.length;t++)if(this.hoAdRunHeader.rhApp.subApps[t]==this.subApp){this.hoAdRunHeader.rhApp.subApps.splice(t,1);break}this.hoAdRunHeader.rhApp.mainSprite.removeChild(this.appSprite)},restartApp:function(){if(null!=this.subApp){if(null!=this.subApp.run)return void(this.subApp.run.rhQuit=il.LOOPEXIT_NEWGAME);this.kill(!0)}this.startCCA(this.hoCommon,!1,-1)},endApp:function(){null!=this.subApp&&(null!=this.subApp.run&&(this.subApp.run.rhQuit=il.LOOPEXIT_ENDGAME),0!=(this.odOptions&Ql.CCAF_MODAL)&&null!=this.subApp.parentApp&&this.subApp.parentApp.modalSubappObject==this&&(this.subApp.parentApp.modalSubappObject=null,this.subApp.parentApp.run.resume()))},hide:function(){this.bVisible=!1},show:function(){this.bVisible=!0},jumpFrame:function(t){null!=this.subApp&&null!=this.subApp.run&&t>=0&&t<4096&&(this.subApp.run.rhQuit=il.LOOPEXIT_GOTOLEVEL,this.subApp.run.rhQuitParam=32768|t)},nextFrame:function(){null!=this.subApp&&null!=this.subApp.run&&(this.subApp.run.rhQuit=il.LOOPEXIT_NEXTLEVEL)},previousFrame:function(){null!=this.subApp&&null!=this.subApp.run&&(this.subApp.run.rhQuit=il.LOOPEXIT_PREVLEVEL)},restartFrame:function(){null!=this.subApp&&null!=this.subApp.run&&(this.subApp.run.rhQuit=il.LOOPEXIT_RESTART)},pause:function(){null!=this.subApp&&null!=this.subApp.run&&this.subApp.run.pause()},resume:function(){null!=this.subApp&&null!=this.subApp.run&&this.subApp.run.resume()},setGlobalValue:function(t,e){null!=this.subApp&&this.subApp.setGlobalValueAt(t,e)},setGlobalString:function(t,e){null!=this.subApp&&this.subApp.setGlobalStringAt(t,e)},isPaused:function(){return null!=this.subApp&&null!=this.subApp.run&&0!=this.subApp.run.rh2PauseCompteur},appFinished:function(){return null==this.subApp},isVisible:function(){return this.bVisible},frameChanged:function(){return this.level!=this.oldLevel},getGlobalString:function(t){return null!=this.subApp?this.subApp.getGlobalStringAt(t):""},getGlobalValue:function(t){return null!=this.subApp?this.subApp.getGlobalValueAt(t):0},getFrameNumber:function(){return this.level+1},setWidth:function(t){},setHeight:function(t){},bringToFront:function(){null!=this.subApp&&this.bVisible&&(hoAdRunHeader.rhApp.planeControls.removeChild(this),hoAdRunHeader.rhApp.planeControls.addChild(this))},updateChildControlPos:function(){if(null!=this.subApp&&null!=this.subApp.run){var t,e=this.subApp.run,i=0;for(t=0;t<e.rhNObjects;t++){for(;null==e.rhObjectList[i];)i++;var r=e.rhObjectList[i];i++,r.forcePosition()}}},autoResize:function(){null!=this.subApp&&(this.subApp.setMouseOffsets((this.hoAdRunHeader.rhApp.xMouseOffset+this.appSprite.x)*this.hoAdRunHeader.rhApp.scaleX,(this.hoAdRunHeader.rhApp.yMouseOffset+this.appSprite.y)*this.hoAdRunHeader.rhApp.scaleY),this.subApp.resizeCanvas())}}),Zl.prototype={init:function(){this.rcScaleX=1,this.rcScaleY=1,this.rcAngle=0,this.rcMovementType=-1},kill:function(t){}},$l.CPTDISPFLAG_INTNDIGITS=15,$l.CPTDISPFLAG_FLOATNDIGITS=240,$l.CPTDISPFLAG_FLOATNDIGITS_SHIFT=4,$l.CPTDISPFLAG_FLOATNDECIMALS=61440,$l.CPTDISPFLAG_FLOATNDECIMALS_SHIFT=12,$l.CPTDISPFLAG_FLOAT_FORMAT=512,$l.CPTDISPFLAG_FLOAT_USENDECIMALS=1024,$l.CPTDISPFLAG_FLOAT_PADD=2048,$l.prototype=qc.extend(new zl,{init:function(t,e){if(this.rsFont=-1,this.rsColor1=0,this.rsColor2=0,this.hoImgWidth=this.hoImgHeight=1,null==this.hoCommon.ocCounters)this.hoImgWidth=this.rsBoxCx=1,this.hoImgHeight=this.rsBoxCy=1;else{var i=this.hoCommon.ocCounters;switch(this.hoImgWidth=this.rsBoxCx=i.odCx,this.hoImgHeight=this.rsBoxCy=i.odCy,this.displayFlags=i.odDisplayFlags,this.type=i.odDisplayType,this.type){case 5:var r=this.rsFont;-1==r&&(r=i.odFont),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(r),this.fontHeight=this.font.getHeight(),this.rsColor1=i.ocColor1;break;case 2:case 3:this.rsColor1=i.ocColor1,this.rsColor2=i.ocColor2}}var s=this.hoCommon.ocObject;this.rsMini=s.ctMini,this.rsMaxi=s.ctMaxi,this.rsValue=s.ctInit,this.bFloat=!1},kill:function(){},handle:function(){this.ros.handle(),this.roc.rcChanged&&(this.roc.rcChanged=!1)},getFont:function(){var t=this.hoCommon.ocCounters;if(5==this.type){var e=rsFont;return-1==e&&(e=t.odFont),this.hoAdRunHeader.rhApp.fontBank.getFontInfoFromHandle(e)}return null},setFont:function(t,e){5==this.type&&(this.rsFont=this.hoAdRunHeader.rhApp.fontBank.addFont(t),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(this.rsFont),this.fontHeight=this.font.getHeight(),null!=e&&(this.hoImgWidth=this.rsBoxCx=e.right-e.left,this.hoImgHeight=this.rsBoxCy=e.bottom-e.top),this.computeNewDisplay())},getFontColor:function(){return this.rsColor1},setFontColor:function(t){this.rsColor1=t,this.computeNewDisplay()},cpt_ToFloat:function(t){if(0==this.bFloat){if(qc.isInt(t))return;this.bFloat=!0}},cpt_Change:function(t){if(0==this.bFloat){var e=qc.floatToInt(t);e<this.rsMini&&(e=this.rsMini),e>this.rsMaxi&&(e=this.rsMaxi),e!=Math.round(this.rsValue)&&(this.rsValue=e,this.roc.rcChanged=!0,this.computeNewDisplay())}else t<this.rsMini&&(t=this.rsMini),t>this.rsMaxi&&(t=this.rsMaxi),t!=this.rsValue&&(this.rsValue=t,this.roc.rcChanged=!0,this.computeNewDisplay())},cpt_Add:function(t){this.cpt_ToFloat(t),this.cpt_Change(this.rsValue+t)},cpt_Sub:function(t){this.cpt_ToFloat(t),this.cpt_Change(this.rsValue-t)},cpt_SetMin:function(t){this.rsMini=t,this.cpt_Change(this.rsValue)},cpt_SetMax:function(t){this.rsMaxi=t,this.cpt_Change(this.rsValue)},cpt_SetColor1:function(t){this.rsColor1=t,this.computeNewDisplay()},cpt_SetColor2:function(t){this.rsColor2=t,this.computeNewDisplay()},cpt_GetValue:function(){return this.rsValue},cpt_GetMin:function(){return this.rsMini},cpt_GetMax:function(){return this.rsMaxi},cpt_GetColor1:function(){return this.rsColor1},cpt_GetColor2:function(){return this.rsColor2},addOwnerDrawSprite:function(t,e,i,r,s,n){null!=this.hoCommon.ocCounters&&1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.bQuickDisplay=r,this.bShown=s,this.pLayer=this.hoAdRunHeader.rhFrame.layers[i],this.bQuickDisplay?this.plane=this.pLayer.planeQuickDisplay:this.plane=this.pLayer.planeSprites,n<0?this.plane.addChild(this):this.plane.addChildIndex(this,n),5!=this.type&&this.computeNewDisplay())},delSprite:function(){if(null==this.hoCommon.ocCounters)return-1;if(0==this.bAddedToPlane)return-1;this.bAddedToPlane=!1;var t=this.plane.getChildIndex(this);return this.plane.removeChild(this),t},getChildIndex:function(){return this.bAddedToPlane?this.plane.getChildIndex(this):-1},getChildMaxIndex:function(){return this.bAddedToPlane?this.plane.getNumChildren():-1},setChildIndex:function(t){this.bAddedToPlane&&this.plane.setChildIndex(this,t)},showSprite:function(){null!=this.hoCommon.ocCounters&&0==this.bShown&&(this.bShown=!0,this.computeNewDisplay())},hideSprite:function(){null!=this.hoCommon.ocCounters&&1==this.bShown&&(this.bShown=!1)},callComputeNewDisplay:function(){this.computed||this.computeNewDisplay()},computeNewDisplay:function(){var t,e,i,r=this.hoCommon.ocCounters;switch(this.type){case 4:this.rsMaxi<=this.rsMini?this.rsOldFrame=0:this.rsOldFrame=Math.floor((this.rsValue-this.rsMini)*r.nFrames/(this.rsMaxi-this.rsMini)),this.rsOldFrame=Math.min(this.rsOldFrame,r.nFrames-1),t=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(r.frames[Math.max(this.rsOldFrame,0)]),this.hoImgWidth=t.width,this.hoImgHeight=t.height,this.hoImgXSpot=t.xSpot,this.hoImgYSpot=t.ySpot;break;case 2:case 3:i=this.rsBoxCx,r.odDisplayType==Vl.CTA_VBAR&&(i=this.rsBoxCy),this.rsMaxi<=this.rsMini?this.rsOldFrame=0:this.rsOldFrame=(this.rsValue-this.rsMini)*i/(this.rsMaxi-this.rsMini),r.odDisplayType==Vl.CTA_HBAR?(this.hoImgYSpot=0,this.hoImgHeight=this.rsBoxCy,this.hoImgWidth=this.rsOldFrame,0!=(r.odDisplayFlags&Vl.BARFLAG_INVERSE)?this.hoImgXSpot=this.rsOldFrame-this.rsBoxCx:this.hoImgXSpot=0):(this.hoImgXSpot=0,this.hoImgWidth=this.rsBoxCx,this.hoImgHeight=this.rsOldFrame,0!=(r.odDisplayFlags&Vl.BARFLAG_INVERSE)?this.hoImgYSpot=this.rsOldFrame-this.rsBoxCy:this.hoImgYSpot=0);break;case 1:e=0==this.bFloat?qc.intToString(this.rsValue,this.displayFlags):qc.doubleToString(this.rsValue,this.displayFlags);var s,n,o,a,l=0,u=0;for(s=e.length-1;s>=0;s--)n=e.charCodeAt(s),o=0,45==n?o=r.frames[10]:46==n?o=r.frames[12]:43==n?o=r.frames[11]:101==n||69==n?o=r.frames[13]:n>=48&&n<=57&&(o=r.frames[n-48]),o>=0&&(a=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(o),null!=a?(l+=a.width,u=Math.max(u,a.height)):toto=2);this.hoImgXSpot=l,this.hoImgYSpot=u,this.hoImgWidth=l,this.hoImgHeight=u;break;case 5:e=0==this.bFloat?qc.intToString(this.rsValue,this.displayFlags):qc.doubleToString(this.rsValue,this.displayFlags);var c;if(null!=this.textSurface)c=this.textSurface.measureText(e,this.font);else{c=new d(this.hoAdRunHeader.rhApp,16,16).measureText(e,this.font)}this.hoImgXSpot=c,this.hoImgYSpot=this.rsBoxCy/2+this.fontHeight/2,this.hoImgWidth=c,this.hoImgHeight=this.fontHeight,null==this.textSurface?this.textSurface=new d(this.hoAdRunHeader.rhApp,this.hoImgWidth,this.hoImgHeight):(this.hoImgWidth>this.textSurface.width||this.hoImgHeight>this.textSurface.height)&&this.textSurface.resize(this.hoImgWidth,this.hoImgHeight);var f=new h(0,0,1e3,1e3);this.textSurface.setText(e,qc.DT_LEFT|qc.DT_TOP,f,this.font,this.rsColor1)}this.computed=!0},draw:function(t,e,i){if(this.bShown&&this.computed){var r,s,n,o,h=this.hoCommon.ocCounters,a=e+this.hoX-this.hoImgXSpot-this.hoAdRunHeader.rhWindowX+this.pLayer.x,l=i+this.hoY-this.hoImgYSpot-this.hoAdRunHeader.rhWindowY+this.pLayer.y,u=this.hoImgWidth,c=this.hoImgHeight;switch(this.type){case 4:r=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(h.frames[Math.max(this.rsOldFrame,0)]),t.renderImage(r,a+r.xSpot,l+r.ySpot,0,1,1,this.ros.rsEffect,this.ros.rsEffectParam);break;case 2:case 3:var s=this.rsColor1,n=this.rsColor2;switch(h.ocFillType){case 1:t.renderSolidColor(a,l,u,c,s,this.ros.rsEffect,this.ros.rsEffectParam);break;case 2:0!=(h.odDisplayFlags&Vl.BARFLAG_INVERSE)&&(dl=s,s=n,n=dl);var d=0!=h.ocGradientFlags;t.renderGradient(a,l,u,c,s,n,d,this.ros.rsEffect,this.ros.rsEffectParam)}break;case 1:o=0==this.bFloat?qc.intToString(this.rsValue,this.displayFlags):qc.doubleToString(this.rsValue,this.displayFlags);var f,p,m;for(f=0;f<o.length;f++){var g=o.charCodeAt(f);p=0,45==g?p=h.frames[10]:46==g||44==g?p=h.frames[12]:43==g?p=h.frames[11]:69==g||101==g?p=h.frames[13]:g>=48&&g<=57&&(p=h.frames[g-48]),m=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(p),null!=m&&(t.renderImage(m,a+m.xSpot,l+m.ySpot,0,1,1,this.ros.rsEffect,this.ros.rsEffectParam),a+=m.width)}break;case 5:this.textSurface.draw(t,a,l,this.ros.rsEffect,this.ros.rsEffectParam)}}},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t}}),tu.prototype=qc.extend(new zl,{init:function(t,e){this.rsFont=-1,this.rsColor1=0,this.hoImgWidth=this.hoImgHeight=1;var i=this.hoCommon.ocCounters;if(this.hoImgWidth=this.rsBoxCx=i.odCx,this.hoImgHeight=this.rsBoxCy=i.odCy,this.type=i.odDisplayType,this.rsColor1=i.ocColor1,this.rsPlayer=i.odPlayer,this.rsValue=this.hoAdRunHeader.rhApp.getScores()[this.rsPlayer-1],this.displayFlags=i.odDisplayFlags,5==this.type){var r=this.rsFont;-1==r&&(r=i.odFont),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(r),this.fontHeight=this.font.getHeight()}},kill:function(){},handle:function(){var t=this.hoAdRunHeader.rhApp.getScores()[this.rsPlayer-1];t!=this.rsValue&&(this.rsValue=t,this.computeNewDisplay()),this.ros.handle(),this.roc.rcChanged&&(this.roc.rcChanged=!1)},getFont:function(){var t=this.hoCommon.ocCounters;if(5==t.odDisplayType){var e=this.rsFont;return-1==e&&(e=t.odFont),this.hoAdRunHeader.rhApp.fontBank.getFontInfoFromHandle(e)}return null},setFont:function(t,e){if(5==type){this.rsFont=hoAdRunHeader.rhApp.fontBank.addFont(t);var t=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(this.rsFont);this.fontHeight=t.getHeight(),null!=e&&(this.hoImgWidth=this.rsBoxCx=e.right-e.left,this.hoImgHeight=this.rsBoxCy=e.bottom-e.top),this.computeNewDisplay()}},getFontColor:function(){return this.rsColor1},setFontColor:function(t){this.rsColor1=t,this.computeNewDisplay()},addOwnerDrawSprite:function(t,e,i,r,s,n){null!=this.hoCommon.ocCounters&&1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.bShown=s,this.pLayer=this.hoAdRunHeader.rhFrame.layers[i],this.plane=r?this.pLayer.planeQuickDisplay:this.pLayer.planeSprites,n<0?this.plane.addChild(this):this.plane.addChildIndex(this,n),5!=this.type&&this.computeNewDisplay())},delSprite:function(){if(null==this.hoCommon.ocCounters)return-1;if(0==this.bAddedToPlane)return-1;this.bAddedToPlane=!1;var t=this.plane.getChildIndex(this);return this.plane.removeChild(this),t},getChildIndex:function(){return this.bAddedToPlane?this.plane.getChildIndex(this):-1},getChildMaxIndex:function(){return this.bAddedToPlane?this.plane.getNumChildren():-1},setChildIndex:function(t){this.bAddedToPlane&&this.plane.setChildIndex(this,t)},showSprite:function(){null!=this.hoCommon.ocCounters&&0==this.bShown&&(this.bShown=!0,this.computeNewDisplay())},hideSprite:function(){null!=this.hoCommon.ocCounters&&1==this.bShown&&(this.bShown=!1)},setValue:function(t){t!=this.rsValue&&(this.rsValue=t,this.computeNewDisplay())},callComputeNewDisplay:function(){this.computed||this.computeNewDisplay()},computeNewDisplay:function(){if(this.computed=!0,this.hoImgWidth=this.hoImgHeight=1,null!=this.hoCommon.ocCounters){var t,e=this.hoCommon.ocCounters,i=qc.intToString(this.rsValue,this.displayFlags);switch(e.odDisplayType){case 1:var r,s,t,n,o=0,a=0;for(r=i.length-1;r>=0;r--)s=i.charCodeAt(r),t=0,45==s?t=e.frames[10]:46==s?t=e.frames[12]:43==s?t=e.frames[11]:101==s||69==s?t=e.frames[13]:s>=48&&s<=57&&(t=e.frames[s-48]),t>=0&&(n=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(t),o+=n.width,a=Math.max(a,n.height));this.hoImgXSpot=o,this.hoImgYSpot=a,this.hoImgWidth=o,this.hoImgHeight=a;break;case 5:var l;if(null!=this.textSurface)l=this.textSurface.measureText(i,this.font);else{l=new d(this.hoAdRunHeader.rhApp,8,8).measureText(i,this.font)}this.hoImgXSpot=l,this.hoImgYSpot=this.rsBoxCy/2+this.fontHeight/2,this.hoImgWidth=l,this.hoImgHeight=this.fontHeight,null==this.textSurface?this.textSurface=new d(this.hoAdRunHeader.rhApp,this.hoImgWidth,this.hoImgHeight):(this.hoImgWidth>this.textSurface.width||this.hoImgHeight>this.textSurface.height)&&this.textSurface.resize(this.hoImgWidth,this.hoImgHeight);var u=new h(0,0,1e3,1e3);this.textSurface.setText(i,qc.DT_LEFT|qc.DT_TOP,u,this.font,this.rsColor1)}}},draw:function(t,e,i){if(this.bShown&&this.computed){this.globalAlpha=this.alpha,this.globalCompositeOperation=this.composite;var r,s=this.hoCommon.ocCounters,n=e+this.hoX-this.hoImgXSpot-this.hoAdRunHeader.rhWindowX+this.pLayer.x,o=i+this.hoY-this.hoImgYSpot-this.hoAdRunHeader.rhWindowY+this.pLayer.y;switch(r=qc.intToString(this.rsValue,this.displayFlags),this.type){case 1:var h,a,l;for(h=0;h<r.length;h++){var u=r.charCodeAt(h);a=0,45==u?a=s.frames[10]:46==u||44==u?a=s.frames[12]:43==u?a=s.frames[11]:69==u||101==u?a=s.frames[13]:u>=48&&u<=57&&(a=s.frames[u-48]),l=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(a),t.renderImage(l,n+l.xSpot,o+l.ySpot,0,1,1,this.ros.rsEffect,this.ros.rsEffectParam),n+=l.width}break;case 5:this.textSurface.draw(t,n,o,this.ros.rsEffect,this.ros.rsEffectParam)}}},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t}}),eu.prototype=qc.extend(new zl,{init:function(t,e){this.rsFont=-1,this.rsColor1=0,this.hoImgWidth=this.hoImgHeight=1;var i=this.hoCommon.ocCounters;if(this.hoImgWidth=this.rsBoxCx=i.odCx,this.hoImgHeight=this.rsBoxCy=i.odCy,this.type=i.odDisplayType,this.rsColor1=i.ocColor1,this.rsPlayer=i.odPlayer,this.rsValue=this.hoAdRunHeader.rhApp.getLives()[this.rsPlayer-1],this.displayFlags=i.odDisplayFlags,5==this.type){var r=this.rsFont;-1==r&&(r=i.odFont),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(r),this.fontHeight=this.font.getHeight()}},kill:function(){},handle:function(){var t=this.hoAdRunHeader.rhApp.getLives()[this.rsPlayer-1];t!=this.rsValue&&(this.rsValue=t,this.computeNewDisplay()),this.ros.handle(),this.roc.rcChanged&&(this.roc.rcChanged=!1)},getFont:function(){var t=this.hoCommon.ocCounters;if(5==t.odDisplayType){var e=this.rsFont;return-1==e&&(e=t.odFont),this.hoAdRunHeader.rhApp.fontBank.getFontInfoFromHandle(e)}return null},setFont:function(t,e){if(5==type){this.rsFont=hoAdRunHeader.rhApp.fontBank.addFont(t);var t=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(this.rsFont);this.fontHeight=t.getHeight(),null!=e&&(this.hoImgWidth=this.rsBoxCx=e.right-e.left,this.hoImgHeight=this.rsBoxCy=e.bottom-e.top),this.computeNewDisplay()}},getFontColor:function(){return this.rsColor1},setFontColor:function(t){this.rsColor1=t,this.computeNewDisplay()},addOwnerDrawSprite:function(t,e,i,r,s,n){null!=this.hoCommon.ocCounters&&1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.bShown=s,this.pLayer=this.hoAdRunHeader.rhFrame.layers[i],this.plane=r?this.pLayer.planeQuickDisplay:this.pLayer.planeSprites,n<0?this.plane.addChild(this):this.plane.addChildIndex(this,n),5!=this.type&&this.computeNewDisplay())},delSprite:function(){if(null==this.hoCommon.ocCounters)return-1;if(0==this.bAddedToPlane)return-1;this.bAddedToPlane=!1;var t=this.plane.getChildIndex(this);return this.plane.removeChild(this),t},getChildIndex:function(){return this.bAddedToPlane?this.plane.getChildIndex(this):-1},getChildMaxIndex:function(){return this.bAddedToPlane?this.plane.getNumChildren():-1},setChildIndex:function(t){this.bAddedToPlane&&this.plane.setChildIndex(this,t)},showSprite:function(){null!=this.hoCommon.ocCounters&&0==this.bShown&&(this.bShown=!0,this.computeNewDisplay())},hideSprite:function(){null!=this.hoCommon.ocCounters&&1==this.bShown&&(this.bShown=!1)},setValue:function(t){t!=this.rsValue&&(this.rsValue=t,this.computeNewDisplay())},callComputeNewDisplay:function(){this.computed||this.computeNewDisplay()},computeNewDisplay:function(){if(this.computed=!0,this.hoImgWidth=this.hoImgHeight=1,null!=this.hoCommon.ocCounters){var t=this.hoCommon.ocCounters;switch(t.odDisplayType){case 4:if(0!=this.rsValue){n=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(t.frames[0]);var e=this.rsValue*n.width;e<=this.rsBoxCx?(this.hoImgWidth=e,this.hoImgHeight=n.height):(this.hoImgWidth=this.rsBoxCx,this.hoImgHeight=(this.rsBoxCx/n.width+this.rsValue-1)*n.height);break}
this.hoImgWidth=this.hoImgHeight=1;break;case 1:var i,r,s,n,o=0,a=0,l=qc.intToString(this.rsValue,this.displayFlags);for(i=l.length-1;i>=0;i--)r=l.charCodeAt(i),s=0,45==r?s=t.frames[10]:46==r?s=t.frames[12]:43==r?s=t.frames[11]:101==r||69==r?s=t.frames[13]:r>=48&&r<=57&&(s=t.frames[r-48]),s>=0&&(n=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(s),o+=n.width,a=Math.max(a,n.height));this.hoImgXSpot=o,this.hoImgYSpot=a,this.hoImgWidth=o,this.hoImgHeight=a;break;case 5:var u,l=qc.intToString(this.rsValue,this.displayFlags);if(null!=this.textSurface)u=this.textSurface.measureText(l,this.font);else{u=new d(this.hoAdRunHeader.rhApp,8,8).measureText(l,this.font)}this.hoImgXSpot=u,this.hoImgYSpot=this.rsBoxCy/2+this.fontHeight/2,this.hoImgWidth=u,this.hoImgHeight=this.fontHeight,null==this.textSurface?this.textSurface=new d(this.hoAdRunHeader.rhApp,this.hoImgWidth,this.hoImgHeight):(this.hoImgWidth>this.textSurface.width||this.hoImgHeight>this.textSurface.height)&&this.textSurface.resize(this.hoImgWidth,this.hoImgHeight);var c=new h(0,0,1e3,1e3);this.textSurface.setText(l,qc.DT_LEFT|qc.DT_TOP,c,this.font,this.rsColor1)}}},draw:function(t,e,i){if(this.bShown&&this.computed){this.globalAlpha=this.alpha,this.globalCompositeOperation=this.composite;var r,s=this.hoCommon.ocCounters,n=e+this.hoX-this.hoImgXSpot-this.hoAdRunHeader.rhWindowX+this.pLayer.x,o=i+this.hoY-this.hoImgYSpot-this.hoAdRunHeader.rhWindowY+this.pLayer.y;switch(this.type){case 1:var h,a,l;for(r=qc.intToString(this.rsValue,this.displayFlags),h=0;h<r.length;h++){var u=r.charCodeAt(h);a=0,45==u?a=s.frames[10]:46==u||44==u?a=s.frames[12]:43==u?a=s.frames[11]:69==u||101==u?a=s.frames[13]:u>=48&&u<=57&&(a=s.frames[u-48]),l=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(a),t.renderImage(l,n+l.xSpot,o+l.ySpot,0,1,1,this.ros.rsEffect,this.ros.rsEffectParam),n+=l.width}break;case 4:if(0!=this.rsValue){var c=n+this.hoImgWidth,d=o+this.hoImgHeight,f=n,p=o,m=this.rsValue,l=this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(s.frames[0]);for(o=p;o<d&&m>0;o+=l.height)for(n=f;n<c&&m>0;n+=l.width,m-=1)t.renderImage(l,n+l.xSpot,o+l.ySpot,0,1,1,this.ros.rsEffect,this.ros.rsEffectParam)}break;case 5:this.textSurface.draw(t,n,o,this.ros.rsEffect,this.ros.rsEffectParam)}}},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t}}),iu.prototype=qc.extend(new zl,{init:function(t,e){var i=t.ocObject;this.hoImgWidth=i.otCx,this.hoImgHeight=i.otCy,this.rsBoxCx=i.otCx,this.rsBoxCy=i.otCy,this.rsMaxi=i.otNumberOfText,this.rsTextColor=0,i.otTexts.length>0&&(this.rsTextColor=i.otTexts[0].tsColor),this.rsTextBuffer=null,this.rsFont=-1,this.rsMini=0,this.bShown=!0,this.rsHidden=e.cobFlags,i.otTexts.length>0&&(this.rsTextBuffer=i.otTexts[0].tsText);var r=this.rsFont;-1==r&&i.otTexts.length>0&&(r=i.otTexts[0].tsFont),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(r),this.textSurface=new d(this.hoAdRunHeader.rhApp,this.hoImgWidth,this.hoImgHeight)},kill:function(){},handle:function(){this.ros.handle(),this.roc.rcChanged&&(this.roc.rcChanged=!1)},getFont:function(){var t=this.rsFont;if(-1==t){t=this.hoCommon.ocObject.otTexts[0].tsFont}return this.hoAdRunHeader.rhApp.fontBank.getFontInfoFromHandle(t)},setFont:function(t,e){this.rsFont=this.hoAdRunHeader.rhApp.fontBank.addFont(t),this.font=this.hoAdRunHeader.rhApp.fontBank.getFontFromHandle(this.rsFont),null!=e&&(this.hoImgWidth=e.right-e.left,this.hoImgHeight=e.bottom-e.top,this.textSurface.resize(this.hoImgWidth,this.hoImgHeight)),this.roc.rcChanged=!0,this.computeNewDisplay()},getFontColor:function(){return this.rsTextColor},setFontColor:function(t){this.rsTextColor=t,this.computeNewDisplay()},addOwnerDrawSprite:function(t,e,i,r,s,n){1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.bShown=s,this.pLayer=this.hoAdRunHeader.rhFrame.layers[i],this.plane=r?this.pLayer.planeQuickDisplay:this.pLayer.planeSprites,n<0?this.plane.addChild(this):this.plane.addChildIndex(this,n))},delSprite:function(){if(0==this.bAddedToPlane)return-1;this.bAddedToPlane=!1;var t=this.plane.getChildIndex(this);return this.plane.removeChild(this),t},getChildIndex:function(){return this.bAddedToPlane?this.plane.getChildIndex(this):-1},getChildMaxIndex:function(){return this.bAddedToPlane?this.plane.getNumChildren():-1},setChildIndex:function(t){this.bAddedToPlane&&this.plane.setChildIndex(this,t)},showSprite:function(){0==this.bShown&&(this.bShown=!0)},hideSprite:function(){1==this.bShown&&(this.bShown=!1)},txtChange:function(t){if(t<-1&&(t=-1),t>=this.rsMaxi&&(t=this.rsMaxi-1),t==this.rsMini)return!1;if(this.rsMini=t,t>=0){var e=this.hoCommon.ocObject;this.txtSetString(e.otTexts[this.rsMini].tsText)}return this.computeNewDisplay(),0==(this.ros.rsFlags&cc.RSFLAG_HIDDEN)},txtSetString:function(t){this.rsTextBuffer=t,this.computeNewDisplay()},callComputeNewDisplay:function(){this.computed||this.computeNewDisplay()},computeNewDisplay:function(){this.computed=!0;var t=this.hoCommon.ocObject,e=t.otTexts[0].tsFlags;this.hoImgXSpot=0,this.hoImgYSpot=0,this.rect.left=0,this.rect.top=0,this.rect.right=this.hoImgWidth,this.rect.bottom=this.hoImgHeight;var i;this.rsMini>=0?i=t.otTexts[this.rsMini].tsText:null==(i=this.rsTextBuffer)&&(i="");var r=e&(qc.DT_LEFT|qc.DT_CENTER|qc.DT_RIGHT|qc.DT_TOP|qc.DT_BOTTOM|qc.DT_VCENTER|qc.DT_SINGLELINE),s=this.textSurface.setText(i,r,this.rect,this.font,this.rsTextColor);0==(r&(qc.DT_BOTTOM|qc.DT_VCENTER))&&(this.hoImgHeight=s)},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t},draw:function(t,e,i){if(this.bShown&&this.computed){var r=e+this.hoX-this.hoAdRunHeader.rhWindowX+this.pLayer.x,s=i+this.hoY-this.hoAdRunHeader.rhWindowY+this.pLayer.y;this.textSurface.draw(t,r,s,this.ros.rsEffect,this.ros.rsEffectParam)}}}),ru.prototype=qc.extend(new zl,{init:function(t,e){},kill:function(){},handle:function(){this.hoAdRunHeader.pause(),this.hoAdRunHeader.questionObjectOn=this,this.hoAdRunHeader.rhFrame.layers[this.hoAdRunHeader.rhFrame.nLayers-1].planeSprites.addChild(this),this.computeTexts()},destroyObject:function(){this.hoAdRunHeader.rhFrame.layers[this.hoAdRunHeader.rhFrame.nLayers-1].planeSprites.removeChild(this)},handleQuestion:function(){var t,e=this.hoAdRunHeader.rhApp.mouseX-this.hoAdRunHeader.rhApp.xOffset,i=this.hoAdRunHeader.rhApp.mouseY-this.hoAdRunHeader.rhApp.yOffset;if(0==this.currentDown)this.hoAdRunHeader.rhApp.keyBuffer[Ka.VK_LBUTTON]&&0!=(t=this.getQuestion(e,i))&&(this.currentDown=t);else if(!this.hoAdRunHeader.rhApp.keyBuffer[Ka.VK_LBUTTON]){if(this.getQuestion(e,i)==this.currentDown){this.hoAdRunHeader.rhEvtProg.rhCurParam0=this.currentDown,this.hoAdRunHeader.rhEvtProg.handle_Event(this,-5439484);var r=this.hoCommon.ocObject,s=r.otTexts[this.currentDown],n=0!=(s.tsFlags&Kl.TSF_CORRECT);return n?this.hoAdRunHeader.rhEvtProg.handle_Event(this,-5308412):this.hoAdRunHeader.rhEvtProg.handle_Event(this,-5373948),this.destroyObject(),this.hoAdRunHeader.questionObjectOn=null,this.hoAdRunHeader.resume(),void this.hoAdRunHeader.f_KillObject(this.hoNumber,!0)}this.currentDown=0}},getQuestion:function(t,e){var i;if(null!=this.rcA)for(i=1;i<this.rcA.length;i++)if(t>=this.rcA[i].left&&t<this.rcA[i].right&&e>this.rcA[i].top&&e<this.rcA[i].bottom)return i;return 0},border3D:function(t,e,i){var r,s;i?(r=8421504,s=16777215):(s=8421504,r=16777215),t.renderRect(e.left,e.top,e.right-e.left,e.bottom-e.top,0,1);var n,o=new Array(3);for(n=0;n<3;n++)o[n]=new a;o[0].x=e.right-1,0==i&&(o[0].x-=1),o[0].y=e.top+1,o[1].y=e.top+1,o[1].x=e.left+1,o[2].x=e.left+1,o[2].y=e.bottom,0==i&&(o[2].y-=1),t.renderLine(o[0].x,o[0].y,o[1].x,o[1].y,r,1),t.renderLine(o[1].x,o[1].y,o[2].x,o[2].y,r,1),0==i&&(o[0].x-=1),o[0].y+=1,o[1].x+=1,o[1].y+=1,o[2].x+=1,0==i&&(o[2].y-=1),t.renderLine(o[0].x,o[0].y,o[1].x,o[1].y,r,1),t.renderLine(o[1].x,o[1].y,o[2].x,o[2].y,r,1),0==i&&(o[0].x+=2,o[1].x=e.right-1,o[1].y=e.bottom-1,o[2].y=e.bottom-1,o[2].x-=1,t.renderLine(o[0].x,o[0].y,o[1].x,o[1].y,s,1),t.renderLine(o[1].x,o[1].y,o[2].x,o[2].y,s,1),o[0].x-=1,o[0].y+=1,o[1].x-=1,o[1].y-=1,o[2].x+=1,o[2].y-=1,t.renderLine(o[0].x,o[0].y,o[1].x,o[1].y,s,1),t.renderLine(o[1].x,o[1].y,o[2].x,o[2].y,s,1))},redraw_Answer:function(t,e,i){var r=new h;r.copyRect(this.rcA[e]),this.border3D(t,this.rcA[e],i),r.left+=2,r.top+=2,r.right-=4,r.bottom-=4,i&&(r.left+=2,r.top+=2),this.textSurfaces[e].draw(t,(r.left+r.right)/2-this.textSurfaces[e].width/2,(r.top+r.bottom)/2-this.textSurfaces[e].height/2,0,0)},computeTexts:function(){this.measureTextSurface=new d(this.hoAdRunHeader.rhApp,8,8);var t=this.hoCommon.ocObject,e=this.hoAdRunHeader,i=t.otTexts[1],r=i.tsColor,s=0!=(i.tsFlags&Kl.TSF_RELIEF),n=e.rhApp.fontBank.getFontFromHandle(i.tsFont);this.xa_margin=Math.floor(3*this.measureTextSurface.measureText("X",n)/2),this.hta=4,this.lgBox=64;var o,a;for(o=1;o<t.otTexts.length;o++)i=t.otTexts[o],i.tsText.length>0&&(a=this.measureTextSurface.measureText(i.tsText,n),this.lgBox=Math.max(this.lgBox,a+2*this.xa_margin+4),this.hta=Math.max(this.hta,Math.floor(3*n.getHeight()/2)));this.hte=Math.max(Math.floor(this.hta/4),2),this.lgBox+=2*this.xa_margin+4;var l=new h;for(o=1;o<t.otTexts.length;o++)i=t.otTexts[o],this.textSurfaces[o]=new d(e.rhApp,this.lgBox,this.hta),l.right=this.lgBox,l.bottom=this.hta,this.textSurfaces[o].manualDrawText(i.tsText,qc.DT_CENTER|qc.DT_VCENTER,l,r,n,s?1:0,16777215);var u=t.otTexts[0];s=0!=(u.tsFlags&Kl.TSF_RELIEF);var c=e.rhApp.fontBank.getFontFromHandle(u.tsFont),f=Math.floor(3*this.measureTextSurface.measureText("X",c)/2);a=this.measureTextSurface.measureText(u.tsText,c),this.htq=Math.floor(3*c.getHeight()/2),this.lgBox=Math.max(this.lgBox,a+2*f+4),this.lgBox>e.rhApp.gaCxWin?this.lgBox=e.rhApp.gaCxWin:this.lgBox>e.rhFrame.leWidth&&(this.lgBox=e.rhFrame.leWidth),l.right=this.lgBox,l.bottom=this.htq,this.textSurfaces[0]=new d(e.rhApp,this.lgBox,this.htq),this.textSurfaces[0].manualDrawText(u.tsText,qc.DT_CENTER|qc.DT_VCENTER,l,r,c,s?1:0,16777215)},draw:function(t,e,r){var s=this.hoCommon.ocObject,n=this.hoAdRunHeader,o=this.hoX-n.rhWindowX,a=this.hoY-n.rhWindowY,l=new h;l.left=o,l.top=a;var u=this.lgBox,c=this.htq+1+(this.hta+this.hte)*(s.otTexts.length-1)+this.hte+4;if(l.right=o+u,l.bottom=a+c,t.renderSolidColor(l.left,l.top,l.right-l.left,l.bottom-l.top,12632256,0,0),this.border3D(t,l,!1),l.left+=2,l.top+=2,l.right-=2,l.bottom=l.top+this.htq,this.textSurfaces[0].draw(t,(l.left+l.right)/2-this.textSurfaces[0].width/2,(l.top+l.bottom)/2-this.textSurfaces[0].height/2,0,0),l.top=l.bottom,t.renderLine(l.left,l.top,l.right,l.bottom,8421504,1,0,0),l.top+=1,l.bottom+=1,t.renderLine(l.left,l.top,l.right,l.bottom,16777215,1,0,0),null==this.rcA)for(this.rcA=Array(s.otTexts.length),i=1;i<s.otTexts.length;i++)this.rcA[i]=new h,this.rcA[i].left=o+2+this.xa_margin,this.rcA[i].right=o+this.lgBox-2-this.xa_margin,this.rcA[i].top=a+2+this.htq+1+this.hte+(this.hta+this.hte)*(i-1),this.rcA[i].bottom=this.rcA[i].top+this.hta;for(i=1;i<s.otTexts.length;i++){var d=this.currentDown==i;this.redraw_Answer(t,i,d)}}}),su.prototype=qc.extend(new zl,{init:function(t,e){this.ext.init(this);var i=this.hoAdRunHeader.rhApp.file.createFromFile(t.ocExtension);this.privateData=t.ocPrivate,this.ext.createRunObject(i,e,t.ocVersion)},addSprite:function(t,e,i,r,s){this.nLayer=r,this.pLayer=this.hoAdRunHeader.rhFrame.layers[r],this.bShown=s,1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.plane=this.pLayer.planeSprites,this.plane.addChild(this))},addOwnerDrawSprite:function(t,e,i,r,s){this.nLayer=i,this.pLayer=this.hoAdRunHeader.rhFrame.layers[i],this.bShown=s,1!=this.bAddedToPlane&&(this.bAddedToPlane=!0,this.plane=r?this.pLayer.planeQuickDisplay:this.pLayer.planeSprites,this.plane.addChild(this))},delSprite:function(){if(0==this.bAddedToPlane)return-1;this.bAddedToPlane=!1;var t=this.plane.getChildIndex(this);return this.plane.removeChild(this),t},handle:function(){0!=(512&this.hoOEFlags)?this.ros.handle():16==(48&this.hoOEFlags)||48==(48&this.hoOEFlags)?this.rom.move():32==(48&this.hoOEFlags)&&this.roa.animate();var t=0;0==this.noHandle&&(t=this.ext.handleRunObject()),0!=(t&vc.REFLAG_ONESHOT)&&(this.noHandle=!0),null!=this.roc&&this.roc.rcChanged&&(t|=vc.REFLAG_DISPLAY,this.roc.rcChanged=!1)},autoResize:function(){this.ext.autoResize()},createFont:function(){this.ext.createFont()},draw:function(t,e,i){this.bShown&&this.ext.displayRunObject(t,e,i)},kill:function(t){this.ext.destroyRunObject(t)},getCollisionMask:function(t){return this.ext.getRunObjectCollisionMask(t)},condition:function(t,e){return this.ext.condition(t,e)},action:function(t,e){this.ext.action(t,e)},expression:function(t){return this.ext.expression(t)},setTransparency:function(t){this.ros.rsEffect=cc.BOP_BLEND,this.ros.rsEffectParam=t},setFocus:function(t){this.ext.setFocus(t)},showSprite:function(){this.bShown=!0},hideSprite:function(){this.bShown=!1},getChildIndex:function(){return this.plane.getChildIndex(this)},getChildMaxIndex:function(){return this.plane.children.length},setChildIndex:function(t){t>=this.plane.children.length&&(t=this.plane.children.length),t<0&&(t=0),this.plane.setChildIndex(this,t)},pauseRunObject:function(){this.ext.pauseRunObject()},continueRunObject:function(){this.ext.continueRunObject()},forcePosition:function(){this.ext.forcePosition()},loadImageList:function(t){this.hoAdRunHeader.rhApp.imageBank.loadImageList(t)},getImage:function(t){return this.hoAdRunHeader.rhApp.imageBank.getImageFromHandle(t)},getApplication:function(){return this.hoAdRunHeader.rhApp},getX:function(){return this.hoX},getY:function(){return this.hoY},getWidth:function(){return this.hoImgWidth},getHeight:function(){return this.hoImgHeight},setX:function(t){null!=this.rom?this.rom.rmMovement.setXPosition(t):(this.hoX=t,null!=this.roc&&(this.roc.rcChanged=!0,this.roc.rcCheckCollides=!0))},setY:function(t){null!=this.rom?this.rom.rmMovement.setYPosition(t):(this.hoY=t,null!=this.roc&&(this.roc.rcChanged=!0,this.roc.rcCheckCollides=!0))},setWidth:function(t){this.hoImgWidth=t},setHeight:function(t){this.hoImgHeight=t},setSize:function(t,e){this.hoImgWidth=t,this.hoImgHeight=e},reHandle:function(){this.noHandle=!1},generateEvent:function(t,e){if(0==this.hoAdRunHeader.rh2PauseCompteur){var i=this.hoAdRunHeader.rhEvtProg.rhCurParam0;this.hoAdRunHeader.rhEvtProg.rhCurParam0=e,t=-(t+Sl.EVENTS_EXTBASE+1)<<16,t|=65535&this.hoType,this.hoAdRunHeader.rhEvtProg.handle_Event(this,t),this.hoAdRunHeader.rhEvtProg.rhCurParam0=i}},pushEvent:function(t,e){0==this.hoAdRunHeader.rh2PauseCompteur&&(t=-(t+Sl.EVENTS_EXTBASE+1)<<16,t|=65535&this.hoType,this.hoAdRunHeader.rhEvtProg.push_Event(1,t,e,this,this.hoOi))},pause:function(){this.hoAdRunHeader.pause()},resume:function(){this.hoAdRunHeader.resume()},redraw:function(){},destroy:function(){this.hoAdRunHeader.destroy_Add(this.hoNumber)},setPosition:function(t,e){null!=this.rom?(this.rom.rmMovement.setXPosition(t),this.rom.rmMovement.setYPosition(e)):(this.hoX=t,this.hoY=e,null!=this.roc&&(this.roc.rcChanged=!0,this.roc.rcCheckCollides=!0))},getExtUserData:function(){return this.privateData},setExtUserData:function(t){this.privateData=t},addBackdrop:function(t,e,i,r,s){this.hoAdRunHeader.addBackdrop(t,e,i,s,r,!0)},getEventCount:function(){return this.hoAdRunHeader.rh4EventCount},getExpParam:function(){return this.hoAdRunHeader.rh4CurToken++,this.hoAdRunHeader.getExpression()},getEventParam:function(){return this.hoAdRunHeader.rhEvtProg.rhCurParam0},callMovement:function(t,e,i){if(0!=(t.hoOEFlags&Yl.OEFLAG_MOVEMENTS)&&t.roc.rcMovementType==Oc.MVTYPE_EXT){return t.rom.rmMovement.callMovement(e,i)}return 0},getFirstObject:function(){return this.objectCount=0,this.objectNumber=0,this.getNextObject()},getNextObject:function(){if(this.objectNumber<this.hoAdRunHeader.rhNObjects){for(;null==this.hoAdRunHeader.rhObjectList[this.objectCount];)this.objectCount++;var t=this.hoAdRunHeader.rhObjectList[this.objectCount];return this.objectNumber++,this.objectCount++,t}return null},getObjectFromFixed:function(t){var e,i=0;for(e=0;e<this.hoAdRunHeader.rhNObjects;e++){for(;null==this.hoAdRunHeader.rhObjectList[i];)i++;var r=this.hoAdRunHeader.rhObjectList[i];i++;if((r.hoCreationId<<16|65535&r.hoNumber)==t)return r}return null},findFirstObject:function(t){return this.hoAdRunHeader.findFirstObject(t)},findNextObject:function(t){return this.hoAdRunHeader.findNextObject(t)},openHFile:function(t){return hoAdRunHeader.rhApp.openHFile(t)},closeHFile:function(t){hoAdRunHeader.rhApp.closeHFile(t)}}),nu.PARAM_EXPRESSIONNUM=22,nu.create=function(t){var e=t.file.getFilePointer(),i=null,r=t.file.readAShort(),s=t.file.readAShort();switch(s){case 1:i=new vu(t);break;case 2:i=new yu(t);break;case 3:case 4:i=new Su(t);break;case 5:i=new mu(t);break;case 6:i=new bu(t);break;case 9:i=new Au(t);break;case 10:case 11:case 12:i=new Su(t);break;case 13:i=new uu(t);break;case 14:i=new gu(t);break;case 15:i=new cu(t);break;case 16:i=new Eu(t);break;case 17:i=new Su(t);break;case 18:i=new Ou(t);break;case 19:i=new Cu(t);break;case 21:i=new Au(t);break;case 22:case 23:i=new cu(t);break;case 24:i=new lu(t);break;case 25:i=new mu(t);break;case 26:i=new Su(t);break;case 27:case 28:i=new cu(t);break;case 29:i=new mu(t);break;case 31:case 32:i=new Su(t);break;case 34:i=new mu(t);break;case 35:case 36:i=new bu(t);break;case 37:i=new Su(t);break;case 38:i=new fu(t);break;case 39:i=new pu(t);break;case 40:case 41:i=new Tu(t);break;case 42:i=new au(t);break;case 43:i=new Su(t);break;case 44:i=new gu(t);break;case 45:case 46:i=new cu(t);break;case 47:i=new hu(t);break;case 48:i=new mu(t);break;case 49:case 50:i=new Su(t);break;case 51:i=new hu(t);break;case 52:case 53:case 54:i=new cu(t);break;case 55:i=new du(t);break;case 56:i=new mu(t);break;case 57:case 58:i=new Su(t);break;case 59:i=new cu(t);break;case 60:case 61:i=new Su(t);break;case 62:i=new cu(t);break;case 63:case 64:i=new Tu(t);break;case 67:i=new Su(t);break;case 68:i=new Iu(t);break;case 69:i=new _u(t)}return i.code=s,t.file.seek(e+r),i},fu.GRPFLAGS_INACTIVE=1,fu.GRPFLAGS_CLOSED=2,fu.GRPFLAGS_PARENTINACTIVE=4,fu.GRPFLAGS_GROUPINACTIVE=8,fu.GRPFLAGS_GLOBAL=16,Pu.CPF_DIRECTION=1,Pu.CPF_ACTION=2,Pu.CPF_INITIALDIR=4,Pu.CPF_DEFAULTDIR=8,Pu.prototype={read_Position:function(t,e,i){if(i.layer=-1,-1==this.posOINUMParent){0!=e&&(i.dir=-1,0==(this.posFlags&Pu.CPF_DEFAULTDIR)&&(i.dir=t.get_Direction(this.posDir))),i.x=this.posX,i.y=this.posY;var r=this.posLayer;r>t.rhFrame.nLayers-1&&(r=t.rhFrame.nLayers-1),i.layer=r,i.bRepeat=!1}else{t.rhEvtProg.rh2EnablePick=!1;var s;if(s=t.rhEvtProg.get_CurrentObjects(this.posOiList),i.bRepeat=t.rhEvtProg.repeatFlag,null==s)return!1;if(i.x=s.hoX,i.y=s.hoY,i.layer=s.hoLayer,0!=(this.posFlags&Pu.CPF_ACTION)&&0!=(s.hoOEFlags&Yl.OEFLAG_ANIMATIONS)&&s.roc.rcImage>=0){var n,o=s.roc.rcAngle,h=t.GetMBase(s);null!=h&&(o=h.getAngle()),n=t.rhApp.imageBank.getImageInfoEx(s.roc.rcImage,o,s.roc.rcScaleX,s.roc.rcScaleY),i.x+=n.xAP-n.xSpot,i.y+=n.yAP-n.ySpot}if(0!=(this.posFlags&Pu.CPF_DIRECTION)){var a=this.posAngle+s.hoAdRunHeader.getDir(s)&31,l=Mc.getDeltaX(this.posSlope,a),u=Mc.getDeltaY(this.posSlope,a);i.x+=l,i.y+=u}else i.x+=this.posX,i.y+=this.posY;0!=(1&e)&&(0!=(this.posFlags&Pu.CPF_DEFAULTDIR)?i.dir=-1:0!=(this.posFlags&Pu.CPF_INITIALDIR)?i.dir=s.hoAdRunHeader.getDir(s):i.dir=t.get_Direction(this.posDir))}if(0!=(2&e)){if(i.x<t.rh3XMinimumKill||i.x>t.rh3XMaximumKill)return!1;if(i.y<t.rh3YMinimumKill||i.y>t.rh3YMaximumKill)return!1}return!0}},Eu.prototype=qc.extend(new Pu,{}),Au.prototype=qc.extend(new Pu,{}),Ou.prototype=qc.extend(new Pu,{}),Iu.prototype={evaluate:function(t){if(null==t.rov)return!1;if(0!=this.flagMasks&&(t.rov.rvValueFlags&this.flagMasks)!=this.flagValues)return!1;for(var e=0;e<this.values.length;e++){var i,r=this.values[e];if(i=r.global?t.hoAdRunHeader.rhApp.getGlobalValueAt(r.index):t.rov.getValue(r.index),!il.compareTo(i,r.val,r.op))return!1}return!0},evaluateNoGlobal:function(t){if(null==t.rov)return!1;if(0!=this.flagMasks&&(t.rov.rvValueFlags&this.flagMasks)!=this.flagValues)return!1;for(var e=0;e<this.values.length;e++){var i=this.values[e],r=t.rov.getValue(i.index);if(!il.compareTo(r,i.val,i.op))return!1}return!0}},Fu.prototype={renderSolidColor:function(t,e,i,r,s,n,o){},renderSolidColorEllipse:function(t,e,i,r,s,n,o){},renderGradient:function(t,e,i,r,s,n,o,h,a){},renderGradientEllipse:function(t,e,i,r,s,n,o,h,a){},renderImage:function(t,e,i,r,s,n,o,h){},renderSimpleImage:function(t,e,i,r,s,n,o){},renderPattern:function(t,e,i,r,s,n,o){},renderPatternEllipse:function(t,e,i,r,s,n,o){},renderLine:function(t,e,i,r,s,n,o,h){},renderRect:function(t,e,i,r,s,n,o,h){},renderEllipse:function(t,e,i,r,s,n,o){},renderTriangle:function(t,e,i,r,s,n){},pushClip:function(t,e,i,r){var s=this.clips[this.clips.length-1];s&&(t<s.x&&(t=s.x),e<s.y&&(e=s.y),t+i>s.x+s.w&&(i=s.x+s.w-t),e+r>s.y+s.h&&(r=s.y+s.h-e));var n={x:t,y:e,w:i,h:r};return this.clips.push(n),n},popClip:function(){this.clips.pop()}},xu.prototype=qc.extend(new Fu,{resetEffect:function(t){this.smoothing=t,this.oldSmoothing=t,this._context.imageSmoothingEnabled=t,this._context.webkitImageSmoothingEnabled=t,this._context.mozImageSmoothingEnabled=t,this._context.msImageSmoothingEnabled=t,this.oldEffect=-1,this.setInkEffect(0,0)},setScale:function(t,e){this._context.scale(t,e),this.xScale=t,this.yScale=e,this.dxw=0,this.dyw=0,this.xScale>1?this.dxw=1:this.xScale>0&&this.xScale<1&&(this.dxw=1/this.xScale),this.yScale>1&&(this.dyw=1),this.yScale>0&&this.yScale<1&&(this.dyw=1/this.yScale)},clearBackground:function(t,e,i,r){this._context.clearRect(t,e,i,r)},renderSolidColor:function(t,e,i,r,s,n,o){var h=this._context;this.setInkEffect(n,o),h.fillStyle=qc.getColorString(s);var a=t-Math.floor(t),l=e-Math.floor(e);0!=a&&(a=1-a),0!=l&&(l=1-l),a+=this.dxw,l+=this.dyw,h.fillRect(t,e,i+a,r+l)},renderSolidColorEllipse:function(t,e,i,r,s,n,o){var h=this._context;this.setInkEffect(n,o),h.fillStyle=qc.getColorString(s),qc.createEllipse(h,t,e,i,r),h.fill()},renderGradient:function(t,e,i,r,s,n,o,h,a){if(s==n)return this.renderSolidColor(t,e,i,r,s,h,a);var l=this._context;this.setInkEffect(h,a);var u=t-Math.floor(t),c=e-Math.floor(e);0!=u&&(u=1-u),0!=c&&(c=1-c),u+=this.dxw,c+=this.dyw,this.configureGradient(t,e,i+u,r+c,o,s,n),l.fillRect(t,e,i+u,r+c)},renderGradientEllipse:function(t,e,i,r,s,n,o,h,a){if(s==n)return this.renderSolidColorEllipse(t,e,i,r,s,h,a);var l=this._context;this.setInkEffect(h,a),this.configureGradient(t,e,i,r,o,s,n),qc.createEllipse(l,t,e,i,r),this._context.fill()},renderImage:function(t,e,i,r,s,n,o,h){var a=this._context,l=e-t.xSpot,u=i-t.ySpot;this.setInkEffect(o,h);var c=e-Math.floor(e),d=i-Math.floor(i);0!=c&&(c=1-c),0!=d&&(d=1-d),c+=this.dxw,d+=this.dyw;var f=0,p=0,m=null;0==t.mosaic?m=t.img:(m=t.app.imageBank.mosaics[t.mosaic],f=t.mosaicX,p=t.mosaicY),null!=m&&(0==r&&1==s&&1==n?0==t.mosaic&&0==c&&0==d?a.drawImage(m,l,u):a.drawImage(m,f,p,t.width,t.height,l,u,t.width+c,t.height+d):(a.save(),a.translate(e,i),0!=r&&a.rotate(.0174532925*-r),a.scale(Math.max(.001,s),Math.max(.001,n)),a.translate(-t.xSpot,-t.ySpot),a.drawImage(m,f,p,t.width,t.height,0,0,t.width,t.height),a.restore()))},renderSimpleImage:function(t,e,i,r,s,n,o){this.setInkEffect(n,o);var h=e-Math.floor(e),a=i-Math.floor(i);0!=h&&(h=1-h),0!=a&&(a=1-a),h+=this.dxw,a+=this.dyw,this._context.drawImage(t,e,i,r+h,s+a)},renderPattern:function(t,e,i,r,s,n,o){var h=this._context;this.setInkEffect(n,o),h.save(),h.beginPath(),h.moveTo(e,i),h.lineTo(e+r,i),h.lineTo(e+r,i+s),h.lineTo(e,i+s),h.lineTo(e,i),h.clip();var a,l,u=t.width,c=t.height,d=Math.floor(r/u)+1,f=Math.floor(s/c)+1,p=e-Math.floor(e),m=i-Math.floor(i);0!=p&&(p=1-p),0!=m&&(m=1-m),p+=this.dxw,m+=this.dyw;var g=0,v=0,_=null;if(0==t.mosaic?_=t.img:(_=t.app.imageBank.mosaics[t.mosaic],g=t.mosaicX,v=t.mosaicY),null!=_)for(a=0;a<d;a++)for(l=0;l<f;l++)h.drawImage(_,g,v,t.width,t.height,e+a*u,i+l*c,t.width+p,t.height+m);h.restore()},renderPatternEllipse:function(t,e,i,r,s,n,o){if(!(t instanceof vl))throw new Error("renderPatternEllipse: bad image type: "+typeof t);var h=this._context;if(this.setInkEffect(n,o),0==t.mosaic)null!=t.img&&(h.fillStyle=h.createPattern(t.img,"repeat"));else{if(!t.pattern){t.pattern=document.createElement("canvas"),t.pattern.width=t.width,t.pattern.height=t.height;var h=t.pattern.getContext("2d");h.drawImage(t.app.imageBank.mosaics[t.mosaic],t.mosaicX,t.mosaicY,t.width,t.height,0,0,t.width,t.height)}h.fillStyle=h.createPattern(t.pattern,"repeat")}qc.createEllipse(h,e,i,r,s),this._context.fill()},renderLine:function(t,e,i,r,s,n,o,h){var a=this._context;this.setInkEffect(o,h),a.strokeStyle=qc.getColorString(s),a.lineCap="round",a.lineWidth=n,a.beginPath(),a.moveTo(t,e),a.lineTo(i,r),a.closePath(),a.stroke()},renderRect:function(t,e,i,r,s,n,o,h){var a=this._context;this.setInkEffect(o,h),a.strokeStyle=qc.getColorString(s),a.lineWidth=n,a.strokeRect(t,e,i,r)},renderEllipse:function(t,e,i,r,s,n,o,h){var a=this._context;this.setInkEffect(o,h),a.lineWidth=s,a.strokeStyle=qc.getColorString(n),qc.createEllipse(a,t,e,i,r),this._context.stroke()},renderTriangle:function(t,e,i,r,s,n){var o=this._context,h=qc.getColorString(s);1==n?(o.beginPath(),o.moveTo(t,e),o.lineTo(t+i,e),o.lineTo(t+i/2,e-r),o.closePath(),o.lineWidth=1,o.strokeStyle=h,o.stroke(),o.fillStyle=h,o.fill()):(o.beginPath(),o.moveTo(t,e),o.lineTo(t,e-i),o.lineTo(t-r,e-i/2),o.closePath(),o.lineWidth=1,o.strokeStyle=h,o.stroke(),o.fillStyle=h,o.fill())},clip:function(t,e,i,r){var s=this._context;s.save(),s.beginPath(),s.rect(t,e,i,r),s.clip()},unClip:function(){this._context.restore()},pushClip:function(){var t=this._context,e=Fu.prototype.pushClip.apply(this,arguments);t.beginPath(),t.rect(e.x,e.y,e.w,e.h),t.clip()},popClip:function(){var t=this._context;if(Fu.prototype.popClip.apply(this,arguments),this.clips.length>0){var e=this.clips[this.clips.length-1];t.beginPath(),t.rect(e.x,e.y,e.w,e.h),t.clip()}else t.resetClip()},setInkEffect:function(t,e){var i=this._context;if(void 0===t)return i.globalAlpha=1,void(i.composite="source-over");if(t!=this.oldEffect||e!=this.oldEffectParam){this.oldEffect=t,this.oldEffectParam=e;var r=t&cc.BOP_MASK,s=0!=(t&cc.BOP_SMOOTHING)|this.smoothing;switch(s!=this.oldSmoothing&&(this.oldSmoothing=s,i.imageSmoothingEnabled=s,i.webkitImageSmoothingEnabled=s,i.mozImageSmoothingEnabled=s,i.msImageSmoothingEnabled=s),0!=(t&cc.BOP_RGBAFILTER)?i.globalAlpha=(e>>>24&255)/255:r==cc.BOP_BLEND?i.globalAlpha=(128-e)/128:i.globalAlpha=1,r){case cc.BOP_ADD:i.composite="lighter";break;case cc.BOP_XOR:i.composite="xor";break;default:i.composite="source-over"}}},configureGradient:function(t,e,i,r,s,n,o){var h=s?this._context.createLinearGradient(t,e,t,e+r):this._context.createLinearGradient(t,e,t+i,e);h.addColorStop(0,qc.getColorString(n)),h.addColorStop(1,qc.getColorString(o)),this._context.fillStyle=h}}),wu.TRFLAG_COLOR=1,wu.prototype={load:function(t){var e=t.getFilePointer();t.skipBytes(4),this.transID=t.readAInt(),this.transDuration=t.readAInt(),this.transFlags=t.readAInt(),this.transColor=t.readAColor();var i=t.readAInt(),r=t.readAInt();t.seek(e+i),this.dllName=t.readAString(),this.dllName=this.dllName.substr(0,this.dllName.indexOf(".")),this.dataOffset=e+r}},Mu.prototype={getTrans:function(t){return null}},Ru.LEFT_RIGHT=0,Ru.RIGHT_LEFT=1,Ru.TOP_BOTTOM=2,Ru.BOTTOM_TOP=3,Ru.CENTER_LEFTRIGHT=0,Ru.LEFTRIGHT_CENTER=1,Ru.CENTER_TOPBOTTOM=2,Ru.TOPBOTTOM_CENTER=3,Ru.TOP_LEFT=0,Ru.TOP_RIGHT=1,Ru.BOTTOM_LEFT=2,Ru.BOTTOM_RIGHT=3,Ru.CENTER=4,Ru.DIR_HORZ=0,Ru.DIR_VERT=1,Ru.TRFLAG_FADEIN=1,Ru.TRFLAG_FADEOUT=2,Ru.prototype={start:function(t,e,i,r){this.dest=e,this.destContext=this.dest.getContext("2d"),this.source1=i,this.source2=r;var s=new Date;this.m_initTime=s.getTime(),this.m_duration=t.transDuration,0==this.m_duration&&(this.m_duration=1),this.m_currentTime=this.m_initTime,this.m_endTime=this.m_initTime+this.m_duration,this.m_running=!0,this.m_starting=!0},finish:function(){},isCompleted:function(){if(this.m_running){var t=new Date;return t.getTime()>=this.m_endTime||t.getTime()>=this.m_endTime}return!0},getDeltaTime:function(){var t=new Date;return this.m_currentTime=t.getTime(),this.m_currentTime>this.m_endTime&&(this.m_currentTime=this.m_endTime),this.m_currentTime-this.m_initTime},getTimePos:function(){return this.m_currentTime-this.m_initTime},setTimePos:function(t){this.m_initTime=this.m_currentTime-this.msTimePos,this.m_endTime=this.m_initTime+this.m_duration},blit:function(t,e,i,r,s,n,o){this.m_objectFadeOut&&(this.destContext.globalCompositeOperation="source-atop"),1==arguments.length?this.destContext.drawImage(t,0,0):n>0&&o>0&&this.destContext.drawImage(t,r,s,n,o,e,i,n,o)},stretch:function(t,e,i,r,s,n,o,h,a){this.m_objectFadeOut&&(this.destContext.globalCompositeOperation="source-atop"),r>0&&s>0&&h>0&&a>0&&this.destContext.drawImage(t,n,o,h,a,e,i,r,s)},stepDraw:function(t){},end:function(){},init:function(t,e,i,r,s){}},ku.prototype={startObjectFade:function(t,e){var i=t.hoCommon.ocFadeIn;e&&(i=t.hoCommon.ocFadeOut);var r,s=null;if(0!=(t.hoOEFlags&Yl.OEFLAG_ANIMATIONS)){var n=this.app.imageBank.getImageFromHandle(t.roc.rcImage);s=document.createElement("canvas"),s.width=n.width,s.height=n.height;var r=s.getContext("2d");0==n.mosaic?r.drawImage(n.img,0,0):r.drawImage(this.app.imageBank.mosaics[n.mosaic],n.mosaicX,n.mosaicY,n.width,n.height,0,0,n.width,n.height)}else if(t.hoType>=32){s=document.createElement("canvas"),s.width=t.hoImgWidth,s.height=t.hoImgHeight;var o=new StandardRendered(s);t.getSurface(o)||(s=null)}if(null==s)return null;var h=s.width,a=s.height,l=document.createElement("canvas");l.width=h,l.height=a;var u=document.createElement("canvas");u.width=h,u.height=a;var c=document.createElement("canvas");c.width=h,c.height=a;var r;e?(r=u.getContext("2d"),r.drawImage(s,0,0),r=l.getContext("2d"),r.drawImage(s,0,0),0!=(i.transFlags&wu.TRFLAG_COLOR)&&this.copyColorMask(c,s,i.transColor)):(r=c.getContext("2d"),r.drawImage(s,0,0),0!=(i.transFlags&wu.TRFLAG_COLOR)&&this.copyColorMask(u,s,i.transColor));var d=this.createTransition(i,l,u,c);if(null!=d){var f=0;0!=(t.hoFlags&zl.HOF_FADEOUT)?(d.m_objectFadeOut=!0,f|=Ru.TRFLAG_FADEOUT):(d.m_objectFadeOut=!1,f|=Ru.TRFLAG_FADEIN),t.transitionImage=l,d.stepDraw(f)}return d},copyColorMask:function(t,e,i){var r=t.getContext("2d");r.drawImage(e,0,0);var s,n,o=e.width,h=e.height,a=r.getImageData(0,0,o,h),l=(16711680&i)>>16,u=(65280&i)>>8,c=255&i;for(n=0;n<h;n++)for(s=0;s<o;s++)0!=a.data[4*(n*o+s)+3]&&(a.data[4*(n*o+s)]=l,a.data[4*(n*o+s)+1]=u,a.data[4*(n*o+s)+2]=c);r.putImageData(a,0,0)},createTransition:function(t,e,i,r){var s=t.dllName,n=null;if("cctrans"==s.toLowerCase()&&(n=new Nu),null!=n){var o=n.getTrans(t);return this.app.file.seek(t.dataOffset),o.m_objectFadeOut=!1,o.init(t,this.app.file,e,i,r),o}return null}},Nu.identifiers=["BAND","SE00","SE10","SE12","DOOR","SE03","MOSA","SE05","SE06","SCRL","SE01","SE07","SE09","SE13","SE08","SE02","ZIGZ","SE04","ZOOM","SE11","FADE"],Nu.prototype=qc.extend(new Mu,{getTrans:function(t){var e=t.transID,i="";i+=String.fromCharCode(255&e),e>>=8,i+=String.fromCharCode(255&e),e>>=8,i+=String.fromCharCode(255&e),e>>=8,i+=String.fromCharCode(255&e);var r;for(r=0;r<Nu.identifiers.length&&i!=Nu.identifiers[r];r++);var s=null;switch(r){case 0:s=new Bu;break;case 1:s=new Du;break;case 2:s=new Hu;break;case 3:s=new Gu;break;case 4:s=new ju;break;case 5:s=new Xu;break;case 6:s=new Wu;break;case 7:s=new Vu;break;case 8:s=new Uu;break;case 9:s=new Ku;break;case 10:s=new qu;break;case 11:s=new zu;break;case 12:s=new Ju;break;case 13:s=new Qu;break;case 14:s=new Zu;break;case 15:s=new $u;break;case 16:s=new tc;break;case 17:s=new ec;break;case 18:s=new ic;break;case 19:s=new rc;break;case 20:s=new Yu}return s}}),Du.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,8!=this.dwStyle?this.m_style=this.dwStyle:this.m_style=Math.floor(8*Math.random()))
;var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r;switch(this.m_style){case 0:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,i,0,i,this.m_source2Height-r,i,r);break;case 1:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,i,this.m_source2Height-r,i,0,i,r);break;case 2:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,i,0,i,0,i,r);break;case 3:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,i,this.m_source2Height-r,i,this.m_source2Height-r,i,r);break;case 4:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height/2*e/this.m_duration,this.blit(this.source2,i,0,i,this.m_source2Height/2-r,i,r),this.blit(this.source2,i,this.m_source2Height-r,i,this.m_source2Height/2,i,r);break;case 5:i=this.m_source2Width/3*e/this.m_duration,r=this.m_source2Height,this.blit(this.source2,0,0,this.m_source2Width/3-i,0,i,r),this.blit(this.source2,this.m_source2Width-i,0,2*this.m_source2Width/3,0,i,r),i=this.m_source2Width/3,r=this.m_source2Height/2*e/this.m_duration,this.blit(this.source2,i,0,i,0,i,r),this.blit(this.source2,i,this.m_source2Height-r,i,this.m_source2Height-r,i,r);break;case 6:i=this.m_source2Width/3,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,0,this.m_source2Height-r,0,0,i,r),this.blit(this.source2,i,0,i,this.m_source2Height-r,i,r),this.blit(this.source2,2*i,this.m_source2Height-r,2*i,0,i,r);break;case 7:i=this.m_source2Width/7,r=this.m_source2Height*e/this.m_duration,this.blit(this.source2,0,this.m_source2Height-r,0,0,i,r),this.blit(this.source2,i,0,i,this.m_source2Height-r,i,r),this.blit(this.source2,2*i,this.m_source2Height-r,2*i,0,i,r),this.blit(this.source2,3*i,0,3*i,this.m_source2Height-r,i,r),this.blit(this.source2,4*i,this.m_source2Height-r,4*i,0,i,r),this.blit(this.source2,5*i,0,5*i,this.m_source2Height-r,i,r),this.blit(this.source2,6*i,this.m_source2Height-r,6*i,0,2*i,r);break;default:this.blit(this.source2)}}return null},end:function(){this.finish()}}),Hu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r;switch(this.blit(this.source2),this.dwStyle){case 0:i=this.m_source2Width/2*e/this.m_duration,i=this.m_source2Width/2-i,r=this.m_source2Height/2*e/this.m_duration,r=this.m_source2Height/2-r,this.stretch(this.source1,0,0,i,r,0,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r=this.m_source2Height/2-r,this.stretch(this.source1,this.m_source2Width/2+i,0,this.m_source2Width/2-i,r,this.m_source2Width/2,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,i=this.m_source2Width/2-i,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source1,0,this.m_source2Height/2+r,i,this.m_source2Height/2-r,0,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source1,this.m_source2Width/2+i,this.m_source2Height/2+r,this.m_source2Width/2-i,this.m_source2Height/2-r,this.m_source2Width/2,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2);break;case 1:i=this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.blit(this.source1,0,0,this.m_source2Width-i,this.m_source2Height-r,i,r);break;case 2:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.blit(this.source1,i,0,0,this.m_source2Height-r,this.m_source2Width-i,r);break;case 3:i=this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=this.m_source2Height*e/this.m_duration,this.blit(this.source1,0,r,this.m_source2Width-i,0,i,this.m_source2Height-r);break;case 4:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,this.blit(this.source1,i,r,0,0,this.m_source2Width-i,this.m_source2Height-r);break;case 5:i=this.m_source2Width/2*e/this.m_duration,i=this.m_source2Width/2-i,r=this.m_source2Height/2*e/this.m_duration,r=this.m_source2Height/2-r,this.blit(this.source1,i-this.m_source2Width/2,r-this.m_source2Height/2,0,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r=this.m_source2Height/2-r,this.blit(this.source1,this.m_source2Width/2+i,r-this.m_source2Height/2,this.m_source2Width/2,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,i=this.m_source2Width/2-i,r=this.m_source2Height/2*e/this.m_duration,this.blit(this.source1,i-this.m_source2Width/2,this.m_source2Height/2+r,0,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.blit(this.source1,this.m_source2Width/2+i,this.m_source2Height/2+r,this.m_source2Width/2,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2);break;case 6:i=this.m_source2Width,r=this.m_source2Height/2*e/this.m_duration,r=this.m_source2Height/2-r,this.blit(this.source1,0,r-this.m_source2Height/2,0,0,this.m_source2Width,this.m_source2Height/2),this.blit(this.source1,0,this.m_source2Height-r,0,this.m_source2Height/2,this.m_source2Width,this.m_source2Height/2);break;case 7:i=this.m_source2Width/2*e/this.m_duration,i=this.m_source2Width/2-i,r=this.m_source2Height,this.blit(this.source1,i-this.m_source2Width/2,0,0,0,this.m_source2Width/2,this.m_source2Height),this.blit(this.source1,this.m_source2Width-i,0,this.m_source2Width/2,0,this.m_source2Width/2,this.m_source2Height)}}return null},end:function(){this.finish()}}),Bu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.bpNbBands=e.readAShort(),this.bpDirection=e.readAShort(),this.start(t,i,r,s)},stepDraw:function(t){var e,i=this.source1.width,r=this.source1.height;if(this.m_starting){switch(0==this.bpNbBands&&(this.bpNbBands=1),this.bpDirection){case Ru.LEFT_RIGHT:case Ru.RIGHT_LEFT:this.m_wbande=(i+this.bpNbBands-1)/this.bpNbBands,0==this.m_wbande&&(this.m_wbande=1,this.bpNbBands=i);break;default:this.m_wbande=(r+this.bpNbBands-1)/this.bpNbBands,0==this.m_wbande&&(this.m_wbande=1,this.bpNbBands=r)}this.m_rw=0,this.m_starting=!1}if(this.bpNbBands<=0||this.m_wbande<=0||0==this.m_duration)this.blit(this.source2);else{var s=this.m_wbande*this.getDeltaTime()/this.m_duration;if(s>this.m_rw){var n=0,o=0,h=0,a=0;for(e=0;e<this.bpNbBands;e++){switch(this.bpDirection){case Ru.LEFT_RIGHT:n=this.m_rw+e*this.m_wbande,o=0,h=s-this.m_rw,a=r;break;case Ru.RIGHT_LEFT:n=i-(this.m_rw+e*this.m_wbande)-(s-this.m_rw),o=0,h=s-this.m_rw,a=r;break;case Ru.TOP_BOTTOM:n=0,o=this.m_rw+e*this.m_wbande,h=i,a=s-this.m_rw;break;case Ru.BOTTOM_TOP:n=0,o=r-(this.m_rw+e*this.m_wbande)-(s-this.m_rw),h=i,a=s-this.m_rw}this.blit(this.source2,n,o,n,o,h,a)}}this.m_rw=s}return this.m_prc},end:function(){this.finish()}}),Gu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwPos=e.readAInt(),this.dwPos2=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o,h,a,l,u,c;for(u=this.m_source2Width/this.dwPos,c=this.m_source2Height/this.dwPos2,s=this.m_source2Width/this.dwPos,n=this.m_source2Height/this.dwPos2,o=0;o<this.dwPos;o++)for(h=0;h<this.dwPos2;h++)i=o*u,r=h*c,a=s*e/this.m_duration,l=n*e/this.m_duration,this.stretch(this.source2,i+(s-a)/2,r+(n-l)/2,a,l,i+(s-a)/2,r+(n-l)/2,a,l)}return null},end:function(){this.finish()}}),ju.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.m_direction=e.readAShort(),this.start(t,i,r,s)},stepDraw:function(t){if(this.m_starting){switch(this.m_direction){case Ru.CENTER_LEFTRIGHT:case Ru.LEFTRIGHT_CENTER:this.m_wbande=this.source1.width/2;break;default:this.m_wbande=this.source1.height/2}this.m_rw=0,this.m_starting=!1}if(0==this.m_wbande)this.blit(this.source2);else{var e=0,i=0,r=0,s=0,n=this.m_wbande*this.getDeltaTime()/this.m_duration;if(n>this.m_rw){switch(this.m_direction){case Ru.CENTER_LEFTRIGHT:e=this.source1.width/2-n,i=0,r=n-this.m_rw,s=this.source2.height;break;case Ru.LEFTRIGHT_CENTER:e=this.m_rw,i=0,r=n-this.m_rw,s=this.source2.height;break;case Ru.CENTER_TOPBOTTOM:e=0,i=this.source1.height/2-n,r=this.source2.width,s=n-this.m_rw;break;case Ru.TOPBOTTOM_CENTER:e=0,i=this.m_rw,r=this.source2.width,s=n-this.m_rw}switch(this.blit(this.source2,e,i,e,i,r,s),this.m_direction){case Ru.CENTER_LEFTRIGHT:e=this.source1.width/2+this.m_rw;break;case Ru.LEFTRIGHT_CENTER:e=this.source1.width-n;break;case Ru.CENTER_TOPBOTTOM:i=this.source1.height/2+this.m_rw;break;case Ru.TOPBOTTOM_CENTER:i=this.source1.height-n}this.blit(this.source2,e,i,e,i,r,s)}}return null},end:function(){this.finish()}}),Yu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1);var e;return Ru.TRFLAG_FADEIN,this.destContext.globalAlpha=1,this.blit(this.source1),e=this.getDeltaTime()/this.m_duration,this.destContext.globalAlpha=e,this.blit(this.source2),null},end:function(){this.destContext.globalAlpha=1,this.finish()}}),Xu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwPos=e.readAInt(),this.dwStyle=e.readAInt(),this.dwScrolling=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o=0,h=0,a=0;if(0==this.dwStyle)for(a=this.m_source2Height/this.dwPos,o=0;o<this.dwPos;o++)0==h?(i=0,r=o*a,s=this.m_source2Width*e/this.m_duration,n=o==this.dwPos-1?this.m_source2Height:a+1,0==this.dwScrolling?this.blit(this.source2,i,r,i,r,s,n):this.blit(this.source2,i,r,this.m_source2Width-s,r,s,n),h=1):(r=o*a,s=this.m_source2Width*e/this.m_duration,i=this.m_source2Width-s,n=o==this.dwPos-1?this.m_source2Height:a+1,0==this.dwScrolling?this.blit(this.source2,i,r,i,r,s,n):this.blit(this.source2,i,r,0,r,s,n),h=0);else for(a=this.m_source2Width/this.dwPos,o=0;o<this.dwPos;o++)0==h?(i=o*a,r=0,n=this.m_source2Height*e/this.m_duration,s=o==this.dwPos-1?this.m_source2Width:a+1,0==this.dwScrolling?this.blit(this.source2,i,r,i,r,s,n):this.blit(this.source2,i,r,i,this.m_source2Height-n,s,n),h=1):(i=o*a,n=this.m_source2Height*e/this.m_duration,r=this.m_source2Height-n,s=o==this.dwPos-1?this.m_source2Width:a+1,0==this.dwScrolling?this.blit(this.source2,i,r,i,r,s,n):this.blit(this.source2,i,r,i,0,s,n),h=0)}return null},end:function(){this.finish()}}),Wu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.m_spotPercent=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){if(this.m_starting){var e=this.source1.width,i=this.source1.height;this.m_spotSize=Math.floor((e*this.m_spotPercent/100+i*this.m_spotPercent/100)/2),0==this.m_spotSize&&(this.m_spotSize=1);var r;this.m_nbBlockPerLine=(e+this.m_spotSize-1)/this.m_spotSize,this.m_nbBlockPerCol=(i+this.m_spotSize-1)/this.m_spotSize,this.m_nbBlocks=this.m_nbBlockPerLine*this.m_nbBlockPerCol,r=Math.floor((this.m_nbBlocks+7)/8+2),this.m_lastNbBlocks=0,this.m_bitbuf=new Array(r);var s;for(s=0;s<r;s++)this.m_bitbuf[s]=0;this.m_starting=!1}if(null==this.m_bitbuf||this.m_nbBlockPerLine<2||this.m_nbBlockPerCol<2||0==this.m_duration)this.blit(this.source2);else{var n,o,h=0,a=0,l=Math.floor(this.m_nbBlocks*this.getDeltaTime()/this.m_duration),u=l-this.m_lastNbBlocks;if(0!=u)for(this.m_lastNbBlocks=l,o=0;o<u;o++){for(n=0;n<1;n++){h=Math.floor(this.m_nbBlockPerLine*Math.random()),a=Math.floor(this.m_nbBlockPerCol*Math.random());var c,d,f;if(c=a*this.m_nbBlockPerLine+h,d=Math.floor(c/8),f=1<<(7&c),0==(this.m_bitbuf[d]&f)){this.m_bitbuf[d]|=f;break}var p,m=d,g=(this.m_nbBlocks+7)/8,v=!1;for(p=d;p<g;p++,m++)if(-1!=this.m_bitbuf[m]){for(a=Math.floor(8*p/this.m_nbBlockPerLine),h=Math.floor(8*p%this.m_nbBlockPerLine),f=1;0!=f;f<<=1){if(0==(this.m_bitbuf[m]&f)){this.m_bitbuf[m]|=f,v=!0;break}if(++h>=this.m_nbBlockPerLine&&(h=0,++a>=this.m_nbBlockPerCol))break}if(v)break}if(v)break;for(m=0,p=0;p<d;p++,m++){if(255!=this.m_bitbuf[m]){for(a=Math.floor(8*p/m_nbBlockPerLine),h=Math.floor(8*p%m_nbBlockPerLine),f=1;0!=f;f<<=1){if(0==(this.m_bitbuf[m]&f)){this.m_bitbuf[m]|=f,v=!0;break}if(++h>=this.m_nbBlockPerLine&&(h=0,++a>=this.m_nbBlockPerCol))break}if(v)break}if(v)break;v=!1}}n<1&&this.blit(this.source2,Math.floor(h*this.m_spotSize),Math.floor(a*this.m_spotSize),Math.floor(h*this.m_spotSize),Math.floor(a*this.m_spotSize),this.m_spotSize,this.m_spotSize)}}return null},end:function(){this.finish()}}),Vu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime(),i=e/this.m_duration;if(i>1)this.blit(this.source2);else{var r,s,n,o;i<.25?(n=2*this.m_source2Width*e/this.m_duration,n*=2,o=this.m_source2Height/7,r=this.m_source2Width/2-n/2,s=this.m_source2Height/2-o/2,this.blit(this.source2,r,s,r,s,n,o),n=this.m_source2Width/7,o=2*this.m_source2Height*e/this.m_duration,o*=2,r=this.m_source2Width/2-n/2,s=this.m_source2Height/2-o/2,this.blit(this.source2,r,s,r,s,n,o)):(r=this.m_source2Width/2,n=this.m_source2Width*e/this.m_duration-r,o=this.m_source2Height/2,s=0,this.blit(this.source2,r,s,r,s,n,o),s=this.m_source2Height/2,o=this.m_source2Height*e/this.m_duration-s,n=this.m_source2Width/2,r=n,this.blit(this.source2,r,s,r,s,n,o),n=this.m_source2Width*e/this.m_duration-this.m_source2Width/2,r=this.m_source2Width/2-n,o=this.m_source2Height/2,s=o,this.blit(this.source2,r,s,r,s,n,o),o=this.m_source2Height*e/this.m_duration-this.m_source2Height/2,s=this.m_source2Height/2-o,n=this.m_source2Width/2,r=0,this.blit(this.source2,r,s,r,s,n,o))}return null},end:function(){this.finish()}}),Uu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_refresh=!1);var e=this.getDeltaTime(),i=e/this.m_duration;if(i>1)this.blit(this.source2);else{var r,s,n,o;if(i<=.5)switch(this.dwStyle){case 0:n=this.m_source2Width*e/this.m_duration*2,o=this.m_source2Height/2,r=this.m_source2Width-n,s=this.m_source2Height/2,this.blit(this.source2,0,0,r,s,n,o);break;case 1:n=this.m_source2Width*e/this.m_duration*2,o=this.m_source2Height/2,r=this.m_source2Width-n,s=this.m_source2Height/2,this.blit(this.source2,r,0,0,s,n,o);break;case 2:n=this.m_source2Width*e/this.m_duration*2,o=this.m_source2Height/2,r=this.m_source2Width-n,s=this.m_source2Height/2,this.blit(this.source2,0,s,r,0,n,o);break;case 3:n=this.m_source2Width*e/this.m_duration*2,o=this.m_source2Height/2,r=this.m_source2Width-n,s=this.m_source2Height/2,this.blit(this.source2,r,s,0,0,n,o)}if(i>.5)switch(0==this.m_refresh&&(this.dwStyle<=1?this.blit(this.source2,0,0,0,this.m_source2Height/2,this.m_source2Width,this.m_source2Height/2):this.blit(this.source2,0,this.m_source2Height/2,0,0,this.m_source2Width,this.m_source2Height/2),this.m_refresh=!0),i=e-this.m_duration/2,i/=this.m_duration/2,i*=1e3,o=this.m_source2Height/2*i/1e3,this.dwStyle){case 0:case 1:this.stretch(this.source2,0,o,this.m_source2Width,this.m_source2Height/2,0,this.m_source2Height/2,this.m_source2Width,this.m_source2Height/2),this.stretch(this.source2,0,0,this.m_source2Width,o,0,this.m_source2Height/2-o,this.m_source2Width,o);break;case 2:case 3:this.stretch(this.source2,0,this.m_source2Height/2-o,this.m_source2Width,this.m_source2Height/2,0,0,this.m_source2Width,this.m_source2Height/2),this.stretch(this.source2,0,this.m_source2Height-o,this.m_source2Width,o,0,this.m_source2Height/2,this.m_source2Width,o)}}return null},end:function(){this.finish()}}),Ku.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.m_direction=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){var e=this.source1.width,i=this.source1.height;if(this.m_starting){switch(this.m_direction){case Ru.LEFT_RIGHT:case Ru.RIGHT_LEFT:this.m_wbande=e;break;default:this.m_wbande=i}this.m_rw=0,this.m_starting=!1}if(0==this.m_duration)this.blit(this.source2);else{var r=this.m_wbande*this.getDeltaTime()/this.m_duration;if(r>this.m_rw){var s=0,n=0;switch(this.m_direction){case Ru.LEFT_RIGHT:s=r-e,n=0;break;case Ru.RIGHT_LEFT:s=e-r,n=0;break;case Ru.TOP_BOTTOM:s=0,n=r-i;break;case Ru.BOTTOM_TOP:s=0,n=i-r}this.blit(this.source2,s,n,0,0,e,i),this.m_rw=r}}return null},end:function(){this.finish()}}),qu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.dwPos=e.readAInt(),this.dwStretch=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o,h;o=this.m_source2Width*this.dwPos/100,h=this.m_source2Height*this.dwPos/100,s=o*e/this.m_duration,n=h*e/this.m_duration,i=this.m_source2Width/2-s/2,r=this.m_source2Height/2-n/2,0==this.dwStretch?this.blit(this.source2,i,r,i,r,s,n):this.stretch(this.source2,i,r,s,n,this.m_source2Width/2-o/2,this.m_source2Height/2-h/2,o,h);var a=100-this.dwPos;o=this.m_source2Width*a/100,h=this.m_source2Height*a/100,s=o/2*e/this.m_duration,n=h/2*e/this.m_duration,this.blit(this.source2,0,0,0,0,this.m_source2Width,n),this.blit(this.source2,0,0,0,0,s,this.m_source2Height),this.blit(this.source2,0,this.m_source2Height-n,0,this.m_source2Height-n,this.m_source2Width,n),this.blit(this.source2,this.m_source2Width-s,0,this.m_source2Width-s,0,s,this.m_source2Height)}return null},end:function(){this.finish()}}),zu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r;switch(this.dwStyle){case 0:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 1:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,this.m_source2Width-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 2:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 3:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,this.m_source2Width-i,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 4:i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r<5&&(r=5),this.stretch(this.source2,0,0,i,r,0,0,this.source1.width/2,this.source1.height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r<5&&(r=5),this.stretch(this.source2,this.m_source2Width-i,0,i,r,this.m_source2Width/2,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source2,0,this.m_source2Height-r,i,r,0,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source2,this.m_source2Width-i,this.m_source2Height-r,i,r,this.m_source2Width/2,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2);break;case 5:i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r<5&&(r=5),this.stretch(this.source2,this.m_source2Width/2-i,this.m_source2Height/2-r,i,r,0,0,this.source1.width/2,this.source1.height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,r<5&&(r=5),this.stretch(this.source2,this.m_source2Width/2,this.m_source2Height/2-r,i,r,this.m_source2Width/2,0,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source2,this.m_source2Width/2-i,this.m_source2Height/2,i,r,0,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2),i=this.m_source2Width/2*e/this.m_duration,r=this.m_source2Height/2*e/this.m_duration,this.stretch(this.source2,this.m_source2Width/2,this.m_source2Height/2,i,r,this.m_source2Width/2,this.m_source2Height/2,this.m_source2Width/2,this.m_source2Height/2);break;case 6:i=this.m_source2Width,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 7:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 8:i=this.m_source2Width*e/this.m_duration,r=this.m_source2Height,this.stretch(this.source2,this.m_source2Width-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height);break;case 9:i=this.m_source2Width,r=this.m_source2Height*e/this.m_duration,this.stretch(this.source2,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height)}}return null},end:function(){this.finish()}}),Ju.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_phase=0);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r;switch(this.dwStyle){case 0:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 1:0==this.m_phase?(i=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 2:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,this.m_source2Width-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,this.m_source2Width-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 3:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=this.m_source2Height,this.stretch(this.source1,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=this.m_source2Height,this.stretch(this.source2,0,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 4:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=this.m_source2Height,this.stretch(this.source1,this.m_source2Width/2-i/2,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=this.m_source2Height,this.stretch(this.source2,this.m_source2Width/2-i/2,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 5:0==this.m_phase?(r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,i=this.m_source2Width,this.stretch(this.source1,0,this.m_source2Height/2-r/2,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,i=this.m_source2Width,this.stretch(this.source2,0,this.m_source2Height/2-r/2,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 6:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,this.m_source2Width/2-i/2,this.m_source2Height/2-r/2,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,this.m_source2Width/2-i/2,this.m_source2Height/2-r/2,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 7:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=this.m_source2Height,this.stretch(this.source1,this.m_source2Width-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=this.m_source2Height,this.stretch(this.source2,this.m_source2Height-i,0,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 8:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 9:0==this.m_phase?(i=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,0,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height));break;case 10:0==this.m_phase?(i=2*this.m_source2Width*e/this.m_duration,i=this.m_source2Width-i,r=2*this.m_source2Height*e/this.m_duration,r=this.m_source2Height-r,this.stretch(this.source1,this.m_source2Width-i,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height),e>=this.m_duration/2&&(this.m_phase=1)):(i=2*this.m_source2Width*e/this.m_duration,i-=this.m_source2Width,r=2*this.m_source2Height*e/this.m_duration,r-=this.m_source2Height,this.stretch(this.source2,this.m_source2Width-i,this.m_source2Height-r,i,r,0,0,this.m_source2Width,this.m_source2Height))}}return null},end:function(){this.finish()}}),Qu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_index=0,this.m_index2=0);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o;if(r=this.m_source2Height*e/this.m_duration,i=this.m_source2Width*e/this.m_duration,0==this.dwStyle){for(o=r%2,s=0;s<this.m_source2Width;s+=2){for(n=this.m_index;n<r;n++)this.blit(this.source2,s,n,s,n,1,1);for(n=this.m_source2Height-r-o;n<this.m_source2Height-this.m_index;n++)this.blit(this.source2,s+1,n+1,s+1,n+1,1,1)}this.m_index=r%2==0?r:r-1}if(1==this.dwStyle){for(o=i%2,n=0;n<this.m_source2Height;n++){for(s=this.m_index2;s<i;s+=2)this.blit(this.source2,s+1,n,s+1,n,1,1);for(s=this.m_source2Width-i-o;s<this.m_source2Width-this.m_index2;s+=2)this.blit(this.source2,s,n+1,s,n+1,1,1)}this.m_index2=i%2==0?i:i-1}if(2==this.dwStyle){for(o=r%2,s=0;s<this.m_source2Width;s+=2){for(n=this.m_index;n<r;n+=2)this.blit(this.source2,s,n,s,n,1,1);for(n=this.m_source2Height-r-o;n<this.m_source2Height-this.m_index;n+=2)this.blit(this.source2,s+1,n+1,s+1,n+1,1,1)}for(o=i%2,n=0;n<this.m_source2Height;n+=2){for(s=this.m_index2;s<i;s+=2)this.blit(this.source2,s+1,n,s+1,n,1,1);for(s=this.m_source2Width-i-o;s<this.m_source2Width-this.m_index2;s+=2)this.blit(this.source2,s,n+1,s,n+1,1,1)}this.m_index=r%2==0?r:r-1,this.m_index2=i%2==0?i:i-1}}return null},end:function(){this.finish()}}),Zu.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwPos=e.readAInt(),this.dwCheck1=e.readAInt(),this.dwCheck2=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_angle=0);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o,h,a;h=this.m_source2Width/2,a=this.m_source2Height/2,this.m_angle=6.28318*this.dwPos*e/this.m_duration,1==this.dwCheck2&&(this.m_angle=6.28318-this.m_angle),o=this.m_source2Width/2-this.m_source2Width/2*e/this.m_duration,i=Math.floor(h+Math.cos(this.m_angle)*o),r=Math.floor(a+Math.sin(this.m_angle)*o),s=this.m_source2Width*e/this.m_duration,n=this.m_source2Height*e/this.m_duration,this.stretch(this.source1,0,0,this.m_source2Width,this.m_source2Height,0,0,this.source1.width,this.source1.height),1==this.wCheck1?this.stretch(this.source2,i-s/2,r-n/2,s,n,0,0,this.m_source2Width,this.m_source2Height):this.stretch(this.source2,i-s/2,r-n/2,s,n,this.m_source2Width-s,this.m_source2Height-n,s,n)}return null},end:function(){this.finish()}}),$u.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwPos=e.readAInt(),this.dwCheck1=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_curcircle=0);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o,h=0;s=this.m_source2Width/2,n=this.m_source2Height/2,h=6.28318*this.dwPos*e/this.m_duration,h-=6.28318*this.m_curcircle,1==this.dwCheck1&&(h=6.28318-h),o=this.m_source2Width*e/this.m_duration,i=Math.floor(s+Math.cos(h)*o),
r=Math.floor(n+Math.sin(h)*o),this.blit(this.source2),this.blit(this.source1,i-this.m_source2Width/2,r-this.m_source2Height/2,0,0,this.m_source2Width,this.m_source2Height),0==this.dwCheck1?h>=6.28318&&this.m_curcircle++:h<=0&&this.m_curcircle++}return null},end:function(){this.finish()}}),tc.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.zpSpotPercent=e.readAInt(),this.zpStartPoint=e.readAShort(),this.zpDirection=e.readAShort(),this.start(t,i,r,s)},stepDraw:function(t){var e=this.source1.width,i=this.source1.height;if(this.m_starting){switch(this.m_spotSize=Math.floor((e*this.zpSpotPercent/100+i*this.zpSpotPercent/100)/2),0==this.m_spotSize&&(this.m_spotSize=1),this.m_nbBlockPerLine=(e+this.m_spotSize-1)/this.m_spotSize,this.m_nbBlockPerCol=(i+this.m_spotSize-1)/this.m_spotSize,this.m_currentDirection=this.zpDirection,this.m_currentStartPoint=this.zpStartPoint,this.zpStartPoint){case Ru.TOP_LEFT:this.m_curx=this.m_cury=0;break;case Ru.TOP_RIGHT:this.m_curx=e-this.m_spotSize,this.m_cury=0;break;case Ru.BOTTOM_LEFT:this.m_curx=0,this.m_cury=i-this.m_spotSize;break;case Ru.BOTTOM_RIGHT:this.m_curx=e-this.m_spotSize,this.m_cury=i-this.m_spotSize;break;case Ru.CENTER:this.m_curx=e/2-this.m_spotSize,this.m_cury=i/2-this.m_spotSize,this.m_currentDirection==Ru.DIR_HORZ?this.m_currentStartPoint=Ru.TOP_LEFT:this.m_currentStartPoint=Ru.TOP_RIGHT,this.m_left=this.m_curx-this.m_spotSize,this.m_top=this.m_cury-this.m_spotSize,this.m_bottom=this.m_cury+2*this.m_spotSize,this.m_right=this.m_curx+2*this.m_spotSize,this.m_nbBlockPerLine=2+2*(this.m_curx+this.m_spotSize-1)/this.m_spotSize,this.m_nbBlockPerCol=2+2*(this.m_cury+this.m_spotSize-1)/this.m_spotSize}this.m_nbBlocks=Math.floor(this.m_nbBlockPerLine*this.m_nbBlockPerCol),this.m_lastNbBlocks=0,this.m_starting=!1}if(this.m_spotSize>=e||this.m_spotSize>=i)this.blit(this.source2);else{var r,s=Math.floor(this.m_nbBlocks*this.getDeltaTime()/this.m_duration),n=s-this.m_lastNbBlocks;if(0!=n)for(this.m_lastNbBlocks=s,r=0;r<n;r++)if(this.blit(this.source2,this.m_curx,this.m_cury,this.m_curx,this.m_cury,this.m_spotSize,this.m_spotSize),this.zpStartPoint==Ru.CENTER)switch(this.m_currentStartPoint){case Ru.TOP_LEFT:this.m_curx+=this.m_spotSize,this.m_curx>=this.m_right&&(this.m_curx-=this.m_spotSize,this.m_cury+=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_RIGHT,this.m_right+=this.m_spotSize);break;case Ru.TOP_RIGHT:this.m_cury+=this.m_spotSize,this.m_cury>=this.m_bottom&&(this.m_cury-=this.m_spotSize,this.m_curx-=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_RIGHT,this.m_bottom+=this.m_spotSize);break;case Ru.BOTTOM_RIGHT:this.m_curx-=this.m_spotSize,this.m_curx+this.m_spotSize<=this.m_left&&(this.m_curx+=this.m_spotSize,this.m_cury-=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_LEFT,this.m_left-=this.m_spotSize);break;case Ru.BOTTOM_LEFT:this.m_cury-=this.m_spotSize,this.m_cury+this.m_spotSize<=this.m_top&&(this.m_cury+=this.m_spotSize,this.m_curx+=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_LEFT,this.m_top-=this.m_spotSize)}else switch(this.m_currentDirection){case Ru.DIR_HORZ:switch(this.m_currentStartPoint){case Ru.TOP_LEFT:this.m_curx+=this.m_spotSize,this.m_curx>=e&&(this.m_curx-=this.m_spotSize,this.m_cury+=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_RIGHT);break;case Ru.TOP_RIGHT:this.m_curx-=this.m_spotSize,this.m_curx+this.m_spotSize<=0&&(this.m_curx+=this.m_spotSize,this.m_cury+=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_LEFT);break;case Ru.BOTTOM_LEFT:this.m_curx+=this.m_spotSize,this.m_curx>=e&&(this.m_curx-=this.m_spotSize,this.m_cury-=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_RIGHT);break;case Ru.BOTTOM_RIGHT:this.m_curx-=this.m_spotSize,this.m_curx+this.m_spotSize<=0&&(this.m_curx+=this.m_spotSize,this.m_cury-=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_LEFT)}break;case Ru.DIR_VERT:switch(this.m_currentStartPoint){case Ru.TOP_LEFT:this.m_cury+=this.m_spotSize,this.m_cury>=i&&(this.m_cury-=this.m_spotSize,this.m_curx+=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_LEFT);break;case Ru.TOP_RIGHT:this.m_cury+=this.m_spotSize,this.m_cury>=i&&(this.m_cury-=this.m_spotSize,this.m_curx-=this.m_spotSize,this.m_currentStartPoint=Ru.BOTTOM_RIGHT);break;case Ru.BOTTOM_LEFT:this.m_cury-=this.m_spotSize,this.m_cury+this.m_spotSize<=0&&(this.m_cury+=this.m_spotSize,this.m_curx+=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_LEFT);break;case Ru.BOTTOM_RIGHT:this.m_cury-=this.m_spotSize,this.m_cury+this.m_spotSize<=0&&(this.m_cury+=this.m_spotSize,this.m_curx-=this.m_spotSize,this.m_currentStartPoint=Ru.TOP_RIGHT)}}}return null},end:function(){this.finish()}}),ec.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwStyle=e.readAInt(),this.dwPos=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height,this.m_linepos=0,this.m_dir=0);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n,o=0;0==this.dwStyle?(o=this.m_source2Height/this.dwPos,n=Math.floor(this.m_linepos*o)+Math.floor(o),r=0,s=this.m_source2Width*e/this.m_duration,s=s*this.dwPos/2,s-=this.m_source2Width*this.m_linepos,i=0==this.m_dir?0:this.m_source2Width-s,this.blit(this.source2,i,r,i,r,s,n),r=this.m_source2Height-n,i=1==this.m_dir?0:this.m_source2Width-s,this.blit(this.source2,i,r,i,r,s,n),s>=this.m_source2Width&&(this.m_linepos++,2==++this.m_dir&&(this.m_dir=0))):(o=this.m_source2Width/this.dwPos,s=Math.floor(this.m_linepos*o)+Math.floor(o),i=0,n=this.m_source2Height*e/this.m_duration,n=n*this.dwPos/2,n-=this.m_source2Height*this.m_linepos,r=0==this.m_dir?0:this.m_source2Height-n,this.blit(this.source2,i,r,i,r,s,n),i=this.m_source2Width-s,r=1==this.m_dir?0:this.m_source2Height-n,this.blit(this.source2,i,r,i,r,s,n),n>=this.m_source2Height&&(this.m_linepos++,2==++this.m_dir&&(this.m_dir=0)))}return null},end:function(){this.finish()}}),ic.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.start(t,i,r,s)},stepDraw:function(t){var e=this.source1.width,i=this.source1.height;if(this.m_starting&&(this.m_starting=!1),0==this.m_duration)this.blit(this.source2);else{var r,s,n=this.getDeltaTime();0!=(t&Ru.TRFLAG_FADEOUT)?(r=Math.floor(e-e*n/this.m_duration),s=Math.floor(i-i*n/this.m_duration),this.blit(this.source2),this.stretch(this.source1,(e-r)/2,(i-s)/2,r,s,0,0,e,i)):(r=Math.floor(e*n/this.m_duration),s=Math.floor(i*n/this.m_duration),this.blit(this.source1),this.stretch(this.source2,(e-r)/2,(i-s)/2,r,s,0,0,e,i))}return null},end:function(){this.finish()}}),rc.prototype=qc.extend(new Ru,{init:function(t,e,i,r,s){this.dwPos=e.readAInt(),this.start(t,i,r,s)},stepDraw:function(t){this.m_starting&&(this.m_starting=!1,this.m_source2Width=this.source2.width,this.m_source2Height=this.source2.height);var e=this.getDeltaTime();if(e/this.m_duration>1)this.blit(this.source2);else{var i,r,s,n;0==this.dwPos?(s=this.m_source2Width*e/this.m_duration,n=this.m_source2Height*e/this.m_duration,i=this.m_source2Width/2-s/2,r=this.m_source2Height/2-n/2,this.stretch(this.source2,0,0,this.m_source2Width,this.m_source2Height,i,r,s,n)):(s=this.m_source2Width*e/this.m_duration,s=this.m_source2Width-s,n=this.m_source2Height*e/this.m_duration,n=this.m_source2Height-n,i=this.m_source2Width/2-s/2,r=this.m_source2Height/2-n/2,this.stretch(this.source1,0,0,this.m_source2Width,this.m_source2Height,i,r,s,n))}return null},end:function(){this.finish()}});var ed=function(t,e){this.files={},this.root="",t&&this.load(t,e)};ed.signature={LOCAL_FILE_HEADER:"PK",CENTRAL_FILE_HEADER:"PK",CENTRAL_DIRECTORY_END:"PK",ZIP64_CENTRAL_DIRECTORY_LOCATOR:"PK",ZIP64_CENTRAL_DIRECTORY_END:"PK",DATA_DESCRIPTOR:"PK\b"},ed.defaults={base64:!1,binary:!1,dir:!1,date:null,compression:null},ed.prototype=function(){var t=function(t,e,i){this.name=t,this.data=e,this.options=i};t.prototype={asText:function(){var t=this.data;return null===t||void 0===t?"":(this.options.base64&&(t=id.decode(t)),this.options.binary&&(t=ed.prototype.utf8decode(t)),t)},asBinary:function(){var t=this.data;return null===t||void 0===t?"":(this.options.base64&&(t=id.decode(t)),this.options.binary||(t=ed.prototype.utf8encode(t)),t)},asUint8Array:function(){return ed.utils.string2Uint8Array(this.asBinary())},asArrayBuffer:function(){return ed.utils.string2Uint8Array(this.asBinary()).buffer}};var e=function(t,e){var i,r="";for(i=0;i<e;i++)r+=String.fromCharCode(255&t),t>>>=8;return r},i=function(){var t,e,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===i[e]&&(i[e]=arguments[t][e]);return i},r=function(t){return t=t||{},!0===t.base64&&null==t.binary&&(t.binary=!0),t=i(t,ed.defaults),t.date=t.date||new Date,null!==t.compression&&(t.compression=t.compression.toUpperCase()),t},s=function(e,i,s){var h=n(e);if(h&&o.call(this,h),s=r(s),s.dir||null===i||void 0===i)s.base64=!1,s.binary=!1,i=null;else if(ed.support.uint8array&&i instanceof Uint8Array)s.base64=!1,s.binary=!0,i=ed.utils.uint8Array2String(i);else if(ed.support.arraybuffer&&i instanceof ArrayBuffer){s.base64=!1,s.binary=!0;var a=new Uint8Array(i);i=ed.utils.uint8Array2String(a)}else s.binary&&!s.base64&&(!0!==s.optimizedBinaryString&&(i=ed.utils.string2binary(i)),delete s.optimizedBinaryString);return this.files[e]=new t(e,i,s)},n=function(t){"/"==t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},o=function(t){if("/"!=t.slice(-1)&&(t+="/"),!this.files[t]){var e=n(t);e&&o.call(this,e),s.call(this,t,null,{dir:!0})}return this.files[t]},h=function(t,i,r){var s,n,o=i!==t.name,h=t.asBinary(),a=t.options;s=a.date.getHours(),s<<=6,s|=a.date.getMinutes(),s<<=5,s|=a.date.getSeconds()/2,n=a.date.getFullYear()-1980,n<<=4,n|=a.date.getMonth()+1,n<<=5,n|=a.date.getDate();var l=null!==h&&0!==h.length;if(r=a.compression||r,!ed.compressions[r])throw r+" is not a valid compression method !";var u=ed.compressions[r],c=l?u.compress(h):"",d="";return d+="\n\0",d+=o?"\0\b":"\0\0",d+=l?u.magic:ed.compressions.STORE.magic,d+=e(s,2),d+=e(n,2),d+=l?e(this.crc32(h),4):"\0\0\0\0",d+=l?e(c.length,4):"\0\0\0\0",d+=l?e(h.length,4):"\0\0\0\0",d+=e(i.length,2),d+="\0\0",{header:d,compressedData:c}};return{load:function(t,e){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var r,s,n,o,h=[];for(r in this.files)this.files.hasOwnProperty(r)&&(n=this.files[r],o=new t(n.name,n.data,i(n.options)),s=r.slice(this.root.length,r.length),r.slice(0,this.root.length)===this.root&&e(s,o)&&h.push(o));return h},file:function(t,e,i){if(1===arguments.length){if(t instanceof RegExp){var r=t;return this.filter(function(t,e){return!e.options.dir&&r.test(t)})}return this.filter(function(e,i){return!i.options.dir&&e===t})[0]||null}return t=this.root+t,s.call(this,t,e,i),this},folder:function(t){if(!t)return this;if(t instanceof RegExp)return this.filter(function(e,i){return i.options.dir&&t.test(e)});var e=this.root+t,i=o.call(this,e),r=this.clone();return r.root=i.name,r},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!=t.slice(-1)&&(t+="/"),e=this.files[t]),e)if(e.options.dir)for(var i=this.filter(function(e,i){return i.name.slice(0,t.length)===t}),r=0;r<i.length;r++)delete this.files[i[r].name];else delete this.files[t];return this},generate:function(t){t=i(t||{},{base64:!0,compression:"STORE",type:"base64"});var r=t.compression.toUpperCase();if(!ed.compressions[r])throw r+" is not a valid compression method !";var s=[],n=[],o=0;for(var a in this.files)if(this.files.hasOwnProperty(a)){var l=this.files[a],u=this.utf8encode(l.name),c="",d="",f=h.call(this,l,u,r);c=ed.signature.LOCAL_FILE_HEADER+f.header+u+f.compressedData,d=ed.signature.CENTRAL_FILE_HEADER+"\0"+f.header+"\0\0\0\0\0\0"+(!0===this.files[a].options.dir?"\0\0\0":"\0\0\0\0")+e(o,4)+u,o+=c.length,n.push(c),s.push(d)}var p=n.join(""),m=s.join(""),g="";g=ed.signature.CENTRAL_DIRECTORY_END+"\0\0\0\0"+e(n.length,2)+e(n.length,2)+e(m.length,4)+e(p.length,4)+"\0\0";var v=p+m+g;switch(t.type.toLowerCase()){case"uint8array":return ed.utils.string2Uint8Array(v);case"arraybuffer":return ed.utils.string2Uint8Array(v).buffer;case"blob":return ed.utils.string2Blob(v);case"base64":return t.base64?id.encode(v):v;default:return v}},crc32:function(t,e){if(""===t||void 0===t)return 0;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];void 0===e&&(e=0);var r=0,s=0;e^=-1;for(var n=0,o=t.length;n<o;n++)s=255&(e^t.charCodeAt(n)),r=i[s],e=e>>>8^r;return-1^e},clone:function(){var t=new ed;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t},utf8encode:function(t){for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e},utf8decode:function(t){for(var e="",i=0,r=0,s=0,n=0;i<t.length;)r=t.charCodeAt(i),r<128?(e+=String.fromCharCode(r),i++):r>191&&r<224?(s=t.charCodeAt(i+1),e+=String.fromCharCode((31&r)<<6|63&s),i+=2):(s=t.charCodeAt(i+1),n=t.charCodeAt(i+2),e+=String.fromCharCode((15&r)<<12|(63&s)<<6|63&n),i+=3);return e}}}(),ed.compressions={STORE:{magic:"\0\0",compress:function(t){return t},uncompress:function(t){return t}}},ed.support={arraybuffer:function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array}(),uint8array:function(){return"undefined"!=typeof Uint8Array}(),blob:function(){if("undefined"==typeof ArrayBuffer)return!1;var t=new ArrayBuffer(0);try{return 0===new Blob([t],{type:"application/zip"}).size}catch(t){}try{var e=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return e.append(t),0===e.getBlob("application/zip").size}catch(t){}return!1}()},ed.utils={string2binary:function(t){for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(255&t.charCodeAt(i));return e},string2Uint8Array:function(t){if(!ed.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i},uint8Array2String:function(t){if(!ed.support.uint8array)throw new Error("Uint8Array is not supported by this browser");for(var e="",i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return e},string2Blob:function(t){if(!ed.support.blob)throw new Error("Blob is not supported by this browser");var e=ed.utils.string2Uint8Array(t).buffer;try{return new Blob([e],{type:"application/zip"})}catch(t){}try{var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return i.append(e),i.getBlob("application/zip")}catch(t){}throw new Error("Bug : can't construct the Blob.")}};var id=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(e,i){for(var r,s,n,o,h,a,l,u="",c=0;c<e.length;)r=e.charCodeAt(c++),s=e.charCodeAt(c++),n=e.charCodeAt(c++),o=r>>2,h=(3&r)<<4|s>>4,a=(15&s)<<2|n>>6,l=63&n,isNaN(s)?a=l=64:isNaN(n)&&(l=64),u=u+t.charAt(o)+t.charAt(h)+t.charAt(a)+t.charAt(l);return u},decode:function(e,i){var r,s,n,o,h,a,l,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)o=t.indexOf(e.charAt(c++)),h=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),r=o<<2|h>>4,s=(15&h)<<4|a>>2,n=(3&a)<<6|l,u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(s)),64!=l&&(u+=String.fromCharCode(n));return u}}}();if(!ed)throw"JSZip not defined";!function(){function t(){this.next=null,this.list=null}function e(){this.e=0,this.b=0,this.n=0,this.t=null}function i(i,r,s,n,o,h){this.BMAX=16,this.N_MAX=288,this.status=0,this.root=null,this.m=0;var a,l,u,c,d,f,p,m,g,v,_,P,E,A,O,b,S,T=new Array(this.BMAX+1),y=new Array(this.BMAX+1),C=new e,L=new Array(this.BMAX),I=new Array(this.N_MAX),F=new Array(this.BMAX+1);for(S=this.root=null,f=0;f<T.length;f++)T[f]=0;for(f=0;f<y.length;f++)y[f]=0;for(f=0;f<L.length;f++)L[f]=null;for(f=0;f<I.length;f++)I[f]=0;for(f=0;f<F.length;f++)F[f]=0;l=r>256?i[256]:this.BMAX,g=i,v=0,f=r;do{T[g[v]]++,v++}while(--f>0);if(T[0]==r)return this.root=null,this.m=0,void(this.status=0);for(p=1;p<=this.BMAX&&0==T[p];p++);for(m=p,h<p&&(h=p),f=this.BMAX;0!=f&&0==T[f];f--);for(c=f,h>f&&(h=f),A=1<<p;p<f;p++,A<<=1)if((A-=T[p])<0)return this.status=2,void(this.m=h);if((A-=T[f])<0)return this.status=2,void(this.m=h);for(T[f]+=A,F[1]=p=0,g=T,v=1,E=2;--f>0;)F[E++]=p+=g[v++];g=i,v=0,f=0;do{0!=(p=g[v++])&&(I[F[p]++]=f)}while(++f<r);for(r=F[c],F[0]=f=0,g=I,v=0,d=-1,P=y[0]=0,_=null,O=0;m<=c;m++)for(a=T[m];a-- >0;){for(;m>P+y[1+d];){if(P+=y[1+d],d++,O=(O=c-P)>h?h:O,(u=1<<(p=m-P))>a+1)for(u-=a+1,E=m;++p<O&&!((u<<=1)<=T[++E]);)u-=T[E];for(P+p>l&&P<l&&(p=l-P),O=1<<p,y[1+d]=p,_=new Array(O),b=0;b<O;b++)_[b]=new e;S=null==S?this.root=new t:S.next=new t,S.next=null,S.list=_,L[d]=_,d>0&&(F[d]=f,C.b=y[d],C.e=16+p,C.t=_,p=(f&(1<<P)-1)>>P-y[d],L[d-1][p].e=C.e,L[d-1][p].b=C.b,L[d-1][p].n=C.n,L[d-1][p].t=C.t)}for(C.b=m-P,v>=r?C.e=99:g[v]<s?(C.e=g[v]<256?16:15,C.n=g[v++]):(C.e=o[g[v]-s],C.n=n[g[v++]-s]),u=1<<m-P,p=f>>P;p<O;p+=u)_[p].e=C.e,_[p].b=C.b,_[p].n=C.n,_[p].t=C.t;for(p=1<<m-1;0!=(f&p);p>>=1)f^=p;for(f^=p;(f&(1<<P)-1)!=F[d];)P-=y[d],d--}this.m=y[1],this.status=0!=A&&1!=c?1:0}function r(){return I.length==F?-1:255&I.charCodeAt(F++)}function s(t){for(;E<t;)P|=r()<<E,E+=8}function n(t){return P&N[t]}function o(t){P>>=t,E-=t}function h(t,e,i){var r,h,a;if(0==i)return 0;for(a=0;;){for(s(C),h=T.list[n(C)],r=h.e;r>16;){if(99==r)return-1;o(h.b),r-=16,s(r),h=h.t[n(r)],r=h.e}if(o(h.b),16!=r){if(15==r)break;for(s(r),b=h.n+n(r),o(r),s(L),h=y.list[n(L)],r=h.e;r>16;){if(99==r)return-1;o(h.b),r-=16,s(r),h=h.t[n(r)],r=h.e}for(o(h.b),s(r),S=g-h.n-n(r),o(r);b>0&&a<i;)b--,S&=x-1,g&=x-1,t[e+a++]=m[g++]=m[S++];if(a==i)return i}else if(g&=x-1,t[e+a++]=m[g++]=h.n,a==i)return i}return A=-1,a}function a(t,e,i){var r;if(r=7&E,o(r),s(16),r=n(16),o(16),s(16),r!=(65535&~P))return-1;for(o(16),b=r,r=0;b>0&&r<i;)b--,g&=x-1,s(8),t[e+r++]=m[g++]=n(8),o(8);return 0==b&&(A=-1),r}function l(t,e,r){if(null==k){var s,n,o=new Array(288);for(s=0;s<144;s++)o[s]=8;for(;s<256;s++)o[s]=9;for(;s<280;s++)o[s]=7;for(;s<288;s++)o[s]=8;if(_=7,n=new i(o,288,257,D,H,_),0!=n.status)return alert("HufBuild error: "+n.status),-1;for(k=n.root,_=n.m,s=0;s<30;s++)o[s]=5;if(p=5,n=new i(o,30,0,B,G,p),n.status>1)return k=null,alert("HufBuild error: "+n.status),-1;v=n.root,p=n.m}return T=k,y=v,C=_,L=p,h(t,e,r)}function u(t,e,r){var a,l,u,c,d,f,p,m,g,v=new Array(316);for(a=0;a<v.length;a++)v[a]=0;if(s(5),p=257+n(5),o(5),s(5),m=1+n(5),o(5),s(4),f=4+n(4),o(4),p>286||m>30)return-1;for(l=0;l<f;l++)s(3),v[j[l]]=n(3),o(3);for(;l<19;l++)v[j[l]]=0;if(C=7,g=new i(v,19,19,null,null,C),0!=g.status)return-1;for(T=g.root,C=g.m,c=p+m,a=u=0;a<c;)if(s(C),d=T.list[n(C)],l=d.b,o(l),(l=d.n)<16)v[a++]=u=l;else if(16==l){if(s(2),l=3+n(2),o(2),a+l>c)return-1;for(;l-- >0;)v[a++]=u}else if(17==l){if(s(3),l=3+n(3),o(3),a+l>c)return-1;for(;l-- >0;)v[a++]=0;u=0}else{if(s(7),l=11+n(7),o(7),a+l>c)return-1;for(;l-- >0;)v[a++]=0;u=0}if(C=M,g=new i(v,p,257,D,H,C),0==C&&(g.status=1),0!=g.status)return g.status,-1;for(T=g.root,C=g.m,a=0;a<m;a++)v[a]=v[a+p];return L=R,g=new i(v,m,0,B,G,L),y=g.root,0==(L=g.m)&&p>257?-1:(g.status,0!=g.status?-1:h(t,e,r))}function c(){null==m&&(m=new Array(2*x)),g=0,P=0,E=0,A=-1,O=!1,b=S=0,T=null}function d(t,e,i){var r,c;for(r=0;r<i;){if(O&&-1==A)return r;if(b>0){if(A!=w)for(;b>0&&r<i;)b--,S&=x-1,g&=x-1,t[e+r++]=m[g++]=m[S++];else{for(;b>0&&r<i;)b--,g&=x-1,s(8),t[e+r++]=m[g++]=n(8),o(8);0==b&&(A=-1)}if(r==i)return r}if(-1==A){if(O)break;s(1),0!=n(1)&&(O=!0),o(1),s(2),A=n(2),o(2),T=null,b=0}switch(A){case 0:c=a(t,e+r,i-r);break;case 1:c=null!=T?h(t,e+r,i-r):l(t,e+r,i-r);break;case 2:c=null!=T?h(t,e+r,i-r):u(t,e+r,i-r);break;default:c=-1}if(-1==c)return O?0:-1;r+=c}return r}function f(t){var e,i,r,s;for(c(),I=t,F=0,i=new Array(1024),e="";(r=d(i,0,i.length))>0;)for(s=0;s<r;s++)e+=String.fromCharCode(i[s]);return I=null,e}var p,m,g,v,_,P,E,A,O,b,S,T,y,C,L,I,F,x=32768,w=0,M=9,R=6,k=null,N=new Array(0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535),D=new Array(3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0),H=new Array(0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,99,99),B=new Array(1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577),G=new Array(0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13),j=new Array(16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15);ed.compressions.DEFLATE?ed.compressions.DEFLATE.uncompress=f:ed.compressions.DEFLATE={magic:"\b\0",uncompress:f}}(),function(){function t(t){if(this.stream="",ed.support.uint8array&&t instanceof Uint8Array)this.stream=ed.utils.uint8Array2String(t);else if(ed.support.arraybuffer&&t instanceof ArrayBuffer){var e=new Uint8Array(t);this.stream=ed.utils.uint8Array2String(e)}else this.stream=ed.utils.string2binary(t);this.index=0}function e(t,e){this.options=t,this.loadOptions=e}function i(t,e){this.files=[],this.loadOptions=e,t&&this.load(t)}var r=function(t){var e,i,r="";for(i=0;i<(t||"").length;i++)e=t.charCodeAt(i),r+="\\x"+(e<16?"0":"")+e.toString(16).toUpperCase();return r},s=function(t){for(var e in ed.compressions)if(ed.compressions.hasOwnProperty(e)&&ed.compressions[e].magic===t)return ed.compressions[e];return null};t.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.stream.length<t||t<0)throw new Error("End of stream reached (stream length = "+this.stream.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){return this.stream.charCodeAt(t)},readInt:function(t){var e,i=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)i=(i<<8)+this.byteAt(e);return this.index+=t,i},readString:function(t){this.checkOffset(t);var e=this.stream.slice(this.index,this.index+t);return this.index+=t,e},readDate:function(){var t=this.readInt(4);return new Date(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1)}},e.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,i;if(t.skip(22),this.fileNameLength=t.readInt(2),i=t.readInt(2),this.fileName=t.readString(this.fileNameLength),t.skip(i),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(this.compressedFileData=t.readString(this.compressedSize),null===(e=s(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r(this.compressionMethod)+" unknown (inner file : "+this.fileName+")");if(this.uncompressedFileData=e.uncompress(this.compressedFileData),this.uncompressedFileData.length!==this.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch");if(this.loadOptions.checkCRC32&&ed.prototype.crc32(this.uncompressedFileData)!==this.crc32)throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(t){if(this.versionMadeBy=t.readString(2),this.versionNeeded=t.readInt(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4),this.fileNameLength=t.readInt(2),this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=t.readString(this.fileNameLength),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readString(this.fileCommentLength),this.dir=!!(16&this.externalFileAttributes)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var i=new t(this.extraFields[1].value);-1===this.uncompressedSize&&(this.uncompressedSize=i.readInt(8)),-1===this.compressedSize&&(this.compressedSize=i.readInt(8)),-1===this.localHeaderOffset&&(this.localHeaderOffset=i.readInt(8)),-1===this.diskNumberStart&&(this.diskNumberStart=i.readInt(4))}},readExtraFields:function(t){var e,i,r,s=t.index;for(this.extraFields=this.extraFields||{};t.index<s+this.extraFieldsLength;)e=t.readInt(2),i=t.readInt(2),r=t.readString(i),this.extraFields[e]={id:e,length:i,value:r}},handleUTF8:function(){this.useUTF8()&&(this.fileName=ed.prototype.utf8decode(this.fileName),this.fileComment=ed.prototype.utf8decode(this.fileComment))}},i.prototype={checkSignature:function(t){var e=this.reader.readString(4);if(e!==t)throw new Error("Corrupted zip or bug : unexpected signature ("+r(e)+", expected "+r(t)+")")},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2),this.zipComment=this.reader.readString(this.zipCommentLength)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,i,r=this.zip64EndOfCentralSize-44;0<r;)t=this.reader.readInt(2),e=this.reader.readInt(4),i=this.reader.readString(e),this.zip64ExtensibleData[t]={id:t,length:e,value:i}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(ed.signature.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===ed.signature.CENTRAL_FILE_HEADER;)t=new e({zip64:this.zip64},this.loadOptions),t.readCentralPart(this.reader),this.files.push(t)},readEndOfCentral:function(){var t=this.reader.stream.lastIndexOf(ed.signature.CENTRAL_DIRECTORY_END);if(-1===t)throw new Error("Corrupted zip : can't find end of central directory");if(this.reader.setIndex(t),this.checkSignature(ed.signature.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),65535===this.diskNumber||65535===this.diskWithCentralDirStart||65535===this.centralDirRecordsOnThisDisk||65535===this.centralDirRecords||-1===this.centralDirSize||-1===this.centralDirOffset){if(this.zip64=!0,-1===(t=this.reader.stream.lastIndexOf(ed.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");this.reader.setIndex(t),this.checkSignature(ed.signature.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(ed.signature.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}},load:function(e){this.reader=new t(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},ed.prototype.load=function(t,e){var r,s,n,o;for(e=e||{},e.base64&&(t=id.decode(t)),s=new i(t,e),r=s.files,n=0;n<r.length;n++)o=r[n],this.file(o.fileName,o.uncompressedFileData,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir});return this}}();var rd=document.getElementsByTagName("script"),sd=rd[rd.length-1].src;document.srcPath=sd.substring(0,sd.lastIndexOf("/")+1),Kc.Runtime=sc,Kc.headerLoaded=nc,Kc.ua="updateApplication",Kc[window.ua]=oc,hc.prototype={draw:function(t,e,i){if(this.visible){this.bZoom&&(t._context.save(),t._context.translate(this.xDest,this.yDest),0!=this.angle&&t._context.rotate(.0174532925*-this.angle),t._context.scale(Math.max(.001,this.scaleX),Math.max(.001,this.scaleY)),t._context.translate(-this.xSpot,-this.ySpot));var r;for(r=0;r<this.children.length;r++)this.children[r].draw(t,e+this.x,i+this.y);this.bZoom&&t._context.restore()}},addChild:function(t){this.children.push(t)},addChildIndex:function(t,e){e>=this.children.length?this.children.push(t):(e<0&&(e=0),this.children.splice(e,0,t))},removeAll:function(){this.children.length=0},removeChild:function(t){var e;for(e=0;e<this.children.length;e++)if(this.children[e]==t)return this.children.splice(e,1),e;return-1},getChildIndex:function(t){var e;for(e=0;e<this.children.length;e++)if(this.children[e]==t)return e;return-1},getNumChildren:function(){return this.children.length},setChildIndex:function(t,e){var i,r=null
;for(i=0;i<this.children.length;i++)if(this.children[i]==t){r=this.children[i];break}null!=r&&(this.children.splice(i,1),e>i&&e--,e<0&&(e=0),e>=this.children.length?this.children.push(t):this.children.splice(e,0,t))}},ac.CM_TEST_OBSTACLE=0,ac.CM_TEST_PLATFORM=1,ac.CM_OBSTACLE=1,ac.CM_PLATFORM=2,ac.COLMASK_XMARGIN=64,ac.COLMASK_YMARGIN=16,ac.HEIGHT_PLATFORM=6,lc.SCMF_FULL=0,lc.SCMF_PLATFORM=1,lc.GCMF_OBSTACLE=0,lc.GCMF_PLATFORM=1,lc.lMask=[65535,32767,16383,8191,4095,2047,1023,511,255,127,63,31,15,7,3,1],lc.rMask=[0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535],lc.topLeft=new a,lc.topRight=new a,lc.bottomLeft=new a,lc.bottomRight=new a,lc.prototype={createMask:function(t,e,i){var r,s,n;this.width=e.width,this.height=e.height,this.xSpot=e.xSpot,this.ySpot=e.ySpot;var o=Math.floor((this.width+15&4294967280)/16);this.lineWidth=o;var h=o*this.height+1;if("undefined"!=typeof ArrayBuffer)this.mask=new Uint16Array(new ArrayBuffer(2*h));else for(this.mask=new Array(h),r=0;r<h;r++)this.mask[r]=0;var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var l=a.getContext("2d");0==e.mosaic?l.drawImage(e.img,0,0):l.drawImage(t.imageBank.mosaics[e.mosaic],e.mosaicX,e.mosaicY,e.width,e.height,0,0,e.width,e.height);var u=l.getImageData(0,0,this.width,this.height);if(0==(i&lc.GCMF_PLATFORM))for(s=0;s<this.height;s++){var c=s*e.width*4+3,d=s*o,f=32768;for(r=0;r<this.width;r++)0!=u.data[c]&&(this.mask[d]|=f),c+=4,0==(f>>>=1)&&(f=32768,d++)}else{var p,m;for(r=0;r<this.width;r++){for(s=0;s<this.height&&0==u.data[4*(s*e.width+r)+3];s++);if(s<this.height)for(p=Math.min(this.height,s+ac.HEIGHT_PLATFORM),m=32768>>(15&r);s<p;s++)0!=u.data[4*(s*e.width+r)+3]&&(n=Math.floor(s*o+(4294967280&r)/16),this.mask[n]|=m)}}},rotateRect:function(t,e,i){var r,s,n,o;if(90==i)n=0,o=1;else if(180==i)n=-1,o=0;else if(270==i)n=0,o=-1;else{var h=i*Math.PI/180;n=Math.cos(h),o=Math.sin(h)}var a,l,u,c;null==e?(a=l=u=c=0,lc.topLeft.x=lc.topLeft.y=0):(a=-e.x*n,l=-e.x*o,u=-e.y*n,c=-e.y*o,lc.topLeft.x=Math.floor(a+c),lc.topLeft.y=Math.floor(u-l)),r=null==e?t.right:t.right-e.x,a=r*n,l=r*o,lc.topRight.x=Math.floor(a+c),lc.topRight.y=Math.floor(u-l),s=null==e?t.bottom:t.bottom-e.y,u=s*n,c=s*o,lc.bottomRight.x=Math.floor(a+c),lc.bottomRight.y=Math.floor(u-l),lc.bottomLeft.x=lc.topLeft.x+lc.bottomRight.x-lc.topRight.x,lc.bottomLeft.y=lc.topLeft.y+lc.bottomRight.y-lc.topRight.y;var d=Math.min(lc.topLeft.x,Math.min(lc.topRight.x,Math.min(lc.bottomRight.x,lc.bottomLeft.x))),f=Math.min(lc.topLeft.y,Math.min(lc.topRight.y,Math.min(lc.bottomRight.y,lc.bottomLeft.y))),p=Math.max(lc.topLeft.x,Math.max(lc.topRight.x,Math.max(lc.bottomRight.x,lc.bottomLeft.x))),m=Math.max(lc.topLeft.y,Math.max(lc.topRight.y,Math.max(lc.bottomRight.y,lc.bottomLeft.y)));null!=e&&(e.x=-d,e.y=-f),t.right=p-d,t.bottom=m-f},createRotatedMask:function(t,e,i,r){var s,n,o=t.width,l=t.height,u=new h;u.right=Math.floor(t.width*i),u.bottom=Math.floor(t.height*r);var c=new a;c.x=Math.floor(t.xSpot*i),c.y=Math.floor(t.ySpot*r),this.rotateRect(u,c,e);var d=u.right,f=u.bottom;if(d<=0||f<=0)return!1;var p=t.lineWidth,m=(d+15&2147483632)/16;"undefined"!=typeof ArrayBuffer?this.mask=new Uint16Array(new ArrayBuffer(2*(m*f+1))):this.mask=new Array(m*f+1);var g;for(g=m*f;g>=0;g--)this.mask[g]=0;this.lineWidth=m,this.width=d,this.height=f,this.xSpot=c.x,this.ySpot=c.y;var v,_,P=.017453292*e,E=Math.cos(P),A=Math.sin(P),O=o/2-(d/2*E-f/2*A)/i,b=l/2-(d/2*A+f/2*E)/r,S=0,T=Math.floor(65536*O),y=Math.floor(65536*b),C=Math.floor(65536*E/i),L=Math.floor(65536*A/r),I=d/16,F=d%16,x=Math.floor(65536*E/r),w=Math.floor(65536*A/i),M=65536*o,R=65536*l;for(n=0;n<f;n++){var k,N,D=T,H=y,B=S;for(s=0;s<I;s++){var G=0;D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=32768)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=16384)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=8192)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=4096)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=2048)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=1024)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=512)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=256)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=128)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=64)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=32)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=16)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=8)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=4)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=2)),D+=C,H+=L,D>=0&&D<M&&H>=0&&H<R&&(k=Math.floor(D/65536),N=Math.floor(H/65536),v=32768>>>k%16,0!=((_=t.mask[Math.floor(N*p+k/16)])&v)&&(G|=1)),D+=C,H+=L,this.mask[B++]=G}if(0!=F){var j=32768,Y=0;for(s=0;s<F;s++,j=j>>1&32767){if(D>=0&&D<M&&H>=0&&H<R){var X=Math.floor(D/65536),W=Math.floor(H/65536);v=32768>>>X%16,_=t.mask[Math.floor(W*p+X/16)],0!=(_&v)&&(Y|=j)}D+=C,H+=L}this.mask[B]=Y}S+=m,T-=w,y+=x}return!0},testMask:function(t,e,i,r,s,n,o){var h,a,l,u,c,d,f,p,m,g;t<=s?(h=this,a=r,m=Math.floor(i),g=Math.floor(o),l=Math.floor(t),u=Math.floor(e),c=Math.floor(s),d=Math.floor(n)):(h=r,a=this,m=Math.floor(o),g=Math.floor(i),l=Math.floor(s),u=Math.floor(n),c=Math.floor(t),d=Math.floor(e)),f=h.height;var v=0;0!=m&&(f=m,u+=h.height-m,v=h.height-m),p=a.height;var _=0;if(0!=g&&(p=g,d+=a.height-g,_=a.height-g),l>=c+a.width||l+h.width<=c)return!1;if(u>=d+p||u+f<d)return!1;var P=c-l,E=Math.floor(P/16),A=P%16,O=Math.min(l+h.width-c,a.width);O=Math.floor((O+15)/16);var b,S,T;u<=d?(b=d-u+v,S=_,T=Math.min(u+f,d+p)-d):(b=v,S=u-d+_,T=Math.min(u+f,d+p)-u);var y,C,L,I,F,x;if(L=b*h.lineWidth,I=S*a.lineWidth,0!=A)switch(O){case 1:for(C=0;C<T;C++){if(0!=((F=h.mask[L+E]<<A)&a.mask[I]))return!0;if(E+1<h.lineWidth&&(x=h.mask[L+E+1]<<A,0!=((x>>>=16)&a.mask[I])))return!0;L+=h.lineWidth,I+=a.lineWidth}break;case 2:for(C=0;C<T;C++){if(0!=((F=h.mask[L+E]<<A)&a.mask[I]))return!0;if(x=h.mask[L+E+1]<<A,0!=(x>>>16&a.mask[I]))return!0;if(0!=(x&a.mask[I+1]))return!0;if(E+2<h.lineWidth&&(x=h.mask[L+E+2]<<A,0!=((x>>>=16)&a.mask[I+1])))return!0;L+=h.lineWidth,I+=a.lineWidth}break;default:for(C=0;C<T;C++){if(0!=((F=h.mask[L+E]<<A)&a.mask[I]))return!0;for(y=0;y<O-1;y++){if(x=h.mask[L+E+y+1]<<A,0!=(x>>>16&a.mask[I+y]))return!0;if(0!=(x&a.mask[I+y+1]))return!0}if(E+y+1<h.lineWidth&&(x=h.mask[L+E+y+1]<<A,0!=((x>>>=16)&a.mask[I+y])))return!0;L+=h.lineWidth,I+=a.lineWidth}}else for(C=0;C<T;C++){for(y=0;y<O;y++)if(F=h.mask[L+E+y],0!=(a.mask[I+y]&F))return!0;L+=h.lineWidth,I+=a.lineWidth}return!1},testRect2:function(t,e,i,r,s,n,o,h){t=Math.floor(t),e=Math.floor(e),r=Math.floor(r),s=Math.floor(s);var a=0,l=this.height;i>0&&(a=this.height-i,e+=a,l=i);var u=0,c=o;if(h>0&&(u=o-h,s+=u,c=h),t>=r+n||t+this.width<=r)return!1;if(e>=s+c||e+l<s)return!1;var d,f,p,m;t<=r?(d=r-t,f=Math.min(this.width-d,n)):(d=0,f=Math.min(r+n-t,this.width)),e<=s?(p=s-e+a,m=Math.min(e+l,s+c)-s):(p=a,m=Math.min(e+l,s+c)-e);var g,v,_,P,E=Math.floor(d/8),A=Math.floor((d+f+15)/16)-Math.floor(d/16);for(_=0;_<m;_++)switch(v=(_+p)*this.lineWidth,A){case 1:if(g=lc.lMask[15&d]&lc.rMask[1+(d+f-1&15)],0!=(this.mask[v+E]&g))return!0;break;case 2:if(g=lc.lMask[15&d],0!=(this.mask[v+E]&g))return!0;if(g=lc.rMask[1+(d+f-1&15)],0!=(this.mask[v+E+1]&g))return!0;break;default:if(g=lc.lMask[15&d],0!=(this.mask[v+E]&g))return!0;for(P=1;P<A-1;P++)if(0!=this.mask[v+E+P])return!0;if(g=lc.rMask[1+(d+f-1&15)],0!=(this.mask[v+E+P]&g))return!0}return!1},testPoint:function(t,e,i,r){var s=Math.floor(i-t),n=Math.floor(r-e);if(s<0||s>=this.width||n<0||n>=this.height)return!1;var o=n*this.lineWidth+Math.floor(s/16),h=32768>>>(15&s);this.mask[o];return 0!=(this.mask[o]&h)},testPointEx:function(t,e,i,r,s){var n=Math.floor(t),o=Math.floor(e),h=n,a=o;if(0==i)1==r&&1==s||(h=Math.floor(h/r),a=Math.floor(a/s)),h+=this.xSpot,a+=this.ySpot;else{var l=3.141592653589*i/180,u=Math.cos(l),c=Math.sin(l);h=n*u-o*c,a=o*u+n*c,1==r&&1==s||(h/=r,a/=s),h+=this.xSpot,a+=this.ySpot}if(n=Math.floor(h),o=Math.floor(a),n<0||n>=this.width||o<0||o>=this.height)return!1;var d=o*this.lineWidth+Math.floor(n/16),f=32768>>>(15&n);this.mask[d];return 0!=(this.mask[d]&f)}},cc.RSFLAG_HIDDEN=1,cc.RSFLAG_INACTIVE=2,cc.RSFLAG_SLEEPING=4,cc.RSFLAG_ROTATE_ANTIA=16,cc.RSFLAG_VISIBLE=32,cc.RSFLAG_RAMBO=64,cc.RSFLAG_COLBOX=128,cc.SPRTYPE_TRUESPRITE=0,cc.SPRTYPE_OWNERDRAW=1,cc.BOP_COPY=0,cc.BOP_BLEND=1,cc.BOP_INVERT=2,cc.BOP_XOR=3,cc.BOP_AND=4,cc.BOP_OR=5,cc.BOP_BLEND_REPLACETRANSP=6,cc.BOP_DWROP=7,cc.BOP_ANDNOT=8,cc.BOP_ADD=9,cc.BOP_MONO=10,cc.BOP_SUB=11,cc.BOP_BLEND_DONTREPLACECOLOR=12,cc.BOP_EFFECTEX=13,cc.BOP_MAX=13,cc.BOP_MASK=4095,cc.BOP_RGBAFILTER=4096,cc.BOP_SMOOTHING=8192,cc.prototype={init1:function(t,e,i){this.hoPtr=t,this.rsLayer=i.cobLayer,this.rsZOrder=i.cobZOrder,this.rsFlags=0,this.rsFlags|=cc.RSFLAG_RAMBO,0==(this.hoPtr.hoLimitFlags&sl.OILIMITFLAGS_QUICKCOL)&&(this.rsFlags&=~cc.RSFLAG_RAMBO),0!=(this.hoPtr.hoOiList.oilOCFlags2&Yl.OCFLAGS2_COLBOX)&&(this.rsFlags|=cc.RSFLAG_COLBOX),0!=(i.cobFlags&il.COF_HIDDEN)?(this.rsFlags|=cc.RSFLAG_HIDDEN,this.hoPtr.hoType==Dl.OBJ_TEXT&&(this.hoPtr.hoFlags|=zl.HOF_NOCOLLISION,this.rsFlags&=~cc.RSFLAG_RAMBO)):this.rsFlags|=cc.RSFLAG_VISIBLE,this.rsEffect=this.hoPtr.hoOiList.oilInkEffect,this.rsEffectParam=this.hoPtr.hoOiList.oilEffectParam;var r=1;0!=(this.rsEffect&cc.BOP_RGBAFILTER)?r=(this.rsEffectParam>>>24&255)/255:(this.rsEffect&cc.BOP_MASK)==cc.BOP_BLEND&&(r=(128-this.rsEffectParam)/128),this.rsTransparency=128-128*r,this.hoPtr.roc.rcMovementType==Oc.MVTYPE_STATIC&&(this.rsFlags|=cc.RSFLAG_INACTIVE)},init2:function(t){this.createSprite(t),t&&this.hoPtr.hoCommon.ocFadeIn&&(this.hoPtr.hoFlags|=zl.HOF_FADEIN)},handle:function(){var t,e,i,r,s=this.hoPtr.hoAdRunHeader;if(0!=(this.hoPtr.hoFlags&zl.HOF_FADEIN))return this.rsTrans||this.createTransition(!1),void this.performFadeIn();if(0!=(this.hoPtr.hoFlags&zl.HOF_FADEOUT))return void this.performFadeOut();if(0==(this.rsFlags&cc.RSFLAG_SLEEPING)){if(0!=this.rsFlash&&(this.rsFlashCpt-=s.rhTimerDelta,this.rsFlashCpt<0&&(this.rsFlashCpt=this.rsFlash,0==(this.rsFlags&cc.RSFLAG_VISIBLE)?(this.rsFlags|=cc.RSFLAG_VISIBLE,this.obShow()):(this.rsFlags&=~cc.RSFLAG_VISIBLE,this.obHide()))),null!=this.hoPtr.rom&&this.hoPtr.rom.move(),0!=this.hoPtr.roc.rcPlayer)return;if(0!=(this.hoPtr.hoOEFlags&Yl.OEFLAG_NEVERSLEEP))return void(0==(this.hoPtr.hoOEFlags&Yl.OEFLAG_NEVERKILL)&&0!=(s.rhApp.dwOptions&Ka.AH2OPT_DESTROYIFNOINACTIVATE)&&(t=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,e=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,i=t+this.hoPtr.hoImgWidth,r=e+this.hoPtr.hoImgHeight,(i<s.rh3XMinimumKill||t>s.rh3XMaximumKill||r<s.rh3YMinimumKill||e>s.rh3YMaximumKill)&&s.destroy_Add(this.hoPtr.hoNumber)));if(t=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,e=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,i=t+this.hoPtr.hoImgWidth,r=e+this.hoPtr.hoImgHeight,i>=s.rh3XMinimum&&t<=s.rh3XMaximum&&r>=s.rh3YMinimum&&e<=s.rh3YMaximum)return;return i>=s.rh3XMinimumKill&&t<=s.rh3XMaximumKill&&r>=s.rh3YMinimumKill&&e<=s.rh3YMaximumKill?(this.rsFlags|=cc.RSFLAG_SLEEPING,void(this.rsZOrder=this.hoPtr.delSprite())):void(0==(this.hoPtr.hoOEFlags&Yl.OEFLAG_NEVERKILL)&&s.destroy_Add(this.hoPtr.hoNumber))}t=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,e=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,i=t+this.hoPtr.hoImgWidth,r=e+this.hoPtr.hoImgHeight,i>=s.rh3XMinimum&&t<=s.rh3XMaximum&&r>=s.rh3YMinimum&&e<=s.rh3YMaximum&&(this.rsFlags&=~cc.RSFLAG_SLEEPING,this.init2(!1),this.hoPtr.setChildIndex(this.rsZOrder))},createSprite:function(t){0!=(this.hoPtr.hoOEFlags&Yl.OEFLAG_ANIMATIONS)?(this.hoPtr.addSprite(this.hoPtr.hoX-this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY-this.hoPtr.hoAdRunHeader.rhWindowY,this.hoPtr.roc.rcImage,this.rsLayer,0==(this.rsFlags&cc.RSFLAG_HIDDEN)),this.rsSpriteType=cc.SPRTYPE_TRUESPRITE,this.hoPtr.setEffect(this.rsEffect,this.rsEffectParam)):(this.hoPtr.hoFlags|=zl.HOF_OWNERDRAW,this.hoPtr.addOwnerDrawSprite(this.hoPtr.hoX-this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY-this.hoPtr.hoAdRunHeader.rhWindowY,this.rsLayer,0!=(this.hoPtr.hoOEFlags&Yl.OEFLAG_QUICKDISPLAY),0==(this.rsFlags&cc.RSFLAG_HIDDEN),-1),this.hoPtr.setEffect(this.rsEffect,this.rsEffectParam),this.rsSpriteType=cc.SPRTYPE_OWNERDRAW)},createTransition:function(t){if(this.hoPtr.hoFlags&=~(zl.HOF_FADEIN|zl.HOF_FADEOUT),0==t){if(!this.hoPtr.hoCommon.ocFadeIn)return!1;this.hoPtr.hoFlags|=zl.HOF_FADEIN}else{if(!this.hoPtr.hoCommon.ocFadeOut)return!1;this.hoPtr.hoFlags|=zl.HOF_FADEOUT}return this.rsTrans=this.hoPtr.hoAdRunHeader.rhApp.getTransitionManager().startObjectFade(this.hoPtr,t),!!this.rsTrans||(this.hoPtr.hoFlags&=~(zl.HOF_FADEIN|zl.HOF_FADEOUT),!1)},performFadeIn:function(){return 0!=(this.hoPtr.hoFlags&zl.HOF_FADEIN)&&(this.rsTrans.isCompleted()?(this.hoPtr.hoFlags&=~zl.HOF_FADEIN,this.hoPtr.transitionImage=null,this.rsTrans=null,this.hoPtr.hoType>=32&&hoPtr.ext.continueRunObject(),!1):(this.rsTrans.stepDraw(Ru.TRFLAG_FADEIN),!0))},performFadeOut:function(){return 0!=(this.hoPtr.hoFlags&zl.HOF_FADEOUT)&&(this.rsTrans.isCompleted()?(this.rsTrans=null,this.transitionImage=null,this.hoPtr.hoAdRunHeader.destroy_Add(this.hoPtr.hoNumber),!1):(this.rsTrans.stepDraw(Ru.TRFLAG_FADEOUT),!0))},initFadeOut:function(){return!!this.createTransition(!0)&&(this.hoPtr.hoFlags|=zl.HOF_NOCOLLISION,!0)},kill:function(t){this.rsZOrder=this.hoPtr.delSprite()},obHide:function(){0==(this.rsFlags&cc.RSFLAG_HIDDEN)&&(this.rsFlags|=cc.RSFLAG_HIDDEN,this.hoPtr.roc.rcChanged=!0,this.hoPtr.hideSprite())},obShow:function(){if(0!=(this.rsFlags&cc.RSFLAG_HIDDEN)){(this.hoPtr.hoAdRunHeader.rhFrame.layers[this.hoPtr.hoLayer].dwOptions&(kl.FLOPT_TOHIDE|kl.FLOPT_VISIBLE))==kl.FLOPT_VISIBLE&&(this.rsFlags&=~cc.RSFLAG_HIDDEN,this.hoPtr.hoFlags&=~zl.HOF_NOCOLLISION,this.hoPtr.roc.rcChanged=!0,this.hoPtr.showSprite())}},setSemiTransparency:function(t){t>=0&&t<=128&&(this.rsTransparency=t,this.hoPtr.setTransparency(t))},getSemiTransparency:function(){return this.rsTransparency},setColFlag:function(t){t?this.rsFlags|=cc.RSFLAG_RAMBO:this.rsFlags&=~cc.RSFLAG_RAMBO},modifSpriteEffect:function(t,e){this.rsEffect=t,this.rsEffectParam=e}},dc.prototype={load:function(t){this.nStrings=t.readAShort(),this.strings=new Array(this.nStrings);var e;for(e=0;e<this.nStrings;e++)this.strings[e]=t.readAString()}},fc.prototype={load:function(t,e){this.nValues=t.readAShort(),this.values=new Array(this.nValues);var i;for(i=0;i<this.nValues;i++)this.values[i]=t.readAInt();e&&(this.flags=t.readAInt())}},pc.VALUES_NUMBEROF_ALTERABLE_DEFAULT=26,pc.STRINGS_NUMBEROF_ALTERABLE_DEFAULT=10,pc.prototype={init:function(t,e,i){this.rvValueFlags=0;var r=pc.VALUES_NUMBEROF_ALTERABLE_DEFAULT;null!=e.ocValues&&e.ocValues.nValues>r&&(r=e.ocValues.nValues),this.rvValues=new Array(r);var s=pc.STRINGS_NUMBEROF_ALTERABLE_DEFAULT;null!=e.ocStrings&&e.ocStrings.nStrings>s&&(s=e.ocStrings.nStrings),this.rvStrings=new Array(s);var n;for(n=0;n<this.rvValues.length;n++)this.rvValues[n]=0;for(n=0;n<this.rvStrings.length;n++)this.rvStrings[n]="";if(null!=e.ocValues)for(this.rvValueFlags=e.ocValues.flags,n=0;n<e.ocValues.nValues;n++)this.rvValues[n]=e.ocValues.values[n];if(null!=e.ocStrings)for(n=0;n<e.ocStrings.nStrings;n++)this.rvStrings[n]=e.ocStrings.strings[n]},kill:function(t){var e;for(e=0;e<this.rvValues.length;e++)this.rvValues[e]=0;for(e=0;e<this.rvStrings.length;e++)this.rvStrings[e]=null},getValue:function(t){return t<this.rvValues.length?this.rvValues[t]:0},getString:function(t){return t<this.rvStrings.length?this.rvStrings[t]:""},setString:function(t,e){t>=this.rov.rvStrings.length&&this.growStrings(t+10),this.rvStrings[t]=e},setValue:function(t,e){t>=this.rov.rvValues.length&&this.growValues(t+10),this.rvValues[t]=e},growValues:function(t){if(t>this.rvValues.length){var e;for(e=this.rvValues.length;e<t;e++)this.rvValues[e]=0}},growStrings:function(t){if(t>this.rvStrings.length){var e;for(e=this.rvStrings.length;e<t;e++)this.rvStrings[e]=""}}},mc.KPX_BASE=32,mc.prototype={createList:function(t){this.extensions=new Array(3),this.numOfConditions=new Array(3);var e;for(e=0;e<3;e++)this.extensions[e]=null,this.numOfConditions[e]=0;var i;i=new gc,i.handle=2,this.addExt(i)},addExt:function(t){var e=t.loadRunObject();null!=e&&(this.extensions[t.handle]=t,this.numOfConditions[t.handle]=e.getNumberOfConditions())},loadRunObject:function(t){t-=mc.KPX_BASE;var e=null;return t<this.extensions.length&&null!=this.extensions[t]&&(e=this.extensions[t].loadRunObject()),e},getNumberOfConditions:function(t){return t-=mc.KPX_BASE,t<this.extensions.length?this.numOfConditions[t]:0}},gc.prototype={loadRunObject:function(){switch(this.handle){case 2:return new Uc}return null}},vc.REFLAG_DISPLAY=1,vc.REFLAG_ONESHOT=2,vc.prototype={init:function(t){this.ho=t,this.rh=t.hoAdRunHeader},getNumberOfConditions:function(){return 0},createRunObject:function(t,e,i){return!1},handleRunObject:function(){return vc.REFLAG_ONESHOT},displayRunObject:function(t,e,i){},destroyRunObject:function(t){},createFont:function(){},pauseRunObject:function(){},continueRunObject:function(){},getZoneInfos:function(){},condition:function(t,e){return!1},action:function(t,e){},expression:function(t){return null},getRunObjectCollisionMask:function(t){return null},getRunObjectFont:function(){return null},setRunObjectFont:function(t,e){},getRunObjectTextColor:function(){return 0},setRunObjectTextColor:function(t){},autoResize:function(){},forcePosition:function(){}},_c.prototype={evaluate:function(t){var e=t.rhEvtProg.get_ExpressionObjects(this.oiList);if(null==e)return void(t.rh4Results[t.rh4PosPile]=0);var i=(this.code>>16)-Sl.EVENTS_EXTBASE;t.currentPtr=this,t.rh4Results[t.rh4PosPile]=e.expression(i)}},Pc.prototype={execute:function(t){var e=t.rhEvtProg.get_ActionObjects(this);if(null!=e){var i=(this.evtCode>>>16)-Sl.EVENTS_EXTBASE;t.currentPtr=this,e.action(i,this)}},getParamObject:function(t,e){return t.rhEvtProg.get_ParamActionObjects(this.evtParams[e].oiList,this)},getParamBorder:function(t,e){return this.evtParams[e].value},getParamShort:function(t,e){return this.evtParams[e].value},getParamAltValue:function(t,e){return this.evtParams[e].value},getParamDirection:function(t,e){return this.evtParams[e].value},getParamEffect:function(t,e){return this.evtParams[e].string},getParamCreate:function(t,e){return this.evtParams[e]},getParamAnimation:function(t,e){return 10==this.evtParams[e].code?this.evtParams[e].value:t.get_EventExpressionInt(this.evtParams[e])},getParamPlayer:function(t,e){return this.evtParams[e].value},getParamEvery:function(t,e){return this.evtParams[e].delay},getParamKey:function(t,e){return this.evtParams[e].key},getParamSpeed:function(t,e){return t.get_EventExpressionInt(this.evtParams[e])},getParamPosition:function(t,e){var i=this.evtParams[e],r=new ou;return i.read_Position(t,0,r)&&(r.found=!0),r},getParamJoyDirection:function(t,e){return this.evtParams[e].value},getParamShoot:function(t,e){return this.evtParams[e]},getParamZone:function(t,e){return this.evtParams[e]},getParamExpression:function(t,e){return t.get_EventExpressionInt(this.evtParams[e])},getParamColour:function(t,e){return 24==this.evtParams[e].code?this.evtParams[e].color:qc.swapRGB(t.get_EventExpressionInt(this.evtParams[e]))},getParamFrame:function(t,e){return this.evtParams[e].value},getParamNewDirection:function(t,e){return 29==this.evtParams[e].code?this.evtParams[e].value:t.get_EventExpressionInt(this.evtParams[e])},getParamClick:function(t,e){return this.evtParams[e].value},getParamExpString:function(t,e){return t.get_EventExpressionString(this.evtParams[e])},getParamFilename:function(t,e){return 40==this.evtParams[e].code?this.evtParams[e].string:t.get_EventExpressionString(this.evtParams[e])},getParamExpDouble:function(t,e){return t.get_EventExpressionAny(this.evtParams[e])},getParamFilename2:function(t,e){return 63==this.evtParams[e].code?this.evtParams[e].string:t.get_EventExpressionString(this.evtParams[e])},getParamExtension:function(t,e){var i=this.evtParams[e];return 0!=i.data?t.rhApp.file.createFromFile(i.data):null},getParamTime:function(t,e){return 2==this.evtParams[e].code?this.evtParams[e].timer:t.get_EventExpressionInt(this.evtParams[e])}},Ec.prototype={eva1:function(t,e){if(null==e)return this.eva2(t);e.hoFlags|=zl.HOF_TRUEEVENT;var i=-(this.evtCode>>16)-Sl.EVENTS_EXTBASE-1;return t.currentPtr=this,!!e.condition(i,this)&&(t.rhEvtProg.evt_AddCurrentObject(e),!0)},eva2:function(t){var e=t.rhEvtProg.evt_FirstObject(this.evtOiList),i=t.rhEvtProg.evtNSelectedObjects,r=-(this.evtCode>>16)-Sl.EVENTS_EXTBASE-1;for(t.currentPtr=this;null!=e;)e.hoFlags&=~zl.HOF_TRUEEVENT,e.condition(r,this)?0!=(this.evtFlags2&yl.EVFLAG2_NOT)&&(i--,t.rhEvtProg.evt_DeleteCurrentObject()):0==(this.evtFlags2&yl.EVFLAG2_NOT)&&(i--,t.rhEvtProg.evt_DeleteCurrentObject()),e=t.rhEvtProg.evt_NextObject();return 0!=i},getParamObject:function(t,e){return this.evtParams[e]},getParamTime:function(t,e){return 2==this.evtParams[e].code?this.evtParams[e].timer:t.get_EventExpressionInt(this.evtParams[e])},getParamBorder:function(t,e){return this.evtParams[e].value},getParamAltValue:function(t,e){return this.evtParams[e].value},getParamDirection:function(t,e){return this.evtParams[e].value},getParamAnimation:function(t,e){return 10==this.evtParams[e].code?this.evtParams[e].value:t.get_EventExpressionInt(this.evtParams[e])},getParamPlayer:function(t,e){return this.evtParams[e].value},getParamEvery:function(t,e){return this.evtParams[e].delay},getParamKey:function(t,e){return this.evtParams[e].key},getParamSpeed:function(t,e){return t.get_EventExpressionInt(this.evtParams[e])},getParamPosition:function(t,e){var i=this.evtParams[e],r=new ou;return i.read_Position(t,0,r)&&(r.found=!0),r},getParamJoyDirection:function(t,e){return this.evtParams[e].value},getParamExpression:function(t,e){return t.get_EventExpressionInt(this.evtParams[e])},getParamColour:function(t,e){return 24==this.evtParams[e].code?this.evtParams[e].color:qc.swapRGB(t.get_EventExpressionInt(this.evtParams[e]))},getParamFrame:function(t,e){return this.evtParams[e].value},getParamNewDirection:function(t,e){return 29==this.evtParams[e].code?this.evtParams[e].value:t.get_EventExpressionInt(this.evtParams[e])},getParamClick:function(t,e){return this.evtParams[e].value},getParamExpString:function(t,e){return t.get_EventExpressionString(this.evtParams[e])},compareValues:function(t,e,i){var r=t.get_EventExpressionAny(this.evtParams[e]),s=this.evtParams[e].comparaison;return il.compareTo(i,r,s)},compareTime:function(t,e,i){var r=this.evtParams[e];return il.compareTo(i,r.timer,r.comparaison)}},Ac.prototype=qc.extend(new vc,{forcePosition:function(){this.setPosition(this.ho.hoX,this.ho.hoY)},autoResize:function(){this.setPosition(this.ho.hoX,this.ho.hoY),this.setSize(this.ho.hoImgWidth,this.ho.hoImgHeight)},setElement:function(t,e){this.element=t,t.style.position="absolute",this.setSize(this.ho.hoImgWidth,this.ho.hoImgHeight),this.setPosition(this.ho.hoX,this.ho.hoY),this.fontInfo&&this.setFont(this.fontInfo),this.ho.bShown=e,this.bShownOld=e,this.rh.rhApp.loading?(t.style.visibility="hidden",this.bShownOld=!1):t.style.visibility=e?"visible":"hidden",this.rh.rhApp.container.appendChild(t)},getXOffset:function(){return this.rh.rhApp.canvas?this.rh.rhApp.canvas.offsetLeft:0},getYOffset:function(){return this.rh.rhApp.canvas?this.rh.rhApp.canvas.offsetTop:0},setX:function(t){this.ctrlLastX=t,this.ho.setX(t),this.element&&(this.element.style.left=this.getXOffset()+this.rh.rhApp.xMouseOffset+(this.ho.hoX-this.ho.hoAdRunHeader.rhWindowX)*this.rh.rhApp.scaleX+"px")},setY:function(t){this.ctrlLastY=t,this.ho.setY(t),this.element&&(this.element.style.top=this.getYOffset()+this.rh.rhApp.yMouseOffset+(this.ho.hoY-this.ho.hoAdRunHeader.rhWindowY)*this.rh.rhApp.scaleY+"px")},setPosition:function(t,e){this.ctrlLastX=t,this.ctrlLastY=e,this.ho.setPosition(t,e),this.element&&(this.element.style.left=this.getXOffset()+this.rh.rhApp.xMouseOffset+(this.ho.hoX-this.ho.hoAdRunHeader.rhWindowX)*this.rh.rhApp.scaleX+"px",this.element.style.top=this.getYOffset()+this.rh.rhApp.yMouseOffset+(this.ho.hoY-this.ho.hoAdRunHeader.rhWindowY)*this.rh.rhApp.scaleY+"px")},setWidth:function(t){this.ctrlLastWidth=t,this.ho.setWidth(t),this.element&&(this.element.style.width=this.ho.hoImgWidth*this.rh.rhApp.scaleX+"px")},setHeight:function(t){this.ctrlLastHeight=t,this.ho.setHeight(t),this.element&&!this.controlIgnoreHeight&&(this.element.style.height=this.ho.hoImgHeight*this.rh.rhApp.scaleY+"px")},setSize:function(t,e){this.ctrlLastWidth=t,this.ctrlLastHeight=e,this.ho.setSize(t,e),this.element&&(this.element.style.width=this.ho.hoImgWidth*this.rh.rhApp.scaleX+"px",this.controlIgnoreHeight||(this.element.style.height=this.ho.hoImgHeight*this.rh.rhApp.scaleY+"px"))},setFont:function(t){this.fontInfo=t,this.element&&(this.element.style.font=t.getFont())},destroyRunObject:function(){this.element&&this.rh.rhApp.container.removeChild(this.element)},getRunObjectFont:function(){return this.fontInfo},setRunObjectFont:function(t,e){this.setFont(t)},handleRunObject:function(){return this.rh.rhApp.loading||this.ho.bShown!=this.bShownOld&&(this.bShownOld=this.ho.bShown,this.element&&(this.ho.bShown?this.element.style.visibility="visible":this.element.style.visibility="hidden")),this.ho.hoX==this.ctrlLastX&&this.ho.hoY==this.ctrlLastY||this.setPosition(this.ho.hoX,this.ho.hoY),this.ho.hoImgWidth==this.ctrlLastWidth&&this.ho.hoImgHeight==this.ctrlLastHeight||this.setSize(this.ho.hoImgWidth,this.ho.hoImgHeight),0}}),Oc.MVTYPE_STATIC=0,Oc.MVTYPE_MOUSE=1,Oc.MVTYPE_RACE=2,Oc.MVTYPE_GENERIC=3,Oc.MVTYPE_BALL=4,Oc.MVTYPE_TAPED=5,Oc.MVTYPE_PLATFORM=9,Oc.MVTYPE_DISAPPEAR=11,Oc.MVTYPE_APPEAR=12,Oc.MVTYPE_BULLET=13,Oc.MVTYPE_EXT=14,Oc.prototype={setData:function(t,e,i,r,s){this.mvType=t,this.mvControl=e,this.mvMoveAtStart=i,this.mvDirAtStart=r,this.mvOpt=s}},bc.prototype={load:function(t){var e=t.getFilePointer();this.nMovements=t.readAInt(),this.moveList=new Array(this.nMovements);var i;for(i=0;i<this.nMovements;i++){t.seek(e+4+16*i);var r=t.readAInt(),s=t.readAInt(),n=t.readAInt(),o=t.readAInt();t.seek(e+n);var h=t.readAShort(),a=t.readAShort(),l=t.readAByte(),u=t.readAByte();t.skipBytes(2);var c=t.readAInt();switch(a){case 0:this.moveList[i]=new xc;break;case 1:this.moveList[i]=new yc;break;case 2:this.moveList[i]=new Fc;break;case 3:this.moveList[i]=new Tc;break;case 4:this.moveList[i]=new Sc;break;case 5:this.moveList[i]=new Cc;break;case 9:this.moveList[i]=new Ic;break;case 14:this.moveList[i]=new wc}if(this.moveList[i].setData(a,h,l,c,u),this.moveList[i].load(t,o-12),14==a){t.seek(e+r);var d=t.readAString();d=d.substring(0,d.length-4),d=d.toLowerCase(),this.moveList[i].setModuleName(d,s)}}}},Sc.prototype=qc.extend(new Oc,{load:function(t,e){this.mbSpeed=t.readAShort(),this.mbBounce=t.readAShort(),this.mbAngles=t.readAShort(),this.mbSecurity=t.readAShort(),this.mbDecelerate=t.readAShort()}}),Tc.prototype=qc.extend(new Oc,{load:function(t,e){this.mgSpeed=t.readAShort(),this.mgAcc=t.readAShort(),this.mgDec=t.readAShort(),this.mgBounceMult=t.readAShort(),this.mgDir=t.readAInt()}}),yc.prototype=qc.extend(new Oc,{load:function(t,e){this.mmDx=t.readShort(),this.mmFx=t.readShort(),this.mmDy=t.readShort(),this.mmFy=t.readShort(),this.mmFlags=t.readAShort()}}),Cc.prototype=qc.extend(new Oc,{load:function(t,e){this.mtNumber=t.readAShort(),this.mtMinSpeed=t.readAShort(),this.mtMaxSpeed=t.readAShort(),this.mtLoop=t.readAByte(),this.mtRepos=t.readAByte(),this.mtReverse=t.readAByte(),t.skipBytes(1),this.steps=new Array(this.mtNumber);var i,r,s;for(i=0;i<this.mtNumber;i++)s=t.getFilePointer(),this.steps[i]=new Lc,t.readUnsignedByte(),r=t.readUnsignedByte(),this.steps[i].load(t),t.seek(s+r)}}),Lc.prototype={load:function(t){this.mdSpeed=t.readAByte(),this.mdDir=t.readAByte(),this.mdDx=t.readShort(),this.mdDy=t.readShort(),this.mdCosinus=t.readShort(),this.mdSinus=t.readShort(),this.mdLength=t.readAShort(),this.mdPause=t.readAShort();var e=t.readAString();e.length>0&&(this.mdName=e)}},Ic.prototype=qc.extend(new Oc,{load:function(t,e){this.mpSpeed=t.readAShort(),this.mpAcc=t.readAShort(),this.mpDec=t.readAShort(),this.mpJumpControl=t.readAShort(),this.mpGravity=t.readAShort(),this.mpJump=t.readAShort()}}),Fc.prototype=qc.extend(new Oc,{load:function(t,e){this.mrSpeed=t.readAShort(),this.mrAcc=t.readAShort(),this.mrDec=t.readAShort(),this.mrRot=t.readAShort(),this.mrBounceMult=t.readAShort(),this.mrAngles=t.readAShort(),this.mrOkReverse=t.readAShort()}}),xc.prototype=qc.extend(new Oc,{load:function(t,e){}}),wc.prototype=qc.extend(new Oc,{load:function(t,e){t.skipBytes(14),this.data=t.getFilePointer()},setModuleName:function(t,e){this.moduleName=t,this.mvtID=e,(qc.compareStringsIgnoreCase(this.moduleName,"box2d8directions")||qc.compareStringsIgnoreCase(this.moduleName,"box2dspring")||qc.compareStringsIgnoreCase(this.moduleName,"box2dspaceship")||qc.compareStringsIgnoreCase(this.moduleName,"box2dstatic")||qc.compareStringsIgnoreCase(this.moduleName,"box2dracecar")||qc.compareStringsIgnoreCase(this.moduleName,"box2daxial")||qc.compareStringsIgnoreCase(this.moduleName,"box2dplatform")||qc.compareStringsIgnoreCase(this.moduleName,"box2dbouncingball")||qc.compareStringsIgnoreCase(this.moduleName,"box2dbackground"))&&(this.isPhysics=!0)}}),Mc.Cosinus32=[256,251,236,212,181,142,97,49,0,-49,-97,-142,-181,-212,-236,-251,-256,-251,-236,-212,-181,-142,-97,-49,0,49,97,142,181,212,236,251],Mc.Sinus32=[0,-49,-97,-142,-181,-212,-236,-251,-256,-251,-236,-212,-181,-142,-97,-49,0,49,97,142,181,212,236,251,256,251,236,212,181,142,97,49],Mc.accelerators=[2,3,4,6,8,10,12,16,20,24,48,56,64,72,80,88,96,104,112,120,144,160,176,192,208,224,240,256,272,288,320,336,352,368,384,400,416,432,448,480,512,544,560,592,624,640,672,688,720,736,768,784,816,848,864,896,928,944,976,992,1024,1120,1216,1312,1440,1536,1632,1728,1824,1952,2048,2240,2432,2688,2880,3072,3264,3456,3712,3904,4096,6544,4914,5216,5732,6144,6553,6962,7366,7780,8192,9836,11672,13316,14960,16604,18248,19892,21504,25600,25600],Mc.Joy2Dir=[-1,8,24,-1,16,12,20,16,0,4,28,0,-1,8,24,-1],Mc.CosSurSin32=[2599,0,844,31,479,30,312,29,210,28,137,27,78,26,25,25,0,24],Mc.mvap_TableDirs=[0,-2,0,2,0,-4,0,4,0,-8,0,8,-4,0,-8,0,0,0,-2,-2,2,2,-4,-4,4,4,-8,-8,8,8,-4,4,-8,8,0,0,-2,0,2,0,-4,0,4,0,-8,0,8,0,0,4,0,8,0,0,-2,2,2,-2,-4,4,4,-4,-8,8,8,-8,4,4,8,8,0,0,0,2,0,-2,0,4,0,-4,0,8,0,-8,4,0,8,0,0,0,2,2,-2,-2,4,4,-4,-4,8,8,-8,-8,4,-4,8,-8,0,0,2,0,-2,0,4,0,-4,0,8,0,-8,0,0,-4,0,-8,0,0,2,-2,-2,2,4,-4,-4,4,8,-8,-8,8,-4,-4,-8,-8,0,0],Mc.MVTOPT_8DIR_STICK=1,Mc.getDeltaX=function(t,e){return t*Mc.Cosinus32[e]/256},Mc.getDeltaY=function(t,e){return t*Mc.Sinus32[e]/256},Mc.prototype={newMake_Move:function(t,e){if(this.hoPtr.hoAdRunHeader.rh3CollisionCount++,
this.rmCollisionCount=this.hoPtr.hoAdRunHeader.rh3CollisionCount,this.hoPtr.rom.rmMoveFlag=!1,0==t)return this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr),!1;var i,r,s;for(s=0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)?Math.floor(t*this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef*32):t<<5;s>2048;){if(i=65536*this.hoPtr.hoX+(65535&this.hoPtr.hoCalculX),r=65536*this.hoPtr.hoY+(65535&this.hoPtr.hoCalculY),i+=2048*Mc.Cosinus32[e],r+=2048*Mc.Sinus32[e],this.hoPtr.hoCalculX=65535&i,this.hoPtr.hoX=Math.floor(i/65536),this.hoPtr.hoCalculY=65535&r,this.hoPtr.hoY=Math.floor(r/65536),this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr))return!0;if(this.hoPtr.rom.rmMoveFlag)break;s-=2048}return!(this.hoPtr.rom.rmMoveFlag||(i=65536*this.hoPtr.hoX+(65535&this.hoPtr.hoCalculX),r=65536*this.hoPtr.hoY+(65535&this.hoPtr.hoCalculY),i+=Mc.Cosinus32[e]*s,r+=Mc.Sinus32[e]*s,this.hoPtr.hoCalculX=65535&i,this.hoPtr.hoX=Math.floor(i/65536),this.hoPtr.hoCalculY=65535&r,this.hoPtr.hoY=Math.floor(r/65536),!this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr)))||(this.hoPtr.roc.rcChanged=!0,this.hoPtr.rom.rmMoveFlag||(this.hoPtr.hoAdRunHeader.rhVBLObjet=0),this.hoPtr.rom.rmMoveFlag)},moveAtStart:function(t){0==t.mvMoveAtStart&&this.stop()},getAccelerator:function(t){return t<=100?Mc.accelerators[t]:t<<8},mv_Approach:function(t){if(t)return void this.mb_Approach(!1);switch(4294901760&this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurCode){case-786432:var e=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,i=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,r=this.hoPtr.hoAdRunHeader.quadran_Out(e,i,e+this.hoPtr.hoImgWidth,i+this.hoPtr.hoImgHeight);return e=this.hoPtr.hoX,i=this.hoPtr.hoY,0!=(r&il.BORDER_LEFT)&&(e=this.hoPtr.hoImgXSpot),0!=(r&il.BORDER_RIGHT)&&(e=this.hoPtr.hoAdRunHeader.rhLevelSx-this.hoPtr.hoImgWidth+this.hoPtr.hoImgXSpot),0!=(r&il.BORDER_TOP)&&(i=this.hoPtr.hoImgYSpot),0!=(r&il.BORDER_BOTTOM)&&(i=this.hoPtr.hoAdRunHeader.rhLevelSy-this.hoPtr.hoImgHeight+this.hoPtr.hoImgYSpot),this.hoPtr.hoX=e,void(this.hoPtr.hoY=i);case-851968:case-917504:var s=18*(this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)>>2);do{if(this.tst_Position(this.hoPtr.hoX+Mc.mvap_TableDirs[s],this.hoPtr.hoY+Mc.mvap_TableDirs[s+1],!1))return this.hoPtr.hoX+=Mc.mvap_TableDirs[s],void(this.hoPtr.hoY+=Mc.mvap_TableDirs[s+1]);s+=2}while(0!=Mc.mvap_TableDirs[s]||0!=Mc.mvap_TableDirs[s+1]);return this.hoPtr.hoX=this.hoPtr.roc.rcOldX,this.hoPtr.hoY=this.hoPtr.roc.rcOldY,this.hoPtr.roc.rcImage=this.hoPtr.roc.rcOldImage,void(this.hoPtr.roc.rcAngle=this.hoPtr.roc.rcOldAngle)}},mb_Approach:function(t){switch(4294901760&this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurCode){case-786432:var e=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,i=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,r=this.hoPtr.hoAdRunHeader.quadran_Out(e,i,e+this.hoPtr.hoImgWidth,i+this.hoPtr.hoImgHeight);return e=this.hoPtr.hoX,i=this.hoPtr.hoY,0!=(r&il.BORDER_LEFT)&&(e=this.hoPtr.hoImgXSpot),0!=(r&il.BORDER_RIGHT)&&(e=this.hoPtr.hoAdRunHeader.rhLevelSx-this.hoPtr.hoImgWidth+this.hoPtr.hoImgXSpot),0!=(r&il.BORDER_TOP)&&(i=this.hoPtr.hoImgYSpot),0!=(r&il.BORDER_BOTTOM)&&(i=this.hoPtr.hoAdRunHeader.rhLevelSy-this.hoPtr.hoImgHeight+this.hoPtr.hoImgYSpot),this.hoPtr.hoX=e,void(this.hoPtr.hoY=i);case-851968:case-917504:var s=new a;if(this.mbApproachSprite(this.hoPtr.hoX,this.hoPtr.hoY,this.hoPtr.roc.rcOldX,this.hoPtr.roc.rcOldY,t,s))return this.hoPtr.hoX=s.x,void(this.hoPtr.hoY=s.y);var n=18*(this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)>>2);do{if(this.tst_Position(this.hoPtr.hoX+Mc.mvap_TableDirs[n],this.hoPtr.hoY+Mc.mvap_TableDirs[n+1],t))return this.hoPtr.hoX+=Mc.mvap_TableDirs[n],void(this.hoPtr.hoY+=Mc.mvap_TableDirs[n+1]);n+=2}while(0!=Mc.mvap_TableDirs[n]||0!=Mc.mvap_TableDirs[n+1]);if(0==t)return this.hoPtr.hoX=this.hoPtr.roc.rcOldX,this.hoPtr.hoY=this.hoPtr.roc.rcOldY,this.hoPtr.roc.rcImage=this.hoPtr.roc.rcOldImage,void(this.hoPtr.roc.rcAngle=this.hoPtr.roc.rcOldAngle)}},tst_SpritePosition:function(t,e,i,r,s){var n;n=-1,s&&(n=this.hoPtr.hoOi);var o=this.hoPtr.hoOiList;if(0!=(15&o.oilLimitFlags)){var h=t-this.hoPtr.hoImgXSpot,a=e-this.hoPtr.hoImgYSpot;if(0!=(this.hoPtr.hoAdRunHeader.quadran_Out(h,a,h+this.hoPtr.hoImgWidth,a+this.hoPtr.hoImgHeight)&o.oilLimitFlags))return!1}if(0!=(16&o.oilLimitFlags)&&this.hoPtr.hoAdRunHeader.colMask_TestObject_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,t,e,i,r))return!1;if(-1==o.oilLimitList)return!0;var l=this.hoPtr.hoAdRunHeader.objectAllCol_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,t,e,o.oilColList);if(null==l)return!0;var u,c=this.hoPtr.hoAdRunHeader.rhEvtProg.limitBuffer;for(u=0;u<l.size();u++){var d=l.get(u),f=d.hoOi;if(f!=n){var p;for(p=o.oilLimitList;c[p]>=0;p++)if(c[p]==f)return!1}}return!0},tst_Position:function(t,e,i){var r;r=-1,i&&(r=this.hoPtr.hoOi);var s=this.hoPtr.hoOiList;if(0!=(15&s.oilLimitFlags)){var n=t-this.hoPtr.hoImgXSpot,o=e-this.hoPtr.hoImgYSpot;if(0!=(this.hoPtr.hoAdRunHeader.quadran_Out(n,o,n+this.hoPtr.hoImgWidth,o+this.hoPtr.hoImgHeight)&s.oilLimitFlags))return!1}if(0!=(16&s.oilLimitFlags)&&this.hoPtr.hoAdRunHeader.colMask_TestObject_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,t,e,0,za.CM_TEST_PLATFORM))return!1;if(-1==s.oilLimitList)return!0;var h=this.hoPtr.hoAdRunHeader.objectAllCol_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,t,e,s.oilColList);if(null==h)return!0;var a,l=this.hoPtr.hoAdRunHeader.rhEvtProg.limitBuffer;for(a=0;a<h.size();a++){var u=h.get(a),c=u.hoOi;if(c!=r){var d;for(d=s.oilLimitList;l[d]>=0;d++)if(l[d]==c)return!1}}return!0},mpApproachSprite:function(t,e,i,r,s,n,o){for(var h,a,l=t,u=e,c=i,d=r,f=qc.floatToInt((l+c)/2),p=qc.floatToInt((u+d)/2);;)if(this.tst_SpritePosition(f+this.hoPtr.hoAdRunHeader.rhWindowX,p+this.hoPtr.hoAdRunHeader.rhWindowY,s,n,!1)){if(c=f,d=p,h=f,a=p,f=qc.floatToInt((c+l)/2),p=qc.floatToInt((d+u)/2),f==h&&p==a)return c==l&&d==u||this.tst_SpritePosition(l+this.hoPtr.hoAdRunHeader.rhWindowX,u+this.hoPtr.hoAdRunHeader.rhWindowY,s,n,!1)&&(f=l,p=u),o.x=f,o.y=p,!0}else if(l=f,u=p,h=f,a=p,f=qc.floatToInt((c+l)/2),p=qc.floatToInt((d+u)/2),f==h&&p==a)return c==l&&d==u||!this.tst_SpritePosition(c+this.hoPtr.hoAdRunHeader.rhWindowX,d+this.hoPtr.hoAdRunHeader.rhWindowY,s,n,!1)?(o.x=f,o.y=p,!1):(o.x=c,o.y=d,!0)},mbApproachSprite:function(t,e,i,r,s,n){for(var o,h,a=t,l=e,u=i,c=r,d=qc.floatToInt((a+u)/2),f=qc.floatToInt((l+c)/2);;)if(this.tst_Position(d,f,s)){if(u=d,c=f,o=d,h=f,d=qc.floatToInt((u+a)/2),f=qc.floatToInt((c+l)/2),d==o&&f==h)return u==a&&c==l||this.tst_Position(a,l,s)&&(d=a,f=l),n.x=d,n.y=f,!0}else if(a=d,l=f,o=d,h=f,d=qc.floatToInt((u+a)/2),f=qc.floatToInt((c+l)/2),d==o&&f==h)return u==a&&c==l||!this.tst_Position(u,c,s)?(n.x=d,n.y=f,!1):(n.x=u,n.y=c,!0)},setAcc:function(t){this.rmAcc=t,this.rmAccValue=this.getAccelerator(t),this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.setAcc(t)},setDec:function(t){this.rmDec=t,this.rmDecValue=this.getAccelerator(t),this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.setDec(t)},setRotSpeed:function(t){this.hoPtr.roc.rcMovementType==Oc.MVTYPE_RACE&&(t>250&&(t=250),t<0&&(t=0),this.setRotSpeed(t)),this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.setRotSpeed(t)},set8Dirs:function(t){this.hoPtr.roc.rcMovementType==Oc.MVTYPE_GENERIC&&this.set8DirsGeneric(t),this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.set8Dirs(t)},setGravity:function(t){this.hoPtr.roc.rcMovementType==Oc.MVTYPE_PLATFORM&&(t>250&&(t=250),t<0&&(t=0),this.setGravity(t)),this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.setGravity(t)},getSpeed:function(){return this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT?this.movement.getSpeed():this.hoPtr.roc.rcSpeed},getDir:function(){return this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT&&this.movement.getDir?this.movement.getDir():this.hoPtr.roc.rcDir},getAcc:function(){return this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT?this.movement.getAcceleration():this.rmAcc},getDec:function(){return this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT?this.movement.getDeceleration():this.rmDec},getGravity:function(){return this.hoPtr.roc.rcMovementType==Oc.MVTYPE_PLATFORM?this.mp.MP_Gravity:this.hoPtr.roc.rcMovementType==Oc.MVTYPE_EXT?this.movement.getGravity():0},kill:function(t){},start:function(){}},Rc.rebond_List=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,30,31,0,1,4,3,2,1,0,31,30,29,28,27,26,25,24,23,22,21,20,24,25,26,27,27,28,28,28,28,29,29,24,23,22,21,20,19,18,17,16,15,14,13,12,16,17,18,19,19,20,20,20,20,21,21,22,23,24,25,28,27,26,25,0,31,30,29,28,27,26,25,24,23,22,21,20,19,18,17,16,20,21,22,22,23,24,24,24,24,25,26,27,28,29,30,8,7,6,5,4,8,9,10,11,11,12,12,12,12,13,13,14,15,16,17,20,19,18,17,16,15,14,13,12,11,10,9,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,16,15,14,13,12,11,10,9,8,12,13,14,15,15,16,16,16,16,17,17,18,19,20,21,24,23,22,21,20,19,18,17,16,17,18,19,20,21,22,23,24,23,22,21,20,19,18,17,16,17,18,19,20,21,22,23,24,23,22,21,20,19,18,17,3,3,4,4,4,4,5,5,6,7,8,9,12,11,10,9,8,7,6,5,4,3,2,1,0,31,30,29,28,0,1,2,0,0,1,1,2,3,4,5,8,7,6,5,4,3,2,1,0,31,30,29,28,27,26,25,24,28,29,30,31,31,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,0,31,30,29,28,27,26,25,24,25,26,27,28,29,30,31,0,31,30,29,28,27,25,25,24,25,26,27,28,29,30,31,0,4,5,6,7,7,8,8,8,8,9,9,10,11,12,13,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0,1,2,3,4,5,6,7,8,7,6,5,4,3,2,1,0,1,2,3,4,5,6,7,8,7,6,5,4,3,2,1,16,15,14,13,12,11,10,9,8,9,10,11,12,13,14,15,16,15,14,13,12,11,10,9,8,9,10,11,12,13,14,15,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],Rc.MaskBounce=[4294967292,4294967294,4294967295],Rc.PlusAngles=[-4,4,-2,2,-1,1],Rc.PlusAnglesTry=[-4,4,-4,4,-4,4],Rc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t;var i=e;this.hoPtr.hoCalculX=0,this.hoPtr.hoCalculY=0,this.hoPtr.roc.rcSpeed=i.mbSpeed,this.hoPtr.roc.rcMaxSpeed=i.mbSpeed,this.hoPtr.roc.rcMinSpeed=i.mbSpeed,this.MB_Speed=i.mbSpeed<<8;var r=i.mbDecelerate;0!=r&&(r=this.getAccelerator(r),this.hoPtr.roc.rcMinSpeed=0),this.rmDecValue=r,this.MB_Bounce=i.mbBounce,this.MB_Angles=i.mbAngles,this.MB_MaskBounce=Rc.MaskBounce[this.MB_Angles],this.MB_Blocked=!1,this.MB_LastBounce=-1,this.MB_Securite=(100-i.mbSecurity)/8,this.MB_SecuCpt=this.MB_Securite,this.moveAtStart(e),this.hoPtr.roc.rcChanged=!0},move:function(){if(this.hoPtr.rom.rmBouncing=!1,this.hoPtr.hoAdRunHeader.rhVBLObjet=1,this.hoPtr.roc.rcAnim=ul.ANIMID_WALK,null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),0!=this.rmDecValue){var t=this.MB_Speed;if(t>0){var e=this.rmDecValue;0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(e*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),t-=e,t<0&&(t=0),this.MB_Speed=t,t>>=8,this.hoPtr.roc.rcSpeed=t}}this.newMake_Move(this.hoPtr.roc.rcSpeed,this.hoPtr.hoAdRunHeader.getDir(this.hoPtr))},stop:function(){0==this.rmStopSpeed&&(this.rmStopSpeed=32768|this.hoPtr.roc.rcSpeed,this.hoPtr.roc.rcSpeed=0,this.MB_Speed=0,this.hoPtr.rom.rmMoveFlag=!0)},start:function(){var t=this.rmStopSpeed;0!=t&&(t&=32767,this.hoPtr.roc.rcSpeed=t,this.MB_Speed=t<<8,this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0)},bounce:function(){if(0==this.rmStopSpeed&&this.hoPtr.hoAdRunHeader.rhLoopCount!=this.MB_LastBounce){this.MB_LastBounce=this.hoPtr.hoAdRunHeader.rhLoopCount,this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&this.mb_Approach(this.MB_Blocked);var t=this.hoPtr.hoX,e=this.hoPtr.hoY,i=0;t-=8,e-=8,0==this.tst_Position(t,e,this.MB_Blocked)&&(i|=1),t+=16,0==this.tst_Position(t,e,this.MB_Blocked)&&(i|=2),e+=16,0==this.tst_Position(t,e,this.MB_Blocked)&&(i|=4),t-=16,0==this.tst_Position(t,e,this.MB_Blocked)&&(i|=8);var r=Rc.rebond_List[32*i+this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)];if(r&=this.MB_MaskBounce,!this.mvb_Test(r)){var s=Rc.PlusAnglesTry[2*this.MB_Angles+1],n=s,o=!1;do{if(r-=s,r&=31,this.mvb_Test(r)){o=!0;break}if(r+=2*s,r&=31,this.mvb_Test(r)){o=!0;break}r-=s,r&=31,s+=n}while(s<=16);if(0==o)return this.MB_Blocked=!0,this.hoPtr.roc.rcDir=this.hoPtr.hoAdRunHeader.random(32)&this.MB_MaskBounce,this.hoPtr.rom.rmBouncing=!0,void(this.hoPtr.rom.rmMoveFlag=!0)}this.MB_Blocked=!1,this.hoPtr.roc.rcDir=r;var h=this.hoPtr.hoAdRunHeader.random(100);if(h<this.MB_Bounce&&(h>>=2)<25&&(h-=12,h&=31,h&=this.MB_MaskBounce,this.mvb_Test(h)))return this.hoPtr.roc.rcDir=h,this.hoPtr.rom.rmBouncing=!0,void(this.hoPtr.rom.rmMoveFlag=!0);r=7&this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),12!=this.MB_SecuCpt&&(0==r?--this.MB_SecuCpt<0&&(r=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)+Rc.PlusAngles[this.hoPtr.hoAdRunHeader.random(2)+2*this.MB_Angles],r&=31,this.mvb_Test(r)&&(this.hoPtr.roc.rcDir=r,this.MB_SecuCpt=this.MB_Securite)):this.MB_SecuCpt=this.MB_Securite),this.hoPtr.rom.rmBouncing=!0,this.hoPtr.rom.rmMoveFlag=!0}},mvb_Test:function(t){var e=65536*this.hoPtr.hoX+(65535&this.hoPtr.hoCalculX),i=65536*this.hoPtr.hoY+(65535&this.hoPtr.hoCalculY),r=2048*Mc.Cosinus32[t]+e,s=2048*Mc.Sinus32[t]+i;return r=Math.floor(r/65536),s=Math.floor(s/65536),this.tst_Position(r,s,!1)},setDir:function(t){},setSpeed:function(t){t<0&&(t=0),t>250&&(t=250),this.hoPtr.roc.rcSpeed=t,this.MB_Speed=t<<8,this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0},setMaxSpeed:function(t){this.setSpeed(t)},reverse:function(){0==this.rmStopSpeed&&(this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcDir+=16,this.hoPtr.roc.rcDir&=31)},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)}}),kc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.rhPtr=t.hoAdRunHeader,this.rhPtr.GetBase(),null!=this.hoPtr.ros&&this.hoPtr.ros.setColFlag(!1),null!=this.hoPtr.ros&&(this.hoPtr.ros.rsFlags&=~cc.RSFLAG_VISIBLE,this.hoPtr.ros.obHide()),this.MBul_Wait=!0,this.hoPtr.hoCalculX=0,this.hoPtr.hoCalculY=0,null!=this.hoPtr.roa&&this.hoPtr.roa.init_Animation(ul.ANIMID_WALK),this.hoPtr.roc.rcSpeed=0,this.hoPtr.roc.rcCheckCollides=!0,this.hoPtr.roc.rcChanged=!0},init2:function(t){this.hoPtr.roc.rcMaxSpeed=this.hoPtr.roc.rcSpeed,this.hoPtr.roc.rcMinSpeed=this.hoPtr.roc.rcSpeed,this.MBul_ShootObject=t,null!=t&&(t.hoFlags|=zl.HOF_SHOOTER)},kill:function(t){this.freeBullet(this.hoPtr)},move:function(){if(this.MBul_Wait){if(null!=this.MBul_ShootObject.roa&&this.MBul_ShootObject.roa.raAnimOn==ul.ANIMID_SHOOT)return;this.startBullet()}null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),this.newMake_Move(this.hoPtr.roc.rcSpeed,this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)),(this.hoPtr.hoX<-64||this.hoPtr.hoX>this.hoPtr.hoAdRunHeader.rhLevelSx+64||this.hoPtr.hoY<-64||this.hoPtr.hoY>this.hoPtr.hoAdRunHeader.rhLevelSy+64)&&(this.hoPtr.hoCallRoutine=!1,this.hoPtr.hoAdRunHeader.destroy_Add(this.hoPtr.hoNumber)),this.hoPtr.roc.rcCheckCollides&&(this.hoPtr.roc.rcCheckCollides=!1,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr))},startBullet:function(){if(null!=this.hoPtr.ros&&this.hoPtr.ros.setColFlag(!0),null!=this.hoPtr.ros&&(this.hoPtr.ros.rsFlags|=cc.RSFLAG_VISIBLE,this.hoPtr.ros.obShow()),null!=this.rhPtr.rh4Box2DBase){var t=this.MBul_ShootObject,e=this.rhPtr.GetMBase(t);if(null!=e){var i=this.rhPtr.rh4Box2DBase,r=new ll;this.MBul_MBase=r,r.InitBase(this.hoPtr,ll.MTYPE_OBJECT),r.m_identifier=i.identifier,this.MBul_Body=i.rCreateBullet(e.m_currentAngle,this.hoPtr.roc.rcSpeed/250*50,r),r.m_body=this.MBul_Body,null==this.MBul_Body&&(this.MBul_MBase=null)}}this.MBul_Wait=!1,this.MBul_ShootObject=null},freeBullet:function(t){if(null!=this.MBul_Body){var e=this.hoPtr.hoAdRunHeader;pBase=e.rh4Box2DBase,pBase.rDestroyBody(this.MBul_Body),this.MBul_Body=null}null!=this.MBul_MBase&&(this.MBul_MBase=null)},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setDir:function(t){},reverse:function(t){},stop:function(){},start:function(){},bounce:function(){},setSpeed:function(t){},setMaxSpeed:function(t){}}),Nc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t},move:function(){0==(this.hoPtr.hoFlags&zl.HOF_FADEOUT)&&null!=this.hoPtr.roa&&(this.hoPtr.roa.animate(),this.hoPtr.roa.raAnimForced!=ul.ANIMID_DISAPPEAR+1&&this.hoPtr.hoAdRunHeader.destroy_Add(this.hoPtr.hoNumber))},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0)},setDir:function(t){},reverse:function(t){},stop:function(){},start:function(){},bounce:function(){},setSpeed:function(t){},setMaxSpeed:function(t){}}),Dc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.hoPtr.hoCalculX=0,this.hoPtr.hoCalculY=0,this.MG_Speed=0,this.hoPtr.roc.rcSpeed=0,this.MG_Bounce=0,this.MG_LastBounce=-1,this.hoPtr.roc.rcPlayer=e.mvControl,this.rmAcc=e.mgAcc,this.rmAccValue=this.getAccelerator(this.rmAcc),this.rmDec=e.mgDec,this.rmDecValue=this.getAccelerator(this.rmDec),this.hoPtr.roc.rcMaxSpeed=e.mgSpeed,this.hoPtr.roc.rcMinSpeed=0,this.MG_BounceMu=e.mgBounceMult,this.MG_OkDirs=e.mgDir,this.rmOpt=e.mvOpt,this.hoPtr.roc.rcChanged=!0},move:function(){var t,e,i,r;if(this.hoPtr.hoAdRunHeader.rhVBLObjet=1,t=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),this.hoPtr.roc.rcOldDir=t,0==this.MG_Bounce){this.hoPtr.rom.rmBouncing=!1,e=0;var s=15&this.hoPtr.hoAdRunHeader.rhPlayer[this.hoPtr.roc.rcPlayer-1];if(0!=s&&-1!=(r=Mc.Joy2Dir[s])){0!=(1<<r&this.MG_OkDirs)&&(e=1,t=r)}var n;if(i=this.MG_Speed,0==e?0!=i&&(n=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(n*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),(i-=n)<=0&&(i=0)):i>>8<this.hoPtr.roc.rcMaxSpeed&&(n=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(n*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),i+=n,i>>8>this.hoPtr.roc.rcMaxSpeed&&(i=this.hoPtr.roc.rcMaxSpeed<<8)),this.MG_Speed=i,this.hoPtr.roc.rcSpeed=i>>8,this.hoPtr.roc.rcDir=t,this.hoPtr.roc.rcAnim=ul.ANIMID_WALK,null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),0==this.newMake_Move(this.hoPtr.roc.rcSpeed,this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)))return;if(0==this.hoPtr.roc.rcSpeed){if(0==(i=this.MG_Speed))return;if(this.hoPtr.roc.rcOldDir==this.hoPtr.hoAdRunHeader.getDir(this.hoPtr))return;if(this.hoPtr.roc.rcSpeed=i>>8,this.hoPtr.roc.rcDir=this.hoPtr.roc.rcOldDir,0==this.newMake_Move(this.hoPtr.roc.rcSpeed,this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)))return}}for(;;){if(0==this.MG_Bounce||0==this.hoPtr.hoAdRunHeader.rhVBLObjet)return;if(i=this.MG_Speed,!((i-=this.rmDecValue)>0)){this.MG_Speed=0,this.hoPtr.roc.rcSpeed=0,this.MG_Bounce=0;break}if(this.MG_Speed=i,i>>=8,this.hoPtr.roc.rcSpeed=i,r=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),0!=this.MG_Bounce&&(r+=16,r&=31),0==this.newMake_Move(i,r))return}},bounce:function(){if(this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&this.mv_Approach(0!=(this.rmOpt&Mc.MVTOPT_8DIR_STICK)),this.hoPtr.hoAdRunHeader.rhLoopCount!=this.MG_LastBounce){if(this.MG_LastBounce=this.hoPtr.hoAdRunHeader.rhLoopCount,++this.MG_Bounce>=12)return void this.stop();this.hoPtr.rom.rmBouncing=!0,this.hoPtr.rom.rmMoveFlag=!0}},reverse:function(){},setDir:function(t){},stop:function(){this.hoPtr.roc.rcSpeed=0,this.MG_Bounce=0,this.MG_Speed=0,this.hoPtr.rom.rmMoveFlag=!0,this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&(this.mv_Approach(0!=(this.rmOpt&Mc.MVTOPT_8DIR_STICK)),this.MG_Bounce=0)},start:function(){this.hoPtr.rom.rmMoveFlag=!0,this.rmStopSpeed=0},setMaxSpeed:function(t){t<0&&(t=0),t>250&&(t=250),this.hoPtr.roc.rcMaxSpeed=t,this.hoPtr.roc.rcSpeed>t&&(this.hoPtr.roc.rcSpeed=t,this.MG_Speed=t<<8),this.hoPtr.rom.rmMoveFlag=!0},setSpeed:function(t){t<0&&(t=0),t>250&&(t=250),t>this.hoPtr.roc.rcMaxSpeed&&(t=this.hoPtr.roc.rcMaxSpeed),this.hoPtr.roc.rcSpeed=t,this.MG_Speed=t<<8,this.hoPtr.rom.rmMoveFlag=!0},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},set8DirsGeneric:function(t){this.MG_OkDirs=t}}),Hc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.hoPtr.roc.rcPlayer=e.mvControl,this.MM_DXMouse=e.mmDx+this.hoPtr.hoX,this.MM_DYMouse=e.mmDy+this.hoPtr.hoY,this.MM_FXMouse=e.mmFx+this.hoPtr.hoX,this.MM_FYMouse=e.mmFy+this.hoPtr.hoY,this.hoPtr.roc.rcSpeed=0,this.MM_OldSpeed=0,this.MM_Stopped=0,this.hoPtr.roc.rcMinSpeed=0,this.hoPtr.roc.rcMaxSpeed=100,this.rmOpt=e.mvOpt,this.moveAtStart(e),this.hoPtr.roc.rcChanged=!0},move:function(){var t,e,i,r,s,n,o=this.hoPtr.hoX,h=this.hoPtr.hoY;if(0==this.rmStopSpeed&&0!=this.hoPtr.hoAdRunHeader.rh2InputMask[this.hoPtr.roc.rcPlayer-1]&&(o=this.hoPtr.hoAdRunHeader.rh2MouseX,o<this.MM_DXMouse&&(o=this.MM_DXMouse),o>this.MM_FXMouse&&(o=this.MM_FXMouse),h=this.hoPtr.hoAdRunHeader.rh2MouseY,h<this.MM_DYMouse&&(h=this.MM_DYMouse),h>this.MM_FYMouse&&(h=this.MM_FYMouse),t=o-this.hoPtr.hoX,e=h-this.hoPtr.hoY,i=0,t<0&&(t=-t,i|=1),e<0&&(e=-e,i|=2),r=t+e<<2,r>250&&(r=250),this.hoPtr.roc.rcSpeed=r,0!=r)){for(t<<=8,0==e&&(e=1),t/=e,n=0;!(t>=Mc.CosSurSin32[n]);n+=2);s=Mc.CosSurSin32[n+1],0!=(2&i)&&(s=32-s,s&=31),0!=(1&i)&&(s-=8,s&=31,s=-s,s&=31,s+=8,s&=31),this.hoPtr.roc.rcDir=s}0!=this.hoPtr.roc.rcSpeed&&(this.MM_Stopped=0,this.MM_OldSpeed=this.hoPtr.roc.rcSpeed),this.MM_Stopped++,this.MM_Stopped>10&&(this.MM_OldSpeed=0),this.hoPtr.roc.rcSpeed=this.MM_OldSpeed,null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),this.hoPtr.hoX=o,this.hoPtr.hoY=h,this.hoPtr.roc.rcChanged=!0,this.hoPtr.hoAdRunHeader.rh3CollisionCount++,this.rmCollisionCount=this.hoPtr.hoAdRunHeader.rh3CollisionCount,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr)},stop:function(){this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&this.mv_Approach(0!=(this.rmOpt&Mc.MVTOPT_8DIR_STICK)),this.hoPtr.roc.rcSpeed=0},start:function(){this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0},bounce:function(){this.stop()},reverse:function(){},setDir:function(t){},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)}}),Bc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.MT_XStart=this.hoPtr.hoX,this.MT_YStart=this.hoPtr.hoY,this.MT_Direction=!1,this.MT_Pause=0,this.hoPtr.hoMark1=0,this.MT_Movement=e,this.hoPtr.roc.rcMinSpeed=e.mtMinSpeed,this.hoPtr.roc.rcMaxSpeed=e.mtMaxSpeed,this.MT_Calculs=0,this.MT_GotoNode=null,this.mtGoAvant(0),this.moveAtStart(e),this.hoPtr.roc.rcSpeed=this.MT_Speed,this.hoPtr.roc.rcChanged=!0,0==this.MT_Movement.steps.length&&this.stop()},move:function(){if(this.hoPtr.hoMark1=0,this.hoPtr.roc.rcAnim=ul.ANIMID_WALK,null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),0==this.MT_Speed){var t=this.MT_Pause;if(0==t)return this.hoPtr.roc.rcSpeed=0,void this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr);if((t-=this.hoPtr.hoAdRunHeader.rhTimerDelta)>0)return this.MT_Pause=t,this.hoPtr.roc.rcSpeed=0,void this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr);this.MT_Pause=0,this.MT_Speed=32767&this.rmStopSpeed,this.rmStopSpeed=0,this.hoPtr.roc.rcSpeed=this.MT_Speed}var e;e=0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)?256*this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef:256,this.hoPtr.hoAdRunHeader.rhMT_VBLCount=e;for(var i;;){for(i=!1,this.hoPtr.hoAdRunHeader.rhMT_VBLStep=e,e*=this.MT_Speed,e<<=5,e<=524288?this.hoPtr.hoAdRunHeader.rhMT_MoveStep=e:(e=16384,e/=this.MT_Speed,this.hoPtr.hoAdRunHeader.rhMT_VBLStep=e,this.hoPtr.hoAdRunHeader.rhMT_MoveStep=524288);;){this.MT_FlagBranch=!1;if(1==this.mtMove(this.hoPtr.hoAdRunHeader.rhMT_MoveStep)&&0==this.MT_FlagBranch){i=!0;break}if(this.hoPtr.hoAdRunHeader.rhMT_VBLCount==this.hoPtr.hoAdRunHeader.rhMT_VBLStep){i=!0;break}if(this.hoPtr.hoAdRunHeader.rhMT_VBLCount>this.hoPtr.hoAdRunHeader.rhMT_VBLStep){this.hoPtr.hoAdRunHeader.rhMT_VBLCount-=this.hoPtr.hoAdRunHeader.rhMT_VBLStep,e=this.hoPtr.hoAdRunHeader.rhMT_VBLCount;break}e=this.hoPtr.hoAdRunHeader.rhMT_VBLCount*MT_Speed,e<<=5,this.mtMove(e),i=!0;break}if(i)break}},mtMove:function(t){t+=this.MT_Calculs;var e=t>>>16;if(e<this.MT_Longueur){this.MT_Calculs=t;var i=e*this.MT_Cosinus/16384+this.MT_XOrigin,r=e*this.MT_Sinus/16384+this.MT_YOrigin;return this.hoPtr.hoX=i,this.hoPtr.hoY=r,this.hoPtr.roc.rcChanged=!0,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr),this.hoPtr.rom.rmMoveFlag}if(e-=this.MT_Longueur,t=e<<16|65535&t,0!=this.MT_Speed&&(t/=this.MT_Speed),t>>=5,this.hoPtr.hoAdRunHeader.rhMT_VBLCount+=65535&t,this.hoPtr.hoX=this.MT_XDest,this.hoPtr.hoY=this.MT_YDest,this.hoPtr.roc.rcChanged=!0,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr),this.hoPtr.rom.rmMoveFlag)return!0;this.hoPtr.hoMark1=this.hoPtr.hoAdRunHeader.rhLoopCount,this.hoPtr.hoMT_NodeName=null;var s=this.MT_MoveNumber;return this.MT_Calculs=0,0==this.MT_Direction?++s<this.MT_Movement.mtNumber?(this.hoPtr.hoMT_NodeName=this.MT_Movement.steps[s].mdName,null!=this.MT_GotoNode&&null!=this.MT_Movement.steps[s].mdName&&qc.compareStringsIgnoreCase(this.MT_GotoNode,this.MT_Movement.steps[s].mdName)?(this.MT_MoveNumber=s,this.mtMessages(),this.mtTheEnd()):(this.mtGoAvant(s),this.mtMessages(),this.hoPtr.rom.rmMoveFlag)):(this.hoPtr.hoMark2=this.hoPtr.hoAdRunHeader.rhLoopCount,this.MT_MoveNumber=s,this.MT_Direction?(this.mtMessages(),this.hoPtr.rom.rmMoveFlag):0!=this.MT_Movement.mtReverse?(this.MT_Direction=!0,s--,this.hoPtr.hoMT_NodeName=this.MT_Movement.steps[s].mdName,this.mtGoArriere(s),this.mtMessages(),this.hoPtr.rom.rmMoveFlag):(this.mtReposAtEnd(),0==this.MT_Movement.mtLoop?(this.mtTheEnd(),this.mtMessages(),this.hoPtr.rom.rmMoveFlag):(s=0,this.mtGoAvant(s),this.mtMessages(),this.hoPtr.rom.rmMoveFlag))):null!=this.MT_GotoNode&&null!=this.MT_Movement.steps[s].mdName&&qc.compareStringsIgnoreCase(this.MT_GotoNode,this.MT_Movement.steps[s].mdName)?(this.mtMessages(),this.mtTheEnd()):(this.hoPtr.hoMT_NodeName=this.MT_Movement.steps[s].mdName,this.MT_Pause=this.MT_Movement.steps[s].mdPause,--s>=0?(this.mtGoArriere(s),this.mtMessages(),this.hoPtr.rom.rmMoveFlag):(this.mtReposAtEnd(),0==this.MT_Direction?(this.mtMessages(),this.hoPtr.rom.rmMoveFlag):0==this.MT_Movement.mtLoop?(this.mtTheEnd(),this.mtMessages(),this.hoPtr.rom.rmMoveFlag):(s=0,this.MT_Direction=!1,this.mtGoAvant(s),this.mtMessages(),this.hoPtr.rom.rmMoveFlag)))},mtGoAvant:function(t){t>=this.MT_Movement.steps.length?this.stop():(this.MT_Direction=!1,this.MT_MoveNumber=t,this.MT_Pause=this.MT_Movement.steps[t].mdPause,this.MT_Cosinus=this.MT_Movement.steps[t].mdCosinus,this.MT_Sinus=this.MT_Movement.steps[t].mdSinus,this.MT_XOrigin=this.hoPtr.hoX,this.MT_YOrigin=this.hoPtr.hoY,this.MT_XDest=this.hoPtr.hoX+this.MT_Movement.steps[t].mdDx,this.MT_YDest=this.hoPtr.hoY+this.MT_Movement.steps[t].mdDy,this.hoPtr.roc.rcDir=this.MT_Movement.steps[t].mdDir,this.mtBranche())},mtGoArriere:function(t){if(t>=this.MT_Movement.steps.length)this.stop();else{this.MT_Direction=!0,this.MT_MoveNumber=t,this.MT_Cosinus=-this.MT_Movement.steps[t].mdCosinus,this.MT_Sinus=-this.MT_Movement.steps[t].mdSinus,this.MT_XOrigin=this.hoPtr.hoX,this.MT_YOrigin=this.hoPtr.hoY,this.MT_XDest=this.hoPtr.hoX-this.MT_Movement.steps[t].mdDx,this.MT_YDest=this.hoPtr.hoY-this.MT_Movement.steps[t].mdDy;var e=this.MT_Movement.steps[t].mdDir;e+=16,e&=31,this.hoPtr.roc.rcDir=e,this.mtBranche()}},mtBranche:function(){this.MT_Longueur=this.MT_Movement.steps[this.MT_MoveNumber].mdLength;var t=this.MT_Movement.steps[this.MT_MoveNumber].mdSpeed,e=this.MT_Pause;0!=e&&(this.MT_Pause=20*e,t|=32768,this.rmStopSpeed=t),0!=this.rmStopSpeed&&(t=0),t==this.MT_Speed&&0==t||(this.MT_Speed=t,this.hoPtr.rom.rmMoveFlag=!0,this.MT_FlagBranch=!0),this.hoPtr.roc.rcSpeed=this.MT_Speed},mtMessages:function(){this.hoPtr.hoMark1==this.hoPtr.hoAdRunHeader.rhLoopCount&&(this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurParam0=0,this.hoPtr.hoAdRunHeader.rhEvtProg.handle_Event(this.hoPtr,-20<<16|65535&this.hoPtr.hoType),this.hoPtr.hoAdRunHeader.rhEvtProg.handle_Event(this.hoPtr,-35<<16|65535&this.hoPtr.hoType)),this.hoPtr.hoMark2==this.hoPtr.hoAdRunHeader.rhLoopCount&&(this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurParam0=0,this.hoPtr.hoAdRunHeader.rhEvtProg.handle_Event(this.hoPtr,-21<<16|65535&this.hoPtr.hoType))},mtTheEnd:function(){return this.MT_Speed=0,this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0,this.MT_FlagBranch=!1,!0},mtReposAtEnd:function(){0!=this.MT_Movement.mtRepos&&(this.hoPtr.hoX=this.MT_XStart,this.hoPtr.hoY=this.MT_YStart,this.hoPtr.roc.rcChanged=!0)},mtBranchNode:function(t){var e;for(e=0;e<this.MT_Movement.mtNumber;e++)if(null!=this.MT_Movement.steps[e].mdName&&qc.compareStringsIgnoreCase(t,this.MT_Movement.steps[e].mdName))return 0==this.MT_Direction?(this.mtGoAvant(e),this.hoPtr.hoMark1=this.hoPtr.hoAdRunHeader.rhLoopCount,this.hoPtr.hoMT_NodeName=this.MT_Movement.steps[e].mdName,this.hoPtr.hoMark2=0,this.mtMessages()):e>0&&(e--,this.mtGoArriere(e),this.hoPtr.hoMark1=this.hoPtr.hoAdRunHeader.rhLoopCount,this.hoPtr.hoMT_NodeName=this.MT_Movement.steps[e].mdName,this.hoPtr.hoMark2=0,this.mtMessages()),void(this.hoPtr.rom.rmMoveFlag=!0)},mtGotoNode:function(t){var e;for(e=0;e<this.MT_Movement.mtNumber;e++)if(null!=this.MT_Movement.steps[e].mdName&&qc.compareStringsIgnoreCase(t,this.MT_Movement.steps[e].mdName)){if(e==this.MT_MoveNumber&&0==this.MT_Calculs)return;if(this.MT_GotoNode=t,0==this.MT_Direction){if(e>this.MT_MoveNumber){if(0!=this.MT_Speed)return;return void(0!=(32768&this.rmStopSpeed)?this.start():this.mtGoAvant(this.MT_MoveNumber))}return 0!=this.MT_Speed?void this.reverse():void(0!=(32768&this.rmStopSpeed)?(this.start(),this.reverse()):this.mtGoArriere(MT_MoveNumber-1))}if(e<=this.MT_MoveNumber){if(0!=this.MT_Speed)return;return void(0!=(32768&this.rmStopSpeed)?this.start():this.mtGoArriere(this.MT_MoveNumber-1))}return 0!=this.MT_Speed?void this.reverse():void(0!=(32768&this.rmStopSpeed)?(this.start(),this.reverse()):this.mtGoAvant(this.MT_MoveNumber))}},stop:function(){0==this.rmStopSpeed&&(this.rmStopSpeed=32768|this.MT_Speed),this.MT_Speed=0,this.hoPtr.rom.rmMoveFlag=!0},start:function(){0!=(32768&this.rmStopSpeed)&&(this.MT_Speed=32767&this.rmStopSpeed,this.MT_Pause=0,this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0)},reverse:function(){if(0==this.rmStopSpeed){this.hoPtr.rom.rmMoveFlag=!0;var t=this.MT_MoveNumber;if(0==this.MT_Calculs)if(this.MT_Direction=!this.MT_Direction,this.MT_Direction){if(0==t)return void(this.MT_Direction=!this.MT_Direction);t--,this.mtGoArriere(t)}else this.mtGoAvant(t);else{this.MT_Direction=!this.MT_Direction,this.MT_Cosinus=-this.MT_Cosinus,this.MT_Sinus=-this.MT_Sinus;var e=this.MT_XOrigin,i=this.MT_XDest;this.MT_XOrigin=i,this.MT_XDest=e,e=this.MT_YOrigin,i=this.MT_YDest,this.MT_YOrigin=i,this.MT_YDest=e,this.hoPtr.roc.rcDir+=16,this.hoPtr.roc.rcDir&=31;var r=this.MT_Calculs>>>16;r=this.MT_Longueur-r,this.MT_Calculs=r<<16|65535&this.MT_Calculs}}},setXPosition:function(t){var e=this.hoPtr.hoX;this.hoPtr.hoX=t,e-=this.MT_XOrigin,t-=e,e=this.MT_XDest-this.MT_XOrigin+t,this.MT_XDest=e,e=this.MT_XOrigin,this.MT_XOrigin=t,e-=t,this.MT_XStart-=e,this.hoPtr.rom.rmMoveFlag=!0,
this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0},setYPosition:function(t){var e=this.hoPtr.hoY;this.hoPtr.hoY=t,e-=this.MT_YOrigin,t-=e,e=this.MT_YDest-this.MT_YOrigin+t,this.MT_YDest=e,e=this.MT_YOrigin,this.MT_YOrigin=t,e-=t,this.MT_YStart-=e,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0},setSpeed:function(t){t<0&&(t=0),t>250&&(t=250),this.MT_Speed=t,this.hoPtr.roc.rcSpeed=t,this.hoPtr.rom.rmMoveFlag=!0},setMaxSpeed:function(t){this.setSpeed(t)},setDir:function(t){}}),Gc.MPJC_NOJUMP=0,Gc.MPJC_DIAGO=1,Gc.MPJC_BUTTON1=2,Gc.MPJC_BUTTON2=3,Gc.MPTYPE_WALK=0,Gc.MPTYPE_CLIMB=1,Gc.MPTYPE_JUMP=2,Gc.MPTYPE_FALL=3,Gc.MPTYPE_CROUCH=4,Gc.MPTYPE_UNCROUCH=5,Gc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.rhPtr=this.hoPtr.hoAdRunHeader,this.hoPtr.hoCalculX=0,this.hoPtr.hoCalculY=0,this.MP_XSpeed=0,this.hoPtr.roc.rcSpeed=0,this.MP_Bounce=0,this.hoPtr.roc.rcPlayer=e.mvControl,this.rmAcc=e.mpAcc,this.rmAccValue=this.getAccelerator(this.rmAcc),this.rmDec=e.mpDec,this.rmDecValue=this.getAccelerator(this.rmDec),this.hoPtr.roc.rcMaxSpeed=e.mpSpeed,this.hoPtr.roc.rcMinSpeed=0,this.MP_Gravity=e.mpGravity,this.MP_Jump=e.mpJump;var i=e.mpJumpControl;i>3&&(i=Gc.MPJC_DIAGO),this.MP_JumpControl=i,this.MP_YSpeed=0,this.MP_JumpStopped=0,this.MP_ObjectUnder=null,this.moveAtStart(e),this.MP_PreviousDir=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),this.hoPtr.roc.rcChanged=!0,this.MP_Type=Gc.MPTYPE_WALK},move:function(){var t,e;this.hoPtr.hoAdRunHeader.rhVBLObjet=1;var i=this.hoPtr.hoAdRunHeader.rhPlayer[this.hoPtr.roc.rcPlayer-1];this.calcMBFoot();var r,s=this.MP_XSpeed;0==this.MP_JumpStopped&&(s<=0&&(0!=(4&i)?(r=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),s-=r,s/256<-this.hoPtr.roc.rcMaxSpeed&&(s=256*-this.hoPtr.roc.rcMaxSpeed)):s<0&&(r=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),(s+=r)>0&&(s=0)),0!=(8&i)&&(s=-s)),s>=0&&(0!=(8&i)?(r=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),s+=r,s/256>this.hoPtr.roc.rcMaxSpeed&&(s=256*this.hoPtr.roc.rcMaxSpeed)):s>0&&(r=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),(s-=r)<0&&(s=0)),0!=(4&i)&&(s=-s)),this.MP_XSpeed=s);for(var n=this.MP_YSpeed,o=!1;;){switch(this.MP_Type){case 2:case 3:r=this.MP_Gravity<<5,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),n+=r,n>64e3&&(n=64e3);break;case 0:if(0!=(1&i)){if(this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB-4)==il.INTBAD)break;this.MP_Type=Gc.MPTYPE_CLIMB,o=!0;continue}if(0!=(2&i)){if(this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB+4)==il.INTBAD)break;this.MP_Type=Gc.MPTYPE_CLIMB,o=!0;continue}break;case 1:if(0==o&&(this.MP_JumpStopped=0,this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)==il.INTBAD&&this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB-4)==il.INTBAD))break;n<=0&&(0!=(1&i)?(r=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),n-=r,n/256<-this.hoPtr.roc.rcMaxSpeed&&(n=256*-this.hoPtr.roc.rcMaxSpeed)):(r=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),(n+=r)>0&&(n=0)),0!=(2&i)&&(n=-n)),n>=0&&(0!=(2&i)?(r=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),n+=r,n/256>this.hoPtr.roc.rcMaxSpeed&&(n=256*this.hoPtr.roc.rcMaxSpeed)):(r=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(r*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),(n-=r)<0&&(n=0)),0!=(1&i)&&(n=-n))}break}this.MP_YSpeed=n;var h=0;s<0&&(h=16);var l=s,u=n;if(0!=u){var c=0;l<0&&(c|=1,l=-l),u<0&&(c|=2,u=-u),l<<=8,l/=u;var d;for(d=0;!(l>=Mc.CosSurSin32[d]);d+=2);h=Mc.CosSurSin32[d+1],0!=(2&c)&&(h=32-h,h&=31),0!=(1&c)&&(h-=8,h&=31,h=-h,h&=31,h+=8,h&=31)}l=s;var f=Mc.Cosinus32[h],p=Mc.Sinus32[h];switch(f<0&&(f=-f),p<0&&(p=-p),f<p&&(f=p,l=n),l<0&&(l=-l),l/=f,l>250&&(l=250),this.hoPtr.roc.rcSpeed=l,this.MP_Type){case 1:n<0?this.hoPtr.roc.rcDir=8:n>0&&(this.hoPtr.roc.rcDir=24);break;case 3:this.hoPtr.roc.rcDir=h;break;default:s<0?this.hoPtr.roc.rcDir=16:s>0&&(this.hoPtr.roc.rcDir=0)}switch(this.MP_Type){case 4:this.hoPtr.roc.rcAnim=ul.ANIMID_CROUCH;break;case 5:this.hoPtr.roc.rcAnim=ul.ANIMID_UNCROUCH;break;case 3:this.hoPtr.roc.rcAnim=ul.ANIMID_FALL;break;case 2:this.hoPtr.roc.rcAnim=ul.ANIMID_JUMP;break;case 1:this.hoPtr.roc.rcAnim=ul.ANIMID_CLIMB;break;default:this.hoPtr.roc.rcAnim=ul.ANIMID_WALK}if(null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),this.calcMBFoot(),this.newMake_Move(this.hoPtr.roc.rcSpeed,h),(this.MP_Type==Gc.MPTYPE_WALK||this.MP_Type==Gc.MPTYPE_CLIMB)&&0==this.MP_NoJump){var m=!1,g=this.MP_JumpControl;0!=g&&(g--,0==g?(5==(5&i)&&(m=!0),9==(9&i)&&(m=!0)):(g<<=4,0!=(i&g)&&(m=!0))),m&&(this.MP_YSpeed=-this.MP_Jump<<8,this.MP_Type=Gc.MPTYPE_JUMP)}switch(this.MP_Type){case 2:this.MP_YSpeed>=0&&(this.MP_Type=Gc.MPTYPE_FALL);break;case 3:this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)!=il.INTBAD&&(this.MP_YSpeed=0,this.MP_Type=Gc.MPTYPE_CLIMB,this.hoPtr.roc.rcDir=8);break;case 0:if(0!=(3&i)&&0==(12&i)&&this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)!=il.INTBAD){this.MP_Type=Gc.MPTYPE_CLIMB,this.MP_XSpeed=0;break}if(0!=(2&i)&&null!=this.hoPtr.roa&&this.hoPtr.roa.anim_Exist(ul.ANIMID_CROUCH)&&(this.MP_XSpeed=0,this.MP_Type=Gc.MPTYPE_CROUCH),this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)!=il.INTBAD)break;if(0==this.tst_SpritePosition(this.hoPtr.hoX,this.hoPtr.hoY+10,this.MP_HTFOOT,za.CM_TEST_PLATFORM,!0)){t=this.hoPtr.hoX-this.hoPtr.hoAdRunHeader.rhWindowX,e=this.hoPtr.hoY-this.hoPtr.hoAdRunHeader.rhWindowY;var v=e+this.MP_HTFOOT-1,_=new a;this.mpApproachSprite(t,v,t,e,this.MP_HTFOOT,za.CM_TEST_PLATFORM,_),this.hoPtr.hoX=_.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=_.y+this.hoPtr.hoAdRunHeader.rhWindowY,this.MP_NoJump=!1}else this.MP_Type=Gc.MPTYPE_FALL;break;case 1:if(this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)==il.INTBAD){if(this.MP_YSpeed<0)for(u=0;u<32;u++)if(this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB+u)!=il.INTBAD){this.hoPtr.hoY+=u;break}this.MP_YSpeed=0}0!=(12&i)&&(this.MP_Type=Gc.MPTYPE_WALK,this.MP_YSpeed=0);break;case 4:if(0==(2&i)){if(null!=this.hoPtr.roa&&this.hoPtr.roa.anim_Exist(ul.ANIMID_UNCROUCH)){this.MP_Type=Gc.MPTYPE_UNCROUCH,this.hoPtr.roc.rcAnim=ul.ANIMID_UNCROUCH,this.hoPtr.roa.animate(),this.hoPtr.roa.raAnimRepeat=1;break}this.MP_Type=Gc.MPTYPE_WALK}break;case 5:null!=this.hoPtr.roa&&0==this.hoPtr.roa.raAnimNumberOfFrame&&(this.MP_Type=Gc.MPTYPE_WALK)}if(this.MP_Type==Gc.MPTYPE_WALK||this.MP_Type==Gc.MPTYPE_CROUCH||this.MP_Type==Gc.MPTYPE_UNCROUCH)do{var P=null;if(null!=this.hoPtr.hoOiList&&(P=this.hoPtr.hoOiList.oilColList),null==this.hoPtr.hoAdRunHeader.objectAllCol_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,this.hoPtr.hoX,this.hoPtr.hoY,P)){var E=this.hoPtr.hoAdRunHeader.objectAllCol_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,this.hoPtr.hoX,this.hoPtr.hoY+1,P);if(null!=E&&1==E.size()){var A=E.get(0);if((null==this.MP_ObjectUnder||this.MP_ObjectUnder!=A)&&this.hoPtr.hoOi!=A.hoOi){this.MP_ObjectUnder=A,this.MP_XObjectUnder=A.hoX,this.MP_YObjectUnder=A.hoY;break}var O=A.hoX-this.MP_XObjectUnder,b=A.hoY-this.MP_YObjectUnder;this.MP_XObjectUnder=A.hoX,this.MP_YObjectUnder=A.hoY,this.hoPtr.hoX+=O,this.hoPtr.hoY+=b,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr),this.hoPtr.roc.rcChanged=!0;break}}this.MP_ObjectUnder=null}while(!1);else this.MP_ObjectUnder=null},mpStopIt:function(){this.hoPtr.roc.rcSpeed=0,this.MP_XSpeed=0,this.MP_YSpeed=0},bounce:function(){this.stop()},stop:function(){if(this.MP_Bounce=0,this.rmCollisionCount!=this.hoPtr.hoAdRunHeader.rh3CollisionCount)return void this.mpStopIt();this.hoPtr.rom.rmMoveFlag=!0;var t,e,i,r=this.hoPtr.hoX-this.hoPtr.hoAdRunHeader.rhWindowX,s=this.hoPtr.hoY-this.hoPtr.hoAdRunHeader.rhWindowY;switch(4294901760&this.hoPtr.hoAdRunHeader.rhEvtProg.rhCurCode){case-786432:return t=this.hoPtr.hoX-this.hoPtr.hoImgXSpot,e=this.hoPtr.hoY-this.hoPtr.hoImgYSpot,i=this.hoPtr.hoAdRunHeader.quadran_Out(t,e,t+this.hoPtr.hoImgWidth,e+this.hoPtr.hoImgHeight),t=this.hoPtr.hoX,e=this.hoPtr.hoY,0!=(i&il.BORDER_LEFT)&&(t=this.hoPtr.hoImgXSpot,this.MP_XSpeed=0,this.MP_NoJump=!0),0!=(i&il.BORDER_RIGHT)&&(t=this.hoPtr.hoAdRunHeader.rhLevelSx-this.hoPtr.hoImgWidth+this.hoPtr.hoImgXSpot,this.MP_XSpeed=0,this.MP_NoJump=!0),0!=(i&il.BORDER_TOP)&&(e=this.hoPtr.hoImgYSpot,this.MP_YSpeed=0,this.MP_NoJump=!1),0!=(i&il.BORDER_BOTTOM)&&(e=this.hoPtr.hoAdRunHeader.rhLevelSy-this.hoPtr.hoImgHeight+this.hoPtr.hoImgYSpot,this.MP_YSpeed=0,this.MP_NoJump=!1),this.hoPtr.hoX=t,this.hoPtr.hoY=e,this.MP_Type==Gc.MPTYPE_JUMP?this.MP_Type=Gc.MPTYPE_FALL:this.MP_Type=Gc.MPTYPE_WALK,void(this.MP_JumpStopped=0);case-851968:case-917504:this.MP_NoJump=!1;var n=new a;if(this.MP_Type==Gc.MPTYPE_FALL)return this.mpApproachSprite(r,s,this.hoPtr.roc.rcOldX-this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.roc.rcOldY-this.hoPtr.hoAdRunHeader.rhWindowY,this.MP_HTFOOT,za.CM_TEST_PLATFORM,n),this.hoPtr.hoX=n.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=n.y+this.hoPtr.hoAdRunHeader.rhWindowY,this.MP_Type=Gc.MPTYPE_WALK,this.hoPtr.roc.rcChanged=!0,void(this.tst_SpritePosition(this.hoPtr.hoX,this.hoPtr.hoY+1,0,za.CM_TEST_PLATFORM,!0)?(this.hoPtr.roc.rcSpeed=0,this.MP_XSpeed=0):(this.MP_JumpStopped=0,this.hoPtr.roc.rcSpeed=Math.abs(this.MP_XSpeed/256),this.MP_YSpeed=0));if(this.MP_Type==Gc.MPTYPE_WALK){if(this.mpApproachSprite(r,s,r,s-this.MP_HTFOOT,0,za.CM_TEST_PLATFORM,n))return this.hoPtr.hoX=n.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=n.y+this.hoPtr.hoAdRunHeader.rhWindowY,void(this.hoPtr.roc.rcChanged=!0);if(this.mpApproachSprite(r,s,this.hoPtr.roc.rcOldX-this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.roc.rcOldY-this.hoPtr.hoAdRunHeader.rhWindowY,0,za.CM_TEST_PLATFORM,n))return this.hoPtr.hoX=n.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=n.y+this.hoPtr.hoAdRunHeader.rhWindowY,this.hoPtr.roc.rcChanged=!0,void this.mpStopIt()}if(this.MP_Type==Gc.MPTYPE_JUMP){if(this.mpApproachSprite(r,s,r,s-this.MP_HTFOOT,0,za.CM_TEST_PLATFORM,n))return this.hoPtr.hoX=n.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=n.y+this.hoPtr.hoAdRunHeader.rhWindowY,void(this.hoPtr.roc.rcChanged=!0);this.MP_JumpStopped=1,this.MP_XSpeed=0}if(this.MP_Type==Gc.MPTYPE_CLIMB&&this.mpApproachSprite(r,s,this.hoPtr.roc.rcOldX-this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.roc.rcOldY-this.hoPtr.hoAdRunHeader.rhWindowY,0,za.CM_TEST_PLATFORM,n))return this.hoPtr.hoX=n.x+this.hoPtr.hoAdRunHeader.rhWindowX,this.hoPtr.hoY=n.y+this.hoPtr.hoAdRunHeader.rhWindowY,this.hoPtr.roc.rcChanged=!0,void this.mpStopIt();if(this.hoPtr.roc.rcImage=this.hoPtr.roc.rcOldImage,this.hoPtr.roc.rcAngle=this.hoPtr.roc.rcOldAngle,this.tst_SpritePosition(this.hoPtr.hoX,this.hoPtr.hoY,0,za.CM_TEST_PLATFORM,!0))return;this.hoPtr.hoX=this.hoPtr.roc.rcOldX,this.hoPtr.hoY=this.hoPtr.roc.rcOldY,this.hoPtr.roc.rcChanged=!0}},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setSpeed:function(t){t<0&&(t=0),t>250&&(t=250),t>this.hoPtr.roc.rcMaxSpeed&&(t=this.hoPtr.roc.rcMaxSpeed),this.hoPtr.roc.rcSpeed=t,this.MP_XSpeed=this.hoPtr.roc.rcSpeed*Mc.Cosinus32[this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)],this.MP_YSpeed=this.hoPtr.roc.rcSpeed*Mc.Sinus32[this.hoPtr.hoAdRunHeader.getDir(this.hoPtr)],this.hoPtr.rom.rmMoveFlag=!0},setMaxSpeed:function(t){t<0&&(t=0),t>250&&(t=250),this.hoPtr.roc.rcMaxSpeed=t,t<<=8,this.MP_XSpeed>t&&(this.MP_XSpeed=t),this.hoPtr.rom.rmMoveFlag=!0},setGravity:function(t){this.MP_Gravity=t},setDir:function(t){this.hoPtr.roc.rcDir=t,this.MP_XSpeed=this.hoPtr.roc.rcSpeed*Mc.Cosinus32[t],this.MP_YSpeed=this.hoPtr.roc.rcSpeed*Mc.Sinus32[t]},calcMBFoot:function(){var t;this.hoPtr.roc.rcImage>0?t=this.hoPtr.hoAdRunHeader.rhApp.imageBank.getImageInfoEx(this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY):(t=new vl,t.width=this.hoPtr.hoImgWidth,t.height=this.hoPtr.hoImgHeight,t.xSpot=this.hoPtr.hoImgXSpot,t.ySpot=this.hoPtr.hoImgYSpot),this.MP_XMB=0,this.MP_YMB=t.height-t.ySpot,this.MP_HTFOOT=2*t.height+t.height>>>3},mpHandle_Background:function(){if(this.calcMBFoot(),this.rhPtr.check_Ladder(this.hoPtr.hoLayer,this.hoPtr.hoX+this.MP_XMB,this.hoPtr.hoY+this.MP_YMB)==il.INTBAD){if(0==this.hoPtr.hoAdRunHeader.colMask_TestObject_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,this.hoPtr.hoX,this.hoPtr.hoY,0,za.CM_TEST_OBSTACLE)){if(this.MP_Type==Gc.MPTYPE_JUMP&&this.MP_YSpeed<0)return;if(0==this.hoPtr.hoAdRunHeader.colMask_TestObject_IXY(this.hoPtr,this.hoPtr.roc.rcImage,this.hoPtr.roc.rcAngle,this.hoPtr.roc.rcScaleX,this.hoPtr.roc.rcScaleY,this.hoPtr.hoX,this.hoPtr.hoY,this.MP_HTFOOT,za.CM_TEST_PLATFORM))return}this.hoPtr.hoAdRunHeader.rhEvtProg.handle_Event(this.hoPtr,-851968|65535&this.hoPtr.hoType)}}}),jc.RaceMask=[4294967288,4294967292,4294967294,4294967295],jc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.MR_Speed=0,this.hoPtr.roc.rcSpeed=0,this.MR_Bounce=0,this.MR_LastBounce=-1,this.hoPtr.roc.rcPlayer=e.mvControl,this.rmAcc=e.mrAcc,this.rmAccValue=this.getAccelerator(e.mrAcc),this.rmDec=e.mrDec,this.rmDecValue=this.getAccelerator(e.mrDec),this.hoPtr.roc.rcMaxSpeed=e.mrSpeed,this.hoPtr.roc.rcMinSpeed=0,this.MR_BounceMu=e.mrBounceMult,this.MR_OkReverse=e.mrOkReverse,this.hoPtr.rom.rmReverse=0,this.rmOpt=e.mvOpt,this.MR_OldJoy=0,this.MR_RotMask=jc.RaceMask[e.mrAngles],this.MR_RotSpeed=e.mrRot,this.MR_RotCpt=0,this.MR_RotPos=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),this.hoPtr.hoCalculX=0,this.hoPtr.hoCalculY=0,this.moveAtStart(e),this.hoPtr.roc.rcChanged=!0},move:function(){var t,e,i,r,s,n,o;if(this.hoPtr.hoAdRunHeader.rhVBLObjet=1,0==this.MR_Bounce){if(this.hoPtr.rom.rmBouncing=!1,t=15&this.hoPtr.hoAdRunHeader.rhPlayer[this.hoPtr.roc.rcPlayer-1],e=0,0!=(8&t)&&(e=-1),0!=(4&t)&&(e=1),0!=e){for(o=this.MR_RotSpeed,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(o*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),this.MR_RotCpt+=o;this.MR_RotCpt>100;)this.MR_RotCpt-=100,this.MR_RotPos+=e,this.MR_RotPos&=31,this.hoPtr.roc.rcDir=this.MR_RotPos&this.MR_RotMask;this.hoPtr.roc.rcChanged=!0}for(i=0,0!=this.hoPtr.rom.rmReverse?(0!=(1&t)&&(i=1),0!=(2&t)&&(i=2)):(0!=(1&t)&&(i=2),0!=(2&t)&&(i=1)),r=this.MR_Speed;;){if(0!=(1&i)){if(0==this.MR_Speed){if(0==this.MR_OkReverse)break;if(0!=(3&this.MR_OldJoy))break;this.hoPtr.rom.rmReverse^=1,o=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(o*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),r+=o,n=r>>8,n>this.hoPtr.roc.rcMaxSpeed&&(r=this.hoPtr.roc.rcMaxSpeed<<8,this.MR_Speed=r),this.MR_Speed=r;break}o=this.rmDecValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(o*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),r-=o,r<0&&(r=0),this.MR_Speed=r}else 0!=(2&i)&&(o=this.rmAccValue,0!=(this.hoPtr.hoAdRunHeader.rhFrame.leFlags&za.LEF_TIMEDMVTS)&&(o*=this.hoPtr.hoAdRunHeader.rh4MvtTimerCoef),r+=o,n=r>>8,n>this.hoPtr.roc.rcMaxSpeed&&(r=this.hoPtr.roc.rcMaxSpeed<<8,this.MR_Speed=r),this.MR_Speed=r);break}if(this.MR_OldJoy=t,this.hoPtr.roc.rcSpeed=this.MR_Speed>>8,this.hoPtr.roc.rcAnim=ul.ANIMID_WALK,null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),s=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),0!=this.hoPtr.rom.rmReverse&&(s+=16,s&=31),0==this.newMake_Move(this.hoPtr.roc.rcSpeed,s))return}for(;;){if(0==this.MR_Bounce)break;if(0==this.hoPtr.hoAdRunHeader.rhVBLObjet)break;if(r=this.MR_Speed,(r-=this.rmDecValue)<=0){this.MR_Speed=0,this.MR_Bounce=0;break}if(this.MR_Speed=r,r>>=8,s=this.hoPtr.hoAdRunHeader.getDir(this.hoPtr),0!=this.MR_Bounce&&(s+=16,s&=31),0==this.newMake_Move(r,s))break}},reverse:function(){},stop:function(){this.MR_Bounce=0,this.MR_Speed=0,this.hoPtr.rom.rmReverse=0,this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&(this.mv_Approach(0!=(this.rmOpt&Mc.MVTOPT_8DIR_STICK)),this.hoPtr.rom.rmMoveFlag=!0)},start:function(){this.rmStopSpeed=0,this.hoPtr.rom.rmMoveFlag=!0},bounce:function(){if(this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount&&this.mv_Approach(0!=(this.rmOpt&Mc.MVTOPT_8DIR_STICK)),this.hoPtr.hoAdRunHeader.rhLoopCount!=this.MR_LastBounce){if(this.MR_Bounce=this.hoPtr.rom.rmReverse,this.hoPtr.rom.rmReverse=0,++this.MR_Bounce>=16)return void this.stop();this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.rom.rmBouncing=!0}},setSpeed:function(t){t<0&&(t=0),t>250&&(t=250),t>this.hoPtr.roc.rcMaxSpeed&&(t=this.hoPtr.roc.rcMaxSpeed),t<<=8,this.MR_Speed=t,this.hoPtr.rom.rmMoveFlag=!0},setMaxSpeed:function(t){t<0&&(t=0),t>250&&(t=250),this.hoPtr.roc.rcMaxSpeed=t,t<<=8,this.MR_Speed>t&&(this.MR_Speed=t),this.hoPtr.rom.rmMoveFlag=!0},setRotSpeed:function(t){this.MR_RotSpeed=t},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0)},setDir:function(t){this.MR_RotPos=t,this.hoPtr.roc.rcDir=t&this.MR_RotMask}}),Yc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t,this.hoPtr.roc.rcSpeed=0,this.hoPtr.roc.rcCheckCollides=!0,this.hoPtr.roc.rcChanged=!0},move:function(){null!=this.hoPtr.roa&&this.hoPtr.roa.animate(),this.hoPtr.roc.rcCheckCollides&&(this.hoPtr.roc.rcCheckCollides=!1,this.hoPtr.hoAdRunHeader.newHandle_Collisions(this.hoPtr))},setXPosition:function(t){this.hoPtr.hoX!=t&&(this.hoPtr.hoX=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0),this.hoPtr.roc.rcCheckCollides=!0},setYPosition:function(t){this.hoPtr.hoY!=t&&(this.hoPtr.hoY=t,this.hoPtr.rom.rmMoveFlag=!0,this.hoPtr.roc.rcChanged=!0),this.hoPtr.roc.rcCheckCollides=!0},setDir:function(t){},reverse:function(t){},stop:function(){},start:function(){},bounce:function(){},setSpeed:function(t){},setMaxSpeed:function(t){}}),Xc.prototype=qc.extend(new Mc,{init:function(t,e){this.hoPtr=t;var i=t.hoAdRunHeader.rhApp.file.createFromFile(e.data);this.movement.initialize(i),this.hoPtr.roc.rcCheckCollides=!0,this.hoPtr.roc.rcChanged=!0},kill:function(){this.movement.kill()},move:function(){this.movement.move()&&(this.hoPtr.roc.rcChanged=!0)},stop:function(){this.movement.stop(this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount)},start:function(){this.movement.start()},bounce:function(){this.movement.bounce(this.rmCollisionCount==this.hoPtr.hoAdRunHeader.rh3CollisionCount)},setSpeed:function(t){this.movement.setSpeed(t)},setMaxSpeed:function(t){this.movement.setMaxSpeed(t)},reverse:function(){this.movement.reverse()},setXPosition:function(t){this.movement.setXPosition(t),this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0},setYPosition:function(t){this.movement.setYPosition(t),this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0},setDir:function(t){this.movement.setDir(t),this.hoPtr.roc.rcChanged=!0,this.hoPtr.roc.rcCheckCollides=!0},callMovement:function(t,e){return this.callParam=e,this.movement.actionEntry(t)}}),Wc.prototype={init:function(t){this.ho=t,this.rh=this.ho.hoAdRunHeader},initialize:function(t){},kill:function(){},move:function(){return!1},setPosition:function(t,e){},setXPosition:function(t){},setYPosition:function(t){},stop:function(t){},bounce:function(t){},reverse:function(){},start:function(){},setSpeed:function(t){},setMaxSpeed:function(t){},setDir:function(t){},setAcc:function(t){},setDec:function(t){},setRotSpeed:function(t){},set8Dirs:function(t){},setGravity:function(t){},extension:function(t,e){return 0},actionEntry:function(t){return 0},getSpeed:function(){return 0},getAcceleration:function(){return 0},getDeceleration:function(){return 0},getGravity:function(){return 0},getDir:function(){return this.ho.roc.rcDir},dirAtStart:function(t){return this.ho.rom.dirAtStart(this.ho,t,32)},animations:function(t){this.ho.roc.rcAnim=t,null!=this.ho.roa&&this.ho.roa.animate()},collisions:function(){this.ho.hoAdRunHeader.rh3CollisionCount++,this.ho.rom.rmMovement.rmCollisionCount=this.ho.hoAdRunHeader.rh3CollisionCount,this.ho.hoAdRunHeader.newHandle_Collisions(this.ho)},approachObject:function(t,e,i,r,s,n,o){t-=this.ho.hoAdRunHeader.rhWindowX,e-=this.ho.hoAdRunHeader.rhWindowY,i-=this.ho.hoAdRunHeader.rhWindowX,r-=this.ho.hoAdRunHeader.rhWindowY;var h=this.ho.rom.rmMovement.mpApproachSprite(t,e,i,r,s,n,o);return o.x+=this.ho.hoAdRunHeader.rhWindowX,o.y+=this.ho.hoAdRunHeader.rhWindowY,h},moveIt:function(){return this.ho.rom.rmMovement.newMake_Move(this.ho.roc.rcSpeed,this.ho.hoAdRunHeader.getDir(this.ho))},testPosition:function(t,e,i,r,s){return this.ho.rom.rmMovement.tst_SpritePosition(t,e,i,r,s)},getJoystick:function(t){return this.ho.hoAdRunHeader.rhPlayer[t]},colMaskTestRect:function(t,e,i,r,s,n){return!this.ho.hoAdRunHeader.colMask_Test_Rect(t,e,i,r,s,n)},colMaskTestPoint:function(t,e,i,r){return!this.ho.hoAdRunHeader.colMask_Test_XY(t,e,i,r)},getParamDouble:function(){return this.ho.rom.rmMovement.callParam},getParam:function(){return this.ho.rom.rmMovement.callParam}},Vc.EF_GOESINPLAYFIELD=1,Vc.EF_GOESOUTPLAYFIELD=2,Vc.EF_WRAP=4,Vc.prototype={init:function(t,e,i,r,s){this.rmObject=e,null!=this.rmMovement&&this.rmMovement.kill(),null!=r&&(e.roc.rcDir=r.cobDir),this.rmWrapping=e.hoOiList.oilWrap;var n=null;if(e.roc.rcMovementType=-1,null!=i.ocMovements&&t<i.ocMovements.nMovements){switch(n=i.ocMovements.moveList[t],this.rmMvtNum=t,-1==s&&(s=n.mvType),e.roc.rcMovementType=s,s){case 0:this.rmMovement=new Yc;break;case 1:this.rmMovement=new Hc;break;case 2:this.rmMovement=new jc;break;case 3:this.rmMovement=new Dc;break;case 4:this.rmMovement=new Rc;break;case 5:this.rmMovement=new Bc;break;case 9:this.rmMovement=new Gc;break;case 14:this.rmMovement=this.loadMvtExtension(e,n),null==this.rmMovement&&(this.rmMovement=new Yc)}e.roc.rcDir=this.dirAtStart(e,n.mvDirAtStart,e.roc.rcDir),this.rmMovement.init(e,n)}-1==e.roc.rcMovementType&&(e.roc.rcMovementType=0,this.rmMovement=new Yc,this.rmMovement.init(e,null),e.roc.rcDir=0)},loadMvtExtension:function(t,e){var i=(e.moduleName,null);if(null!=i){i.init(t);return new Xc(i)}return null},initSimple:function(t,e,i){switch(this.rmObject=t,null!=this.rmMovement&&this.rmMovement.kill(),t.roc.rcMovementType=e,e){case 11:this.rmMovement=new Nc;break;case 13:this.rmMovement=new kc}this.rmMovement.hoPtr=t,0==i&&this.rmMovement.init(t,null)},kill:function(t){this.rmMovement.kill()},move:function(){this.rmMovement.move()},nextMovement:function(t){var e=t.hoCommon;if(null!=e.ocMovements&&this.rmMvtNum+1<e.ocMovements.nMovements){this.init(this.rmMvtNum+1,t,e,null,-1);var i=t.hoAdRunHeader.GetMBase(t);i&&i.CreateBody()}},previousMovement:function(t){var e=t.hoCommon;if(null!=e.ocMovements&&this.rmMvtNum-1>=0){this.init(this.rmMvtNum-1,t,e,null,-1);var i=t.hoAdRunHeader.GetMBase(t);i&&i.CreateBody()}},selectMovement:function(t,e){var i=t.hoCommon;if(null!=i.ocMovements&&e>=0&&e<i.ocMovements.nMovements){this.init(e,t,i,null,-1);var r=t.hoAdRunHeader.GetMBase(t);r&&r.CreateBody()}},dirAtStart:function(t,e,i){if(i<0||i>=32){var r,s,n=0,o=e;for(s=0;s<32;s++)r=o,o>>=1,0!=(1&r)&&n++;if(0==n)i=0;else for(n=t.hoAdRunHeader.random(n),o=e,i=0;r=o,o>>=1,!(0!=(1&r)&&--n<0);i++);}return i}},Uc.CND_JSCRIPT_ONERROR=0,Uc.CND_ISPRELOADER=1,Uc.CND_MOUSEIN=2,Uc.CND_ISIE=3,Uc.CND_ISCHROME=4,Uc.CND_ISFIREFOX=5,Uc.CND_ISSAFARI=6,Uc.CND_ISOPERA=7,Uc.CND_ISEDGE=8,Uc.CND_LAST=9,Uc.ACT_OPENURL_SELF=0,Uc.ACT_OPENURL_PARENT=1,Uc.ACT_OPENURL_TOP=2,Uc.ACT_OPENURL_NEW=3,Uc.ACT_OPENURL_TARGET=4,Uc.ACT_JSCRIPT_RESETPARAMS=5,Uc.ACT_JSCRIPT_ADDINTPARAM=6,Uc.ACT_JSCRIPT_ADDFLOATPARAM=7,Uc.ACT_JSCRIPT_ADDSTRPARAM=8,Uc.ACT_JSCRIPT_CALLFUNCTION=9,Uc.ACT_SAVECOOKIE=10,Uc.EXP_JSCRIPT_GETINTRESULT=0,Uc.EXP_JSCRIPT_GETFLOATRESULT=1,Uc.EXP_JSCRIPT_GETSTRRESULT=2,Uc.EXP_TOTAL=3,Uc.EXP_LOADED=4,Uc.EXP_PERCENT=5,Uc.EXP_BROWSERNAME=6,Uc.EXP_BROWSERVERSION=7,Uc.EXP_BROWSEROS=8,Uc.EXP_GETCOOKIE=9,Uc.EXP_GETURL=10,Uc.EXP_GETHOST=11,Uc.EXP_GETHOSTNAME=12,Uc.EXP_GETHASH=13,Uc.EXP_GETSEARCH=14,Uc.prototype=qc.extend(new vc,{getNumberOfConditions:function(){return Uc.CND_LAST},createRunObject:function(t,e,i){return this.parameters=new Array,!0},condition:function(t,e){switch(t){case Uc.CND_JSCRIPT_ONERROR:return this.onError();case Uc.CND_ISPRELOADER:return this.isPreloader();case Uc.CND_MOUSEIN:return this.ho.hoAdRunHeader.rhApp.bMouseIn;case Uc.CND_ISIE:return"Explorer"==this.rh.rhApp.browserDetect.browser;case Uc.CND_ISCHROME:return"Chrome"==this.rh.rhApp.browserDetect.browser;case Uc.CND_ISFIREFOX:return"Firefox"==this.rh.rhApp.browserDetect.browser;case Uc.CND_ISSAFARI:return"Safari"==this.rh.rhApp.browserDetect.browser;case Uc.CND_ISOPERA:return"Opera"==this.rh.rhApp.browserDetect.browser;case Uc.CND_ISEDGE:return"Edge"==this.rh.rhApp.browserDetect.browser}return!1},isPreloader:function(){return this.ho.hoAdRunHeader.rhApp.isPreloaderSubApp},onError:function(){return 0!=(this.ho.hoFlags&zl.HOF_TRUEEVENT)||this.rh.rh4EventCount==this.onErrorCount},action:function(t,e){switch(t){case Uc.ACT_OPENURL_SELF:this.actOpenURLSelf(e);break;case Uc.ACT_OPENURL_PARENT:this.actOpenURLParent(e);break;case Uc.ACT_OPENURL_TOP:this.actOpenURLTop(e);break;case Uc.ACT_OPENURL_NEW:this.actOpenURLNew(e);break;case Uc.ACT_OPENURL_TARGET:this.actOpenURLTarget(e);break;case Uc.ACT_JSCRIPT_RESETPARAMS:this.actResetParams();break;case Uc.ACT_JSCRIPT_ADDINTPARAM:this.actAddIntegerParam(e);break;case Uc.ACT_JSCRIPT_ADDFLOATPARAM:this.actAddFloatParam(e);break;case Uc.ACT_JSCRIPT_ADDSTRPARAM:this.actAddStringParam(e);break;case Uc.ACT_JSCRIPT_CALLFUNCTION:this.actCallFunction(e);break;case Uc.ACT_SAVECOOKIE:this.actSaveCookie(e)}},actSaveCookie:function(t){var e=t.getParamExpString(this.rh,0),i=t.getParamExpression(this.rh,1),r=t.getParamExpString(this.rh,2),s=new Date;i<=0&&(i=1e4),s.setTime(s.getTime()+864e5*i);var n=e+"="+escape(r)+"; path=/; expires="+s.toGMTString();document.cookie=n},actOpenURLSelf:function(t){var e=t.getParamExpString(this.rh,0);window.open(e,"_self")},actOpenURLParent:function(t){var e=t.getParamExpString(this.rh,0);window.open(e,"_parent")},pactOpenURLTop:function(t){var e=t.getParamExpString(this.rh,0);window.open(e,"_top")},actOpenURLNew:function(t){var e=t.getParamExpString(this.rh,0);window.open(e,"_blank")},actOpenURLTarget:function(t){var e=t.getParamExpString(this.rh,0),i=t.getParamExpString(this.rh,1);window.open(e,i)},actResetParams:function(){this.parameters=null},actAddIntegerParam:function(t){null==this.parameters&&(this.parameters=new Array);var e=t.getParamExpression(this.rh,0);this.parameters.push(e)},actAddStringParam:function(t){null==this.parameters&&(this.parameters=new Array);var e=t.getParamExpString(this.rh,0);this.parameters.push(e)},actAddFloatParam:function(t){null==this.parameters&&(this.parameters=new Array);var e=t.getParamExpDouble(this.rh,0);this.parameters.push(e)},actCallFunction:function(t){null==this.parameters&&(this.parameters=new Array);var e=t.getParamExpString(this.rh,0);this.bError=!1;try{this.parameters.length<=11?this.ret=window[e](this.parameters[0],this.parameters[1],this.parameters[2],this.parameters[3],this.parameters[4],this.parameters[5],this.parameters[6],this.parameters[7],this.parameters[8],this.parameters[9],this.parameters[10]):this.ret=window[e](this.parameters[0],this.parameters[1],this.parameters[2],this.parameters[3],this.parameters[4],this.parameters[5],this.parameters[6],this.parameters[7],this.parameters[8],this.parameters[9],this.parameters[10],this.parameters[11],this.parameters[12],this.parameters[13],this.parameters[14],this.parameters[15],this.parameters[16],this.parameters[17],this.parameters[18],this.parameters[19],this.parameters[20],this.parameters[21],this.parameters[22])}catch(t){this.bError=!0,this.onErrorCount=this.ho.getEventCount(),this.ho.generateEvent(Uc.CND_JSCRIPT_ONERROR,0)}this.parameters=null},expression:function(t){switch(t){case Uc.EXP_JSCRIPT_GETINTRESULT:return this.expGetIntResult();case Uc.EXP_JSCRIPT_GETFLOATRESULT:return this.expGetNumberResult();case Uc.EXP_JSCRIPT_GETSTRRESULT:return this.expGetStringResult();case Uc.EXP_TOTAL:return this.expTotal();case Uc.EXP_LOADED:return this.expLoaded();case Uc.EXP_PERCENT:return this.expPercent();case Uc.EXP_BROWSERNAME:return this.rh.rhApp.browserDetect.browser;case Uc.EXP_BROWSERVERSION:return this.rh.rhApp.browserDetect.version;case Uc.EXP_BROWSEROS:return this.rh.rhApp.browserDetect.OS;case Uc.EXP_GETCOOKIE:return this.expGetCookie();case Uc.EXP_GETURL:return window.location.href;case Uc.EXP_GETHOST:return window.location.host;case Uc.EXP_GETHOSTNAME:return window.location.hostname;case Uc.EXP_GETHASH:return window.location.hash;case Uc.EXP_GETSEARCH:return window.location.search}return 0},getCookie:function(t){var e=document.cookie,i=t+"=";if(e.length>0){var r=e.indexOf(i);if(-1!=r)return r+=i.length,end=e.indexOf(";",r),-1==end&&(end=e.length),unescape(e.substring(r,end))}return null},expGetCookie:function(){var t=this.ho.getExpParam(),e=this.getCookie(t);return e||(e=""),e},expTotal:function(){return null!=this.rh.rhApp.parentApp?this.rh.rhApp.parentApp.imagesToLoad:0},expLoaded:function(){return null!=this.rh.rhApp.parentApp?this.rh.rhApp.parentApp.imagesLoaded:0},expPercent:function(){return null!=this.rh.rhApp.parentApp&&0!=this.rh.rhApp.parentApp.imagesToLoad?100*this.rh.rhApp.parentApp.imagesLoaded/this.rh.rhApp.parentApp.imagesToLoad:0},expGetStringResult:function(){return"string"==typeof this.ret?this.ret:""},expGetNumberResult:function(){return"number"==typeof this.ret?this.ret:""},expGetIntResult:function(){return"number"==typeof this.ret?qc.floatToInt(this.ret):""}}),sc(t,e)};